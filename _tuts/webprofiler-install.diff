diff --git a/modules/contrib/devel/LICENSE.txt b/modules/contrib/devel/LICENSE.txt
new file mode 100644
index 0000000..d159169
--- /dev/null
+++ b/modules/contrib/devel/LICENSE.txt
@@ -0,0 +1,339 @@
+                    GNU GENERAL PUBLIC LICENSE
+                       Version 2, June 1991
+
+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.,
+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+                            Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+License is intended to guarantee your freedom to share and change free
+software--to make sure the software is free for all its users.  This
+General Public License applies to most of the Free Software
+Foundation's software and to any other program whose authors commit to
+using it.  (Some other Free Software Foundation software is covered by
+the GNU Lesser General Public License instead.)  You can apply it to
+your programs, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if you
+distribute copies of the software, or if you modify it.
+
+  For example, if you distribute copies of such a program, whether
+gratis or for a fee, you must give the recipients all the rights that
+you have.  You must make sure that they, too, receive or can get the
+source code.  And you must show them these terms so they know their
+rights.
+
+  We protect your rights with two steps: (1) copyright the software, and
+(2) offer you this license which gives you legal permission to copy,
+distribute and/or modify the software.
+
+  Also, for each author's protection and ours, we want to make certain
+that everyone understands that there is no warranty for this free
+software.  If the software is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original, so
+that any problems introduced by others will not reflect on the original
+authors' reputations.
+
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that redistributors of a free
+program will individually obtain patent licenses, in effect making the
+program proprietary.  To prevent this, we have made it clear that any
+patent must be licensed for everyone's free use or not licensed at all.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.
+
+                    GNU GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License applies to any program or other work which contains
+a notice placed by the copyright holder saying it may be distributed
+under the terms of this General Public License.  The "Program", below,
+refers to any such program or work, and a "work based on the Program"
+means either the Program or any derivative work under copyright law:
+that is to say, a work containing the Program or a portion of it,
+either verbatim or with modifications and/or translated into another
+language.  (Hereinafter, translation is included without limitation in
+the term "modification".)  Each licensee is addressed as "you".
+
+Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running the Program is not restricted, and the output from the Program
+is covered only if its contents constitute a work based on the
+Program (independent of having been made by running the Program).
+Whether that is true depends on what the Program does.
+
+  1. You may copy and distribute verbatim copies of the Program's
+source code as you receive it, in any medium, provided that you
+conspicuously and appropriately publish on each copy an appropriate
+copyright notice and disclaimer of warranty; keep intact all the
+notices that refer to this License and to the absence of any warranty;
+and give any other recipients of the Program a copy of this License
+along with the Program.
+
+You may charge a fee for the physical act of transferring a copy, and
+you may at your option offer warranty protection in exchange for a fee.
+
+  2. You may modify your copy or copies of the Program or any portion
+of it, thus forming a work based on the Program, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) You must cause the modified files to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    b) You must cause any work that you distribute or publish, that in
+    whole or in part contains or is derived from the Program or any
+    part thereof, to be licensed as a whole at no charge to all third
+    parties under the terms of this License.
+
+    c) If the modified program normally reads commands interactively
+    when run, you must cause it, when started running for such
+    interactive use in the most ordinary way, to print or display an
+    announcement including an appropriate copyright notice and a
+    notice that there is no warranty (or else, saying that you provide
+    a warranty) and that users may redistribute the program under
+    these conditions, and telling the user how to view a copy of this
+    License.  (Exception: if the Program itself is interactive but
+    does not normally print such an announcement, your work based on
+    the Program is not required to print an announcement.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Program,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Program, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Program.
+
+In addition, mere aggregation of another work not based on the Program
+with the Program (or with a work based on the Program) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may copy and distribute the Program (or a work based on it,
+under Section 2) in object code or executable form under the terms of
+Sections 1 and 2 above provided that you also do one of the following:
+
+    a) Accompany it with the complete corresponding machine-readable
+    source code, which must be distributed under the terms of Sections
+    1 and 2 above on a medium customarily used for software interchange; or,
+
+    b) Accompany it with a written offer, valid for at least three
+    years, to give any third party, for a charge no more than your
+    cost of physically performing source distribution, a complete
+    machine-readable copy of the corresponding source code, to be
+    distributed under the terms of Sections 1 and 2 above on a medium
+    customarily used for software interchange; or,
+
+    c) Accompany it with the information you received as to the offer
+    to distribute corresponding source code.  (This alternative is
+    allowed only for noncommercial distribution and only if you
+    received the program in object code or executable form with such
+    an offer, in accord with Subsection b above.)
+
+The source code for a work means the preferred form of the work for
+making modifications to it.  For an executable work, complete source
+code means all the source code for all modules it contains, plus any
+associated interface definition files, plus the scripts used to
+control compilation and installation of the executable.  However, as a
+special exception, the source code distributed need not include
+anything that is normally distributed (in either source or binary
+form) with the major components (compiler, kernel, and so on) of the
+operating system on which the executable runs, unless that component
+itself accompanies the executable.
+
+If distribution of executable or object code is made by offering
+access to copy from a designated place, then offering equivalent
+access to copy the source code from the same place counts as
+distribution of the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  4. You may not copy, modify, sublicense, or distribute the Program
+except as expressly provided under this License.  Any attempt
+otherwise to copy, modify, sublicense or distribute the Program is
+void, and will automatically terminate your rights under this License.
+However, parties who have received copies, or rights, from you under
+this License will not have their licenses terminated so long as such
+parties remain in full compliance.
+
+  5. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Program or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Program (or any work based on the
+Program), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Program or works based on it.
+
+  6. Each time you redistribute the Program (or any work based on the
+Program), the recipient automatically receives a license from the
+original licensor to copy, distribute or modify the Program subject to
+these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+
+  7. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Program at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Program by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Program.
+
+If any portion of this section is held invalid or unenforceable under
+any particular circumstance, the balance of the section is intended to
+apply and the section as a whole is intended to apply in other
+circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system, which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  8. If the distribution and/or use of the Program is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Program under this License
+may add an explicit geographical distribution limitation excluding
+those countries, so that distribution is permitted only in or among
+countries not thus excluded.  In such case, this License incorporates
+the limitation as if written in the body of this License.
+
+  9. The Free Software Foundation may publish revised and/or new versions
+of the General Public License from time to time.  Such new versions will
+be similar in spirit to the present version, but may differ in detail to
+address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Program
+specifies a version number of this License which applies to it and "any
+later version", you have the option of following the terms and conditions
+either of that version or of any later version published by the Free
+Software Foundation.  If the Program does not specify a version number of
+this License, you may choose any version ever published by the Free Software
+Foundation.
+
+  10. If you wish to incorporate parts of the Program into other free
+programs whose distribution conditions are different, write to the author
+to ask for permission.  For software which is copyrighted by the Free
+Software Foundation, write to the Free Software Foundation; we sometimes
+make exceptions for this.  Our decision will be guided by the two goals
+of preserving the free status of all derivatives of our free software and
+of promoting the sharing and reuse of software generally.
+
+                            NO WARRANTY
+
+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
+PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
+REPAIR OR CORRECTION.
+
+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGES.
+
+                     END OF TERMS AND CONDITIONS
+
+            How to Apply These Terms to Your New Programs
+
+  If you develop a new program, and you want it to be of the greatest
+possible use to the public, the best way to achieve this is to make it
+free software which everyone can redistribute and change under these terms.
+
+  To do so, attach the following notices to the program.  It is safest
+to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least
+the "copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the program's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License along
+    with this program; if not, write to the Free Software Foundation, Inc.,
+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+
+Also add information on how to contact you by electronic and paper mail.
+
+If the program is interactive, make it output a short notice like this
+when it starts in an interactive mode:
+
+    Gnomovision version 69, Copyright (C) year name of author
+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    This is free software, and you are welcome to redistribute it
+    under certain conditions; type `show c' for details.
+
+The hypothetical commands `show w' and `show c' should show the appropriate
+parts of the General Public License.  Of course, the commands you use may
+be called something other than `show w' and `show c'; they could even be
+mouse-clicks or menu items--whatever suits your program.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the program, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+  <signature of Ty Coon>, 1 April 1989
+  Ty Coon, President of Vice
+
+This General Public License does not permit incorporating your program into
+proprietary programs.  If your program is a subroutine library, you may
+consider it more useful to permit linking proprietary applications with the
+library.  If this is what you want to do, use the GNU Lesser General
+Public License instead of this License.
diff --git a/modules/contrib/devel/README.txt b/modules/contrib/devel/README.txt
new file mode 100644
index 0000000..75bae16
--- /dev/null
+++ b/modules/contrib/devel/README.txt
@@ -0,0 +1,51 @@
+Devel
+==========
+Devel module contains helper functions and pages for Drupal developers and inquisitive admins:
+
+ - A block for running custom PHP on a page
+ - A block for quickly accessing devel pages
+ - A block for masquerading as other users (useful for testing)
+ - A mail-system class which redirects outbound email to files
+ - Drush commands such as fn-hook, fn-event, ...
+ - Docs at https://api.drupal.org/api/devel
+ - more
+
+This module is safe to use on a production site. Just be sure to only grant
+'access development information' permission to developers.
+
+Devel Kint
+===================
+Provides a dpr() function, which pretty prints variables.
+Useful during development. Also see similar helpers like dpm(), dvm().
+
+Webprofiler
+==============
+Adds a debug bar at bottom of all pages with tons of useful information like a query list,
+cache hit/miss data, memory profiling, page speed, php info, session info, etc.
+
+Devel Generate
+=================
+Bulk creates nodes, users, comment, terms for development. Has Drush integration.
+
+Devel Node Access
+=================
+Prints the node_access records for a given node. Also offers hook_node_access_explain for all node access modules to implement.
+
+Devel Generate Extensions
+=========================
+Devel Images Provider [http://drupal.org/project/devel_image_provider] allows to configure external providers for images.
+
+Drush Unit Testing
+==================
+See develDrushTest.php for an example of unit testing of the Drush integration.
+This uses Drush's own test framework, based on PHPUnit. To run the tests, use
+run-tests-drush.sh. You may pass in any arguments that are valid for `phpunit`.
+
+Author/Maintainers
+======================
+- Moshe Weitzman <weitzman at tejasa DOT com> http://www.acquia.com
+- Hans Salvisberg <drupal at salvisberg DOT com>
+- Pedro Cambra https://drupal.org/user/122101/contact http://www.ymbra.com/
+- Juan Pablo Novillo https://www.drupal.org/u/juampynr
+- lussoluca https://www.drupal.org/u/lussoluca
+- willzyx https://www.drupal.org/u/willzyx
diff --git a/modules/contrib/devel/composer.json b/modules/contrib/devel/composer.json
new file mode 100644
index 0000000..3ca4312
--- /dev/null
+++ b/modules/contrib/devel/composer.json
@@ -0,0 +1,22 @@
+{
+  "name": "drupal/devel",
+  "description": "Various blocks, pages, and functions for developers.",
+  "type": "drupal-module",
+  "homepage": "http://drupal.org/project/devel",
+  "authors": [
+    {
+      "name": "Moshe Weitzman",
+      "email": "weitzman@tejasa.com",
+      "homepage": "https://github.com/weitzman",
+      "role": "Maintainer"
+    }
+  ],
+  "support": {
+    "issues": "http://drupal.org/project/devel",
+    "irc": "irc://irc.freenode.org/drupal-contribute",
+    "source": "http://cgit.drupalcode.org/devel"
+  },
+  "license": "GPL-2.0+",
+  "minimum-stability": "dev",
+  "require": { }
+}
diff --git a/modules/contrib/devel/config/install/devel.settings.yml b/modules/contrib/devel/config/install/devel.settings.yml
new file mode 100644
index 0000000..6057101
--- /dev/null
+++ b/modules/contrib/devel/config/install/devel.settings.yml
@@ -0,0 +1,9 @@
+api_url: 'api.drupal.org'
+page_alter: FALSE
+raw_names: FALSE
+error_handlers:
+  1: 1
+rebuild_theme: FALSE
+debug_mail_file_format: '%to-%subject-%datetime.mail.txt'
+debug_mail_directory: 'temporary://devel-mails'
+devel_dumper: 'default'
diff --git a/modules/contrib/devel/config/install/system.menu.devel.yml b/modules/contrib/devel/config/install/system.menu.devel.yml
new file mode 100644
index 0000000..954cc71
--- /dev/null
+++ b/modules/contrib/devel/config/install/system.menu.devel.yml
@@ -0,0 +1,6 @@
+id: devel
+label: 'Development'
+description: 'Links related to Devel module.'
+langcode: en
+locked: true
+
diff --git a/modules/contrib/devel/config/schema/devel.schema.yml b/modules/contrib/devel/config/schema/devel.schema.yml
new file mode 100644
index 0000000..a6afcfc
--- /dev/null
+++ b/modules/contrib/devel/config/schema/devel.schema.yml
@@ -0,0 +1,46 @@
+# Schema for the configuration files of the Devel module.
+
+devel.settings:
+  type: config_object
+  label: 'Devel settings'
+  mapping:
+    api_url:
+      type: string
+      label: 'Drupal.org api url'
+    page_alter:
+      type: boolean
+      label: 'Page alter'
+    raw_names:
+      type: boolean
+      label: 'Raw names'
+    error_handlers:
+      label: 'Error handlers'
+      type: sequence
+      sequence:
+        type: integer
+    rebuild_theme:
+      type: boolean
+      label: 'Rebuild theme information'
+    debug_mail_file_format:
+      type: string
+      label: 'Mail debug file format'
+    debug_mail_directory:
+      type: string
+      label: 'Mail debug directory'
+    devel_dumper:
+      type: string
+      label: 'Devel variable dumper'
+
+block.settings.devel_switch_user:
+  type: block_settings
+  label: 'Switch user block'
+  mapping:
+    list_size:
+      type: integer
+      label: 'List size'
+    include_anon:
+      type: boolean
+      label: 'Include Anonymous user'
+    show_form:
+      type: boolean
+      label: 'Show search form'
diff --git a/modules/contrib/devel/css/devel-rtl.css b/modules/contrib/devel/css/devel-rtl.css
new file mode 100644
index 0000000..e69de29
diff --git a/modules/contrib/devel/css/devel.css b/modules/contrib/devel/css/devel.css
new file mode 100644
index 0000000..0abe966
--- /dev/null
+++ b/modules/contrib/devel/css/devel.css
@@ -0,0 +1,42 @@
+/**
+ * Dumpers
+ */
+.devel-dumper .details-wrapper{
+  max-height: 450px;
+  margin-right: 3px;
+  overflow: auto;
+}
+
+/**
+ * Switch User block
+ */
+#content .block-devel-switch-user ul.links,
+#footer .block-devel-switch-user ul.links {
+  margin-left: 0;
+  padding-left: 0;
+}
+
+#content .block-devel-switch-user ul.links li,
+#footer .block-devel-switch-user ul.links li {
+  display: inline-block;
+  margin-left: 0;
+  margin-right: 1.5em;
+  padding-right: 0;
+}
+
+#footer .block-devel-switch-user ul.links li a {
+  margin: 0;
+  padding: 0;
+  border: none;
+}
+
+#content #devel-switch-user-form .form-item-username,
+#footer #devel-switch-user-form .form-item-username {
+  float: left;
+  margin-right: 2em;
+}
+
+#content #devel-switch-user-form .button-primary,
+#footer #devel-switch-user-form .button-primary {
+  margin-top: 1em;
+}
diff --git a/modules/contrib/devel/devel.api.php b/modules/contrib/devel/devel.api.php
new file mode 100644
index 0000000..4a413db
--- /dev/null
+++ b/modules/contrib/devel/devel.api.php
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * @file
+ * Hooks for the devel module.
+ */
+
+/**
+ * @addtogroup hooks
+ * @{
+ */
+
+/**
+ * Alter devel dumper information declared by other modules.
+ *
+ * @param $info
+ *   Devel dumper information to alter.
+ */
+function hook_devel_dumper_info_alter(&$info) {
+  $info['default']['label'] = 'Altered label';
+}
+
+/**
+ * @} End of "addtogroup hooks".
+ */
diff --git a/modules/contrib/devel/devel.info.yml b/modules/contrib/devel/devel.info.yml
new file mode 100644
index 0000000..7686a60
--- /dev/null
+++ b/modules/contrib/devel/devel.info.yml
@@ -0,0 +1,14 @@
+type: module
+name: Devel
+description: 'Various blocks, pages, and functions for developers.'
+package: Development
+# core: 8.x
+configure: devel.admin_settings
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/devel.install b/modules/contrib/devel/devel.install
new file mode 100644
index 0000000..c30c328
--- /dev/null
+++ b/modules/contrib/devel/devel.install
@@ -0,0 +1,32 @@
+<?php
+
+/**
+ * @file
+ * Install, update and uninstall functions for the devel module.
+ */
+
+use Drupal\system\Entity\Menu;
+
+/**
+ * Implements hook_uninstall().
+ */
+function devel_uninstall() {
+  // Delete the development menu.
+  if ($devel_menu = Menu::load('devel')) {
+    $devel_menu->delete();
+  }
+}
+
+/**
+ * Set the default devel dumper plugin.
+ */
+function devel_update_8001() {
+  $kint_enabled = \Drupal::moduleHandler()->moduleExists('kint');
+
+  $default_dumper = $kint_enabled ? 'kint' : 'default';
+
+  // Set the default dumper plugin to kint if kint module is available.
+  \Drupal::configFactory()->getEditable('devel.settings')
+    ->set('devel_dumper', $default_dumper)
+    ->save(TRUE);
+}
diff --git a/modules/contrib/devel/devel.libraries.yml b/modules/contrib/devel/devel.libraries.yml
new file mode 100644
index 0000000..b643624
--- /dev/null
+++ b/modules/contrib/devel/devel.libraries.yml
@@ -0,0 +1,5 @@
+devel:
+  version: 0
+  css:
+    theme:
+      css/devel.css: {}
diff --git a/modules/contrib/devel/devel.links.menu.yml b/modules/contrib/devel/devel.links.menu.yml
new file mode 100644
index 0000000..b1a995f
--- /dev/null
+++ b/modules/contrib/devel/devel.links.menu.yml
@@ -0,0 +1,75 @@
+devel.admin_settings:
+  title: 'Devel settings'
+  description: 'Helper functions, pages, and blocks to assist Drupal developers. The devel blocks can be managed via the block administration page.'
+  route_name: devel.admin_settings
+  parent: 'system.admin_config_development'
+devel.admin_settings_link:
+  title: 'Devel settings'
+  description: 'Helper functions, pages, and blocks to assist Drupal developers. The devel blocks can be managed via the block administration page.'
+  route_name: devel.admin_settings
+  menu_name: devel
+devel.configs_list:
+  title: 'Config editor'
+  description: 'Edit configuration.'
+  route_name: devel.configs_list
+  menu_name: devel
+devel.reinstall:
+  title: 'Reinstall Modules'
+  route_name: devel.reinstall
+  menu_name: devel
+  class: \Drupal\devel\Plugin\Menu\DestinationMenuLink
+devel.menu_rebuild:
+  title: 'Rebuild Menu'
+  route_name: devel.menu_rebuild
+  menu_name: devel
+  class: \Drupal\devel\Plugin\Menu\DestinationMenuLink
+devel.menu_item:
+  title: 'Menu Item'
+  route_name: devel.menu_item
+  menu_name: devel
+  class: \Drupal\devel\Plugin\Menu\MenuItemMenuLink
+devel.state_system_page:
+  title: 'State editor'
+  description: 'Edit state system values.'
+  route_name: devel.state_system_page
+  menu_name: devel
+devel.theme_registry:
+  title: 'Theme registry'
+  route_name: devel.theme_registry
+  menu_name: devel
+devel.entity_info_page:
+  title: 'Entity Info'
+  route_name: devel.entity_info_page
+#  parent: 'system.admin_config_development'
+  menu_name: devel
+devel.field_info_page:
+  title: 'Field Info'
+  route_name: devel.field_info_page
+#  parent: 'system.admin_config_development'
+  menu_name: devel
+devel.phpinfo:
+  title: 'PHPinfo()'
+  route_name: system.php
+  menu_name: devel
+devel.execute_php:
+  title: 'Execute PHP'
+  route_name: devel.execute_php
+  menu_name: devel
+devel.session:
+  title: 'View Session'
+  route_name: devel.session
+  menu_name: devel
+devel.elements_page:
+  title: 'Element Info'
+  route_name: devel.elements_page
+  menu_name: devel
+devel.cache_clear:
+  title: 'Cache clear'
+  route_name: devel.cache_clear
+  menu_name: devel
+  class: \Drupal\devel\Plugin\Menu\DestinationMenuLink
+devel.run_cron:
+  title: 'Run cron'
+  route_name: devel.run_cron
+  menu_name: devel
+  class: \Drupal\devel\Plugin\Menu\DestinationMenuLink
diff --git a/modules/contrib/devel/devel.links.task.yml b/modules/contrib/devel/devel.links.task.yml
new file mode 100644
index 0000000..dd33939
--- /dev/null
+++ b/modules/contrib/devel/devel.links.task.yml
@@ -0,0 +1,8 @@
+devel.entities:
+  class: \Drupal\Core\Menu\LocalTaskDefault
+  deriver: \Drupal\devel\Plugin\Derivative\DevelLocalTask
+devel.admin_settings:
+  title: 'Settings'
+  route_name: devel.admin_settings
+  base_route: devel.admin_settings
+  weight: 0
diff --git a/modules/contrib/devel/devel.module b/modules/contrib/devel/devel.module
new file mode 100644
index 0000000..1cfe8cd
--- /dev/null
+++ b/modules/contrib/devel/devel.module
@@ -0,0 +1,682 @@
+<?php
+
+/**
+ * @file
+ * This module holds functions useful for Drupal development.
+ * Please contribute!
+ */
+
+define('DEVEL_ERROR_HANDLER_NONE', 0);
+define('DEVEL_ERROR_HANDLER_STANDARD', 1);
+define('DEVEL_ERROR_HANDLER_BACKTRACE_KINT', 2);
+define('DEVEL_ERROR_HANDLER_BACKTRACE_DPM', 4);
+
+define('DEVEL_MIN_TEXTAREA', 50);
+
+use Drupal\comment\CommentInterface;
+use Drupal\Component\Utility\Html;
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Render\Markup;
+use Drupal\Core\Database\Database;
+use Drupal\Core\Database\Query\AlterableInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Logger\RfcLogLevel;
+use Drupal\Core\Render\Element;
+use Drupal\Core\Utility\Error;
+
+/**
+ * Implements hook_help().
+ */
+function devel_help($route_name) {
+  switch ($route_name) {
+    case 'devel.reinstall':
+      $output = '<p>' . t('<strong>Warning</strong> - will delete your module tables and configuration.') . '</p>';
+      $output .= '<p>' . t('Uninstall and then install the selected modules. <code>hook_uninstall()</code> and <code>hook_install()</code> will be executed and the schema version number will be set to the most recent update number.') . '</p>';
+      return $output;
+
+    case 'devel/session':
+      return '<p>' . t('Here are the contents of your <code>$_SESSION</code> variable.') . '</p>';
+
+    case 'devel.state_system_page':
+      return '<p>' . t('This is a list of state variables and their values. For more information read online documentation of <a href=":documentation">State API in Drupal 8</a>.', array(':documentation' => "https://www.drupal.org/developing/api/8/state")) . '</p>';
+
+  }
+}
+
+/**
+ * Implements hook_entity_type_alter().
+ */
+function devel_entity_type_alter(array &$entity_types) {
+  /** @var $entity_types \Drupal\Core\Entity\EntityTypeInterface[] */
+  foreach ($entity_types as $entity_type_id => $entity_type) {
+    if ($entity_type->hasViewBuilderClass() && $entity_type->hasLinkTemplate('canonical')) {
+      $entity_type->setLinkTemplate('devel-render', "/devel/$entity_type_id/{{$entity_type_id}}/render");
+    }
+    if (($entity_type->getFormClass('default') || $entity_type->getFormClass('edit')) && $entity_type->hasLinkTemplate('edit-form')) {
+      $entity_type->setLinkTemplate('devel-load', "/devel/$entity_type_id/{{$entity_type_id}}");
+    }
+  }
+}
+
+/**
+ * Implements hook_entity_operation().
+ */
+function devel_entity_operation(EntityInterface $entity) {
+  $operations = array();
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    if ($entity->hasLinkTemplate('devel-load')) {
+      $operations['devel'] = array(
+        'title' => t('Devel'),
+        'weight' => 100,
+        'url' => $entity->toUrl('devel-load'),
+      );
+    }
+    elseif ($entity->hasLinkTemplate('devel-render')) {
+      $operations['devel'] = array(
+        'title' => t('Devel'),
+        'weight' => 100,
+        'url' => $entity->toUrl('devel-render'),
+      );
+    }
+  }
+  return $operations;
+}
+
+/**
+ * Sets message.
+ */
+function devel_set_message($msg, $type = NULL) {
+  if (function_exists('drush_log')) {
+    drush_log($msg, $type);
+  }
+  else {
+    drupal_set_message($msg, $type, TRUE);
+  }
+}
+
+/**
+ * Gets error handlers.
+ */
+function devel_get_handlers() {
+  $error_handlers = \Drupal::config('devel.settings')->get('error_handlers');
+  if (!empty($error_handlers)) {
+    unset($error_handlers[DEVEL_ERROR_HANDLER_NONE]);
+  }
+  return $error_handlers;
+}
+
+/**
+ * Sets a new error handler or restores the prior one.
+ */
+function devel_set_handler($handlers) {
+  if (empty($handlers)) {
+    restore_error_handler();
+  }
+  elseif (count($handlers) == 1 && isset($handlers[DEVEL_ERROR_HANDLER_STANDARD])) {
+    // Do nothing.
+  }
+  else {
+    set_error_handler('backtrace_error_handler');
+  }
+}
+
+/**
+ * Displays backtrace showing the route of calls to the current error.
+ *
+ * @param int $error_level
+ *   The level of the error raised.
+ * @param string $message
+ *   The error message.
+ * @param string $filename
+ *   The filename that the error was raised in.
+ * @param int $line
+ *   The line number the error was raised at.
+ * @param array $context
+ *   An array that points to the active symbol table at the point the error
+ *   occurred.
+ */
+function backtrace_error_handler($error_level, $message, $filename, $line, $context) {
+  // Hide stack trace and parameters from unqualified users.
+  if (!\Drupal::currentUser()->hasPermission('access devel information')) {
+    // Do what core does in bootstrap.inc and errors.inc.
+    // (We need to duplicate the core code here rather than calling it
+    // to avoid having the backtrace_error_handler() on top of the call stack.)
+    if ($error_level & error_reporting()) {
+      $types = drupal_error_levels();
+      list($severity_msg, $severity_level) = $types[$error_level];
+      $backtrace = debug_backtrace();
+      $caller = Error::getLastCaller($backtrace);
+
+      // We treat recoverable errors as fatal.
+      _drupal_log_error(array(
+        '%type' => isset($types[$error_level]) ? $severity_msg : 'Unknown error',
+        '@message' => $message,
+        '%function' => $caller['function'],
+        '%file' => $caller['file'],
+        '%line' => $caller['line'],
+        'severity_level' => $severity_level,
+        'backtrace' => $backtrace,
+      ), $error_level == E_RECOVERABLE_ERROR);
+    }
+
+    return;
+  }
+
+  // Don't respond to the error if it was suppressed with a '@'
+  if (error_reporting() == 0) {
+    return;
+  }
+
+  // Don't respond to warning caused by ourselves.
+  if (preg_match('#Cannot modify header information - headers already sent by \\([^\\)]*[/\\\\]devel[/\\\\]#', $message)) {
+    return;
+  }
+
+  if ($error_level & error_reporting()) {
+    // Only write each distinct NOTICE message once, as repeats do not give any
+    // further information and can choke the page output.
+    if ($error_level == E_NOTICE) {
+      static $written = array();
+      if (!empty($written[$line][$filename][$message])) {
+        return;
+      }
+      $written[$line][$filename][$message] = TRUE;
+    }
+
+    $types = drupal_error_levels();
+    list($severity_msg, $severity_level) = $types[$error_level];
+
+    $backtrace = debug_backtrace();
+    $caller = Error::getLastCaller($backtrace);
+    $variables = array(
+      '%type' => isset($types[$error_level]) ? $severity_msg : 'Unknown error',
+      '@message' => $message,
+      '%function' => $caller['function'],
+      '%file' => $caller['file'],
+      '%line' => $caller['line'],
+    );
+    $msg = t('%type: @message in %function (line %line of %file).', $variables);
+
+    // Show message if error_level is ERROR_REPORTING_DISPLAY_SOME or higher.
+    // (This is Drupal's error_level, which is different from $error_level,
+    // and we purposely ignore the difference between _SOME and _ALL,
+    // see #970688!)
+    if (\Drupal::config('system.logging')->get('error_level') != 'hide') {
+      $error_handlers = devel_get_handlers();
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_STANDARD])) {
+        drupal_set_message($msg, ($severity_level <= RfcLogLevel::NOTICE ? 'error' : 'warning'), TRUE);
+      }
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_BACKTRACE_KINT])) {
+        print kprint_r(ddebug_backtrace(TRUE, 1), $return = TRUE, $msg);
+      }
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_BACKTRACE_DPM])) {
+        dpm(ddebug_backtrace(TRUE, 1), $msg, 'warning');
+      }
+    }
+
+    \Drupal::logger('php')->log($severity_level, $msg);
+  }
+}
+
+/**
+ * Returns the core version.
+ */
+function devel_get_core_version($version) {
+  $version_parts = explode('.', $version);
+  // Map from 4.7.10 -> 4.7
+  if ($version_parts[0] < 5) {
+    return $version_parts[0] . '.' . $version_parts[1];
+  }
+  // Map from 5.5 -> 5 or 6.0-beta2 -> 6
+  else {
+    return $version_parts[0];
+  }
+}
+
+/**
+ * Implements hook_page_attachments_alter().
+ */
+function devel_page_attachments_alter(&$page) {
+  if (\Drupal::currentUser()->hasPermission('access devel information') && \Drupal::config('devel.settings')->get('page_alter')) {
+    dpm($page, 'page');
+  }
+}
+
+/**
+ * Devel's t_safe() function.
+ */
+function t_safe($string, $args) {
+  // get_t() caused problems here with the theme registry after changing on
+  // admin/build/modules. The theme_get_registry() call is needed!
+  if (function_exists('t') && function_exists('theme_get_registry')) {
+    theme_get_registry();
+    return t($string, $args);
+  }
+  else {
+    strtr($string, $args);
+  }
+}
+
+/**
+ * Prints an object using either Kint (if enabled) or devel_print_object().
+ *
+ * @param array|object $object
+ *   An array or object to print.
+ * @param string $prefix
+ * @todo: this parameter is not needed with Kint.
+ *   Prefix for output items.
+ *
+ * @deprecated in Devel 8.x-dev, will be removed before Devel 8.0.
+ *   Use kpr() or devel.dumper service instead.
+ *
+ * @TODO remove in https://www.drupal.org/node/2703343
+ */
+function kdevel_print_object($object, $prefix = NULL) {
+  return kpr($object, TRUE, $prefix);
+}
+
+/**
+ * Wrapper for DevelDumperManager::dump().
+ *
+ * Calls the http://www.firephp.org/ fb() function if it is found.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dump()
+ */
+function dfb() {
+  $args = func_get_args();
+  \Drupal::service('devel.dumper')->dump($args, NULL, 'firephp');
+}
+
+/**
+ * Wrapper for DevelDumperManager::dump().
+ *
+ * Calls dfb() to output a backtrace.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dump()
+ */
+function dfbt($label) {
+  \Drupal::service('devel.dumper')->dump(FirePHP::TRACE, $label, 'firephp');
+}
+
+/**
+ * Wrapper for DevelDumperManager::dump().
+ *
+ * Wrapper for ChromePHP Class log method.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dump()
+ */
+function dcp() {
+  $args = func_get_args();
+  \Drupal::service('devel.dumper')->dump($args, NULL, 'chromephp');
+}
+
+if (!function_exists('dd')) {
+  /**
+   * Wrapper for DevelDumperManager::debug().
+   *
+   * @see \Drupal\devel\DevelDumperManager::debug()
+   */
+  function dd($data, $label = NULL) {
+    return \Drupal::service('devel.dumper')->debug($data, $label, 'default');
+  }
+}
+
+/**
+ * Wrapper for DevelDumperManager::message().
+ *
+ * Prints a variable to the 'message' area of the page.
+ *
+ * Uses drupal_set_message().
+ *
+ * @param $input
+ *   An arbitrary value to output.
+ * @param string $name
+ *   Optional name for identifying the output.
+ * @param string $type
+ *   Optional message type for drupal_set_message(), defaults to 'status'.
+ *
+ * @return input
+ *   The unaltered input value.
+ *
+ * @see \Drupal\devel\DevelDumperManager::message()
+ */
+function dpm($input, $name = NULL, $type = 'status') {
+  \Drupal::service('devel.dumper')->message($input, $name, $type);
+  return $input;
+}
+
+/**
+ * Wrapper for DevelDumperManager::message().
+ *
+ * Displays a Variable::export() variable to the 'message' area of the page.
+ *
+ * Uses drupal_set_message().
+ *
+ * @param $input
+ *   An arbitrary value to output.
+ * @param string $name
+ *   Optional name for identifying the output.
+ *
+ * @return input
+ *   The unaltered input value.
+ *
+ * @see \Drupal\devel\DevelDumperManager::message()
+ */
+function dvm($input, $name = NULL) {
+  \Drupal::service('devel.dumper')->message($input, $name, 'status', 'drupal_variable');
+  return $input;
+}
+
+/**
+ * An alias for dpm(), for historic reasons.
+ */
+function dsm($input, $name = NULL) {
+  return dpm($input, $name);
+}
+
+/**
+ * Wrapper for DevelDumperManager::dumpOrExport().
+ *
+ * An alias for the devel.dumper service. Saves carpal tunnel syndrome.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dumpOrExport()
+ */
+function dpr($input, $export = FALSE, $name = NULL) {
+  return \Drupal::service('devel.dumper')->dumpOrExport($input, $name, $export, 'default');
+}
+
+/**
+ * Wrapper for DevelDumperManager::dumpOrExport().
+ *
+ * An alias for devel_dump(). Saves carpal tunnel syndrome.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dumpOrExport()
+ */
+function kpr($input, $export = FALSE, $name = NULL) {
+  return \Drupal::service('devel.dumper')->dumpOrExport($input, $name, $export);
+}
+
+/**
+ * Kint print.
+ *
+ * @deprecated in Devel 8.x-dev, will be removed before Devel 8.0.
+ *   Use kpr() or devel.dumper service instead.
+ *
+ * @TODO remove in https://www.drupal.org/node/2703343
+ */
+function kprint_r($input, $export = FALSE, $name = NULL, $function = 'print_r') {
+  return kpr($input, $export, $name);
+}
+
+/**
+ * Wrapper for DevelDumperManager::dumpOrExport().
+ *
+ * Like dpr(), but uses Variable::export() instead.
+ *
+ * @see \Drupal\devel\DevelDumperManager::dumpOrExport()
+ */
+function dvr($input, $export = FALSE, $name = NULL) {
+  return \Drupal::service('devel.dumper')->dumpOrExport($input, $name, $export, 'drupal_variable');
+}
+
+/**
+ * Prints the arguments passed into the current function.
+ */
+function dargs($always = TRUE) {
+  static $printed;
+  if ($always || !$printed) {
+    $bt = debug_backtrace();
+    print kdevel_print_object($bt[1]['args']);
+    $printed = TRUE;
+  }
+}
+
+/**
+ * Prints a SQL string from a DBTNG Select object. Includes quoted arguments.
+ *
+ * @param object $query
+ *   An object that implements the SelectInterface interface.
+ * @param boolean $return
+ *   Whether to return the string. Default is FALSE, meaning to print it
+ *   and return $query instead.
+ * @param string $name
+ *   Optional name for identifying the output.
+ *
+ * @return object|string
+ *   The $query object, or the query string if $return was TRUE.
+ */
+function dpq($query, $return = FALSE, $name = NULL) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    if (method_exists($query, 'preExecute')) {
+      $query->preExecute();
+    }
+    $sql = (string) $query;
+    $quoted = array();
+    $connection = Database::getConnection();
+    foreach ((array) $query->arguments() as $key => $val) {
+      $quoted[$key] = is_null($val) ? 'NULL' : $connection->quote($val);
+    }
+    $sql = strtr($sql, $quoted);
+    if ($return) {
+      return $sql;
+    }
+    dpm($sql, $name);
+  }
+  return ($return ? NULL : $query);
+}
+
+/**
+ * Prints a renderable array element to the screen using kprint_r().
+ *
+ * #pre_render and/or #post_render pass-through callback for kprint_r().
+ *
+ * @todo Investigate appending to #suffix.
+ * @todo Investigate label derived from #id, #title, #name, and #theme.
+ */
+function devel_render() {
+  $args = func_get_args();
+  // #pre_render and #post_render pass the rendered $element as last argument.
+  kprint_r(end($args));
+  // #pre_render and #post_render expect the first argument to be returned.
+  return reset($args);
+}
+
+/**
+ * Prints the function call stack.
+ *
+ * @param $return
+ *   Pass TRUE to return the formatted backtrace rather than displaying it in
+ *   the browser via kprint_r().
+ * @param $pop
+ *   How many items to pop from the top of the stack; useful when calling from
+ *   an error handler.
+ * @param $options
+ *   Options to pass on to PHP's debug_backtrace().
+ *
+ * @return string|NULL
+ *   The formatted backtrace, if requested, or NULL.
+ *
+ * @see http://php.net/manual/en/function.debug-backtrace.php
+ */
+function ddebug_backtrace($return = FALSE, $pop = 0, $options = DEBUG_BACKTRACE_PROVIDE_OBJECT) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    $backtrace = debug_backtrace($options);
+    while ($pop-- > 0) {
+      array_shift($backtrace);
+    }
+    $counter = count($backtrace);
+    $path = $backtrace[$counter - 1]['file'];
+    $path = substr($path, 0, strlen($path) - 10);
+    $paths[$path] = strlen($path) + 1;
+    $paths[DRUPAL_ROOT] = strlen(DRUPAL_ROOT) + 1;
+    $nbsp = "\xC2\xA0";
+
+    // Show message if error_level is ERROR_REPORTING_DISPLAY_SOME or higher.
+    // (This is Drupal's error_level, which is different from $error_level,
+    // and we purposely ignore the difference between _SOME and _ALL,
+    // see #970688!)
+    if (\Drupal::config('system.logging')->get('error_level') != 'hide') {
+      while (!empty($backtrace)) {
+        $call = array();
+        if (isset($backtrace[0]['file'])) {
+          $call['file'] = $backtrace[0]['file'];
+          foreach ($paths as $path => $len) {
+            if (strpos($backtrace[0]['file'], $path) === 0) {
+              $call['file'] = substr($backtrace[0]['file'], $len);
+            }
+          }
+          $call['file'] .= ':' . $backtrace[0]['line'];
+        }
+        if (isset($backtrace[1])) {
+          if (isset($backtrace[1]['class'])) {
+            $function = $backtrace[1]['class'] . $backtrace[1]['type'] . $backtrace[1]['function'] . '()';
+          }
+          else {
+            $function = $backtrace[1]['function'] . '()';
+          }
+          $backtrace[1] += array('args' => array());
+          foreach ($backtrace[1]['args'] as $key => $value) {
+            $call['args'][$key] = $value;
+          }
+        }
+        else {
+          $function = 'main()';
+          $call['args'] = $_GET;
+        }
+        $nicetrace[($counter <= 10 ? $nbsp : '') . --$counter . ': ' . $function] = $call;
+        array_shift($backtrace);
+      }
+      if ($return) {
+        return $nicetrace;
+      }
+      kprint_r($nicetrace);
+    }
+  }
+}
+
+/**
+ * Deletes all files in a dir.
+ */
+function devel_empty_dir($dir) {
+  foreach (new DirectoryIterator($dir) as $file_info) {
+    if ($file_info->isFile()) {
+      unlink($file_info->getPathname());
+    }
+  }
+}
+
+/*
+ * Migration-related functions.
+ */
+
+/**
+ * Regenerates the data in node_comment_statistics table.
+ * Technique - http://www.artfulsoftware.com/infotree/queries.php?&bw=1280#101
+ *
+ * @return void
+ */
+function devel_rebuild_node_comment_statistics() {
+  // Empty table.
+  db_truncate('node_comment_statistics')->execute();
+
+  // TODO: DBTNG. Ignore keyword is Mysql only? Is only used in the rare case
+  // when two comments on the same node share same timestamp.
+  $sql = "
+    INSERT IGNORE INTO {node_comment_statistics} (nid, cid, last_comment_timestamp, last_comment_name, last_comment_uid, comment_count) (
+      SELECT c.nid, c.cid, c.created, c.name, c.uid, c2.comment_count FROM {comment} c
+      JOIN (
+        SELECT c.nid, MAX(c.created) AS created, COUNT(*) AS comment_count FROM {comment} c WHERE status = 1 GROUP BY c.nid
+      ) AS c2 ON c.nid = c2.nid AND c.created = c2.created
+    )";
+  db_query($sql, array(':published' => CommentInterface::PUBLISHED));
+
+  // Insert records into the node_comment_statistics for nodes that are missing.
+  $query = db_select('node', 'n');
+  $query->leftJoin('node_comment_statistics', 'ncs', 'ncs.nid = n.nid');
+  $query->addField('n', 'changed', 'last_comment_timestamp');
+  $query->addField('n', 'uid', 'last_comment_uid');
+  $query->addField('n', 'nid');
+  $query->addExpression('0', 'comment_count');
+  $query->addExpression('NULL', 'last_comment_name');
+  $query->isNull('ncs.comment_count');
+
+  db_insert('node_comment_statistics', array('return' => Database::RETURN_NULL))
+    ->from($query)
+    ->execute();
+}
+
+/**
+ * Implements hook_form_FORM_ID_alter().
+ *
+ * Adds mouse-over hints on the Permissions page to display
+ * language-independent machine names and module base names.
+ *
+ * @see \Drupal\user\Form\UserPermissionsForm::buildForm()
+ */
+function devel_form_user_admin_permissions_alter(&$form, FormStateInterface $form_state) {
+  if (\Drupal::currentUser()->hasPermission('access devel information') && \Drupal::config('devel.settings')->get('raw_names')) {
+    foreach (Element::children($form['permissions']) as $key) {
+      if (isset($form['permissions'][$key][0])) {
+        $form['permissions'][$key][0]['#wrapper_attributes']['title'] = $key;
+      }
+      elseif(isset($form['permissions'][$key]['description'])) {
+        $form['permissions'][$key]['description']['#wrapper_attributes']['title']  = $key;
+      }
+    }
+  }
+}
+
+/**
+ * Implements hook_form_FORM_ID_alter().
+ *
+ * Adds mouse-over hints on the Modules page to display module base names.
+ *
+ * @see \Drupal\system\Form\ModulesListForm::buildForm()
+ * @see theme_system_modules_details()
+ */
+function devel_form_system_modules_alter(&$form, FormStateInterface $form_state) {
+  if (\Drupal::currentUser()->hasPermission('access devel information') && \Drupal::config('devel.settings')->get('raw_names', FALSE) && isset($form['modules']) && is_array($form['modules'])) {
+    foreach (Element::children($form['modules']) as $group) {
+      if (is_array($form['modules'][$group])) {
+        foreach (Element::children($form['modules'][$group]) as $key) {
+          if (isset($form['modules'][$group][$key]['name']['#markup'])) {
+            $form['modules'][$group][$key]['name']['#markup'] = '<span title="' . $key . '">' . $form['modules'][$group][$key]['name']['#markup'] . '</span>';
+          }
+        }
+      }
+    }
+  }
+}
+
+/**
+ * Processes variables for block.tpl.php.
+ *
+ * Adding a module block class.
+ *
+ * @todo remove when http://drupal.org/node/1896098 gets in core.
+ */
+function devel_preprocess_block(&$variables) {
+  if (isset($variables['block']) && $variables['block']->module == 'devel') {
+    $variables['attributes']['class'][] = drupal_html_class('block-' . $variables['elements']['#block']->get('plugin'));
+  }
+}
+
+/**
+ * Implements hook_query_TAG_alter().
+ *
+ * Makes debugging entity query much easier.
+ *
+ * Example usage:
+ *   $query = \Drupal::entityQuery('node');
+ *   $query->condition('status', 1);
+ *   $query->addTag('debug');
+ *   $query->execute();
+ *
+ */
+function devel_query_debug_alter(AlterableInterface $query) {
+  if (!$query->hasTag('debug-semaphore')) {
+    $query->addTag('debug-semaphore');
+    dpq($query);
+  }
+}
diff --git a/modules/contrib/devel/devel.permissions.yml b/modules/contrib/devel/devel.permissions.yml
new file mode 100644
index 0000000..256919d
--- /dev/null
+++ b/modules/contrib/devel/devel.permissions.yml
@@ -0,0 +1,14 @@
+access devel information:
+  description: 'View developer output like variable printouts, query log, etc.'
+  title: 'Access developer information'
+  restrict access: TRUE
+
+execute php code:
+  title: 'Execute PHP code'
+  description: 'Run arbitrary PHP from a block.'
+  restrict access: TRUE
+
+switch users:
+  title: 'Switch users'
+  description: 'Become any user on the site with just a click.'
+  restrict access: TRUE
diff --git a/modules/contrib/devel/devel.routing.yml b/modules/contrib/devel/devel.routing.yml
new file mode 100644
index 0000000..bfbb70c
--- /dev/null
+++ b/modules/contrib/devel/devel.routing.yml
@@ -0,0 +1,172 @@
+devel.admin_settings:
+  path: '/admin/config/development/devel'
+  defaults:
+    _form: '\Drupal\devel\Form\SettingsForm'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.reinstall:
+  path: '/devel/reinstall'
+  defaults:
+    _form: '\Drupal\devel\Form\DevelReinstall'
+    _title: 'Reinstall modules'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.menu_rebuild:
+  path: '/devel/menu/reset'
+  defaults:
+    _form: '\Drupal\devel\Form\DevelRebuildMenus'
+    _title: 'Rebuild menus'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.configs_list:
+  path: '/devel/config/{filter}'
+  options:
+    _admin_route: TRUE
+  defaults:
+    _form: '\Drupal\devel\Form\ConfigsList'
+    _title: 'Config editor'
+    filter: ''
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.config_edit:
+  path: '/devel/config/edit/{config_name}'
+  defaults:
+    _form: '\Drupal\devel\Form\ConfigEditor'
+    _title: 'Edit configuration object: !config_name'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.state_system_page:
+  path: '/devel/state'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::stateSystemPage'
+    _title: 'State editor'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.system_state_edit:
+  path: '/devel/state/edit/{state_name}'
+  defaults:
+    _form: '\Drupal\devel\Form\SystemStateEdit'
+    _title: 'Edit state variable: @state_name'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.menu_item:
+  path: '/devel/menu/item'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::menuItem'
+    _title: 'Menu item'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.theme_registry:
+  path: '/devel/theme/registry'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::themeRegistry'
+    _title: 'Theme registry'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.entity_info_page:
+  path: '/devel/entity/info'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::entityInfoPage'
+    _title: 'Entity info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.field_info_page:
+  path: '/devel/field/info'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::fieldInfoPage'
+    _title: 'Field info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.execute_php:
+  path: '/devel/php'
+  defaults:
+    _form: '\Drupal\devel\Form\ExecutePHP'
+    _title: 'Execute PHP code'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'execute php code'
+
+devel.session:
+  path: '/devel/session'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::session'
+    _title: 'Session viewer'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.switch:
+  path: '/devel/switch/{name}'
+  defaults:
+    _controller: '\Drupal\devel\Controller\SwitchUserController::switchUser'
+    _title: 'Switch user'
+    name: ''
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'switch users'
+    _csrf_token: 'TRUE'
+
+devel.elements_page:
+  path: '/devel/elements'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::elementsPage'
+    _title: 'Element Info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.cache_clear:
+  path: '/devel/cache/clear'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::cacheClear'
+    _title: 'Clear cache'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+    _csrf_token: 'TRUE'
+
+devel.run_cron:
+  path: '/devel/run-cron'
+  defaults:
+    _controller: '\Drupal\system\CronController::runManually'
+    _title: 'Run cron'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+    _csrf_token: 'TRUE'
diff --git a/modules/contrib/devel/devel.rules.inc b/modules/contrib/devel/devel.rules.inc
new file mode 100644
index 0000000..0a7a078
--- /dev/null
+++ b/modules/contrib/devel/devel.rules.inc
@@ -0,0 +1,24 @@
+<?php
+
+/**
+ * Implements hook_rules_action_info().
+ */
+function devel_rules_action_info() {
+  return array(
+    'devel_debug' => array(
+      'base' => 'devel_rules_debug_action',
+      'label' => t('Debug value'),
+      'group' => t('Devel'),
+      'parameter' => array(
+        'value' => array('type' => 'unknown', 'label' => t('Value to debug')),
+      ),
+    ),
+  );
+}
+
+/**
+ * Rules action for debugging values.
+ */
+function devel_rules_debug_action($value) {
+  dpm($value);
+}
diff --git a/modules/contrib/devel/devel.services.yml b/modules/contrib/devel/devel.services.yml
new file mode 100644
index 0000000..cea1de7
--- /dev/null
+++ b/modules/contrib/devel/devel.services.yml
@@ -0,0 +1,20 @@
+services:
+  devel.event_subscriber:
+    class: Drupal\devel\EventSubscriber\DevelEventSubscriber
+    arguments: ['@config.factory', '@current_user', '@module_handler', '@url_generator']
+    tags:
+      - { name: event_subscriber }
+
+  plugin.manager.devel_dumper:
+    class: Drupal\devel\DevelDumperPluginManager
+    parent: default_plugin_manager
+
+  devel.dumper:
+    class: Drupal\devel\DevelDumperManager
+    arguments: ['@config.factory', '@current_user', '@plugin.manager.devel_dumper']
+
+  devel.route_subscriber:
+    class: Drupal\devel\Routing\RouteSubscriber
+    arguments: ['@entity_type.manager']
+    tags:
+      - { name: event_subscriber }
diff --git a/modules/contrib/devel/devel_generate/README.txt b/modules/contrib/devel/devel_generate/README.txt
new file mode 100644
index 0000000..c5279d0
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/README.txt
@@ -0,0 +1,42 @@
+This module creates the "DevelGenerate" plugin type.
+
+All you need to do to provide a new instance for "DevelGenerate" plugin type
+is to create your class extending "DevelGenerateBase" and following the next steps.
+
+1 - Declaring your plugin with annotations:
+
+/**
+ * Provides a ExampleDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "example",
+ *   label = @Translation("example"),
+ *   description = @Translation("Generate a given number of example elements. Optionally delete current example elements."),
+ *   url = "example",
+ *   permission = "administer example",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "another_property" = "default_value"
+ *   }
+ * )
+ */
+
+2 - Implement "settingsForm" method to create a form using the properties from annotations.
+
+3 - Implement "handleDrushParams" method. It should return an array of values.
+
+4 - Implement "generateElements" method. You can write here your business logic
+using the array of values.
+
+Notes:
+
+You can alter existing properties for every plugin implementing hook_devel_generate_info_alter.
+
+DevelGenerateBaseInterface details base wrapping methods that most DevelGenerate implementations
+will want to directly inherit from Drupal\devel_generate\DevelGenerateBase.
+
+DevelGenerateFieldBaseInterface details base wrapping methods that most class implementations
+for supporting new field types will want to directly inherit from Drupal\devel_generate\DevelGenerateFieldBase.
+So to give support for a new field type should be enough to create a class called
+"DevelGenerateFieldNewfieldtype" extending DevelGenerateFieldBase and to implement "generateValues" method.
diff --git a/modules/contrib/devel/devel_generate/devel_generate.batch.inc b/modules/contrib/devel/devel_generate/devel_generate.batch.inc
new file mode 100644
index 0000000..2bfa690
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.batch.inc
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * Wrapping function for invoking the right
+ * method responsible for handle a given batch operation.
+ * Available for every DevelGeneratePlugin.
+ */
+function devel_generate_operation(Drupal\devel_generate\DevelGenerateBaseInterface $class, $method, $vars, &$context) {
+  return $class->$method($vars, $context);
+}
+
+/**
+ * Common finish batch function available for
+ * every DevelGeneratePlugin.
+ */
+function devel_generate_batch_finished($success, $results, $operations) {
+
+  if ($success) {
+    $message = t('Finished @num elements created successfully.', array('@num' => $results['num']));
+  }
+  else {
+    $message = t('Finished with an error.');
+  }
+  drupal_set_message($message);
+}
diff --git a/modules/contrib/devel/devel_generate/devel_generate.info.yml b/modules/contrib/devel/devel_generate/devel_generate.info.yml
new file mode 100644
index 0000000..a192708
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.info.yml
@@ -0,0 +1,13 @@
+type: module
+name: 'Devel generate'
+description: 'Generate dummy users, nodes, menus, taxonomy terms...'
+package: Development
+# core: 8.x
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/devel_generate/devel_generate.module b/modules/contrib/devel/devel_generate/devel_generate.module
new file mode 100644
index 0000000..530a4fb
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.module
@@ -0,0 +1,145 @@
+<?php
+
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\comment\Plugin\Field\FieldType\CommentItemInterface;
+use Drupal\Component\Utility\Random;
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\node\NodeInterface;
+
+/**
+ * Implements hook_menu_links_discovered_alter().
+ */
+function devel_generate_menu_links_discovered_alter(&$links) {
+  $devel_generate_plugins = $devel_generate_manager = \Drupal::service('plugin.manager.develgenerate')->getDefinitions();
+  foreach ($devel_generate_plugins as $id => $plugin) {
+    $label = $plugin['label'];
+    $links["devel_generate.$id"] = array(
+      'title' => "Generate $label",
+      'parent' => 'system.admin_config_development',
+      'description' => $plugin['description'],
+      'route_name' => "devel_generate.$id",
+    );
+  }
+}
+
+/**
+ * Implements hook_entity_insert().
+ *
+ * Inserts nodes properly based on generation options.
+ *
+ * @param \Drupal\Core\Entity\EntityInterface $entity
+ *  The base node created on submit. Inspects $node->devel_generate.
+ */
+function devel_generate_entity_insert(EntityInterface $entity) {
+  if ($entity->getEntityTypeId() != 'node' || !isset($entity->devel_generate)) {
+    return;
+  }
+  /** @var \Drupal\node\NodeInterface $entity */
+  $results = $entity->devel_generate;
+
+  if (!empty($results['max_comments'])) {
+    foreach ($entity->getFieldDefinitions() as $field_name => $field_definition) {
+      if ($field_definition->getType() == 'comment' && $entity->get($field_name)->status == CommentItemInterface::OPEN) {
+        // Add comments for each comment field on entity.
+        devel_generate_add_comments($entity, $field_definition, $results['users'], $results['max_comments'], $results['title_length']);
+      }
+    }
+  }
+
+  // Add an url alias. Cannot happen before save because we don't know the nid.
+  if (!empty($results['add_alias'])) {
+    $path = array(
+      'source' => '/node/' . $entity->id(),
+      'alias' => '/node-' . $entity->id() . '-' . $entity->bundle(),
+    );
+    \Drupal::service('path.alias_storage')->save($path['source'], $path['alias']);
+  }
+
+  // Add node statistics.
+  if (!empty($results['add_statistics']) && \Drupal::moduleHandler()->moduleExists('statistics')) {
+    devel_generate_add_statistics($entity);
+  }
+}
+
+/**
+ * Create comments and add them to a node.
+ *
+ * @param \Drupal\node\NodeInterface $node
+ *   Node to add comments to.
+ * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+ *   The field storage definition.
+ * @param array $users
+ *   Array of users to assign comment authors.
+ * @param int $max_comments
+ *   Max number of comments to generate per node.
+ * @param int $title_length
+ *   Max length of the title of the comments.
+ */
+function devel_generate_add_comments(NodeInterface $node, FieldDefinitionInterface $field_definition, $users, $max_comments, $title_length = 8) {
+  $parents = array();
+  $field_name = $field_definition->getName();
+  $num_comments = mt_rand(1, $max_comments);
+  for ($i = 1; $i <= $num_comments; $i++) {
+    switch ($i % 3) {
+      case 0:
+        // No parent.
+      case 1:
+        // Top level parent.
+        $parents = \Drupal::entityQuery('comment')
+          ->condition('pid', 0)
+          ->condition('entity_id', $node->id())
+          ->condition('entity_type', 'node')
+          ->condition('field_name', $field_name)
+          ->range(0, 1)
+          ->execute();
+        break;
+      case 2:
+        // Non top level parent.
+        $parents = \Drupal::entityQuery('comment')
+          ->condition('pid', 0, '>')
+          ->condition('entity_id', $node->id())
+          ->condition('entity_type', 'node')
+          ->condition('field_name', $field_name)
+          ->range(0, 1)
+          ->execute();
+        break;
+    }
+    $random = new Random();
+    $stub = array(
+      'entity_type' => $node->getEntityTypeId(),
+      'entity_id' => $node->id(),
+      'field_name' => $field_name,
+      'name' => 'devel generate',
+      'mail' => 'devel_generate@example.com',
+      'timestamp' => mt_rand($node->getCreatedTime(), REQUEST_TIME),
+      'subject' => substr($random->sentences(mt_rand(2, $title_length), TRUE), 0, 63),
+      'uid' => $users[array_rand($users)],
+      'langcode' => $node->language()->getId(),
+    );
+    if ($parents) {
+      $stub['pid'] = current($parents);
+    }
+    $comment = entity_create('comment', $stub);
+
+    //Populate all core fields on behalf of field.module
+    DevelGenerateBase::populateFields($comment);
+    $comment->save();
+  }
+}
+
+/**
+ * Generate statistics information for a node.
+ *
+ * @param \Drupal\node\NodeInterface $node
+ *   A node object.
+ */
+function devel_generate_add_statistics(NodeInterface $node) {
+  $statistic = array(
+    'nid' => $node->id(),
+    'totalcount' => mt_rand(0, 500),
+    'timestamp' => REQUEST_TIME - mt_rand(0, $node->getCreatedTime()),
+  );
+  $statistic['daycount'] = mt_rand(0, $statistic['totalcount']);
+  db_insert('node_counter')->fields($statistic)->execute();
+}
diff --git a/modules/contrib/devel/devel_generate/devel_generate.permissions.yml b/modules/contrib/devel/devel_generate/devel_generate.permissions.yml
new file mode 100644
index 0000000..10f9479
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.permissions.yml
@@ -0,0 +1,5 @@
+administer devel_generate:
+  title: 'Administer devel_generate'
+
+permission_callbacks:
+  - \Drupal\devel_generate\DevelGeneratePermissions::permissions
diff --git a/modules/contrib/devel/devel_generate/devel_generate.routing.yml b/modules/contrib/devel/devel_generate/devel_generate.routing.yml
new file mode 100644
index 0000000..eeea668
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.routing.yml
@@ -0,0 +1,2 @@
+route_callbacks:
+  - '\Drupal\devel_generate\Routing\DevelGenerateRoutes::routes'
\ No newline at end of file
diff --git a/modules/contrib/devel/devel_generate/devel_generate.services.yml b/modules/contrib/devel/devel_generate/devel_generate.services.yml
new file mode 100644
index 0000000..16025e1
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/devel_generate.services.yml
@@ -0,0 +1,4 @@
+services:
+  plugin.manager.develgenerate:
+    class: Drupal\devel_generate\DevelGeneratePluginManager
+    parent: default_plugin_manager
diff --git a/modules/contrib/devel/devel_generate/drush/DevelGenerateUnishTest.php b/modules/contrib/devel/devel_generate/drush/DevelGenerateUnishTest.php
new file mode 100644
index 0000000..52f139d
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/drush/DevelGenerateUnishTest.php
@@ -0,0 +1,103 @@
+<?php
+
+/**
+ * @file
+ * Contains \Unish\DevelGenerateUnishTest.
+ */
+
+namespace Unish;
+
+if (class_exists('Unish\CommandUnishTestCase')) {
+
+  /**
+   * Tests for devel_generate drush commands.
+   *
+   * @group devel_generate
+   */
+  class DevelGenerateUnishTest extends CommandUnishTestCase {
+
+    /**
+     * {@inheritdoc}
+     */
+    public function setUp() {
+      if (UNISH_DRUPAL_MAJOR_VERSION < 8) {
+        $this->markTestSkipped('Devel Generate Tests only available on D8+.');
+      }
+
+      if (!$this->getSites()) {
+        $this->setUpDrupal(1, TRUE, UNISH_DRUPAL_MAJOR_VERSION, 'standard');
+
+        // Symlink the devel module into the sandbox.
+        $devel_directory = dirname(dirname(__DIR__));
+        symlink($devel_directory, $this->webroot() . '/modules/devel');
+
+        // Enable the devel_generate modules.
+        $this->drush('pm-enable', ['devel_generate'], $this->getOptions());
+      }
+
+    }
+
+    /**
+     * Tests devel generate terms.
+     */
+    public function testDevelGenerateTerms() {
+      $this->drush('pm-enable', ['taxonomy'], $this->getOptions());
+
+      $this->drush('generate-terms', [], $this->getOptions(), NULL, NULL, static::EXIT_ERROR);
+      $this->assertContains('Please provide a vocabulary machine name.', $this->getErrorOutput());
+
+      $this->drush('generate-terms', ['unknown'], $this->getOptions(), NULL, NULL, static::EXIT_ERROR);
+      $this->assertContains('Invalid vocabulary name: unknown', $this->getErrorOutput());
+
+      $this->drush('generate-terms', ['tags', 'NaN'], $this->getOptions(), NULL, NULL, static::EXIT_ERROR);
+      $this->assertContains('Invalid number of terms: NaN', $this->getErrorOutput());
+
+      $eval_term_count = "return \\Drupal::entityQuery('taxonomy_term')->count()->execute();";
+      $eval_options = $this->getOptions() + ['format' => 'string'];
+
+      $this->drush('generate-terms', ['tags'], $this->getOptions());
+      $this->assertContains('Created the following new terms:', $this->getErrorOutput());
+      $this->drush('php-eval', [$eval_term_count], $eval_options);
+      $this->assertEquals(10, $this->getOutput());
+
+      $this->drush('generate-terms', ['tags', '1'], $this->getOptions());
+      $this->assertContains('Created the following new terms:', $this->getErrorOutput());
+      $this->drush('php-eval', [$eval_term_count], $eval_options);
+      $this->assertEquals(11, $this->getOutput());
+
+      $this->drush('generate-terms', ['tags', '1'], $this->getOptions(TRUE));
+      $this->assertContains('Deleted existing terms.', $this->getErrorOutput());
+      $this->assertContains('Created the following new terms:', $this->getErrorOutput());
+      $this->drush('php-eval', [$eval_term_count], $eval_options);
+      $this->assertEquals(1, $this->getOutput());
+
+      $this->drush('gent', ['tags', '1'], $this->getOptions());
+      $this->assertContains('Created the following new terms:', $this->getErrorOutput());
+    }
+
+    /**
+     * Default drush options.
+     *
+     * @param bool $kill
+     *   Whether add kill option.
+     *
+     * @return array
+     *   An array containing the default options for drush commands.
+     */
+    protected function getOptions($kill = FALSE) {
+      $options = [
+        'yes' => NULL,
+        'root' => $this->webroot(),
+        'uri' => key($this->getSites()),
+      ];
+
+      if($kill) {
+        $options['kill'] = NULL;
+      }
+
+      return $options;
+    }
+
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/drush/devel_generate.drush.inc b/modules/contrib/devel/devel_generate/drush/devel_generate.drush.inc
new file mode 100644
index 0000000..33ae8a2
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/drush/devel_generate.drush.inc
@@ -0,0 +1,196 @@
+<?php
+
+/**
+ * @file
+ *  Generate content, taxonomy, menu, and users via drush framework.
+ */
+use Drupal\devel_generate\DevelGenerateBaseInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+
+/**
+ * Implementation of hook_drush_command().
+ */
+function devel_generate_drush_command() {
+  $items['generate-users'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'user',
+    ),
+    'description' => 'Create users.',
+    'arguments' => array(
+      'num' => 'Number of users to generate.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all users before generating new ones.',
+      'roles' => 'A comma delimited list of role IDs which should be granted to the new users. No need to specify authenticated user role.',
+      'pass' => 'Specify a password to be set for all generated users.',
+    ),
+    'aliases' => array('genu'),
+  );
+  $items['generate-terms'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'term',
+    ),
+    'description' => 'Create terms in specified vocabulary.',
+    'arguments' => array(
+      'machine_name' => 'Vocabulary machine name into which new terms will be inserted.',
+      'num' => 'Number of terms to insert. Defaults to 10.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all terms in specified vocabulary before generating.',
+      'feedback' => 'An integer representing interval for insertion rate logging. Defaults to 1000',
+      'pipe' => 'Returns the list of generated terms, one per line.',
+    ),
+    'aliases' => array('gent'),
+
+  );
+  $items['generate-vocabs'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'vocabulary',
+    ),
+    'description' => 'Create vocabularies.',
+    'arguments' => array(
+      'num' => 'Number of vocabularies to create. Defaults to 1.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all vocabularies before generating.',
+      'pipe' => 'Returns the list of generated vocabularies, one per line.',
+    ),
+    'aliases' => array('genv'),
+  );
+  $items['generate-content'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'content',
+    ),
+    'description' => 'Create content.',
+    'drupal dependencies' => array('devel_generate'),
+    'arguments' => array(
+      'num' => 'Number of nodes to generate.',
+      'max_comments' => 'Maximum number of comments to generate.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all content before generating new content.',
+      'types' => 'A comma delimited list of content types to create. Defaults to page,article.',
+      'feedback' => 'An integer representing interval for insertion rate logging. Defaults to 1000',
+      'skip-fields' => 'A comma delimited list of fields to omit when generating random values',
+      'languages' => 'A comma-separated list of language codes',
+    ),
+    'aliases' => array('genc'),
+  );
+  $items['generate-menus'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'menu',
+    ),
+    'description' => 'Create menus and menu items.',
+    'drupal dependencies' => array('devel_generate'), // Remove these once devel.module is moved down a directory. http://drupal.org/node/925246
+    'arguments' => array(
+      'number_menus' => 'Number of menus to generate. Defaults to 2.',
+      'number_links' => 'Number of links to generate. Defaults to 50.',
+      'max_depth' => 'Max link depth. Defaults to 3',
+      'max_width' => 'Max width of first level of links. Defaults to 8.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all previously generated menus and links before generating new menus and links.',
+      'pipe' => 'Returns the list of generated menus, one per line.',
+    ),
+    'aliases' => array('genm'),
+  );
+  return $items;
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_users_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_terms_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_vocabs_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_content_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_menus_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Helper function which returns an array with a plugin instance
+ * for a given id and the validated values ready to be used by
+ * the generate() function of the plugin.
+ */
+function _drush_plugin_validate($params) {
+
+  $instance_and_values = &drupal_static('drush_devel_generate_generate_validate');
+  //Getting plugin_id and leaving the command line args
+  $plugin_id = array_shift($params);
+
+  if (!isset($instance_and_values[$plugin_id])) {
+
+    /** @var DevelGeneratePluginManager $manager */
+    $manager = \Drupal::service('plugin.manager.develgenerate');
+
+    /** @var DevelGenerateBaseInterface $instance */
+    $instance = $manager->createInstance($plugin_id, array());
+
+    //Plugin instance suit params in order to fit for generateElements
+    $values = $instance->validateDrushParams($params);
+    $instance_and_values[$plugin_id]['instance'] = $instance;
+    $instance_and_values[$plugin_id]['values'] = $values;
+  }
+
+  return $instance_and_values[$plugin_id];
+}
+
+/**
+ * Command callback. Generate a number of elements.
+ */
+function drush_devel_generate() {
+  $params = func_get_args();
+  $plugin_id = array_shift($params);
+  $instance_and_values = drupal_static('drush_devel_generate_generate_validate');
+
+  /** @var DevelGenerateBaseInterface $instance */
+  $instance = $instance_and_values[$plugin_id]['instance'];
+  $values = $instance_and_values[$plugin_id]['values'];
+  $instance->generate($values);
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Annotation/DevelGenerate.php b/modules/contrib/devel/devel_generate/src/Annotation/DevelGenerate.php
new file mode 100644
index 0000000..2fb2ac8
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Annotation/DevelGenerate.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Annotation\DevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Annotation;
+
+use Drupal\Component\Annotation\Plugin;
+
+/**
+ * Defines a DevelGenerate annotation object.
+ *
+ * DevelGenerate handle the bulk creation of entites.
+ *
+ * Additional annotation keys for DevelGenerate can be defined in
+ * hook_devel_generate_info_alter().
+ *
+ * @Annotation
+ *
+ * @see \Drupal\devel_generate\DevelGeneratePluginManager
+ * @see \Drupal\devel_generate\DevelGenerateBaseInterface
+ */
+class DevelGenerate extends Plugin {
+
+  /**
+   * The plugin ID.
+   *
+   * @var string
+   */
+  public $id;
+
+  /**
+   * The human-readable name of the DevelGenerate type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $label;
+
+  /**
+   * A short description of the DevelGenerate type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $description;
+
+  /**
+   * A url to access the plugin settings form.
+   *
+   * @var string
+   */
+  public $url;
+
+  /**
+   * The permission required to access the plugin settings form.
+   *
+   * @var string
+   */
+  public $permission;
+
+  /**
+   * The name of the DevelGenerate class.
+   *
+   * This is not provided manually, it will be added by the discovery mechanism.
+   *
+   * @var string
+   */
+  public $class;
+
+  /**
+   * An array whose keys are the names of the settings available to the
+   * DevelGenerate settingsForm, and whose values are the default values for those settings.
+   *
+   * @var array
+   */
+  public $settings = array();
+
+  /**
+   * An array whose keys are the settings available to the
+   * DevelGenerate drush command: "suffix", "alias", "options" and "args".
+   *
+   * @var array
+   */
+  public $drushSettings = array();
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/DevelGenerateBase.php b/modules/contrib/devel/devel_generate/src/DevelGenerateBase.php
new file mode 100644
index 0000000..0b4e588
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/DevelGenerateBase.php
@@ -0,0 +1,166 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGenerateBase.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Component\Utility\Random;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\PluginBase;
+
+/**
+ * Provides a base DevelGenerate plugin implementation.
+ */
+abstract class DevelGenerateBase extends PluginBase implements DevelGenerateBaseInterface {
+
+  /**
+   * The plugin settings.
+   *
+   * @var array
+   */
+  protected $settings = array();
+
+  /**
+   * The random data generator.
+   *
+   * @var \Drupal\Component\Utility\Random
+   */
+  protected $random;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getSetting($key) {
+    // Merge defaults if we have no value for the key.
+    if (!array_key_exists($key, $this->settings)) {
+      $this->settings = $this->getDefaultSettings();
+    }
+    return isset($this->settings[$key]) ? $this->settings[$key] : NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefaultSettings() {
+    $definition = $this->getPluginDefinition();
+    return $definition['settings'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getSettings() {
+    return $this->settings;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    return array();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generate(array $values) {
+    $this->generateElements($values);
+    $this->setMessage('Generate process complete.');
+  }
+
+  /**
+   * Business logic relating with each DevelGenerate plugin
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  protected function generateElements(array $values) {
+
+  }
+
+  /**
+   * Populate the fields on a given entity with sample values.
+   *
+   * @param \Drupal\Core\Entity\EntityInterface $entity
+   *   The entity to be enriched with sample field values.
+   */
+  public static function populateFields(EntityInterface $entity) {
+    /** @var \Drupal\field\FieldConfigInterface[] $instances */
+    $instances = entity_load_multiple_by_properties('field_config', array('entity_type' => $entity->getEntityType()->id(), 'bundle' => $entity->bundle()));
+
+    if ($skips = function_exists('drush_get_option') ? drush_get_option('skip-fields', '') : @$_REQUEST['skip-fields']) {
+      foreach (explode(',', $skips) as $skip) {
+        unset($instances[$skip]);
+      }
+    }
+
+    foreach ($instances as $instance) {
+      $field_storage = $instance->getFieldStorageDefinition();
+      $max = $cardinality = $field_storage->getCardinality();
+      if ($cardinality == FieldStorageDefinitionInterface::CARDINALITY_UNLIMITED) {
+        // Just an arbitrary number for 'unlimited'
+        $max = rand(1, 3);
+      }
+      $field_name = $field_storage->getName();
+      $entity->$field_name->generateSampleItems($max);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function handleDrushParams($args) {
+
+  }
+
+  /**
+   * Set a message for either drush or the web interface.
+   *
+   * @param string $msg
+   *   The message to display.
+   * @param string $type
+   *   (optional) The message type, as defined by drupal_set_message(). Defaults
+   *   to 'status'
+   */
+  protected function setMessage($msg, $type = 'status') {
+    $function = 'drupal_set_message';
+    if (function_exists('drush_log')) {
+      $function = 'drush_log';
+      $msg = strip_tags($msg);
+    }
+    $function($msg, $type);
+  }
+
+  /**
+   * Check if a given param is a number.
+   *
+   * @param mixed $number
+   *   The parameter to check.
+   *
+   * @return bool
+   *   TRUE if the parameter is a number, FALSE otherwise.
+   */
+  public static function isNumber($number) {
+    if ($number == NULL) return FALSE;
+    if (!is_numeric($number)) return FALSE;
+    return TRUE;
+  }
+
+  /**
+   * Returns the random data generator.
+   *
+   * @return \Drupal\Component\Utility\Random
+   *   The random data generator.
+   */
+  protected function getRandom() {
+    if (!$this->random) {
+      $this->random = new Random();
+    }
+    return $this->random;
+  }
+}
diff --git a/modules/contrib/devel/devel_generate/src/DevelGenerateBaseInterface.php b/modules/contrib/devel/devel_generate/src/DevelGenerateBaseInterface.php
new file mode 100644
index 0000000..007f009
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/DevelGenerateBaseInterface.php
@@ -0,0 +1,71 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGenerateInterface.
+ */
+
+namespace Drupal\devel_generate;
+use Drupal\Component\Plugin\PluginInspectionInterface;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Base interface definition for "DevelGenerate" plugins.
+ *
+ * This interface details base wrapping methods that most DevelGenerate implementations
+ * will want to directly inherit from Drupal\devel_generate\DevelGenerateBase.
+ *
+ * DevelGenerate impementationa plugins should developing settingsForm() and generateElements()
+ * to achieve its own behaviour.
+ *
+ */
+interface DevelGenerateBaseInterface extends PluginInspectionInterface {
+
+  /**
+   * Returns the array of settings, including defaults for missing settings.
+   *
+   * @return array
+   *   The array of settings.
+   */
+  function getSetting($key);
+
+  /**
+   * Returns the default settings for the plugin.
+   *
+   * @return array
+   *   The array of default setting values, keyed by setting names.
+   */
+  function getDefaultSettings();
+
+  /**
+   * Returns the current settings for the plugin.
+   *
+   * @return array
+   *   The array of current setting values, keyed by setting names.
+   */
+  function getSettings();
+
+  /**
+   * Returns the form for the plugin.
+   *
+   * @return array
+   *   The array of default setting values, keyed by setting names.
+   */
+  function settingsForm(array $form, FormStateInterface $form_state);
+
+  /**
+   * Execute the instructions in common for all DevelGenerate plugin
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  function generate(array $values);
+
+  /**
+   * Responsible for validating Drush params.
+   *
+   * @Return an array of values ready to be used for generateElements()
+   */
+  function validateDrushParams($args);
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/DevelGenerateException.php b/modules/contrib/devel/devel_generate/src/DevelGenerateException.php
new file mode 100644
index 0000000..f80fe48
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/DevelGenerateException.php
@@ -0,0 +1,15 @@
+<?php
+/**
+ * @file
+ * Definition of Drupal\devel_generate\DevelGenerateException.
+ */
+namespace Drupal\devel_generate;
+
+use Drupal\Component\Plugin\Exception;
+
+/**
+ * DevelGenerateException extending Generic Plugin exception class.
+ */
+class DevelGenerateException extends \Exception {
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/DevelGeneratePermissions.php b/modules/contrib/devel/devel_generate/src/DevelGeneratePermissions.php
new file mode 100644
index 0000000..555ffa6
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/DevelGeneratePermissions.php
@@ -0,0 +1,68 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGeneratePermissions.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides dynamic permissions of the filter module.
+ */
+class DevelGeneratePermissions implements ContainerInjectionInterface {
+
+  /**
+   * The plugin manager.
+   *
+   * @var \Drupal\devel_generate\DevelGeneratePluginManager;
+   */
+  protected $develGeneratePluginManager;
+
+  /**
+   * Constructs a new DevelGeneratePermissions instance.
+   *
+   * @param \Drupal\devel_generate\DevelGeneratePluginManager $develGeneratePluginManager
+   *   The plugin manager.
+   */
+  public function __construct(DevelGeneratePluginManager $develGeneratePluginManager) {
+    $this->develGeneratePluginManager = $develGeneratePluginManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static($container->get('plugin.manager.develgenerate'));
+  }
+
+  /*
+   * A permissions callback.
+   *
+   * @see devel_generate.permissions.yml.
+   *
+   * @return array
+   */
+  function permissions() {
+    $devel_generate_plugins = $this->develGeneratePluginManager->getDefinitions();
+    foreach ($devel_generate_plugins as $plugin) {
+
+      $permission = $plugin['permission'];
+      $permissions[$permission] = array(
+        'title' => t($permission),
+      );
+    }
+
+//    $permissions = array(
+//      'administer devel_generate' => array(
+//        'title' => t('Administer devel generate'),
+//      ),
+//    );
+    return $permissions;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/DevelGeneratePluginManager.php b/modules/contrib/devel/devel_generate/src/DevelGeneratePluginManager.php
new file mode 100644
index 0000000..dd33f36
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/DevelGeneratePluginManager.php
@@ -0,0 +1,36 @@
+<?php
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGeneratePluginManager.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Language\LanguageManagerInterface;
+
+/**
+ * Plugin type manager for DevelGenerate plugins.
+ */
+Class DevelGeneratePluginManager extends DefaultPluginManager {
+
+  /**
+   * Constructs a DevelGeneratePluginManager object.
+   *
+   * @param \Traversable $namespaces
+   *   An object that implements \Traversable which contains the root paths
+   *   keyed by the corresponding namespace to look for plugin implementations.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   *   Cache backend instance to use.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler to invoke the alter hook with.
+   */
+  public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
+    parent::__construct('Plugin/DevelGenerate', $namespaces, $module_handler, NULL, 'Drupal\devel_generate\Annotation\DevelGenerate');
+    $this->alterInfo('devel_generate_info');
+    $this->setCacheBackend($cache_backend, 'devel_generate_plugins');
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Form/DevelGenerateForm.php b/modules/contrib/devel/devel_generate/src/Form/DevelGenerateForm.php
new file mode 100644
index 0000000..f6605f9
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Form/DevelGenerateForm.php
@@ -0,0 +1,110 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Form\DevelGenerateForm.
+ */
+
+namespace Drupal\devel_generate\Form;
+
+use Drupal\Component\Plugin\PluginManagerInterface;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\devel_generate\DevelGenerateException;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Defines a form that allows privileged users to generate entities.
+ */
+class DevelGenerateForm extends FormBase {
+
+  /**
+   * The manager to be used for instantiating plugins.
+   *
+   * @var \Drupal\Component\Plugin\PluginManagerInterface
+   */
+  protected $develGenerateManager;
+
+  /**
+   * Constructs a new DevelGenerateForm object.
+   *
+   * @param \Drupal\Component\Plugin\PluginManagerInterface $devel_generate_manager
+   *   The manager to be used for instantiating plugins.
+   */
+  public function __construct(PluginManagerInterface $devel_generate_manager) {
+    $this->develGenerateManager = $devel_generate_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('plugin.manager.develgenerate')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_generate_form_' . $this->getPluginIdFromRequest();
+  }
+
+  /**
+   * Returns the value of the param _plugin_id for the current request.
+   *
+   * @see \Drupal\devel_generate\Routing\DevelGenerateRouteSubscriber
+   */
+  protected function getPluginIdFromRequest() {
+    $request = $this->getRequest();
+    return $request->get('_plugin_id');
+  }
+
+  /**
+   * Returns a DevelGenerate plugin instance for a given plugin id.
+   *
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   *
+   * @return \Drupal\devel_generate\DevelGenerateBaseInterface
+   *   A DevelGenerate plugin instance.
+   */
+  public function getPluginInstance($plugin_id) {
+    $instance = $this->develGenerateManager->createInstance($plugin_id, array());
+    return $instance;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $plugin_id = $this->getPluginIdFromRequest();
+    $instance = $this->getPluginInstance($plugin_id);
+    $form = $instance->settingsForm($form, $form_state);
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Generate'),
+      '#button_type' => 'primary',
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    try {
+      $plugin_id = $this->getPluginIdFromRequest();
+      $instance = $this->getPluginInstance($plugin_id);
+      $instance->generate($form_state->getValues());
+    }
+    catch (DevelGenerateException $e) {
+      $this->logger('DevelGenerate', $this->t('Failed to generate elements due to "%error".', array('%error' => $e->getMessage())));
+      drupal_set_message($this->t('Failed to generate elements due to "%error".', array('%error' => $e->getMessage())));
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php
new file mode 100644
index 0000000..4723b23
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php
@@ -0,0 +1,492 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\ContentDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\comment\CommentManagerInterface;
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\Core\Datetime\DateFormatterInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\LanguageInterface;
+use Drupal\Core\Language\LanguageManagerInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\field\Entity\FieldConfig;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a ContentDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "content",
+ *   label = @Translation("content"),
+ *   description = @Translation("Generate a given number of content. Optionally delete current content."),
+ *   url = "content",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "max_comments" = 0,
+ *     "title_length" = 4
+ *   }
+ * )
+ */
+class ContentDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The node storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $nodeStorage;
+
+  /**
+   * The node type storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $nodeTypeStorage;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * The comment manager service.
+   *
+   * @var \Drupal\comment\CommentManagerInterface
+   */
+  protected $commentManager;
+
+  /**
+   * The language manager.
+   *
+   * @var \Drupal\Core\Language\LanguageManagerInterface
+   */
+  protected $languageManager;
+
+  /**
+   * The url generator service.
+   *
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * The date formatter service.
+   *
+   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   */
+  protected $dateFormatter;
+
+  /**
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin ID for the plugin instance.
+   * @param array $plugin_definition
+   * @param \Drupal\Core\Entity\EntityStorageInterface $node_storage
+   *   The node storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $node_type_storage
+   *   The node type storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   * @param \Drupal\comment\CommentManagerInterface $comment_manager
+   *   The comment manager service.
+   * @param \Drupal\Core\Language\LanguageManagerInterface $language_manager
+   *   The language manager.
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $url_generator
+   *   The url generator service.
+   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   *   The date formatter service.
+   */
+  public function __construct(array $configuration, $plugin_id, array $plugin_definition, EntityStorageInterface $node_storage, EntityStorageInterface $node_type_storage, ModuleHandlerInterface $module_handler, CommentManagerInterface $comment_manager = NULL, LanguageManagerInterface $language_manager, UrlGeneratorInterface $url_generator, DateFormatterInterface $date_formatter) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->moduleHandler = $module_handler;
+    $this->nodeStorage = $node_storage;
+    $this->nodeTypeStorage = $node_type_storage;
+    $this->commentManager = $comment_manager;
+    $this->languageManager = $language_manager;
+    $this->urlGenerator = $url_generator;
+    $this->dateFormatter = $date_formatter;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $entity_manager->getStorage('node'),
+      $entity_manager->getStorage('node_type'),
+      $container->get('module_handler'),
+      $container->has('comment.manager') ? $container->get('comment.manager') : NULL,
+      $container->get('language_manager'),
+      $container->get('url_generator'),
+      $container->get('date.formatter')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $types = $this->nodeTypeStorage->loadMultiple();
+
+    if (empty($types)) {
+      $create_url = $this->urlGenerator->generateFromRoute('node.type_add');
+      $this->setMessage($this->t('You do not have any content types that can be generated. <a href=":create-type">Go create a new content type</a>', array(':create-type' => $create_url)), 'error', FALSE);
+      return;
+    }
+
+    $options = array();
+
+    foreach ($types as $type) {
+      $options[$type->id()] = array(
+        'type' => array('#markup' => $type->label()),
+      );
+      if ($this->commentManager) {
+        $comment_fields = $this->commentManager->getFields('node');
+        $map = array($this->t('Hidden'), $this->t('Closed'), $this->t('Open'));
+
+        $fields = array();
+        foreach ($comment_fields as $field_name => $info) {
+          // Find all comment fields for the bundle.
+          if (in_array($type->id(), $info['bundles'])) {
+            $instance = FieldConfig::loadByName('node', $type->id(), $field_name);
+            $default_value = $instance->getDefaultValueLiteral();
+            $default_mode = reset($default_value);
+            $fields[] = new FormattableMarkup('@field: @state', array(
+              '@field' => $instance->label(),
+              '@state' => $map[$default_mode['status']],
+            ));
+          }
+        }
+        // @todo Refactor display of comment fields.
+        if (!empty($fields)) {
+          $options[$type->id()]['comments'] = array(
+            'data' => array(
+              '#theme' => 'item_list',
+              '#items' => $fields,
+            ),
+          );
+        }
+        else {
+          $options[$type->id()]['comments'] = $this->t('No comment fields');
+        }
+      }
+    }
+
+    $header = array(
+      'type' => $this->t('Content type'),
+    );
+    if ($this->commentManager) {
+      $header['comments'] = array(
+        'data' => $this->t('Comments'),
+        'class' => array(RESPONSIVE_PRIORITY_MEDIUM),
+      );
+    }
+
+    $form['node_types'] = array(
+      '#type' => 'tableselect',
+      '#header' => $header,
+      '#options' => $options,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('<strong>Delete all content</strong> in these content types before generating new content.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('How many nodes would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+
+    $options = array(1 => $this->t('Now'));
+    foreach (array(3600, 86400, 604800, 2592000, 31536000) as $interval) {
+      $options[$interval] = $this->dateFormatter->formatInterval($interval, 1) . ' ' . $this->t('ago');
+    }
+    $form['time_range'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('How far back in time should the nodes be dated?'),
+      '#description' => $this->t('Node creation dates will be distributed randomly from the current time, back to the selected time.'),
+      '#options' => $options,
+      '#default_value' => 604800,
+    );
+
+    $form['max_comments'] = array(
+      '#type' => $this->moduleHandler->moduleExists('comment') ? 'number' : 'value',
+      '#title' => $this->t('Maximum number of comments per node.'),
+      '#description' => $this->t('You must also enable comments for the content types you are generating. Note that some nodes will randomly receive zero comments. Some will receive the max.'),
+      '#default_value' => $this->getSetting('max_comments'),
+      '#min' => 0,
+      '#access' => $this->moduleHandler->moduleExists('comment'),
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of words in titles'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 1,
+      '#max' => 255,
+    );
+    $form['add_alias'] = array(
+      '#type' => 'checkbox',
+      '#disabled' => !$this->moduleHandler->moduleExists('path'),
+      '#description' => $this->t('Requires path.module'),
+      '#title' => $this->t('Add an url alias for each node.'),
+      '#default_value' => FALSE,
+    );
+    $form['add_statistics'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Add statistics for each node (node_counter table).'),
+      '#default_value' => TRUE,
+      '#access' => $this->moduleHandler->moduleExists('statistics'),
+    );
+
+    $options = array();
+    // We always need a language.
+    $languages = $this->languageManager->getLanguages(LanguageInterface::STATE_ALL);
+    foreach ($languages as $langcode => $language) {
+      $options[$langcode] = $language->getName();
+    }
+
+    $form['add_language'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('Set language on nodes'),
+      '#multiple' => TRUE,
+      '#description' => $this->t('Requires locale.module'),
+      '#options' => $options,
+      '#default_value' => array(
+        $this->languageManager->getDefaultLanguage()->getId(),
+      ),
+    );
+
+    $form['#redirect'] = FALSE;
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    if ($values['num'] <= 50 && $values['max_comments'] <= 10) {
+      $this->generateContent($values);
+    }
+    else {
+      $this->generateBatchContent($values);
+    }
+  }
+
+  /**
+   * Method responsible for creating content when
+   * the number of elements is less than 50.
+   */
+  private function generateContent($values) {
+    $values['node_types'] = array_filter($values['node_types']);
+    if (!empty($values['kill']) && $values['node_types']) {
+      $this->contentKill($values);
+    }
+
+    if (!empty($values['node_types'])) {
+      // Generate nodes.
+      $this->develGenerateContentPreNode($values);
+      $start = time();
+      for ($i = 1; $i <= $values['num']; $i++) {
+        $this->develGenerateContentAddNode($values);
+        if (function_exists('drush_log') && $i % drush_get_option('feedback', 1000) == 0) {
+          $now = time();
+          drush_log(dt('Completed @feedback nodes (@rate nodes/min)', array('@feedback' => drush_get_option('feedback', 1000), '@rate' => (drush_get_option('feedback', 1000) * 60) / ($now - $start))), 'ok');
+          $start = $now;
+        }
+      }
+    }
+    $this->setMessage($this->formatPlural($values['num'], '1 node created.', 'Finished creating @count nodes'));
+  }
+
+  /**
+   * Method responsible for creating content when
+   * the number of elements is greater than 50.
+   */
+  private function generateBatchContent($values) {
+    // Setup the batch operations and save the variables.
+    $operations[] = array('devel_generate_operation', array($this, 'batchContentPreNode', $values));
+
+    // Add the kill operation.
+    if ($values['kill']) {
+      $operations[] = array('devel_generate_operation', array($this, 'batchContentKill', $values));
+    }
+
+    // Add the operations to create the nodes.
+    for ($num = 0; $num < $values['num']; $num ++) {
+      $operations[] = array('devel_generate_operation', array($this, 'batchContentAddNode', $values));
+    }
+
+    // Start the batch.
+    $batch = array(
+      'title' => $this->t('Generating Content'),
+      'operations' => $operations,
+      'finished' => 'devel_generate_batch_finished',
+      'file' => drupal_get_path('module', 'devel_generate') . '/devel_generate.batch.inc',
+    );
+    batch_set($batch);
+  }
+
+  public function batchContentPreNode($vars, &$context) {
+    $context['results'] = $vars;
+    $context['results']['num'] = 0;
+    $this->develGenerateContentPreNode($context['results']);
+  }
+
+  public function batchContentAddNode($vars, &$context) {
+    $this->develGenerateContentAddNode($context['results']);
+    $context['results']['num']++;
+  }
+
+  public function batchContentKill($vars, &$context) {
+    $this->contentKill($context['results']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $add_language = drush_get_option('languages');
+    if (!empty($add_language)) {
+      $add_language = explode(',', str_replace(' ', '', $add_language));
+      // Intersect with the enabled languages to make sure the language args
+      // passed are actually enabled.
+      $values['values']['add_language'] = array_intersect($add_language, array_keys($this->languageManager->getLanguages(LanguageInterface::STATE_ALL)));
+    }
+
+    $values['kill'] = drush_get_option('kill');
+    $values['title_length'] = 6;
+    $values['num'] = array_shift($args);
+    $values['max_comments'] = array_shift($args);
+    $all_types = array_keys(node_type_get_names());
+    $default_types = array_intersect(array('page', 'article'), $all_types);
+    $selected_types = _convert_csv_to_array(drush_get_option('types', $default_types));
+
+    if (empty($selected_types)) {
+      return drush_set_error('DEVEL_GENERATE_NO_CONTENT_TYPES', dt('No content types available'));
+    }
+
+    $values['node_types'] = array_combine($selected_types, $selected_types);
+    $node_types = array_filter($values['node_types']);
+
+    if (!empty($values['kill']) && empty($node_types)) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Please provide content type (--types) in which you want to delete the content.'));
+    }
+
+    return $values;
+  }
+
+  /**
+   * Deletes all nodes of given node types.
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  protected function contentKill($values) {
+    $nids = $this->nodeStorage->getQuery()
+      ->condition('type', $values['node_types'], 'IN')
+      ->execute();
+
+    if (!empty($nids)) {
+      $nodes = $this->nodeStorage->loadMultiple($nids);
+      $this->nodeStorage->delete($nodes);
+      $this->setMessage($this->t('Deleted %count nodes.', array('%count' => count($nids))));
+    }
+  }
+
+  /**
+   * Return the same array passed as parameter
+   * but with an array of uids for the key 'users'.
+   */
+  protected function develGenerateContentPreNode(&$results) {
+    // Get user id.
+    $users = $this->getUsers();
+    $users = array_merge($users, array('0'));
+    $results['users'] = $users;
+  }
+
+  /**
+   * Create one node. Used by both batch and non-batch code branches.
+   */
+  protected function develGenerateContentAddNode(&$results) {
+    if (!isset($results['time_range'])) {
+      $results['time_range'] = 0;
+    }
+    $users = $results['users'];
+
+    $node_type = array_rand(array_filter($results['node_types']));
+    $uid = $users[array_rand($users)];
+
+    $node = $this->nodeStorage->create(array(
+      'nid' => NULL,
+      'type' => $node_type,
+      'title' => $this->getRandom()->sentences(mt_rand(1, $results['title_length']), TRUE),
+      'uid' => $uid,
+      'revision' => mt_rand(0, 1),
+      'status' => TRUE,
+      'promote' => mt_rand(0, 1),
+      'created' => REQUEST_TIME - mt_rand(0, $results['time_range']),
+      'langcode' => $this->getLangcode($results),
+    ));
+
+    // A flag to let hook_node_insert() implementations know that this is a
+    // generated node.
+    $node->devel_generate = $results;
+
+    // Populate all fields with sample values.
+    $this->populateFields($node);
+
+    // See devel_generate_node_insert() for actions that happen before and after
+    // this save.
+    $node->save();
+  }
+
+  /**
+   * Determine language based on $results.
+   */
+  protected function getLangcode($results) {
+    if (isset($results['add_language'])) {
+      $langcodes = $results['add_language'];
+      $langcode = $langcodes[array_rand($langcodes)];
+    }
+    else {
+      $langcode = $this->languageManager->getDefaultLanguage()->getId();
+    }
+    return $langcode;
+  }
+
+  /**
+   * Retrive 50 uids from the database.
+   */
+  protected function getUsers() {
+    $users = array();
+    $result = db_query_range("SELECT uid FROM {users}", 0, 50);
+    foreach ($result as $record) {
+      $users[] = $record->uid;
+    }
+    return $users;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php
new file mode 100644
index 0000000..98c2970
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php
@@ -0,0 +1,412 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\MenuDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Menu\MenuLinkTreeInterface;
+use Drupal\Core\Menu\MenuTreeParameters;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a MenuDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "menu",
+ *   label = @Translation("menus"),
+ *   description = @Translation("Generate a given number of menus and menu links. Optionally delete current menus."),
+ *   url = "menu",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num_menus" = 2,
+ *     "num_links" = 50,
+ *     "title_length" = 12,
+ *     "max_width" = 6,
+ *     "kill" = FALSE,
+ *   }
+ * )
+ */
+class MenuDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The menu tree service.
+   *
+   * @var \Drupal\Core\Menu\MenuLinkTreeInterface
+   */
+  protected $menuLinkTree;
+
+  /**
+   * The menu storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $menuStorage;
+
+  /**
+   * The menu link storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $menuLinkContentStorage;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * Constructs a MenuDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin ID for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Menu\MenuLinkTreeInterface $menu_tree
+   *   The menu tree service.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $menu_storage
+   *   The menu storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $menu_link_storage
+   *   The menu storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, MenuLinkTreeInterface $menu_tree, EntityStorageInterface $menu_storage, EntityStorageInterface $menu_link_storage, ModuleHandlerInterface $module_handler) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->menuLinkTree = $menu_tree;
+    $this->menuStorage = $menu_storage;
+    $this->menuLinkContentStorage = $menu_link_storage;
+    $this->moduleHandler = $module_handler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('menu.link_tree'),
+      $entity_manager->getStorage('menu'),
+      $entity_manager->getStorage('menu_link_content'),
+      $container->get('module_handler')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $menu_enabled = $this->moduleHandler->moduleExists('menu_ui');
+    if ($menu_enabled) {
+      $menus = array('__new-menu__' => $this->t('Create new menu(s)')) + menu_ui_get_menus();
+    }
+    else {
+      $menus = menu_list_system_menus();
+    }
+    $form['existing_menus'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Generate links for these menus'),
+      '#options' => $menus,
+      '#default_value' => array('__new-menu__'),
+      '#required' => TRUE,
+    );
+    if ($menu_enabled) {
+      $form['num_menus'] = array(
+        '#type' => 'number',
+        '#title' => $this->t('Number of new menus to create'),
+        '#default_value' => $this->getSetting('num_menus'),
+        '#min' => 0,
+        '#states' => array(
+          'visible' => array(
+            ':input[name="existing_menus[__new-menu__]"]' => array('checked' => TRUE),
+          ),
+        ),
+      );
+    }
+    $form['num_links'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of links to generate'),
+      '#default_value' => $this->getSetting('num_links'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in menu and menu link names'),
+      '#description' => $this->t('The minimum length is 2.'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 128,
+    );
+    $form['link_types'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Types of links to generate'),
+      '#options' => array(
+        'node' => $this->t('Nodes'),
+        'front' => $this->t('Front page'),
+        'external' => $this->t('External'),
+      ),
+      '#default_value' => array('node', 'front', 'external'),
+      '#required' => TRUE,
+    );
+    $form['max_depth'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('Maximum link depth'),
+      '#options' => range(0, $this->menuLinkTree->maxDepth()),
+      '#default_value' => floor($this->menuLinkTree->maxDepth() / 2),
+      '#required' => TRUE,
+    );
+    unset($form['max_depth']['#options'][0]);
+    $form['max_width'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum menu width'),
+      '#default_value' => $this->getSetting('max_width'),
+      '#description' => $this->t('Limit the width of the generated menu\'s first level of links to a certain number of items.'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing custom generated menus and menu links before generating new ones.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    // If the create new menus checkbox is off, set the number of new menus to 0.
+    if (!isset($values['existing_menus']['__new-menu__']) || !$values['existing_menus']['__new-menu__']) {
+      $values['num_menus'] = 0;
+    }
+    else {
+      // Unset the aux menu to avoid attach menu new items.
+      unset($values['existing_menus']['__new-menu__']);
+    }
+
+    // Delete custom menus.
+    if ($values['kill']) {
+      $this->deleteMenus();
+      $this->setMessage($this->t('Deleted existing menus and links.'));
+    }
+
+    // Generate new menus.
+    $new_menus = $this->generateMenus($values['num_menus'], $values['title_length']);
+    if (!empty($new_menus)) {
+      $this->setMessage($this->t('Created the following new menus: @menus', array('@menus' => implode(', ', $new_menus))));
+    }
+
+    // Generate new menu links.
+    $menus = $new_menus;
+    if (isset($values['existing_menus'])) {
+      $menus = $menus + $values['existing_menus'];
+    }
+    $new_links = $this->generateLinks($values['num_links'], $menus, $values['title_length'], $values['link_types'], $values['max_depth'], $values['max_width']);
+    $this->setMessage($this->t('Created @count new menu links.', array('@count' => count($new_links))));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+
+    $link_types = array('node', 'front', 'external');
+    $values = array(
+      'num_menus' => array_shift($args),
+      'num_links' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+      'pipe' => drush_get_option('pipe'),
+      'link_types' => array_combine($link_types, $link_types),
+    );
+
+    $max_depth = array_shift($args);
+    $max_width = array_shift($args);
+    $values['max_depth'] = $max_depth ? $max_depth : 3;
+    $values['max_width'] = $max_width ? $max_width : 8;
+    $values['title_length'] = $this->getSetting('title_length');
+    $values['existing_menus']['__new-menu__'] = TRUE;
+
+    if ($this->isNumber($values['num_menus']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of menus'));
+    }
+    if ($this->isNumber($values['num_links']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of links'));
+    }
+    if ($this->isNumber($values['max_depth']) == FALSE || $values['max_depth'] > 9 || $values['max_depth'] < 1) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid maximum link depth. Use a value between 1 and 9'));
+    }
+    if ($this->isNumber($values['max_width']) == FALSE || $values['max_width'] < 1) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid maximum menu width. Use a positive numeric value.'));
+    }
+
+    return $values;
+  }
+
+  /**
+   * Deletes custom generated menus.
+   */
+  protected function deleteMenus() {
+    if ($this->moduleHandler->moduleExists('menu_ui')) {
+      $menu_ids = array();
+      foreach (menu_ui_get_menus(FALSE) as $menu => $menu_title) {
+        if (strpos($menu, 'devel-') === 0) {
+          $menu_ids[] = $menu;
+        }
+      }
+
+      if ($menu_ids) {
+        $menus = $this->menuStorage->loadMultiple($menu_ids);
+        $this->menuStorage->delete($menus);
+      }
+    }
+
+    // Delete menu links generated by devel.
+    $link_ids = $this->menuLinkContentStorage->getQuery()
+      ->condition('menu_name', 'devel', '<>')
+      ->condition('link__options', '%' . db_like('s:5:"devel";b:1') . '%', 'LIKE')
+      ->execute();
+
+    if ($link_ids) {
+      $links = $this->menuLinkContentStorage->loadMultiple($link_ids);
+      $this->menuLinkContentStorage->delete($links);
+    }
+
+  }
+
+  /**
+   * Generates new menus.
+   *
+   * @param int $num_menus
+   *   Number of menus to create.
+   * @param int $title_length
+   *   (optional) Maximum length per menu name.
+   *
+   * @return array
+   *   Array containing the generated vocabularies id.
+   */
+  protected function generateMenus($num_menus, $title_length = 12) {
+    $menus = array();
+
+    if ($this->moduleHandler->moduleExists('menu_ui')) {
+      for ($i = 1; $i <= $num_menus; $i++) {
+        $name = $this->getRandom()->word(mt_rand(2, max(2, $title_length)));
+
+        $menu = $this->menuStorage->create(array(
+          'label' => $name,
+          'id' => 'devel-' . Unicode::strtolower($name),
+          'description' => $this->t('Description of @name', array('@name' => $name)),
+        ));
+
+        $menu->save();
+        $menus[$menu->id()] = $menu->label();
+      }
+    }
+
+    return $menus;
+  }
+
+  /**
+   * Generates menu links in a tree structure.
+   */
+  protected function generateLinks($num_links, $menus, $title_length, $link_types, $max_depth, $max_width) {
+    $links = array();
+    $menus = array_keys(array_filter($menus));
+    $link_types = array_keys(array_filter($link_types));
+
+    $nids = array();
+    for ($i = 1; $i <= $num_links; $i++) {
+      // Pick a random menu.
+      $menu_name = $menus[array_rand($menus)];
+      // Build up our link.
+      $link_title = $this->getRandom()->word(mt_rand(2, max(2, $title_length)));
+      $link = $this->menuLinkContentStorage->create(array(
+        'menu_name' => $menu_name,
+        'weight' => mt_rand(-50, 50),
+        'title' => $link_title,
+        'bundle' => 'menu_link_content',
+        'description' => $this->t('Description of @title.', array('@title' => $link_title)),
+      ));
+      $link->link->options = array('devel' => TRUE);
+
+      // For the first $max_width items, make first level links.
+      if ($i <= $max_width) {
+        $depth = 0;
+      }
+      else {
+        // Otherwise, get a random parent menu depth.
+        $depth = mt_rand(1, max(1, $max_depth - 1));
+      }
+      // Get a random parent link from the proper depth.
+      do {
+        $parameters = new MenuTreeParameters();
+        $parameters->setMinDepth($depth);
+        $parameters->setMaxDepth($depth);
+        $tree = $this->menuLinkTree->load($menu_name, $parameters);
+
+        if ($tree) {
+          $link->parent = array_rand($tree);
+        }
+        $depth--;
+      } while (!$link->parent && $depth > 0);
+
+      $link_type = array_rand($link_types);
+      switch ($link_types[$link_type]) {
+        case 'node':
+          // Grab a random node ID.
+          $select = db_select('node_field_data', 'n')
+            ->fields('n', array('nid', 'title'))
+            ->condition('n.status', 1)
+            ->range(0, 1)
+            ->orderRandom();
+          // Don't put a node into the menu twice.
+          if (!empty($nids[$menu_name])) {
+            $select->condition('n.nid', $nids[$menu_name], 'NOT IN');
+          }
+          $node = $select->execute()->fetchAssoc();
+          if (isset($node['nid'])) {
+            $nids[$menu_name][] = $node['nid'];
+            $link->link->uri = 'entity:node/' . $node['nid'];
+            $link->title = $node['title'];
+            break;
+          }
+
+        case 'external':
+          $link->link->uri = 'http://www.example.com/';
+          break;
+
+        case 'front':
+          $link->link->uri = 'internal:/<front>';
+          break;
+
+        default:
+          $link->devel_link_type = $link_type;
+          break;
+      }
+
+      $link->save();
+
+      $links[$link->id()] = $link->link_title;
+    }
+
+    return $links;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php
new file mode 100644
index 0000000..8a95d58
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php
@@ -0,0 +1,272 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\TermDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\Language;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a TermDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "term",
+ *   label = @Translation("terms"),
+ *   description = @Translation("Generate a given number of terms. Optionally delete current terms."),
+ *   url = "term",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 10,
+ *     "title_length" = 12,
+ *     "kill" = FALSE,
+ *   }
+ * )
+ */
+class TermDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The vocabulary storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $vocabularyStorage;
+
+  /**
+   * The term storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $termStorage;
+
+  /**
+   * Constructs a new TermDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $vocabulary_storage
+   *   The vocabulary storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $term_storage
+   *   The term storage.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $vocabulary_storage, EntityStorageInterface $term_storage) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->vocabularyStorage = $vocabulary_storage;
+    $this->termStorage = $term_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $entity_manager->getStorage('taxonomy_vocabulary'),
+      $entity_manager->getStorage('taxonomy_term')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $options = array();
+    foreach ($this->vocabularyStorage->loadMultiple() as $vocabulary) {
+      $options[$vocabulary->id()] = $vocabulary->label();
+    }
+    $form['vids'] = array(
+      '#type' => 'select',
+      '#multiple' => TRUE,
+      '#title' => $this->t('Vocabularies'),
+      '#required' => TRUE,
+      '#default_value' => 'tags',
+      '#options' => $options,
+      '#description' => $this->t('Restrict terms to these vocabularies.'),
+    );
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of terms?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in term names'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 255,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing terms in specified vocabularies before generating new terms.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    if ($values['kill']) {
+      $this->deleteVocabularyTerms($values['vids']);
+      $this->setMessage($this->t('Deleted existing terms.'));
+    }
+
+    $vocabs = $this->vocabularyStorage->loadMultiple($values['vids']);
+    $new_terms = $this->generateTerms($values['num'], $vocabs, $values['title_length']);
+    if (!empty($new_terms)) {
+      $this->setMessage($this->t('Created the following new terms: @terms', array('@terms' => implode(', ', $new_terms))));
+    }
+  }
+
+  /**
+   * Deletes all terms of given vocabularies.
+   *
+   * @param array $vids
+   *   Array of vocabulary vid.
+   */
+  protected function deleteVocabularyTerms($vids) {
+    $tids = $this->vocabularyStorage->getToplevelTids($vids);
+    $terms = $this->termStorage->loadMultiple($tids);
+    $this->termStorage->delete($terms);
+  }
+
+  /**
+   * Generates taxonomy terms for a list of given vocabularies.
+   *
+   * @param int $records
+   *   Number of terms to create in total.
+   * @param \Drupal\taxonomy\TermInterface[] $vocabs
+   *   List of vocabularies to populate.
+   * @param int $maxlength
+   *   (optional) Maximum length per term.
+   *
+   * @return array
+   *   The list of names of the created terms.
+   */
+  protected function generateTerms($records, $vocabs, $maxlength = 12) {
+    $terms = array();
+
+    // Insert new data:
+    $max = db_query('SELECT MAX(tid) FROM {taxonomy_term_data}')->fetchField();
+    $start = time();
+    for ($i = 1; $i <= $records; $i++) {
+      $name = $this->getRandom()->word(mt_rand(2, $maxlength));
+
+      $values = array(
+        'name' => $name,
+        'description' => 'description of ' . $name,
+        'format' => filter_fallback_format(),
+        'weight' => mt_rand(0, 10),
+        'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+      );
+
+      switch ($i % 2) {
+        case 1:
+          $vocab = $vocabs[array_rand($vocabs)];
+          $values['vid'] = $vocab->id();
+          $values['parent'] = array(0);
+          break;
+
+        default:
+          while (TRUE) {
+            // Keep trying to find a random parent.
+            $candidate = mt_rand(1, $max);
+            $query = db_select('taxonomy_term_data', 't');
+            $parent = $query
+              ->fields('t', array('tid', 'vid'))
+              ->condition('t.vid', array_keys($vocabs), 'IN')
+              ->condition('t.tid', $candidate, '>=')
+              ->range(0, 1)
+              ->execute()
+              ->fetchAssoc();
+            if ($parent['tid']) {
+              break;
+            }
+          }
+          $values['parent'] = array($parent['tid']);
+          // Slight speedup due to this property being set.
+          $values['vid'] = $parent['vid'];
+          break;
+      }
+
+      $term = $this->termStorage->create($values);
+
+      // Populate all fields with sample values.
+      $this->populateFields($term);
+      $term->save();
+
+      $max++;
+
+      if (function_exists('drush_log')) {
+        $feedback = drush_get_option('feedback', 1000);
+        if ($i % $feedback == 0) {
+          $now = time();
+          drush_log(dt('Completed @feedback terms (@rate terms/min)', array('@feedback' => $feedback, '@rate' => $feedback * 60 / ($now - $start))), 'ok');
+          $start = $now;
+        }
+      }
+
+      // Limit memory usage. Only report first 20 created terms.
+      if ($i < 20) {
+        $terms[] = $term->label();
+      }
+
+      unset($term);
+    }
+
+    return $terms;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $vocabulary_name = array_shift($args);
+    $number = array_shift($args);
+
+    if ($number === NULL) {
+      $number = 10;
+    }
+
+    if (!$vocabulary_name) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Please provide a vocabulary machine name.'));
+    }
+
+    if (!$this->isNumber($number)) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of terms: @num', array('@num' => $number)));
+    }
+
+    // Try to convert machine name to a vocabulary id.
+    if (!$vocabulary = $this->vocabularyStorage->load($vocabulary_name)) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid vocabulary name: @name', array('@name' => $vocabulary_name)));
+    }
+
+    $values = [
+      'num' => $number,
+      'kill' => drush_get_option('kill'),
+      'title_length' => 12,
+      'vids' => [$vocabulary->id()],
+    ];
+
+    return $values;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php
new file mode 100644
index 0000000..ae08d00
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php
@@ -0,0 +1,196 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\UserDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Core\Datetime\DateFormatterInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a UserDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "user",
+ *   label = @Translation("users"),
+ *   description = @Translation("Generate a given number of users. Optionally delete current users."),
+ *   url = "user",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "pass" = ""
+ *   }
+ * )
+ */
+class UserDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * The date formatter service.
+   *
+   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   */
+  protected $dateFormatter;
+
+  /**
+   * Constructs a new UserDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $entity_storage
+   *   The user storage.
+   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   *   The date formatter service.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $entity_storage, DateFormatterInterface $date_formatter) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->userStorage = $entity_storage;
+    $this->dateFormatter = $date_formatter;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('date.formatter')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('How many users would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete all users (except user id 1) before generating new users.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    $options = user_role_names(TRUE);
+    unset($options[DRUPAL_AUTHENTICATED_RID]);
+    $form['roles'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Which roles should the users receive?'),
+      '#description' => $this->t('Users always receive the <em>authenticated user</em> role.'),
+      '#options' => $options,
+    );
+
+    $form['pass'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('Password to be set'),
+      '#default_value' => $this->getSetting('pass'),
+      '#size' => 32,
+      '#description' => $this->t('Leave this field empty if you do not need to set a password'),
+    );
+
+    $options = array(1 => $this->t('Now'));
+    foreach (array(3600, 86400, 604800, 2592000, 31536000) as $interval) {
+      $options[$interval] = $this->dateFormatter->formatInterval($interval, 1) . ' ' . $this->t('ago');
+    }
+    $form['time_range'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('How old should user accounts be?'),
+      '#description' => $this->t('User ages will be distributed randomly from the current time, back to the selected time.'),
+      '#options' => $options,
+      '#default_value' => 604800,
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    $num = $values['num'];
+    $kill = $values['kill'];
+    $pass = $values['pass'];
+    $age = $values['time_range'];
+    $roles = array_filter($values['roles']);
+
+    if ($kill) {
+      $uids = $this->userStorage->getQuery()
+        ->condition('uid', 1, '>')
+        ->execute();
+      $users = $this->userStorage->loadMultiple($uids);
+      $this->userStorage->delete($users);
+
+      $this->setMessage($this->formatPlural(count($uids), '1 user deleted', '@count users deleted.'));
+    }
+
+    if ($num > 0) {
+      $names = array();
+      while (count($names) < $num) {
+        $name = $this->getRandom()->word(mt_rand(6, 12));
+        $names[$name] = '';
+      }
+
+      if (empty($roles)) {
+        $roles = array(DRUPAL_AUTHENTICATED_RID);
+      }
+      foreach ($names as $name => $value) {
+        $account = $this->userStorage->create(array(
+          'uid' => NULL,
+          'name' => $name,
+          'pass' => $pass,
+          'mail' => $name . '@example.com',
+          'status' => 1,
+          'created' => REQUEST_TIME - mt_rand(0, $age),
+          'roles' => array_values($roles),
+          // A flag to let hook_user_* know that this is a generated user.
+          'devel_generate' => TRUE,
+        ));
+
+        // Populate all fields with sample values.
+        $this->populateFields($account);
+        $account->save();
+      }
+    }
+    $this->setMessage($this->t('@num_users created.', array('@num_users' => $this->formatPlural($num, '1 user', '@count users'))));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'roles' => drush_get_option('roles') ? explode(',', drush_get_option('roles')) : array(),
+      'kill' => drush_get_option('kill'),
+      'pass' => drush_get_option('pass', NULL),
+      'time_range' => 0,
+    );
+    return $values;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php
new file mode 100644
index 0000000..9a83e94
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php
@@ -0,0 +1,180 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\VocabularyDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\Language;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a VocabularyDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "vocabulary",
+ *   label = @Translation("vocabularies"),
+ *   description = @Translation("Generate a given number of vocabularies. Optionally delete current vocabularies."),
+ *   url = "vocabs",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 1,
+ *     "title_length" = 12,
+ *     "kill" = FALSE
+ *   }
+ * )
+ */
+class VocabularyDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The vocabulary storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $vocabularyStorage;
+
+  /**
+   * Constructs a new VocabularyDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $entity_storage
+   *   The vocabulary storage.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $entity_storage) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->vocabularyStorage = $entity_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('entity.manager')->getStorage('taxonomy_vocabulary')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of vocabularies?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in vocabulary names'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 255,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing vocabularies before generating new ones.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    if ($values['kill']) {
+      $this->deleteVocabularies();
+      $this->setMessage($this->t('Deleted existing vocabularies.'));
+    }
+
+    $new_vocs = $this->generateVocabularies($values['num'], $values['title_length']);
+    if (!empty($new_vocs)) {
+      $this->setMessage($this->t('Created the following new vocabularies: @vocs', array('@vocs' => implode(', ', $new_vocs))));
+    }
+  }
+
+  /**
+   * Deletes all vocabularies.
+   */
+  protected function deleteVocabularies() {
+    $vocabularies = $this->vocabularyStorage->loadMultiple();
+    $this->vocabularyStorage->delete($vocabularies);
+  }
+
+  /**
+   * Generates vocabularies.
+   *
+   * @param int $records
+   *   Number of vocabularies to create.
+   * @param int $maxlength
+   *   (optional) Maximum length for vocabulary name.
+   *
+   * @return array
+   *   Array containing the generated vocabularies id.
+   */
+  protected function generateVocabularies($records, $maxlength = 12) {
+    $vocabularies = array();
+
+    // Insert new data:
+    for ($i = 1; $i <= $records; $i++) {
+      $name = $this->getRandom()->word(mt_rand(2, $maxlength));
+
+      $vocabulary = $this->vocabularyStorage->create(array(
+        'name' => $name,
+        'vid' => Unicode::strtolower($name),
+        'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+        'description' => "Description of $name",
+        'hierarchy' => 1,
+        'weight' => mt_rand(0, 10),
+        'multiple' => 1,
+        'required' => 0,
+        'relations' => 1,
+      ));
+
+      // Populate all fields with sample values.
+      $this->populateFields($vocabulary);
+      $vocabulary->save();
+
+      $vocabularies[] = $vocabulary->id();
+      unset($vocabulary);
+    }
+
+    return $vocabularies;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+      'title_length' => 12,
+    );
+
+    if ($this->isNumber($values['num']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of vocabularies: @num.', array('@num' => $values['num'])));
+    }
+
+    return $values;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Routing/DevelGenerateRoutes.php b/modules/contrib/devel/devel_generate/src/Routing/DevelGenerateRoutes.php
new file mode 100644
index 0000000..9e0224d
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Routing/DevelGenerateRoutes.php
@@ -0,0 +1,62 @@
+<?php
+
+/**
+ * @file
+ *
+ * Definition of \Drupal\devel_generate\Routing\DevelGenerateRouteSubscriber.
+ */
+namespace Drupal\devel_generate\Routing;
+
+use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
+use Drupal\Component\Plugin\PluginManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\Routing\Route;
+
+/**
+ * Provides dynamic routes for devel_generate.
+ */
+class DevelGenerateRoutes implements ContainerInjectionInterface {
+
+  /**
+   * Constructs a new devel_generate route subscriber.
+   *
+   * @param \Drupal\Component\Plugin\PluginManagerInterface $devel_generate_manager
+   *   The DevelGeneratePluginManager.
+   */
+  public function __construct(PluginManagerInterface $devel_generate_manager) {
+    $this->DevelGenerateManager = $devel_generate_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('plugin.manager.develgenerate')
+    );
+  }
+
+  public function routes() {
+    $devel_generate_plugins = $this->DevelGenerateManager->getDefinitions();
+
+    $routes = array();
+    foreach ($devel_generate_plugins as $id => $plugin) {
+      $label = $plugin['label'];
+      $type_url_str = str_replace('_', '-', $plugin['url']);
+      $routes["devel_generate.$id"] = new Route(
+        "admin/config/development/generate/$type_url_str",
+        array(
+          '_form' => '\Drupal\devel_generate\Form\DevelGenerateForm',
+          '_title' => "Generate $label",
+          '_plugin_id' => $id,
+        ),
+        array(
+          '_permission' => $plugin['permission'],
+        )
+      );
+    }
+
+    return $routes;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/src/Tests/DevelGenerateTest.php b/modules/contrib/devel/devel_generate/src/Tests/DevelGenerateTest.php
new file mode 100644
index 0000000..2aa04a3
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/src/Tests/DevelGenerateTest.php
@@ -0,0 +1,172 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Tests\DevelGenerateTest.
+ */
+
+namespace Drupal\devel_generate\Tests;
+
+use Drupal\comment\Tests\CommentTestTrait;
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Language\Language;
+use Drupal\field\Tests\EntityReference\EntityReferenceTestTrait;
+use Drupal\node\Entity\Node;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests the logic to generate data.
+ *
+ * @group devel_generate
+ */
+class DevelGenerateTest extends WebTestBase {
+
+  use CommentTestTrait;
+  use EntityReferenceTestTrait;
+
+  /**
+   * Vocabulary for testing.
+   *
+   * @var \Drupal\taxonomy\VocabularyInterface
+   */
+  protected $vocabulary;
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('menu_ui', 'node', 'comment', 'taxonomy', 'path', 'devel_generate');
+
+  /**
+   * Prepares the testing environment
+   */
+  public function setUp() {
+    parent::setUp();
+
+    // Create Basic page and Article node types.
+    if ($this->profile != 'standard') {
+      $this->drupalCreateContentType(array('type' => 'page', 'name' => 'Basic Page'));
+      $this->drupalCreateContentType(array('type' => 'article', 'name' => 'Article'));
+      $this->addDefaultCommentField('node', 'article');
+    }
+
+    // Creating a vocabulary to associate taxonomy terms generated.
+    $this->vocabulary = entity_create('taxonomy_vocabulary', array(
+      'name' => $this->randomMachineName(),
+      'description' => $this->randomMachineName(),
+      'vid' => Unicode::strtolower($this->randomMachineName()),
+      'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+      'weight' => mt_rand(0, 10),
+    ));
+    $this->vocabulary->save();
+
+    // Creates a field of an entity reference field storage on article.
+    $field_name = 'taxonomy_' . $this->vocabulary->id();
+
+    $handler_settings = array(
+      'target_bundles' => array(
+        $this->vocabulary->id() => $this->vocabulary->id(),
+      ),
+      'auto_create' => TRUE,
+    );
+    $this->createEntityReferenceField('node', 'article', $field_name, NULL, 'taxonomy_term', 'default', $handler_settings, FieldStorageDefinitionInterface::CARDINALITY_UNLIMITED);
+
+    entity_get_form_display('node', 'article', 'default')
+      ->setComponent($field_name, array(
+        'type' => 'options_select',
+      ))
+      ->save();
+
+    entity_get_display('node', 'article', 'default')
+      ->setComponent($field_name, array(
+        'type' => 'entity_reference_label',
+      ))
+      ->save();
+
+    $admin_user = $this->drupalCreateUser(array('administer devel_generate'));
+    $this->drupalLogin($admin_user);
+  }
+
+  /**
+   * Tests generate commands
+   */
+  public function testDevelGenerate() {
+    // Creating users.
+    $edit = array(
+      'num' => 4,
+    );
+    $this->drupalPostForm('admin/config/development/generate/user', $edit, t('Generate'));
+    $this->assertText(t('4 users created.'));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating content.
+    // First we create a node in order to test the Delete content checkbox.
+    $this->drupalCreateNode(array('type' => 'article'));
+
+    $edit = array(
+      'num' => 4,
+      'kill' => TRUE,
+      'node_types[article]' => TRUE,
+      'time_range' => 604800,
+      'max_comments' => 3,
+      'title_length' => 4,
+      'add_alias' => 1,
+    );
+    $this->drupalPostForm('admin/config/development/generate/content', $edit, t('Generate'));
+    $this->assertText(t('Deleted 1 nodes.'));
+    $this->assertText(t('Finished creating 4 nodes'));
+    $this->assertText(t('Generate process complete.'));
+
+    // Tests that nodes have been created in the generation process.
+    $nodes = Node::loadMultiple();
+    $this->assert(count($nodes) == 4, 'Nodes generated successfully.');
+
+    // Tests url alias for the generated nodes.
+    foreach ($nodes as $node) {
+      $alias = 'node-' . $node->id() . '-' . $node->bundle();
+      $this->drupalGet($alias);
+      $this->assertResponse('200');
+      $this->assertText($node->getTitle(), 'Generated url alias for the node works.');
+    }
+
+    // Creating terms.
+    $edit = array(
+      'vids[]' => $this->vocabulary->id(),
+      'num' => 5,
+      'title_length' => 12,
+    );
+    $this->drupalPostForm('admin/config/development/generate/term', $edit, t('Generate'));
+    $this->assertText(t('Created the following new terms: '));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating vocabularies.
+    $edit = array(
+      'num' => 5,
+      'title_length' => 12,
+      'kill' => TRUE,
+    );
+    $this->drupalPostForm('admin/config/development/generate/vocabs', $edit, t('Generate'));
+    $this->assertText(t('Created the following new vocabularies: '));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating menus.
+    $edit = array(
+      'num_menus' => 5,
+      'num_links' => 7,
+      'title_length' => 12,
+      'link_types[node]' => 1,
+      'link_types[front]' => 1,
+      'link_types[external]' => 1,
+      'max_depth' => 4,
+      'max_width' => 6,
+      'kill' => 1,
+    );
+    $this->drupalPostForm('admin/config/development/generate/menu', $edit, t('Generate'));
+    $this->assertText(t('Created the following new menus: '));
+    $this->assertText(t('Created 7 new menu links'));
+    $this->assertText(t('Generate process complete.'));
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml
new file mode 100644
index 0000000..de6dcca
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml
@@ -0,0 +1,14 @@
+name: 'Devel generate Example'
+type: module
+description: 'Create an example of DevelGenerate plugin type for testing purposing.'
+package: Development
+# core: 8.x
+configure: admin/config/development/generate
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module
new file mode 100644
index 0000000..b3d9bbc
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module
@@ -0,0 +1 @@
+<?php
diff --git a/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php
new file mode 100644
index 0000000..0608276
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php
@@ -0,0 +1,93 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate.
+ */
+
+namespace Drupal\devel_generate_example\Plugin\DevelGenerate;
+
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Provides a ExampleDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "devel_generate_example",
+ *   label = "Example",
+ *   description = "Generate a given number of examples. Optionally delete current examples.",
+ *   url = "devel_generate_example",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE
+ *   }
+ * )
+ */
+class ExampleDevelGenerate extends DevelGenerateBase {
+
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+
+    $form['num'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('How many examples would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#size' => 10,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete all examples before generating new examples.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    $num = $values['num'];
+    $kill = $values['kill'];
+
+    if ($kill) {
+        $this->setMessage($this->t('Old examples have been deleted.'));
+    }
+
+    //Creating user in order to demonstrate
+    // how to override default business login generation.
+    $edit = array(
+      'uid'     => NULL,
+      'name'    => 'example_devel_generate',
+      'pass'    => '',
+      'mail'    => 'example_devel_generate@example.com',
+      'status'  => 1,
+      'created' => REQUEST_TIME,
+      'roles' => '',
+      'devel_generate' => TRUE // A flag to let hook_user_* know that this is a generated user.
+    );
+
+    $account = user_load_by_name('example_devel_generate');
+    if (!$account) {
+      $account = entity_create('user', $edit);
+    }
+
+    // Populate all fields with sample values.
+    $this->populateFields($node);
+
+    $account->save();
+
+    $this->setMessage($this->t('@num_examples created.', array('@num_examples' => $this->formatPlural($num, '1 example', '@count examples'))));
+  }
+
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+    );
+    return $values;
+  }
+
+}
diff --git a/modules/contrib/devel/devel_generate/tests/src/DevelGenerateManagerTest.php b/modules/contrib/devel/devel_generate/tests/src/DevelGenerateManagerTest.php
new file mode 100644
index 0000000..28e66e4
--- /dev/null
+++ b/modules/contrib/devel/devel_generate/tests/src/DevelGenerateManagerTest.php
@@ -0,0 +1,93 @@
+<?php
+
+namespace Drupal\Tests\devel_generate;
+
+use Drupal\Component\Plugin\Discovery\DiscoveryInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+use Drupal\Tests\UnitTestCase;
+use Drupal\Core\Language\Language;
+
+if (!defined('DRUPAL_ROOT')) {
+  //Looping to find drupal root folder.
+  $current_dir = dirname(__DIR__);
+  while (!file_exists("$current_dir/index.php")) {
+    $current_dir = dirname($current_dir);
+  }
+  define('DRUPAL_ROOT', $current_dir);
+}
+
+/**
+ * @coversDefaultClass \Drupal\devel_generate\DevelGeneratePluginManager
+ * @group devel_generate
+ */
+class DevelGenerateManagerTest extends UnitTestCase {
+
+  /**
+   * The plugin discovery.
+   *
+   * @var \Drupal\Component\Plugin\Discovery\DiscoveryInterface|\PHPUnit_Framework_MockObject_MockObject
+   */
+  protected $discovery;
+
+  /**
+   * A list of devel generate plugin definitions.
+   *
+   * @var array
+   */
+  protected $definitions = array(
+    'devel_generate_example' => array(
+      'id' => 'devel_generate_example',
+      'class' => 'Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate',
+      'url' => 'devel_generate_example',
+    ),
+  );
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+    // Mock a Discovery object to replace AnnotationClassDiscovery.
+    $this->discovery = $this->getMock('Drupal\Component\Plugin\Discovery\DiscoveryInterface');
+    $this->discovery->expects($this->any())
+      ->method('getDefinitions')
+      ->will($this->returnValue($this->definitions));
+
+  }
+
+  /**
+   * Test creating an instance of the DevelGenerateManager.
+   */
+  public function testCreateInstance() {
+    $namespaces = new \ArrayObject(array('Drupal\devel_generate_example' => realpath(dirname(__FILE__) . '/../../../modules/devel_generate_example/lib')));
+    $cache_backend = $this->getMock('Drupal\Core\Cache\CacheBackendInterface');
+
+    $module_handler = $this->getMock('Drupal\Core\Extension\ModuleHandlerInterface');
+    $manager = new TestDevelGeneratePluginManager($namespaces, $cache_backend, $module_handler);
+    $manager->setDiscovery($this->discovery);
+
+    $example_instance = $manager->createInstance('devel_generate_example');
+    $plugin_def = $example_instance->getPluginDefinition();
+
+    $this->assertInstanceOf('Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate', $example_instance);
+    $this->assertArrayHasKey('url', $plugin_def);
+    $this->assertTrue($plugin_def['url'] == 'devel_generate_example');
+  }
+
+}
+
+/**
+ * Provides a testing version of DevelGeneratePluginManager with an empty
+ * constructor.
+ */
+class TestDevelGeneratePluginManager extends DevelGeneratePluginManager {
+  /**
+   * Sets the discovery for the manager.
+   *
+   * @param \Drupal\Component\Plugin\Discovery\DiscoveryInterface $discovery
+   *   The discovery object.
+   */
+  public function setDiscovery(DiscoveryInterface $discovery) {
+    $this->discovery = $discovery;
+  }
+}
diff --git a/modules/contrib/devel/devel_node_access/README.txt b/modules/contrib/devel/devel_node_access/README.txt
new file mode 100644
index 0000000..1d9362f
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/README.txt
@@ -0,0 +1,42 @@
+README
+======
+
+This module contains tools for developers using access control modules
+to restrict access to some nodes.  It is intended to help catch some
+common mistakes and provide feedback to confirm that restricted nodes
+are in fact visible only to the intended users.
+
+Provides a summary page which queries the node_access table and
+reports common mistakes such as the presence of Drupal's default entry
+which grants all users read access to all nodes.  Also reports the
+presence of nodes not represented in node_access table.  This may
+occur when an access control module is installed after nodes have
+already been created.
+
+Provides a block which shows all node_access entries for the nodes
+shown on a given page.  This gives developers a quick check to see
+that grants are provided as they should be.  This block auto-enables
+to the footer region. You may move it as desired.
+
+If Views module is installed, allows browsing of nodes by realm,
+including those nodes not in the node_access table (NULL realm).
+
+WISHLIST
+========
+
+Things I'd like to see but haven't had time to do:
+
+* Automatically solve common problems.  I.e. delete the "all" realm
+  entry, and automatically save all nodes not in the node_access table.
+
+* Nicer feedback indicating whether nodes are visible to the public or
+  not.  I.e. use color coding or icons.
+
+* Summary does not differentiate between view grants and other types
+  of grants.  I personally use node_access only for view grants so I'm
+  not sure exactly what else it should show.
+
+AUTHOR
+======
+
+Dave Cohen AKA yogadex on drupal.org
diff --git a/modules/contrib/devel/devel_node_access/config/install/devel_node_access.settings.yml b/modules/contrib/devel/devel_node_access/config/install/devel_node_access.settings.yml
new file mode 100644
index 0000000..9937f62
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/config/install/devel_node_access.settings.yml
@@ -0,0 +1,3 @@
+debug_mode: FALSE
+by_user_mode: FALSE
+user_ajax: FALSE
diff --git a/modules/contrib/devel/devel_node_access/config/schema/devel_node_access.schema.yml b/modules/contrib/devel/devel_node_access/config/schema/devel_node_access.schema.yml
new file mode 100644
index 0000000..a8f582c
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/config/schema/devel_node_access.schema.yml
@@ -0,0 +1,15 @@
+# Schema for the configuration files of the Devel Node Access module.
+
+devel_node_access.settings:
+  type: mapping
+  label: 'Devel Node Access settings'
+  mapping:
+    debug_mode:
+      type: boolean
+      label: 'Debug Mode'
+    by_user_mode:
+      type: boolean
+      label: 'By-User Analysis'
+    user_ajax:
+      type: boolean
+      label: 'User AJAX'
diff --git a/modules/contrib/devel/devel_node_access/css/devel_node_access.module.css b/modules/contrib/devel/devel_node_access/css/devel_node_access.module.css
new file mode 100644
index 0000000..23e0b78
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/css/devel_node_access.module.css
@@ -0,0 +1,5 @@
+
+div.devel-node-access-inline > div {
+    display: inline-block;
+}
+
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.api.php b/modules/contrib/devel/devel_node_access/devel_node_access.api.php
new file mode 100644
index 0000000..f33eef2
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.api.php
@@ -0,0 +1,81 @@
+<?php
+
+/**
+ * @file
+ * Hook provided by the Devel Node Access module.
+ */
+
+/**
+ * @addtogroup hooks
+ * @{
+ */
+
+/**
+ * Explain your records in the {node_access} table.
+ *
+ * In order to help developers and administrators understand the forces
+ * that control access to any given node, the DNA module provides the
+ * Devel Node Access block, which lists all the grant records in the
+ * {node_access} table for that node.
+ *
+ * However, every Node Access module is free in how it defines and uses the
+ * 'realm' and 'gid' fields in its records in the {node_access} table, and
+ * it's often difficult to interpret them. This hook passes each record
+ * that DNA wants to display, and the owning module is expected to return
+ * an explanation of that record.
+ *
+ * The explanation should not be localized (not be passed through t()), so
+ * that administrators seeking help can present English explanations.
+ *
+ * @param $row
+ *   The record from the {node_access} table, as object. The member fields are:
+ *   nid, gid, realm, grant_view, grant_update, grant_delete.
+ *
+ * @return string|null
+ *   A string with a (short!) explanation of the given {node_access} row,
+ *   to be displayed in DNA's 'Devel Node Access' block. It will be displayed
+ *   as HTML; any variable parts must already be sanitized.
+ *
+ * @see hook_node_access_records()
+ * @see devel_node_access_node_access_explain()
+ *
+ * @ingroup node_access
+ */
+function hook_node_access_explain($row) {
+  if ($row->realm == 'mymodule_myrealm') {
+    if ($row->grant_view) {
+      /** @var \Drupal\user\RoleInterface $role */
+      $role = \Drupal\user\Entity\Role::load($row->gid);
+      return t('Role %role may view this node.', array('%role' => $role->get('name')));
+    }
+    else {
+      return 'No access.';
+    }
+  }
+  return null;
+}
+
+/**
+ * Acknowledge ownership of 'alien' grant records.
+ *
+ * Some node access modules store grant records directly into the {node_access}
+ * table rather than returning them through hook_node_access_records(). This
+ * practice is not recommended and DNA will flag all such records as 'alien'.
+ *
+ * If this is unavoidable, a module can confess to being the owner of these
+ * grant records, so that DNA can properly attribute them.
+ *
+ * @see hook_node_access_records()
+ *
+ * @ingroup node_access
+ */
+function hook_node_access_acknowledge($grant) {
+  if ($grant['realm'] == 'mymodule_all' && $grant['nid'] == 0) {
+    return TRUE;
+  }
+  return NULL;
+}
+
+/**
+ * @} End of "addtogroup hooks".
+ */
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.info.yml b/modules/contrib/devel/devel_node_access/devel_node_access.info.yml
new file mode 100644
index 0000000..7ddbee7
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.info.yml
@@ -0,0 +1,16 @@
+type: module
+name: 'Devel Node Access'
+description: 'Developer blocks and page illustrating relevant node_access records.'
+package: Development
+# core: 8.x
+dependencies:
+ - devel
+ - menu_ui
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.install b/modules/contrib/devel/devel_node_access/devel_node_access.install
new file mode 100644
index 0000000..ef2508f
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.install
@@ -0,0 +1,7 @@
+<?php
+
+/**
+ * @file
+ * Install, update and uninstall functions for the Devel Node Access module.
+ */
+
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.js b/modules/contrib/devel/devel_node_access/devel_node_access.js
new file mode 100644
index 0000000..064b8f2
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.js
@@ -0,0 +1,64 @@
+/**
+ * @file devel_node_access.js.
+ */
+
+(function ($) {
+
+  /**
+   * Perform the access by user ajax request.
+   */
+  function devel_node_access_user_ajax(context, settings) {
+    // Get the cell ID for the first .dna-permission that isn't processed.
+    var cell = $('td.dna-permission', context)
+               .not('.ajax-processed', context)
+               .attr('id');
+    if (cell !== undefined) {
+      // Generate the URI from the basePath, path, data type, cell ID, and a
+      // random token to bypass caching.
+      var url = settings.path.basePath
+              + "?q="
+              + 'devel/node_access/by_user/json/'
+              + cell
+              + '/'
+              + Math.floor((1000000000 * Math.random())).toString(16);
+      // Execute Ajax callback and handle the response.
+      $.getJSON(url, function(data) {
+        $('#' + cell, context).html(data).addClass('ajax-processed');
+        // Call this function again.
+        devel_node_access_user_ajax(context);
+      });
+      // Ajax fails silently on error, mark bad requests with an error message.
+      // If the request is just slow this will update when the request succeeds.
+      setTimeout(
+        function() {
+          if ($('#' + cell, context).hasClass('ajax-processed') == false) {
+            $('#' + cell, context)
+              .html(
+                '<span class="error">'
+                + '<a href="' + url.replace('/json/', '/html/') + '">'
+                + Drupal.t('Error: could not explain access')
+                + '</a>'
+                + '</span>'
+              )
+              .addClass('ajax-processed');
+            // Call this function again.
+            devel_node_access_user_ajax(context);
+          }
+        },
+        3000
+      );
+
+    }
+  }
+
+  /**
+   * Attach the access by user behavior which initiates ajax.
+   */
+  Drupal.behaviors.develNodeAccessUserAjax = {
+    attach: function(context, settings) {
+      // Start the ajax.
+      devel_node_access_user_ajax(context, settings);
+    }
+  };
+
+})(jQuery);
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.libraries.yml b/modules/contrib/devel/devel_node_access/devel_node_access.libraries.yml
new file mode 100644
index 0000000..061728a
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.libraries.yml
@@ -0,0 +1,7 @@
+devel_node_access:
+  version: 0
+  js:
+    devel_node_access.js: {}
+  css:
+    component:
+      css/devel_node_access.module.css: {}
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.module b/modules/contrib/devel/devel_node_access/devel_node_access.module
new file mode 100644
index 0000000..b88d213
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.module
@@ -0,0 +1,269 @@
+<?php
+/**
+ * @file
+ * This module gives developers feedback as to what their
+ * node_access table contains, and which nodes are protected or
+ * visible to the public.
+ */
+
+use Drupal\Core\Entity\Display\EntityViewDisplayInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\devel_node_access\Plugin\Block\DnaBlock;
+
+define('DNA_ACCESS_VIEW', 'view devel_node_access information');
+
+/**
+ * Implements hook_help().
+ *
+ * {@inheritdoc}
+ */
+function devel_node_access_help($route_name, \Drupal\Core\Routing\RouteMatchInterface $route_match) {
+  switch ($route_name) {
+    case 'help.page.devel_node_access':
+      $output  = '<p>' . t('This module helps in site development.  Specifically, when an access control module is used to limit access to some or all nodes, this module provides feedback showing the node_access table in the database.') . "</p>\n";
+      $output .= '<p>' . t('The node_access table is one method Drupal provides to hide content from some users while displaying it to others.  By default, Drupal shows all nodes to all users.  There are a number of optional modules which may be installed to hide content from specific users based on various criteria.') . "</p>\n";
+      $output .= '<p>' . t('If you have not installed any of these modules, you really have no need for the devel_node_access module.  This module is intended for use during development, so that developers and admins can confirm that the node_access table is working as expected.  You probably do not want this module enabled on a production site.') . "</p>\n";
+      $output .= '<p>' . t('To use this module, enable its Devel Node Access block in a wide region. The block shows the entries in the node_access table for any nodes on the current page, and it provides options to display much more information at the cost of some overhead (requires JavaScript).') . "</p>\n";
+//      $output .= '<p>' . t('This module also provides a <a href="@summary_page">summary page</a> which shows general information about your node_access table.  If you have installed the Views module, you may browse node_access by realm.',
+//                          array('@summary_page' => url('devel/node_access/summary'))
+//                          ) . "</p>\n";
+      return $output;
+  }
+  return NULL;
+}
+
+/**
+ * Implements hook_menu().
+ */
+function devel_node_access_menu() {
+  $items = array();
+
+  if (!\Drupal::moduleHandler()->moduleExists('devel')) {
+    // We have to create the 'Devel settings' menu item ourselves.
+    $items['admin/config/development/devel'] = array(
+      'title'            => 'Devel settings',
+      'description'      => 'Helper pages and blocks to assist Drupal developers and admins with node_access. The devel blocks can be managed via the <a href="' . url('admin/structure/block') . '">block administration</a> page.',
+      'page callback'    => 'drupal_get_form',
+      'page arguments'   => array('devel_node_access_admin_settings'),
+      'access arguments' => array('administer site configuration'),
+    );
+    $items['devel/settings'] = $items['admin/config/development/devel'] + array(
+      'menu_name' => 'devel',
+    );
+  }
+
+  // Create a callback for use by devel_node_access_user_ajax().
+  $items['devel/node_access/by_user/%/%'] = array(
+    'page callback'    => 'devel_node_access_user_ajax',
+    'page arguments'   => array(3, 4),
+    'access arguments' => array(DNA_ACCESS_VIEW),
+    'type'             => MENU_CALLBACK,
+  );
+
+  // Add this to the custom menu 'devel' created by the devel module.
+  $items['devel/node_access/summary'] = array(
+    'title'            => 'Node_access summary',
+    'page callback'    => 'dna_summary',
+    'access arguments' => array(DNA_ACCESS_VIEW),
+    'menu_name'        => 'devel',
+  );
+
+  return $items;
+}
+
+/**
+ * Builds the DNA Summary page.
+ */
+function dna_summary() {
+  // Warn user if they have any entries that could grant access to all nodes.
+  $output = '';
+  $result = db_query('SELECT DISTINCT realm FROM {node_access} WHERE nid = 0 AND gid = 0');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array($row->realm);
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to All Nodes (All Users)') . "</h3>\n";
+    $output .= '<p>' . t('Your node_access table contains entries that may be granting all users access to all nodes.  Depending on which access control module(s) you use, you may want to delete these entries.  If you are not using an access control module, you should probably leave these entries as is.') . "</p>\n";
+    $headers = array(t('realm'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows));
+    $access_granted_to_all_nodes = TRUE;
+  }
+
+  // How many nodes are not represented in the node_access table?
+  $num = db_query('SELECT COUNT(n.nid) AS num_nodes FROM {node} n LEFT JOIN {node_access} na ON n.nid = na.nid WHERE na.nid IS NULL')->fetchField();
+  if ($num) {
+    $output .= '<h3>' . t('Legacy Nodes') . "</h3>\n";
+    $output .= '<p>' .
+      t('You have !num nodes in your node table which are not represented in your node_access table.  If you have an access control module installed, these nodes may be hidden from all users.  This could be caused by publishing nodes before enabling the access control module.  If this is the case, manually updating each node should add it to the node_access table and fix the problem.', array('!num' => l($num, 'devel/node_access/view/NULL')))
+      . "</p>\n";
+    if (!empty($access_granted_to_all_nodes)) {
+      $output .= '<p>' .
+        t('This issue may be masked by the one above, so look into the former first.')
+        . "</p>\n";
+    }
+  }
+  else {
+    $output .= '<h3>' . t('All Nodes Represented') . "</h3>\n";
+    $output .= '<p>' . t('All nodes are represented in the node_access table.') . "</p>\n";
+  }
+
+
+  // A similar warning to the one above, but slightly more specific.
+  $result = db_query('SELECT DISTINCT realm FROM {node_access} WHERE nid = 0 AND gid <> 0');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array($row->realm);
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to All Nodes (Some Users)') . "</h3>\n";
+    $output .= '<p>' . t('Your node_access table contains entries that may be granting some users access to all nodes.  This may be perfectly normal, depending on which access control module(s) you use.') . "</p>\n";
+    $headers = array(t('realm'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows));
+  }
+
+
+  // Find specific nodes which may be visible to all users.
+  $result = db_query('SELECT DISTINCT realm, COUNT(DISTINCT nid) as node_count FROM {node_access} WHERE gid = 0 AND nid > 0 GROUP BY realm');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array(
+      $row->realm,
+      array(
+        'data'  => $row->node_count,
+        'align' => 'center',
+      ),
+    );
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to Some Nodes') . "</h3>\n";
+    $output .= '<p>' .
+      t('The following realms appear to grant all users access to some specific nodes. This may be perfectly normal, if some of your content is available to the public.')
+      . "</p>\n";
+    $headers = array(t('realm'), t('public nodes'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows, 'caption' => t('Public Nodes')));
+  }
+
+
+  // Find specific nodes protected by node_access table.
+  $result = db_query('SELECT DISTINCT realm, COUNT(DISTINCT nid) as node_count FROM {node_access} WHERE gid <> 0 AND nid > 0 GROUP BY realm');
+  $rows = array();
+  foreach ($result as $row) {
+    // No Views yet:
+    //$rows[] = array(l($row->realm, "devel/node_access/view/$row->realm"),
+    $rows[] = array(
+      $row->realm,
+      array(
+        'data' => $row->node_count,
+        'align' => 'center',
+      ),
+    );
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Summary by Realm') . "</h3>\n";
+    $output .= '<p>' . t('The following realms grant limited access to some specific nodes.') . "</p>\n";
+    $headers = array(t('realm'), t('private nodes'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows, 'caption' => t('Protected Nodes')));
+  }
+
+  return $output;
+}
+
+/**
+ * Implements hook_node_view().
+ *
+ * {@inheritdoc}
+ */
+function devel_node_access_node_view(array &$build, EntityInterface $entity, EntityViewDisplayInterface $display, $view_mode) {
+  // Remember this node, for display in our block.
+  DnaBlock::visibleNodes($entity->id());
+}
+
+/**
+ * Callback function for Node Access by User block ajax.
+ */
+function devel_node_access_user_ajax($data_type, $cell) {
+  list($op, $nid, $uid) = explode('-', $cell);
+  $node = node_load($nid);
+  $account = user_load($uid);
+  $output = array(
+    '#theme' => 'dna_permission',
+    '#permission' => DnaBlock::explainAccess($op, $node, $account),
+  );
+  // JSON output for Ajax callbacks.
+  if ($data_type == 'json') {
+    drupal_json_output(drupal_render($output));
+    exit;
+  }
+  // HTML output for error message click-throughs.
+  if ($node) {
+    $node_title = l($node->title, 'node/' . $node->id());
+  }
+  else {
+    $node_title = t('unknown node %nid', array('%nid' => $nid));
+  }
+  drupal_set_title(
+    t(
+      'Devel Node Access: %op permission for !user on !node',
+      array(
+        '%op'   => $op,
+        '!user' => theme('username', array('account' => $account)),
+        '!node' => $node_title,
+      )
+    ),
+    PASS_THROUGH
+  );
+  return $output;
+}
+
+/**
+ * Implements hook_node_access_explain().
+ *
+ * {@inheritdoc}
+ */
+function devel_node_access_node_access_explain($row) {
+  if ($row->gid == 0 && $row->realm == 'all') {
+    foreach (array('view', 'update', 'delete') as $op) {
+      $gop = 'grant_' . $op;
+      if (!empty($row->$gop)) {
+        $ops[] = $op;
+      }
+    }
+    if (empty($ops)) {
+      return '(No access granted to ' . ($row->nid == 0 ? 'any nodes.)' : 'this node.)');
+    }
+    else {
+      return 'All users may ' . implode('/', $ops) . ($row->nid == 0 ? ' all nodes.' : ' this node.');
+    }
+  }
+  if (\Drupal::moduleHandler()->moduleExists('node_access_test')) {
+    switch ($row->realm) {
+      case 'node_access_test_author':
+        return "Author (uid=$row->gid) has full access.";
+      case 'node_access_test':
+        return "Users with the 'node test view' permission may view.";
+    }
+  }
+  return NULL;
+}
+
+/**
+ * Implements hook_theme().
+ */
+function devel_node_access_theme() {
+  return array(
+    'dna_permission' => array(
+      'variables'    => array(
+        'permission' => NULL,
+      ),
+    ),
+  );
+}
+
+/**
+ * Indicates whether user has a permission or not.
+ */
+function theme_dna_permission($variables) {
+  $permission = &$variables['permission'];
+  return '<span class="' . ($permission[0] ? 'ok' : 'error') . '" title="' . $permission[2] . '">' . $permission[1] . '</span>';
+}
diff --git a/modules/contrib/devel/devel_node_access/devel_node_access.permissions.yml b/modules/contrib/devel/devel_node_access/devel_node_access.permissions.yml
new file mode 100644
index 0000000..460479c
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/devel_node_access.permissions.yml
@@ -0,0 +1,4 @@
+view devel_node_access information:
+  title: 'Access DNA information'
+  description: 'View the node_access information block on node pages and the summary page.'
+  restrict access: TRUE
diff --git a/modules/contrib/devel/devel_node_access/src/Form/DnaForm.php b/modules/contrib/devel/devel_node_access/src/Form/DnaForm.php
new file mode 100644
index 0000000..b30e75b
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/src/Form/DnaForm.php
@@ -0,0 +1,140 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_node_access\Form\DnaForm.
+ */
+
+namespace Drupal\devel_node_access\Form;
+
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\devel_node_access\Plugin\Block\DnaBlock;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Defines the form to change the DNA settings.
+ */
+class DnaForm extends FormBase {
+
+  /**
+   * Constructs a new DnaForm object.
+   */
+  public function __construct() {
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_dna_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form['#attached'] = array(
+      'library' =>  array(
+        'devel_node_access/devel_node_access'
+      ),
+    );
+
+    $debug_mode = \Drupal::config('devel_node_access.settings')->get('debug_mode');
+    $by_user_mode = \Drupal::config('devel_node_access.settings')->get('by_user_mode');
+
+    $form['node_content'] = array(
+      '#prefix' => '<div id="devel-node-access-node-content-div">',
+      '#suffix' => '</div>',
+    );
+    $form['node_content'][0] = DnaBlock::buildNodeInfo($debug_mode);
+
+    $form['user_content'] = array(
+      '#prefix' => '<div id="devel-node-access-by-user-content-div">',
+      '#suffix' => '</div>',
+    );
+    if ($by_user_mode) {
+      $form['user_content'][0] =  DnaBlock::buildByUserInfo();
+    }
+
+    $form['setup'] = array(
+      '#markup' => t('Enable:'),
+      '#prefix' => '<div class="devel-node-access-inline">',
+      '#suffix' => '</div>',
+    );
+    $form['setup']['debug_mode'] = array(
+      '#type' => 'checkbox',
+      '#value' => $debug_mode,
+      '#prefix' => ' &nbsp; &nbsp; ',
+      '#title' => t('Debug Mode'),
+      '#ajax' => array(
+        'callback' => '::toggleDebugMode',
+        'wrapper' => 'devel-node-access-node-content-div',
+      ),
+      '#disabled' => TRUE,
+    );
+    $form['setup']['by_user_mode'] = array(
+      '#type' => 'checkbox',
+      '#value' => $by_user_mode,
+      '#prefix' => ' &nbsp; &nbsp; ',
+      '#title' => t('By-User Analysis (slow!)'),
+      '#ajax' => array(
+        'callback' => '::toggleByUserMode',
+        'wrapper' => 'devel-node-access-by-user-content-div',
+      ),
+      '#disabled' => TRUE,
+    );
+
+    return $form;
+  }
+
+  /**
+   * AJAX handler for form_state.
+   *
+   * @param array $form
+   *   An associative array containing the structure of the form.
+   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   *   The current state of the form.
+   *
+   * @return array
+   */
+  public function toggleDebugMode($form, FormStateInterface $form_state) {
+    $debug_mode = $form_state->getUserInput();
+    $debug_mode = !empty($debug_mode['debug_mode']);
+    \Drupal::configFactory()->getEditable('devel_node_access.settings')->set('debug_mode', $debug_mode)->save(TRUE);
+    $form['node_content'][0] = DnaBlock::buildNodeInfo($debug_mode);
+    return $form['node_content'];
+  }
+
+  /**
+   * AJAX handler for by_user_state.
+   *
+   * @param array $form
+   *   An associative array containing the structure of the form.
+   * @param \Drupal\Core\Form\FormStateInterface $form_state
+   *   The current state of the form.
+   *
+   * @return array
+   */
+  public function toggleByUserMode($form, FormStateInterface $form_state) {
+    $by_user_mode = $form_state->getUserInput();
+    $by_user_mode = !empty($by_user_mode['by_user_mode']);
+    \Drupal::configFactory()->getEditable('devel_node_access.settings')->set('by_user_mode', $by_user_mode)->save(TRUE);
+    $form['user_content'][0] = ($by_user_mode ? DnaBlock::buildByUserInfo() : []);
+    return $form['user_content'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+  }
+
+}
diff --git a/modules/contrib/devel/devel_node_access/src/Plugin/Block/DnaBlock.php b/modules/contrib/devel/devel_node_access/src/Plugin/Block/DnaBlock.php
new file mode 100644
index 0000000..7f7cfe1
--- /dev/null
+++ b/modules/contrib/devel/devel_node_access/src/Plugin/Block/DnaBlock.php
@@ -0,0 +1,1275 @@
+<?php
+/**
+ * @file
+ * Contains \Drupal\devel_node_access\Plugin\Block\DnaBlock.
+ */
+
+namespace Drupal\devel_node_access\Plugin\Block;
+
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\Component\Utility\Html;
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Annotation\Translation;
+use Drupal\Core\Block\Annotation\Block;
+use Drupal\Core\Block\BlockBase;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormBuilderInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Link;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\Core\Routing\RedirectDestinationTrait;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\Session\AnonymousUserSession;
+use Drupal\Core\Url;
+use Drupal\node\Entity\Node;
+use Drupal\user\Entity\Role;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+
+/**
+ * Provides the "Devel Node Access" block.
+ *
+ * @Block(
+ *   id = "devel_dna_block",
+ *   admin_label = @Translation("Devel Node Access"),
+ *   category = @Translation("Devel Node Access")
+ * )
+ */
+class DnaBlock extends BlockBase implements ContainerFactoryPluginInterface {
+
+  private $node_access = array('@node_access' => 'node_access');
+
+  use RedirectDestinationTrait;
+
+  /**
+   * The FormBuilder object.
+   *
+   * @var \Drupal\Core\Form\FormBuilderInterface
+   */
+  protected $formBuilder;
+
+  /**
+   * The Current User object.
+   *
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  protected $currentUser;
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * Constructs a new DnaBlock object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Session\AccountInterface $current_user
+   *   Current user.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $user_storage
+   *   The user storage.
+   * @param \Drupal\Core\Form\FormBuilderInterface $form_builder
+   *   The form builder service.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, AccountInterface $current_user, EntityStorageInterface $user_storage, FormBuilderInterface $form_builder) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+    $this->formBuilder = $form_builder;
+    $this->currentUser = $current_user;
+    $this->userStorage = $user_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    /** @noinspection PhpParamsInspection */
+    return new static(
+      $configuration,
+      $plugin_id,
+      $plugin_definition,
+      $container->get('current_user'),
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('form_builder')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function blockAccess(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, DNA_ACCESS_VIEW);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    $build['#cache'] = ['max-age' => 0];
+
+//    $headers = array(
+//      array('data' => t('node'), 'style' => 'text-align:right;'),
+//      array('data' => t('prio'), 'style' => 'text-align:right;'),
+//      t('status'),
+//      t('realm'),
+//      array('data' => t('gid'), 'style' => 'text-align:right;'),
+//      t('view'),
+//      t('update'),
+//      t('delete'),
+//      t('explained'),
+//    );
+//    $rows[] = array('data' => array(array('data' => 1, 'style' => 'background-color: red; color: blue'),
+//                                    "CACHE 5", 3, 4, 5));
+
+    if (empty(self::visibleNodes())) {
+      $request_uri = \Drupal::request()->getRequestUri();
+      if ($request_uri === '/' || $request_uri === '/node') {
+        $build['#markup'] = t('@node_access information is not available for the nodes on this page due to caching &mdash; flush your caches to display it.', $this->node_access);
+      }
+      return $build;
+    }
+
+    $build['#title'] = t('@node_access entries for nodes shown on this page', $this->node_access);
+//    $build['test_table'] = array(
+//      '#type' => 'table',
+//      '#header' => $headers,
+//      //      array(
+//      //        t('Column 0'),
+//      //        array('data' => t('Active'), 'colspan' => '2'),
+//      //        array('data' => t('Staged'), 'colspan' => '2'),
+//      //      ),
+//      '#rows' => $rows,
+//      '#empty' => $this->t('No records found!'),
+//      '#responsive' => FALSE,
+//      '#attributes' => array(
+//        'class'       => array(),
+//        'style'       => 'text-align: left;',
+//      ),
+//    );
+
+    $build['dna_form'] = $this->formBuilder->getForm('\Drupal\devel_node_access\Form\DnaForm');
+    return $build;
+  }
+
+  /**
+   * Builds and returns the node information.
+   *
+   * @param bool $debug_mode
+   *   The level of detail to include.
+   *
+   * @return array
+   */
+  public static function buildNodeInfo($debug_mode) {
+    global $user;
+
+    $visible_nodes = self::visibleNodes();
+    if (count($visible_nodes) == 0) {
+      return array();
+    }
+    else {
+      $single_nid = reset($visible_nodes);
+    }
+
+    // Find out whether our DnaUser block is active or not.
+    //dpm($blocks = \Drupal::entityTypeManager()->getStorage('block')->load());
+    $user_block_active = FALSE;
+    //foreach ($blocks as $block) {
+    //  if ($block->get('plugin') == 'devel_dna_user_block') {
+    //    $user_block_active = TRUE;
+    //  }
+    //}
+
+
+    // Include rows where nid == 0.
+    $nids = array_merge(array(0 => 0), $visible_nodes);
+    $query = \Drupal::database()->select('node_access', 'na');
+    $query
+      ->fields('na')
+      ->condition('na.nid', $nids, 'IN');
+    $query
+      ->orderBy('na.nid')
+      ->orderBy('na.realm')
+      ->orderBy('na.gid');
+    $nodes = Node::loadMultiple($nids);
+
+    if (!$debug_mode) {
+      $headers = array('node', 'realm', 'gid', 'view', 'update', 'delete', 'explained');
+      $rows = array();
+      foreach ($query->execute() as $row) {
+        $explained = \Drupal::moduleHandler()->invokeAll('node_access_explain', [$row]);
+        $node_title = self::get_node_title($nodes[$row->nid]);
+        $title_attribute = \Drupal::request()->getRequestUri();
+        if (Unicode::strlen($node_title) > 20) {
+          $title_attribute = $title_attribute . ': ' . $node_title;
+          $node_title = Unicode::substr($node_title, 0, 18) . '...';
+        }
+
+        $rows[]     = array(
+          (empty($row->nid) ? '0'
+            : Link::fromTextAndUrl(
+              $node_title,
+              Url::fromUri(
+                \Drupal::request()->getUri(),
+                [
+                  'fragment' => 'node-' . $row->nid,
+                  'attributes' => ['title' => $title_attribute]
+                ]
+              )
+            )
+          ),
+          $row->realm,
+          $row->gid,
+          $row->grant_view,
+          $row->grant_update,
+          $row->grant_delete,
+          implode('<br />', $explained),
+        );
+      }
+      $output[] = array(
+        '#theme'      => 'table',
+        '#header'     => $headers,
+        '#rows'       => $rows,
+        '#attributes' => array('style' => 'text-align: left'),
+      );
+    }
+    else {
+      $tr = 't';
+      $variables = array('!na' => '{node_access}');
+      $states = array(
+        'default'      => array(t('default'),      'ok',      t('Default record supplied by core in the absence of any other non-empty records; in !na.', $variables)),
+        'ok'           => array(t('ok'),           'ok',      t('Highest priority record; in !na.', $variables)),
+        'removed'      => array(t('removed'),      '',        t('Was removed in @func; not in !na.', $variables + array('@func' => 'hook_node_access_records_alter()'))),
+        'static'       => array(t('static'),       'ok',      t('Non-standard record in !na.', $variables)),
+        'unexpected'   => array(t('unexpected'),   'warning', t('The 0/all/0/... record applies to all nodes and all users -- usually it should not be present in !na if any node access module is active!')),
+        'ignored'      => array(t('ignored'),      'warning', t('Lower priority record; not in !na and thus ignored.', $variables)),
+        'empty'        => array(t('empty'),        'warning', t('Does not grant any access, but could block lower priority records; not in !na.', $variables)),
+        'wrong'        => array(t('wrong'),        'error',   t('Is rightfully in !na but at least one access flag is wrong!', $variables)),
+        'missing'      => array(t('missing'),      'error',   t("Should be in !na but isn't!", $variables)),
+        'removed!'     => array(t('removed!'),     'error',   t('Was removed in @func; should NOT be in !na!', $variables + array('@func' => 'hook_node_access_records_alter()'))),
+        'illegitimate' => array(t('illegitimate'), 'error',   t('Should NOT be in !na because of lower priority!', $variables)),
+        'alien'        => array(t('alien'),        'error',   t('Should NOT be in !na because of unknown origin!', $variables)),
+      );
+      $active_states = array('default', 'ok', 'static', 'unexpected', 'wrong', 'illegitimate', 'alien');
+      $headers = array(t('node'), t('prio'), t('status'), t('realm'), t('gid'), t('view'), t('update'), t('delete'), t('explained'));
+      $headers = self::format_row($headers);
+      $active_records = array();
+      foreach ($query->execute() as $active_record) {
+        $active_records[$active_record->nid][$active_record->realm][$active_record->gid] = $active_record;
+      }
+      $all_records = $grants_data = $checked_grants = $grants = array();
+
+      foreach (array('view', 'update', 'delete') as $op) {
+        $grants[$op] = self::simulate_module_invoke_all('node_grants', $user, $op);
+        // Call all hook_node_grants_alter() implementations.
+        $grants_data[$op] = self::simulate_node_grants_alter($grants[$op], $user, $op);
+      }
+
+      foreach ($nids as $nid) {
+        $top_priority = -99999;
+        $acquired_records_nid = array();
+        if ($node = Node::load($nid)) {
+          // Check node_access_acquire_grants().
+          $records = self::simulate_module_invoke_all('node_access_records', $node);
+          // Check drupal_alter('node_access_records').
+          $data = self::simulate_node_access_records_alter($records, $node);
+          if (!empty($data)) {
+            foreach ($data as $data_by_realm) {
+              foreach ($data_by_realm as $data_by_realm_gid) {
+                if (isset($data_by_realm_gid['current'])) {
+                  $record = $data_by_realm_gid['current'];
+                }
+                elseif (isset($data_by_realm_gid['original'])) {
+                  $record = $data_by_realm_gid['original'];
+                  $record['#removed'] = 1;
+                }
+                else {
+                  continue;
+                }
+                $priority = intval(isset($record['priority']) ? $record['priority'] : 0);
+                $top_priority = (isset($top_priority) ? max($top_priority, $priority) : $priority);
+                $record['priority'] = (isset($record['priority']) ? $priority : '&ndash;&nbsp;');
+                $record['history'] = $data_by_realm_gid;
+                $acquired_records_nid[$priority][$record['realm']][$record['gid']] = $record + array(
+                    '#title'  => self::get_node_title($node),
+                    '#module' => (isset($record['#module']) ? $record['#module'] : ''),
+                  );
+              }
+            }
+            krsort($acquired_records_nid);
+          }
+          //dpm($acquired_records_nid, "acquired_records_nid =");
+
+          // Check node_access_grants().
+          if ($node->id()) {
+            foreach (array('view', 'update', 'delete') as $op) {
+              $checked_grants[$nid][$op] = array_merge(array('all' => array(0)), $grants[$op]);
+            }
+          }
+        }
+
+        // Check for records in the node_access table that aren't returned by
+        // node_access_acquire_grants().
+
+        if (isset($active_records[$nid])) {
+          foreach ($active_records[$nid] as $realm => $active_records_realm) {
+            foreach ($active_records_realm as $gid => $active_record) {
+              $found = FALSE;
+              $count_nonempty_records = 0;
+              foreach ($acquired_records_nid as $priority => $acquired_records_nid_priority) {
+                if (isset($acquired_records_nid_priority[$realm][$gid])) {
+                  $found = TRUE;
+                }
+              }
+              // Take the highest priority only.
+              // TODO This has changed in D8!
+              if ($acquired_records_nid_priority = reset($acquired_records_nid)) {
+                foreach ($acquired_records_nid_priority as $acquired_records_nid_priority_realm) {
+                  foreach ($acquired_records_nid_priority_realm as $acquired_records_nid_priority_realm_gid) {
+                    $count_nonempty_records += (!empty($acquired_records_nid_priority_realm_gid['grant_view']) || !empty($acquired_records_nid_priority_realm_gid['grant_update']) || !empty($acquired_records_nid_priority_realm_gid['grant_delete']));
+                  }
+                }
+              }
+              $fixed_record = (array) $active_record;
+              if ($count_nonempty_records == 0 && $realm == 'all' && $gid == 0) {
+                $fixed_record += array(
+                  'priority' => '&ndash;',
+                  'state'    => 'default',
+                );
+              }
+              elseif (!$found) {
+                $acknowledged = self::simulate_module_invoke_all('node_access_acknowledge', $fixed_record);
+                if (empty($acknowledged)) {
+                  // No module acknowledged this record, mark it as alien.
+                  $fixed_record += array(
+                    'priority' => '?',
+                    'state'    => 'alien',
+                  );
+                }
+                else {
+                  // At least one module acknowledged the record,
+                  // attribute it to the first one.
+                  $fixed_record += array(
+                    'priority' => '&ndash;',
+                    'state'    => 'static',
+                    '#module'  => reset(array_keys($acknowledged)),
+                  );
+                }
+              }
+              else {
+                continue;
+              }
+              $fixed_record += array(
+                'nid'    => $nid,
+                '#title' => self::get_node_title($node),
+              );
+              $all_records[] = $fixed_record;
+            }
+          }
+        }
+
+        // Order records and evaluate their status.
+        foreach ($acquired_records_nid as $priority => $acquired_records_priority) {
+          ksort($acquired_records_priority);
+          foreach ($acquired_records_priority as $realm => $acquired_records_realm) {
+            ksort($acquired_records_realm);
+            foreach ($acquired_records_realm as $gid => $acquired_record) {
+              // TODO: Handle priority.
+              //if ($priority == $top_priority) {
+              if (empty($acquired_record['grant_view']) && empty($acquired_record['grant_update']) && empty($acquired_record['grant_delete'])) {
+                $acquired_record['state'] = 'empty';
+              }
+              else {
+                if (isset($active_records[$nid][$realm][$gid])) {
+                  $acquired_record['state'] = (isset($acquired_record['#removed']) ? 'removed!' : 'ok');
+                }
+                else {
+                  $acquired_record['state'] = (isset($acquired_record['#removed']) ? 'removed' : 'missing');
+                }
+                if ($acquired_record['state'] == 'ok') {
+                  foreach (array('view', 'update', 'delete') as $op) {
+                    $active_record = (array) $active_records[$nid][$realm][$gid];
+                    if (empty($acquired_record["grant_$op"]) != empty($active_record["grant_$op"])) {
+                      $acquired_record["grant_$op!"] = $active_record["grant_$op"];
+                    }
+                  }
+                }
+              }
+              //}
+              //else {
+              //  $acquired_record['state'] = (isset($active_records[$nid][$realm][$gid]) ? 'illegitimate' : 'ignored');
+              //}
+              $all_records[] = $acquired_record + array('nid' => $nid);
+            }
+          }
+        }
+      }
+
+      // Fill in the table rows.
+      $rows = array();
+      $error_count = 0;
+      foreach ($all_records as $record) {
+        $row = new \stdClass();
+        $row->nid = $record['nid'];
+        $row->title = $record['#title'];
+        $row->priority = $record['priority'];
+        $row->state = array('data' => $states[$record['state']][0], 'title' => $states[$record['state']][2]);
+        $row->realm = $record['realm'];
+        $row->gid = $record['gid'];
+        $row->grant_view = $record['grant_view'];
+        $row->grant_update = $record['grant_update'];
+        $row->grant_delete = $record['grant_delete'];
+        $row->explained = implode('<br />', \Drupal::moduleHandler()->invokeAll('node_access_explain', $row));
+        unset($row->title);
+        if ($row->nid == 0 && $row->gid == 0 && $row->realm == 'all' && count($all_records) > 1) {
+          $row->state = array('data' => $states['unexpected'][0], 'title' => $states['unexpected'][2]);
+          $class = $states['unexpected'][1];
+        }
+        else {
+          $class = $states[$record['state']][1];
+        }
+        $row = (array) $row;
+        foreach (array('view', 'update', 'delete') as $op) {
+          $row["grant_$op"] = array('data' => $row["grant_$op"]);
+          if ((isset($checked_grants[$record['nid']][$op][$record['realm']]) && in_array($record['gid'], $checked_grants[$record['nid']][$op][$record['realm']]) || ($row['nid'] == 0 && $row['gid'] == 0 && $row['realm'] == 'all')) && !empty($row["grant_$op"]['data']) && in_array($record['state'], $active_states)) {
+            $row["grant_$op"]['data'] .= '&prime;';
+            $row["grant_$op"]['title'] = t('This entry grants access to this node to this user.');
+          }
+          if (isset($record["grant_$op!"])) {
+            $row["grant_$op"]['data'] = $record["grant_$op!"] . '&gt;' . (!$row["grant_$op"]['data'] ? 0 : $row["grant_$op"]['data']);
+            $row["grant_$op"]['class'][] = 'error';
+            if ($class == 'ok') {
+              $row['state'] = array('data' => $states['wrong'][0], 'title' => $states['wrong'][2]);
+              $class = $states['wrong'][1];
+            }
+          }
+        }
+        $error_count += ($class == 'error');
+        $row['nid'] = array(
+          'data'  => '<a href="#node-' . $record['nid'] . '">' . $row['nid'] . '</a>',
+          'title' => $record['#title'],
+        );
+        if (empty($record['#module']) || strpos($record['realm'], $record['#module']) === 0) {
+          $row['realm'] = $record['realm'];
+        }
+        else {
+          $row['realm'] = array(
+            'data' => '(' . $record['#module'] . '::) ' . $record['realm'],
+            'title' => t("The '@module' module fails to adhere to the best practice of naming its realm(s) after itself.", array('@module' => $record['#module'])),
+          );
+        }
+
+        // Prepend information from the D7 hook_node_access_records_alter().
+        $next_style = array();
+        if (isset($record['history'])) {
+          $history = $record['history'];
+          if (($num_changes = count($history['changes']) - empty($history['current'])) > 0) {
+            $first_row = TRUE;
+            while (isset($history['original']) || $num_changes--) {
+              if (isset($history['original'])) {
+                $this_record = $history['original'];
+                $this_action = '[ Original by ' . $this_record['#module'] . ':';
+                unset($history['original']);
+              }
+              else {
+                $change = $history['changes'][0];
+                $this_record = $change['record'];
+                $this_action = ($first_row ? '[ ' : '') . $change['op'] . ':';
+                array_shift($history['changes']);
+              }
+              $rows[] = array(
+                'data'  => array(
+                  'data'  => array(
+                    'data'    => $this_action,
+                    'style'   => array('padding-bottom: 0;'),
+                  ),
+                ),
+                'style' => array_merge(($first_row ? array() : array('border-top-style: dashed;', 'border-top-width: 1px;')), array('border-bottom-style: none;')),
+              );
+              $next_style = array('border-top-style: none;');
+              if (count($history['changes'])) {
+                $g = $this_record;
+                $rows[] = array(
+                  'data'  => array('v', $g['priority'], '', $g['realm'], $g['gid'], $g['grant_view'], $g['grant_update'], $g['grant_delete'], 'v'),
+                  'style' => array('border-top-style: none;', 'border-bottom-style: dashed;'),
+                );
+                $next_style = array('border-top-style: dashed;');
+              }
+              $first_row = FALSE;
+            }
+          }
+        }
+
+        // Fix up the main row cells with the proper class (needed for Bartik).
+        foreach ($row as $key => $value) {
+          if (!is_array($value)) {
+            $row[$key] = array('data' => $value);
+          }
+          $row[$key]['class'] = array($class);
+        }
+        // Add the main row.
+        $will_append = empty($history['current']) && !empty($history['changes']);
+        $rows[] = array(
+          'data'  => array_values($row),
+          'class' => array($class),
+          'style' => array_merge($next_style, ($will_append ? array('border-bottom-style: none;') : array())),
+        );
+
+        // Append information from the D7 hook_node_access_records_alter().
+        if ($will_append) {
+          $last_change = end($history['changes']);
+          $rows[] = array(
+            'data'  => array(
+              'data'  => array(
+                'data'    => $last_change['op'] . ' ]',
+                'style' => array('padding-top: 0;'),
+              ),
+            ),
+            'style' => array('border-top-style: none;'),
+          );
+        }
+      }
+
+      foreach ($rows as $i => $row) {
+        $rows[$i] = self::format_row($row);
+      }
+
+      $output[] = array(
+        '#theme'      => 'table',
+        '#header'     => $headers,
+        '#rows'       => $rows,
+        '#attributes' => array(
+          'class'       => array('system-status-report'),
+          'style'       => 'text-align: left;',
+        ),
+      );
+
+      $output[] = array(
+        '#theme'       => 'form_element',
+        '#description' => t('(Some of the table elements provide additional information if you hover your mouse over them.)'),
+      );
+
+      if ($error_count > 0) {
+        $variables['!Rebuild_permissions'] = '<a href="' . url('admin/reports/status/rebuild') . '">' . $tr('Rebuild permissions') . '</a>';
+        $output[] = array(
+          '#prefix' => "\n<span class=\"error\">",
+          '#markup' => t("You have errors in your !na table! You may be able to fix these for now by running !Rebuild_permissions, but this is likely to destroy the evidence and make it impossible to identify the underlying issues. If you don't fix those, the errors will probably come back again. <br /> DON'T do this just yet if you intend to ask for help with this situation.", $variables),
+          '#suffix' => "</span><br />\n",
+        );
+      }
+
+      // Explain whether access is granted or denied, and why
+      // (using code from node_access()).
+      $tr = 't';
+      array_shift($nids);  // Remove the 0.
+      $accounts = array();
+      $variables += array(
+        //'!username' => '<em class="placeholder">' . theme('username', array('account' => $user)) . '</em>',
+        '!username' => '<em class="placeholder">' . $user->getDisplayName() . '</em>',
+        '%uid'      => $user->id(),
+      );
+
+      if (\Drupal::currentUser()->hasPermission('bypass node access')) {
+        $variables['%bypass_node_access'] = $tr('bypass node access');
+        $output[] = array(
+          '#markup' => t('!username has the %bypass_node_access permission and thus full access to all nodes.', $variables),
+          '#suffix' => '<br />&nbsp;',
+        );
+      }
+      else {
+        $variables['!list'] = '<div style="margin-left: 2em">' . self::get_grant_list($grants_data['view']) . '</div>';
+        $variables['%access'] = 'view';
+        $output[] = array(
+          '#prefix' => "\n<div style='text-align: left' title='" . t('These are the grants returned by hook_node_grants() for this user.') . "'>",
+          '#markup' => t('!username (user %uid) can use these grants (if they are present above) for %access access: !list', $variables),
+          '#suffix' => "</div>\n",
+        );
+        $accounts[] = $user;
+      }
+
+      if (isset($single_nid) && !$user_block_active) {
+        // Only for single nodes.
+        if (\Drupal::currentUser()->isAuthenticated()) {
+          $accounts[] = User::load(0);  // Anonymous, too.
+        }
+        foreach ($accounts as $account) {
+          $nid_items = array();
+          foreach ($nids as $nid) {
+            $op_items = array();
+            foreach (array('create', 'view', 'update', 'delete') as $op) {
+              $explain = self::explainAccess($op, Node::load($nid), $account);
+              $op_items[] = "<div style='width: 5em; display: inline-block'>" . t('%op:', array('%op' => $op)) . ' </div>' . $explain[2];
+            }
+            $nid_items[] = array(
+              '#theme'  => 'item_list',
+              '#items'  => $op_items,
+              '#type'   => 'ul',
+              '#prefix' => t('to node !nid:', array('!nid' => l($nid, 'node/' . $nid))) . "\n<div style='margin-left: 2em'>",
+              '#suffix' => '</div>',
+            );
+          }
+          if (count($nid_items) == 1) {
+            $account_items = $nid_items[0];
+          }
+          else {
+            $account_items = array(
+              '#theme'  => 'item_list',
+              '#items'  => $nid_items,
+              '#type'   => 'ul',
+              '#prefix' => "\n<div style='margin-left: 2em'>",
+              '#suffix' => '</div>',
+            );
+          }
+          $variables['!username'] = '<em class="placeholder">' . theme('username', array('account' => $account)) . '</em>';
+          $output[] = array(
+            '#prefix' => "\n<div style='text-align: left'>",
+            '#type'   => 'item',
+            'lead-in' => array('#markup' => t("!username has the following access", $variables) . ' '),
+            'items'   => $account_items,
+            '#suffix' => "\n</div>\n",
+          );
+        }
+      }
+    }
+
+    return $output;
+  }
+
+  /**
+   * Builds and returns the by-user information.
+   *
+   * @return array|null
+   */
+  public static function buildByUserInfo() {
+    global $user;
+
+    $output = array();
+    return $output;
+
+    // Show which users can access this node.
+    $menu_item = menu_get_item();
+    $map = $menu_item['original_map'];
+    if ($map[0] != 'node' || !isset($map[1]) || !is_numeric($map[1]) || isset($map[2])) {
+      // Ignore anything but node/%.
+      return NULL;
+    }
+
+    if (isset($menu_item['map'][1]) && is_object($node = $menu_item['map'][1])) {
+      // We have the node.
+    }
+    elseif (is_numeric($menu_item['original_map'][1])) {
+      $node = node_load($menu_item['original_map'][1]);
+    }
+    if (isset($node)) {
+      $nid = $node->id();
+      $langcode = $node->langcode->value;
+      $language = language_load($langcode);
+      $node_type = node_type_load($node->bundle());
+      $headers = array(t('username'), '<span title="' . t("Create '@langname'-language nodes of the '@Node_type' type.", array('@langname' => $language->name, '@Node_type' => $node_type->name)) . '">' . t('create') . '</span>', t('view'), t('update'), t('delete'));
+      $rows = array();
+      // Determine whether to use Ajax or pre-populate the tables.
+      if ($ajax = \Drupal::config('devel_node_access.settings')->get('user_ajax')) {
+        $output['#attached']['library'][] = 'devel_node_access/node_access';
+      }
+      // Find all users. The following operations are very inefficient, so we
+      // limit the number of users returned.  It would be better to make a
+      // pager query, or at least make the number of users configurable.  If
+      // anyone is up for that please submit a patch.
+      $query = db_select('users', 'u')
+        ->fields('u', array('uid'))
+        ->orderBy('u.access', 'DESC')
+        ->range(0, 9);
+      $uids = $query->execute()->fetchCol();
+      array_unshift($uids, 0);
+      $accounts = user_load_multiple($uids);
+      foreach ($accounts as $account) {
+        $username = theme('username', array('account' => $account));
+        $uid = $account->id();
+        if ($uid == $user->id()) {
+          $username = '<strong>' . $username . '</strong>';
+        }
+        $rows[] = array(
+          $username,
+          array(
+            'id' => 'create-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explainAccess('create', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'view-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explainAccess('view', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'update-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explainAccess('update', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'delete-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explainAccess('delete', $node, $account, $langcode))),
+          ),
+        );
+      }
+      if (count($rows)) {
+        $output['title'] = array(
+          '#prefix' => '<h2>',
+          '#markup' => t('Access permissions by user for the %langname language', array('%langname' => $language->name)),
+          '#postfix' => '</h2>',
+        );
+        $output[] = array(
+          '#theme'      => 'table',
+          '#header'     => $headers,
+          '#rows'       => $rows,
+          '#attributes' => array('style' => 'text-align: left'),
+        );
+        $output[] = array(
+          '#theme'        => 'form_element',
+          '#description'  => t('(This table lists the most-recently active users. Hover your mouse over each result for more details.)'),
+        );
+      }
+    }
+    return $output;
+  }
+
+  /**
+   * Helper function to mimic \Drupal::moduleHandler()->invokeAll() and include
+   * the name of the responding module(s).
+   *
+   * @param $hook
+   *   The name of the hook.
+   *
+   * @return array
+   *   An array of results.
+   *   In the case of scalar results, the array is keyed by the name of the
+   *   modules that returned the result (rather than by numeric index), and
+   *   in the case of array results, a '#module' key is added.
+   */
+  private static function simulate_module_invoke_all($hook) {
+    $args = func_get_args();
+    // Remove $hook from the arguments.
+    array_shift($args);
+    $return = array();
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      $function = $module . '_' . $hook;
+      $result = call_user_func_array($function, $args);
+      if (isset($result)) {
+        if (is_array($result)) {
+          foreach ($result as $key => $value) {
+            // Add name of module that returned the value.
+            $result[$key]['#module'] = $module;
+          }
+        }
+        else {
+          // Build array with result keyed by $module.
+          $result = array($module => $result);
+        }
+        $return = \Drupal\Component\Utility\NestedArray::mergeDeep($return, $result);
+      }
+    }
+    return $return;
+  }
+
+  /**
+   * Helper function to mimic hook_node_access_records_alter() and trace what
+   * each module does with it.
+   *
+   * @param array $records
+   *   An indexed array of NA records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_access_records').
+   *   This array is updated by the hook_node_access_records_alter()
+   *   implementations.
+   * @param $node
+   *   The node that the NA records belong to.
+   *
+   * @return array
+   *   A tree representation of the NA records in $records including their
+   *   history:
+   *   $data[$realm][$gid]
+   *     ['original']  - NA record before processing
+   *     ['current']   - NA record after processing (if still present)
+   *     ['changes'][]['op']     - change message (add/change/delete by $module)
+   *                  ['record'] - NA record after change (unless deleted)
+   */
+  private static function simulate_node_access_records_alter(&$records, $node) {
+    //dpm($records, 'simulate_node_access_records_alter(): records IN');
+    $hook = 'node_access_records_alter';
+
+    // Build the initial tree (and check for duplicates).
+    $data = self::build_node_access_records_data($records, $node, 'hook_node_access_records()');
+
+    // Simulate drupal_alter('node_access_records', $records, $node).
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      // Call hook_node_access_records_alter() for one module at a time
+      // and analyze.
+      $function = $module . '_' . $hook;
+      $function($records, $node);
+
+      foreach ($records as $i => $record) {
+        if (empty($data[$record['realm']][$record['gid']]['current'])) {
+          // It's an added record.
+          $data[$record['realm']][$record['gid']]['current'] = $record;
+          $data[$record['realm']][$record['gid']]['current']['#module'] = $module;
+          $data[$record['realm']][$record['gid']]['changes'][] = array(
+            'op'     => 'added by ' . $module,
+            'record' => $record,
+          );
+          $records[$i]['#module'] = $module;
+        }
+        else {
+          // It's an existing record, check for changes.
+          $view = $update = $delete = FALSE;
+          foreach (array('view', 'update', 'delete') as $op) {
+            $$op = $record["grant_$op"] - $data[$record['realm']][$record['gid']]['current']["grant_$op"];
+          }
+          $old_priority = isset($record['priority']) ? $record['priority'] : 0;
+          $new_priority = isset($data[$record['realm']][$record['gid']]['current']['priority']) ? $data[$record['realm']][$record['gid']]['current']['priority'] : 0;
+          if ($view || $update || $delete || $old_priority != $new_priority) {
+            // It was changed.
+            $data[$record['realm']][$record['gid']]['current'] = $record;
+            $data[$record['realm']][$record['gid']]['current']['#module'] = $module;
+            $data[$record['realm']][$record['gid']]['changes'][] = array(
+              'op'     => 'altered by ' . $module,
+              'record' => $record,
+            );
+            $records[$i]['#module'] = $module;
+          }
+        }
+        $data[$record['realm']][$record['gid']]['found'] = TRUE;
+      }
+
+      // Check for newly introduced duplicates.
+      self::build_node_access_records_data($records, $node, 'hook_node_access_records_alter()');
+
+      // Look for records that have disappeared.
+      foreach ($data as $realm => $data2) {
+        foreach ($data2 as $gid => $data3) {
+          if (empty($data[$realm][$gid]['found']) && isset($data[$realm][$gid]['current'])) {
+            unset($data[$realm][$gid]['current']);
+            $data[$realm][$gid]['changes'][] = array('op' => 'removed by ' . $module);
+          }
+          else {
+            unset($data[$realm][$gid]['found']);
+          }
+        }
+      }
+    }
+    //dpm($data, 'simulate_node_access_records_alter() returns');
+    //dpm($records, 'simulate_node_access_records_alter(): records OUT');
+    return $data;
+  }
+
+  /**
+   * Helper function to build an associative array of node access records and
+   * their history. If there are duplicate records, display an error message.
+   *
+   * @param $records
+   *   An indexed array of node access records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_access_records').
+   * @param $node
+   *   The node that the NA records belong to.
+   * @param $function
+   *   The name of the hook that produced the records array, in case we need to
+   *   display an error message.
+   *
+   * @return array
+   *   See _devel_node_access_nar_alter() for the description of the result.
+   */
+  private static function build_node_access_records_data($records, $node, $function) {
+    $data = array();
+    $duplicates = array();
+    foreach ($records as $record) {
+      if (empty($data[$record['realm']][$record['gid']])) {
+        $data[$record['realm']][$record['gid']] = array('original' => $record, 'current' => $record, 'changes' => array());
+      }
+      else {
+        if (empty($duplicates[$record['realm']][$record['gid']])) {
+          $duplicates[$record['realm']][$record['gid']][] = $data[$record['realm']][$record['gid']]['original'];
+        }
+        $duplicates[$record['realm']][$record['gid']][] = $record;
+      }
+    }
+    if (!empty($duplicates)) {
+      // Generate an error message.
+      $msg = t('Devel Node Access has detected duplicate records returned from %function:', array('%function' => $function));
+      $msg .= '<ul>';
+      foreach ($duplicates as $realm => $data_by_realm) {
+        foreach ($data_by_realm as $gid => $data_by_realm_gid) {
+          $msg .= '<li><ul>';
+          foreach ($data_by_realm_gid as $record) {
+            $msg .= "<li>$node->id()/$realm/$gid/" . ($record['grant_view'] ? 1 : 0) . ($record['grant_update'] ? 1 : 0) . ($record['grant_delete'] ? 1 : 0) . ' by ' . $record['#module'] . '</li>';
+          }
+          $msg .= '</ul></li>';
+        }
+      }
+      $msg .= '</ul>';
+      drupal_set_message($msg, 'error', FALSE);
+    }
+    return $data;
+  }
+
+  /**
+   * Helper function to mimic hook_node_grants_alter() and trace what
+   * each module does with it.
+   *
+   * @param array $grants
+   *   An indexed array of grant records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_grants').
+   *   This array is updated by the hook_node_grants_alter()
+   *   implementations.
+   * @param $account
+   *   The user account requesting access to content.
+   * @param $op
+   *   The operation being performed, 'view', 'update' or 'delete'.
+   *
+   * @return array
+   *   A tree representation of the grant records in $grants including their
+   *   history:
+   *   $data[$realm][$gid]
+   *     ['cur']    - TRUE or FALSE whether the gid is present or not
+   *     ['ori'][]  - array of module names that contributed this grant (if any)
+   *     ['chg'][]  - array of changes, such as
+   *                     - 'added' if module name is a prefix if the $realm,
+   *                     - 'added by module' otherwise, or
+   *                     - 'removed by module'
+   */
+  private static function simulate_node_grants_alter(&$grants, $account, $op) {
+    //dpm($grants, "simulate_node_grants_alter($account->name, $op): grants IN");
+    $hook = 'node_grants_alter';
+
+    // Build the initial structure.
+    $data = array();
+    foreach ($grants as $realm => $gids) {
+      foreach ($gids as $i => $gid) {
+        if ($i !== '#module') {
+          $data[$realm][$gid]['cur'] = TRUE;
+          $data[$realm][$gid]['ori'][] = $gids['#module'];
+        }
+      }
+      unset($grants[$realm]['#module']);
+    }
+
+    // Simulate drupal_alter('node_grants', $grants, $account, $op).
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      // Call hook_node_grants_alter() for one module at a time and analyze.
+      $function = $module . '_' . $hook;
+      $function($grants, $account, $op);
+
+      // Check for new gids.
+      foreach ($grants as $realm => $gids) {
+        foreach ($gids as $i => $gid) {
+          if (empty($data[$realm][$gid]['cur'])) {
+            $data[$realm][$gid]['cur'] = TRUE;
+            $data[$realm][$gid]['chg'][] = 'added by ' . $module;
+          }
+        }
+      }
+
+      // Check for removed gids.
+      foreach ($data as $realm => $gids) {
+        foreach  ($gids as $gid => $history) {
+          if ($history['cur'] && array_search($gid, $grants[$realm]) === FALSE) {
+            $data[$realm][$gid]['cur'] = FALSE;
+            $data[$realm][$gid]['chg'][] = 'removed by ' . $module;
+          }
+        }
+      }
+    }
+
+    //dpm($data, "simulate_node_grants_alter($account->name, $op) returns");
+    //dpm($grants, "simulate_node_grants_alter($account->name, $op): grants OUT");
+    return $data;
+  }
+
+  /**
+   * Helper function to create a list of grants returned by hook_node_grants().
+   */
+  private static function get_grant_list($grants_data) {
+    //dpm($grants_data, "get_grant_list() IN:");
+    $grants_data = array_merge(array('all' => array(0 => array('cur' => TRUE, 'ori' => array('all')))), $grants_data);
+    $items = array();
+    if (count($grants_data)) {
+      foreach ($grants_data as $realm => $gids) {
+        ksort($gids);
+        $gs = array();
+        foreach ($gids as $gid => $history) {
+          if ($history['cur']) {
+            if (isset($history['ori'])) {
+              $g = $gid;                     // Original grant, still active.
+            }
+            else {
+              $g = '<u>' . $gid . '</u>';    // New grant, still active.
+            }
+          }
+          else {
+            $g = '<del>' . $gid . '</del>';  // Deleted grant.
+          }
+
+          $ghs = array();
+          if (isset($history['ori']) && strpos($realm, $history['ori'][0]) !== 0) {
+            $realm = '(' . $history['ori'][0] . '::) ' . $realm;
+          }
+          if (isset($history['chg'])) {
+            foreach ($history['chg'] as $h) {
+              $ghs[] = $h;
+            }
+          }
+          if (!empty($ghs)) {
+            $g .= ' (' . implode(', ', $ghs) . ')';
+          }
+          $gs[] = $g;
+        }
+        $items[] = $realm . ': ' . implode(', ', $gs);
+      }
+      if (!empty($items)) {
+        return theme('item_list', array('items' => $items, 'type' => 'ul'));
+      }
+    }
+    return '';
+  }
+
+  /**
+   * Helper function to return a sanitized node title.
+   */
+  private static function get_node_title(Node $node) {
+    if (isset($node)) {
+      $nid = $node->id();
+      if ($node_title = $node->getTitle()) {
+        return $node_title;
+      }
+      elseif ($nid) {
+        return $nid;
+      }
+    }
+    return '—';
+  }
+
+  /**
+   * Helper function to apply common formatting to a debug-mode table row.
+   */
+  private static function format_row($row, $may_unpack = TRUE) {
+    if ($may_unpack && isset($row['data'])) {
+      $row['data'] = self::format_row($row['data'], FALSE);
+      $row['class'][] = 'even';
+      return $row;
+    }
+    if (count($row) == 1) {
+      if (is_scalar($row['data'])) {
+        $row['data'] = array('data' => $row['data']);
+      }
+      $row['data']['colspan'] = 9;
+    }
+    else {
+      $row = array_values($row);
+      foreach (array(0, 1, 4) as $j) {  // node, prio, gid
+        if (is_scalar($row[$j])) {
+          $row[$j] = array('data' => $row[$j]);
+        }
+        dpm($j);
+        dpm($row);
+//        $row[$j]['style'][] = 'text-align: right;';
+      }
+    }
+    return $row;
+  }
+
+
+  /**
+   * Helper function that mimics node.module's node_access() function.
+   *
+   * Unfortunately, this needs to be updated manually whenever node.module
+   * changes!
+   *
+   * @param string $op
+   *   Operation to check.
+   * @param NodeInterface $node
+   *   Node to check.
+   * @param AccountInterface $account
+   *   (optional) The user object for the user whose access is being checked. If
+   *   omitted, the current user is used. Defaults to NULL.
+   * @param string $langcode
+   *   (optional) The language code for which access is being checked. If
+   *   omitted, the default language is used. Defaults to NULL.
+   *
+   * @return array
+   *   An array suitable for theming with theme_dna_permission().
+   */
+  public static function explainAccess($op, NodeInterface $node, AccountInterface $account = NULL, $langcode = NULL) {
+    $user = Drupal::currentUser();
+
+    if (!$node) {
+      return array(
+        FALSE,
+        '???',
+        t('No node passed to node_access(); this should never happen!'),
+      );
+    }
+    if (!in_array($op, array('view', 'update', 'delete', 'create'), TRUE)) {
+      return array(
+        FALSE,
+        t('!NO: invalid $op', array('!NO' => t('NO'))),
+        t("'@op' is an invalid operation!", array('@op' => $op)),
+      );
+    }
+
+    if ($op == 'create' && is_object($node)) {
+      $node = $node->bundle();
+    }
+
+    if (!empty($account)) {
+      // To try to get the most authentic result we impersonate the given user!
+      // This may reveal bugs in other modules, leading to contradictory
+      // results.
+      /* @var \Drupal\Core\Session\AccountSwitcherInterface $account_switcher */
+      $account_switcher = Drupal::service('account_switcher');
+      $account_switcher->switchTo($account);
+      $result = DnaBlock::explainAccess($op, $node, NULL, $langcode);
+      $account_switcher->switchBack();
+      $access_handler = Drupal::entityTypeManager()->getAccessControlHandler('node');
+      $second_opinion = $access_handler->access($node, $op, $account);
+      if ($second_opinion != $result[0]) {
+        $result[1] .= '<span class="' . ($second_opinion ? 'ok' : 'error') . '" title="Core seems to disagree on this item. This is a bug in either DNA or Core and should be fixed! Try to look at this node as this user and check whether there is still disagreement.">*</span>';
+      }
+      return $result;
+    }
+
+    if (empty($langcode)) {
+      $langcode = (is_object($node) && $node->id()) ? $node->language()->getId() : '';
+    }
+
+    $variables = array(
+      '!NO'                 => t('NO'),
+      '!YES'                => t('YES'),
+      '!bypass_node_access' => t('bypass node access'),
+      '!access_content'     => t('access content'),
+    );
+
+    if (Drupal::currentUser()->hasPermission('bypass node access')) {
+      return array(
+        TRUE,
+        t('!YES: bypass node access', $variables),
+        t("!YES: This user has the '!bypass_node_access' permission and may do everything with nodes.", $variables),
+      );
+    }
+
+    if (!Drupal::currentUser()->hasPermission('access content')) {
+      return array(
+        FALSE,
+        t('!NO: access content', $variables),
+        t("!NO: This user does not have the '!access_content' permission and is denied doing anything with content.", $variables),
+      );
+    }
+
+    foreach (Drupal::moduleHandler()->getImplementations('node_access') as $module) {
+      $function = $module . '_node_access';
+      if (function_exists($function)) {
+        $result = $function($node, $op, $user, $langcode);
+        if ($module == 'node') {
+          $module = 'node (permissions)';
+        }
+        if (isset($result)) {
+          /* TODO
+          if ($result === NODE_ACCESS_DENY) {
+            $denied_by[] = $module;
+          }
+          elseif ($result === NODE_ACCESS_ALLOW) {
+            $allowed_by[] = $module;
+          }
+          */
+          $access[] = $result;
+        }
+      }
+    }
+    $variables += array(
+      '@deniers'  => (empty($denied_by) ? NULL : implode(', ', $denied_by)),
+      '@allowers' => (empty($allowed_by) ? NULL : implode(', ', $allowed_by)),
+    );
+    if (!empty($denied_by)) {
+      $variables += array(
+        '%module' => $denied_by[0] . (count($denied_by) > 1 ? '+' : ''),
+      );
+      return [
+        FALSE,
+        t('!NO: by %module', $variables),
+        empty($allowed_by)
+          ? t("!NO: hook_node_access() of the following module(s) denies this: @deniers.", $variables)
+          : t("!NO: hook_node_access() of the following module(s) denies this: @deniers &ndash; even though the following module(s) would allow it: @allowers.", $variables),
+      ];
+    }
+    if (!empty($allowed_by)) {
+      $variables += array(
+        '%module' => $allowed_by[0] . (count($allowed_by) > 1 ? '+' : ''),
+        '!view_own_unpublished_content' => t('view own unpublished content'),
+      );
+      return array(
+        TRUE,
+        t('!YES: by %module', $variables),
+        t("!YES: hook_node_access() of the following module(s) allows this: @allowers.", $variables),
+      );
+    }
+
+    // TODO if ($op == 'view' && !$node->get('status', $langcode) && \Drupal::currentUser()->hasPermission('view own unpublished content') && $user->uid == $node->get('uid', $langcode) && $user->uid != 0) {
+    if ($op == 'view' && !$node->isPublished() && Drupal::currentUser()->hasPermission('view own unpublished content') && $user->id() == $node->getRevisionAuthor()->id() && $user->id() != 0) {
+      return array(
+        TRUE,
+        t('!YES: view own unpublished content', $variables),
+        t("!YES: The node is unpublished, but the user has the '!view_own_unpublished_content' permission.", $variables),
+      );
+    }
+
+    if ($op != 'create' && $node->id()) {
+      $access_handler = Drupal::entityTypeManager()->getAccessControlHandler('node');
+      // TODO if (node_access($op, $node, $user, $langcode)) {  // delegate this part
+      if ($access_handler->access($node, $op, $user)) {
+        // Delegate this part.
+        $variables['@node_access_table'] = '{node_access}';
+        return array(
+          TRUE,
+          t('!YES: @node_access_table', $variables),
+          t('!YES: Node access allows this based on one or more records in the @node_access_table table (see the other DNA block!).', $variables),
+        );
+      }
+    }
+
+    return array(
+      FALSE,
+      t('!NO: no reason', $variables),
+      t("!NO: None of the checks resulted in allowing this, so it's denied.", $variables)
+      . ($op == 'create' ? ' ' . t('This is most likely due to a withheld permission.') : ''),
+    );
+  }
+
+  /**
+   * Collects the IDs of the visible nodes on the current page.
+   *
+   * @param int|null $nid
+   *   A node ID to save.
+   *
+   * @return array
+   *   The array of saved node IDs.
+   */
+  public static function visibleNodes($nid = NULL) {
+    static $nids = array();
+    if (isset($nid)) {
+      $nids[$nid] = $nid;
+    }
+    elseif (empty($nids)) {
+      ///** @var NodeInterface $node */
+      //$node = NULL;
+      if ($node = \Drupal::routeMatch()->getParameter('node')) {
+        $nid = $node->id();
+        $nids[$nid] = $nid;
+      }
+    }
+    return $nids;
+  }
+
+
+}
diff --git a/modules/contrib/devel/drush/devel.drush.inc b/modules/contrib/devel/drush/devel.drush.inc
new file mode 100644
index 0000000..3a80b0e
--- /dev/null
+++ b/modules/contrib/devel/drush/devel.drush.inc
@@ -0,0 +1,299 @@
+<?php
+
+/**
+ * @file
+ * Drush integration for the devel module.
+ */
+
+use Drupal\Component\Uuid\Php;
+
+/**
+ * Implements hook_drush_command().
+ */
+function devel_drush_command() {
+  $items['devel-download'] = array(
+    'description' => dt('Downloads the FirePHP library from http://firephp.org/.'),
+    'arguments' => array(
+      'path' => dt('Path to the download folder. This path is relative to the Drupal root folder. If omitted Drush will use the default location.'),
+    ),
+  );
+  $items['devel-reinstall'] = array(
+    'description' => dt('Uninstall, and Install a list of projects.'),
+    'drush dependencies' => array('pm'),
+    'arguments' => array(
+      'projects' => dt('A space-separated list of project names.'),
+    ),
+    'allow-additional-options' => array('pm-uninstall', 'pm-enable'),
+    'required-arguments' => 1,
+    'aliases' => array('dre'),
+  );
+  $items['fn-hook'] = array(
+    'description' => 'List implementations of a given hook and explore the source of the selected one.',
+    'arguments' => array(
+      'hook' => 'The name of the hook to explore (e.g. "menu" for hook_menu()).'
+    ),
+    'examples' => array(
+      'fn-hook cron' => 'List implementations of hook_cron().',
+    ),
+    'allow-additional-options' => array('fn-view'),
+    'required-arguments' => 1,
+    'aliases' => array('fnh', 'hook'),
+  );
+  $items['fn-event'] = array(
+    'description' => 'List implementations of a given event and explore source of specified one.',
+    'arguments' => array(
+      'event' => 'The name of the event to explore. If omitted, a list of events is shown.'
+    ),
+    'examples' => array(
+      'fn-event' => 'Pick a Kernel event, then pick an implementation, and then view its source code.',
+      'fn-event kernel.terminate' => 'Pick a terminate subscribers and view its source code.',
+    ),
+    'allow-additional-options' => array('fn-view'),
+    'aliases' => array('fne', 'event'),
+  );
+  $items['fn-view'] = array(
+    'description' => 'Show the source of specified function or method.',
+    'arguments' => array(
+      'function' => 'The name of the function or method to view.',
+    ),
+    'options' => array(
+      'pipe' => 'Output just the filename of the function or method',
+      'format' => 'Specify how the filename should be printed. Available placeholders are @startline, @endline and @file',
+    ),
+    'examples' => array(
+      'fn-view drupal_set_breadcrumb' => 'View the source code for function "drupal_set_breadcrumb"',
+      'vi `drush --pipe fn-view user_access --format=\'+@startline @file\'`' => 'Edit the file that contains the function "user_access"',
+      'fn-view NodeController::load' => 'View the source code for method load in the class NodeController'
+    ),
+    'aliases' => array('fnv'),
+    'required-arguments' => 1,
+  );
+  $items['devel-token'] = array(
+    'description' => dt('List available tokens'),
+    'aliases' => array('token'),
+    //@todo support --format option for json, csv, etc.
+  );
+
+  $items['devel-container-services'] = array(
+    'description' => 'Get a list of available container services.',
+    'bootstrap' => DRUSH_BOOTSTRAP_DRUPAL_FULL,
+    'core' => array('8+'),
+    'aliases' => array('dcs'),
+    'options' => array(
+      'format' => 'Format to output. Allowed values are: json, export, html.',
+    ),
+    'arguments' => array(
+      'prefix' => 'A prefix to filter the service list by.',
+    ),
+    'examples' => array(
+      'drush container-services' => 'Gets a list of all available container services',
+      'drush container-services plugin.manager' => 'Get all services containing "plugin.manager"',
+    ),
+    'outputformat' => array(
+      'default' => 'list',
+      'pipe-format' => 'export',
+    ),
+  );
+
+  $items['devel-generate-uuid'] = array(
+    'description' => 'Generate a UUID.',
+    'core' => array('8+'),
+    'examples' => array(
+      "drush devel-generate-uuid" => "Outputs a Universally Unique IDentifier.",
+    ),
+    'aliases' => array('uuid'),
+    'outputformat' => array(
+      'default' => 'string',
+    ),
+  );
+
+  return $items;
+}
+
+/**
+ * A command callback. This is faster than 3 separate bootstraps.
+ */
+function drush_devel_reinstall() {
+  $projects = func_get_args();
+
+  $args = array_merge(array('pm-uninstall'), $projects);
+  call_user_func_array('drush_invoke', $args);
+
+  $args = array_merge(array('pm-enable'), $projects);
+  call_user_func_array('drush_invoke', $args);
+}
+
+/**
+ * A command callback.
+ */
+function drush_devel_download($path = 'libraries') {
+  $path = $path . '/FirePHPCore';
+  if (\Drupal::moduleHandler()->moduleExists('libraries')) {
+    $path = libraries_get_path('FirePHPCore');
+  }
+  if (is_dir($path)) {
+    drush_log(dt('FirePHP already present at @path. No download required.', array('@path' => $path)), 'ok');
+  }
+  elseif (drush_shell_exec('svn export http://firephp.googlecode.com/svn/branches/Library-FirePHPCore-0.3 %s', $path)) {
+    drush_log(dt('FirePHP has been exported via svn to @path.', array('@path' => $path)), 'success');
+  }
+  else {
+    drush_log(dt('Drush was unable to export FirePHP to @path.', array('@path' => $path)), 'warning');
+  }
+}
+
+/**
+ * Command handler. Show hook implementations.
+ */
+function drush_devel_fn_hook($hook) {
+  // Get implementations in the .install files as well.
+  include_once './core/includes/install.inc';
+  drupal_load_updates();
+
+  if ($hook_implementations = \Drupal::moduleHandler()->getImplementations($hook)) {
+    if ($choice = drush_choice(array_combine($hook_implementations, $hook_implementations), 'Enter the number of the hook implementation you wish to view.')) {
+      return drush_devel_fn_view($choice . "_$hook");
+    }
+  }
+  else {
+    drush_log(dt('No implementations.'), 'ok');
+  }
+}
+
+/**
+ * Command handler. Show hook implementations.
+ */
+function drush_devel_fn_event($event = NULL) {
+  $dispatcher = Drupal::service('event_dispatcher');
+  if (empty($event)) {
+    $events = array('kernel.controller', 'kernel.exception', 'kernel.request', 'kernel.response', 'kernel.terminate', 'kernel.view');
+    $events = array_combine($events, $events);
+    if (!$event = drush_choice($events, 'Enter the event you wish to explore.')) {
+      return drush_user_abort();
+    }
+  }
+  if ($implementations = $dispatcher->getListeners($event)) {
+    foreach ($implementations as $implementation) {
+      $callable = get_class($implementation[0]) . '::' . $implementation[1];
+      $choices[$callable] = $callable;
+    }
+    if ($choice = drush_choice($choices, 'Enter the number of the implementation you wish to view.')) {
+      return drush_devel_fn_view($choice);
+    }
+  }
+  else {
+    drush_log(dt('No implementations.'), 'ok');
+  }
+}
+/**
+ * Command handler.  Show source code of specified function or method.
+ */
+function drush_devel_fn_view($function_name) {
+  // Get implementations in the .install files as well.
+  include_once './core/includes/install.inc';
+  drupal_load_updates();
+
+  if (strpos($function_name, '::') === FALSE) {
+    if (!function_exists($function_name)) {
+      return drush_set_error(dt('Function not found'));
+    }
+    $reflect = new ReflectionFunction($function_name);
+  }
+  else {
+    list($class, $method) = explode('::', $function_name);
+    if (!method_exists($class, $method)) {
+      return drush_set_error(dt('Method not found'));
+    }
+    $reflect = new ReflectionMethod($class, $method);
+  }
+  $func_info = array('@file' => $reflect->getFileName(), '@startline' => $reflect->getStartLine(), '@endline' => $reflect->getEndLine());
+  $format = drush_get_option('format', '@file');
+  drush_print_pipe(dt($format, $func_info));
+  drush_print(dt("// file: @file, lines @startline-@endline", $func_info));
+
+  _drush_devel_print_function($reflect->getFileName(), $reflect->getStartLine(), $reflect->getEndLine());
+}
+
+/**
+ * Command callback. List available tokens.
+ */
+function drush_devel_token() {
+  $rows[] = array(dt('Group'), dt('Token'), dt('Name'));
+  $all = \Drupal::token()->getInfo();
+  foreach ($all['tokens'] as $group => $tokens) {
+    foreach ($tokens as $key => $token) {
+      $rows[] = array($group, $key, $token['name']);
+    }
+  }
+  drush_print_table($rows, TRUE);
+}
+
+/**
+ * Command callback. Outputs a UUID.
+ *
+ * @return string
+ *   A freshly generated UUID.
+ */
+function drush_devel_generate_uuid() {
+  $uuid = new Php();
+  return $uuid->generate();
+}
+
+/**
+ * Print the specified function, including any
+ * doxygen-style comments that come before it.
+ */
+function _drush_devel_print_function($file, $start_line, $end_line) {
+  $line_num = 0;
+  $doxygen = NULL;
+  $fp = fopen( $file, 'r' );
+
+  while (!feof($fp) && ($line_num < ($start_line - 1))) {
+    $line = fgets($fp);
+    ++$line_num;
+
+    if (substr($line,0,3) == '/**') {
+      $doxygen = $line;
+    }
+    elseif (isset($doxygen)) {
+      $doxygen .= $line;
+      if ($line_num + 1 == $start_line) {
+        drush_print(rtrim($doxygen));
+      }
+      if (strstr($line, '*/') !== FALSE) {
+        $doxygen = NULL;
+      }
+    }
+  }
+  while (!feof($fp) && ($line_num < $end_line)) {
+    $line = fgets($fp);
+    ++$line_num;
+    drush_print(rtrim($line));
+  }
+}
+
+/**
+ * Command callback to list available container services.
+ */
+function drush_devel_container_services($prefix = NULL) {
+  $container = Drupal::getContainer();
+
+  if (empty($container)) {
+    return drush_set_error(dt('No container was found.'));
+  }
+
+  // Get a list of all available service IDs.
+  $services = $container->getServiceIds();
+
+  // If there is a prefix, try to find matches.
+  if (isset($prefix)) {
+    $services = preg_grep("/$prefix/", $services);
+  }
+
+  if (empty($services)) {
+    return drush_log(dt('No container services found.'), 'ok');
+  }
+
+  sort($services);
+  return $services;
+}
diff --git a/modules/contrib/devel/drush/develDrushTest.php b/modules/contrib/devel/drush/develDrushTest.php
new file mode 100644
index 0000000..37c6f7f
--- /dev/null
+++ b/modules/contrib/devel/drush/develDrushTest.php
@@ -0,0 +1,39 @@
+<?php
+
+namespace Unish;
+
+if (class_exists('Unish\CommandUnishTestCase')) {
+
+    /*
+   * @file
+   *   PHPUnit Tests for devel. This uses Drush's own test framework, based on PHPUnit.
+   *   To run the tests, use run-tests-drush.sh from the devel directory.
+   */
+  class develCase extends CommandUnishTestCase {
+
+    public function testFnCommands() {
+      // Specify '8' just in case user has not set UNISH_DRUPAL_MAJOR_VERSION env variable.
+      $sites = $this->setUpDrupal(1, TRUE, '8');
+
+      // Symlink this module into the Site Under test so it can be enabled.
+      $target = dirname(__DIR__);
+      \symlink($target, $this->webroot() . '/modules/devel');
+      $options = array(
+        'root' => $this->webroot(),
+        'uri' => key($sites),
+      );
+      $this->drush('pm-enable', array('devel'), $options + array('skip' => NULL, 'yes' => NULL));
+
+      $this->drush('fn-view', array('drush_main'), $options);
+      $output = $this->getOutput();
+      $this->assertContains('@return', $output, 'Output contain @return Doxygen.');
+      $this->assertContains('function drush_main() {', $output, 'Output contains function drush_main() declaration');
+
+  //    $this->drush('fn-hook', array('cron'), $options);
+  //    $output = $this->getOutputAsList();
+  //    $expected = array('dblog', 'file', 'field', 'system', 'update');
+  //    $this->assertSame($expected, $output);
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/drush/phpstorm.drush.inc b/modules/contrib/devel/drush/phpstorm.drush.inc
new file mode 100644
index 0000000..a6c3f49
--- /dev/null
+++ b/modules/contrib/devel/drush/phpstorm.drush.inc
@@ -0,0 +1,104 @@
+<?php
+
+/**
+ * @file
+ * Generate PhpStorm metadata file.
+ */
+
+/**
+ * Implements of hook_drush_command().
+ */
+function phpstorm_drush_command() {
+  $items = array();
+
+  $items['phpstorm-metadata'] = array(
+    'description' => 'Save the PhpStorm Metadata file to Drupal root.',
+    'core' => array('8+'),
+    'aliases' => array('phpm'),
+    'category' => 'devel',
+  );
+
+  return $items;
+}
+
+/**
+ * Implements hook_drush_help_alter().
+ */
+function phpstorm_drush_help_alter(&$command) {
+  if ($command['command'] == 'cache-rebuild') {
+    $command['options']['storm'] = 'Write a new PHPstorm metadata file to Drupal root.';
+  }
+}
+
+/*
+ * Implements drush_hook_post_COMMAND().
+ */
+function drush_phpstorm_post_cache_rebuild() {
+  if (drush_get_option('storm')) {
+    drush_invoke_process('@self', 'phpstorm-metadata');
+  }
+}
+
+/**
+ * Generate PhpStorm Metadata file.
+ *
+ * @see http://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Advanced+Metadata
+ */
+function drush_phpstorm_metadata() {
+  $container = \Drupal::getContainer();
+
+  $reflectedClass = new ReflectionClass($container);
+
+  $map = array();
+
+  // Map for all services of the container.
+  // @see \Symfony\Component\DependencyInjection\Container::getServiceIds().
+  foreach ($reflectedClass->getMethods() as $method) {
+    if (preg_match('/^get(.+)Service$/', $method->name, $match)) {
+      $id = strtolower(preg_replace(array('/([A-Z]+)([A-Z][a-z])/', '/([a-z\d])([A-Z])/'), array('\\1_\\2', '\\1_\\2'), strtr($match[1], '_', '.')));
+      $service = \Drupal::service($id);
+      if (is_object($service)) {
+        $map["\\Drupal::service('')"][$id] = '\\' . get_class($service);
+      }
+    }
+  }
+
+  // Entity Manager - getStorage
+  foreach (\Drupal::entityManager()->getDefinitions() as $type => $definition) {
+    $class = Drupal::entityManager()->getStorage($type);
+    $map["\\Drupal::entityManager()->getStorage('')"][$type] = '\\' . get_class($class);
+  }
+
+  $content = _drush_phpstorm_metadata_phpstorm_metadata_template($map);
+  file_put_contents(DRUPAL_ROOT . '/.phpstorm.meta.php', $content);
+}
+
+function _drush_phpstorm_metadata_phpstorm_metadata_template($data) {
+  $file = '<?php
+
+namespace PHPSTORM_META {
+
+  /** @noinspection PhpUnusedLocalVariableInspection */
+  /** @noinspection PhpIllegalArrayKeyTypeInspection */
+  $STATIC_METHOD_TYPES = [
+';
+
+  foreach ($data as $method => $map) {
+    $file .= "\n";
+    $file .= "    {$method} => [\n";
+
+    foreach ($map as $argument => $class) {
+      $file .= "      '{$argument}' instanceof {$class},\n";
+    }
+
+    $file .= "    ],";
+    $file .= "\n";
+  }
+
+  $file .= '
+    ];
+  }
+  ';
+
+  return $file;
+}
diff --git a/modules/contrib/devel/kint/README.txt b/modules/contrib/devel/kint/README.txt
new file mode 100644
index 0000000..75b68b9
--- /dev/null
+++ b/modules/contrib/devel/kint/README.txt
@@ -0,0 +1,37 @@
+WHAT IS IT?
+-----------
+Kint for PHP is a tool designed to present your debugging data in the absolutely
+best way possible.
+
+In other words, it's var_dump() and debug_backtrace() on steroids. Easy to use,
+but powerful and customizable. An essential addition to your development
+toolbox.
+
+USAGE
+-----
+This module allows to use these aliases:
+    kint($data1, $data2, $data3, ...);
+    ksm($data1, $data2, $data3, ...)
+    kint_trace();
+
+But to get the most out of Kint, you will want to use directly the Kint class:
+    kint_require();
+    Kint::dump($data);
+
+Learn more about Kint: http://raveren.github.io/kint/
+
+
+The Kint class function dd() will not work as expected, because this alias
+is already defined in devel.module for other purposes.
+
+CONTACTS
+--------
+Module author:
+    Alexander Danilenko
+    danilenko.dn@gmail.com
+    https://drupal.org/user/1072104
+
+Kint author:
+    Rokas Šleinius a.k.a. Raveren
+    raveren@gmail.com
+    https://github.com/raveren
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint.info.yml b/modules/contrib/devel/kint/kint.info.yml
new file mode 100644
index 0000000..7455043
--- /dev/null
+++ b/modules/contrib/devel/kint/kint.info.yml
@@ -0,0 +1,13 @@
+name: 'Devel Kint'
+type: module
+description: 'Wrapper for Kint debugging tool'
+package: Development
+# core: 8.x
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/kint/kint.module b/modules/contrib/devel/kint/kint.module
new file mode 100644
index 0000000..ba98d03
--- /dev/null
+++ b/modules/contrib/devel/kint/kint.module
@@ -0,0 +1,60 @@
+<?php
+
+use Drupal\Core\Render\Markup;
+
+/**
+ * Alias of Kint::dump().
+ *
+ * Prints passed argument(s) using Kint debug tool.
+ */
+function kint() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    call_user_func_array((PHP_SAPI === 'cli') ? 's' : array('Kint', 'dump'), $args);
+  }
+}
+
+/**
+ * Alias of Kint::trace().
+ *
+ * Prints backtrace in Kint debug tool.
+ */
+function kint_trace() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    call_user_func_array(array('Kint', 'trace'), array());
+  }
+}
+
+/**
+ * Alias of Kint::kintLite().
+ *
+ * Prints with lightweight formatting, using whitespace for formatting instead
+ * of HTML.
+ */
+function kint_lite() {
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    call_user_func_array('kintLite', $args);
+  }
+}
+
+/**
+ * Prints passed argument(s) to the 'message' area of the page.
+ */
+function ksm() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    $msg = @Kint::dump($args);
+    drupal_set_message(Markup::create($msg));
+  }
+}
+
+/**
+ * Load the Kint class.
+ */
+function kint_require() {
+  return require_once DRUPAL_ROOT . '/' . drupal_get_path('module', 'kint') . '/kint/Kint.class.php';
+}
diff --git a/modules/contrib/devel/kint/kint.permissions.yml b/modules/contrib/devel/kint/kint.permissions.yml
new file mode 100644
index 0000000..fe28b85
--- /dev/null
+++ b/modules/contrib/devel/kint/kint.permissions.yml
@@ -0,0 +1,4 @@
+access kint:
+  description: 'View developer debug output.'
+  title: 'Access kint information'
+  restrict access: TRUE
diff --git a/modules/contrib/devel/kint/kint.services.yml b/modules/contrib/devel/kint/kint.services.yml
new file mode 100644
index 0000000..5ae75ae
--- /dev/null
+++ b/modules/contrib/devel/kint/kint.services.yml
@@ -0,0 +1,5 @@
+services:
+  kint.twig.kint_extension:
+    class: Drupal\kint\Twig\KintExtension
+    tags:
+      - { name: twig.extension }
diff --git a/modules/contrib/devel/kint/kint/.gitignore b/modules/contrib/devel/kint/kint/.gitignore
new file mode 100644
index 0000000..21a6284
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/.gitignore
@@ -0,0 +1,3 @@
+
+/config.php
+/.idea
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/Kint.class.php b/modules/contrib/devel/kint/kint/Kint.class.php
new file mode 100644
index 0000000..9827db2
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/Kint.class.php
@@ -0,0 +1,855 @@
+<?php
+/**
+ * Kint is a zero-setup debugging tool to output information about variables and stack traces prettily and comfortably.
+ *
+ * https://github.com/raveren/kint
+ */
+define( 'KINT_DIR', dirname( __FILE__ ) . '/' );
+
+require KINT_DIR . 'config.default.php';
+require KINT_DIR . 'parsers/parser.class.php';
+require KINT_DIR . 'decorators/cli.php';
+require KINT_DIR . 'decorators/rich.php';
+require KINT_DIR . 'decorators/plain.php';
+require KINT_DIR . 'decorators/whitespace.php';
+require KINT_DIR . 'decorators/concise.php';
+
+if ( is_readable( KINT_DIR . 'config.php' ) ) {
+	require KINT_DIR . 'config.php';
+}
+
+# init settings
+if ( !empty( $GLOBALS['_kint_settings'] ) ) {
+	foreach ( $GLOBALS['_kint_settings'] as $key => $val ) {
+		property_exists( 'Kint', $key ) and Kint::$$key = $val;
+	}
+
+	unset( $GLOBALS['_kint_settings'] );
+}
+
+if ( PHP_SAPI === 'cli' ) {
+	Kint::$_detected = 'cli';
+} elseif ( Kint::$ajaxDetection && isset( $_SERVER['HTTP_X_REQUESTED_WITH'] )
+	&& strtolower( $_SERVER['HTTP_X_REQUESTED_WITH'] ) === 'xmlhttprequest'
+) {
+	Kint::$_detected = 'ajax';
+}
+
+if ( Kint::$ajaxDetection && Kint::$_detected !== 'ajax' && Kint::$_detected !== 'cli' ) {
+	register_shutdown_function( 'Kint::_ajaxHandler' );
+}
+
+class Kint
+{
+	// these are all public and 1:1 config array keys so you can switch them easily
+	public static $traceCleanupCallback;
+	public static $fileLinkFormat;
+	public static $hideSequentialKeys;
+	public static $showClassConstants;
+	public static $keyFilterCallback;
+	public static $displayCalledFrom;
+	public static $charEncodings;
+	public static $maxStrLength;
+	public static $appRootDirs;
+	public static $maxLevels;
+	public static $enabled;
+	public static $theme;
+	public static $expandedByDefault;
+
+	public static $cliDetection;
+	public static $cliColors;
+	public static $ajaxDetection;
+
+	private static $_isAjax;
+	public static $_detected;
+
+	/** @var  string cli|plain|whitespace|rich */
+	public static $mode = 'rich';
+
+	public static $aliases = array(
+		'methods'   => array(
+			array( 'kint', 'dump' ),
+			array( 'kint', 'trace' ),
+		),
+		'functions' => array(
+			'd',
+			'dd',
+			's',
+			'sd',
+		)
+	);
+
+	protected static $_firstRun = true;
+	protected static $_headerNo = 0;
+
+	# non-standard function calls
+	protected static $_statements = array( 'include', 'include_once', 'require', 'require_once' );
+
+	/**
+	 * getter/setter for the enabled parameter, called at the beginning of every public function as getter, also
+	 * initializes the settings if te first time it's run.
+	 *
+	 * @param null $value
+	 *
+	 * @return void|bool
+	 */
+	public static function enabled( $value = null )
+	{
+		# act both as a setter...
+		if ( func_num_args() > 0 ) {
+			self::$enabled = $value;
+			return;
+		}
+
+		# ...and a getter
+		return self::$enabled;
+	}
+
+	/**
+	 * Prints a debug backtrace, same as `Kint::dump(1)`
+	 *
+	 * @param array $trace [OPTIONAL] you can pass your own trace, otherwise, `debug_backtrace` will be called
+	 *
+	 * @return void
+	 */
+	public static function trace( $trace = null )
+	{
+		if ( !Kint::enabled() ) return;
+
+		return self::dump( isset( $trace ) ? $trace : debug_backtrace( true ) );
+	}
+
+
+	/**
+	 * Dump information about variables, accepts any number of parameters, supports modifiers:
+	 *
+	 *  clean up any output before kint and place the dump at the top of page:
+	 *   - Kint::dump()
+	 *  *****
+	 *  expand all nodes on display:
+	 *   ! Kint::dump()
+	 *  *****
+	 *  dump variables disregarding their depth:
+	 *   + Kint::dump()
+	 *  *****
+	 *  return output instead of displaying it (also disables ajax/cli detection):
+	 *   @ Kint::dump()
+	 *  *****
+	 *  disable ajax and cli auto-detection and just output as requested (plain/rich):
+	 *   ~ Kint::dump()
+	 *
+	 * Modifiers are supported by all dump wrapper functions, including Kint::trace(). Space is optional.
+	 *
+	 *
+	 * You can also use the following shorthand to display debug_backtrace():
+	 *   Kint::dump( 1 );
+	 *
+	 * Passing the result from debug_backtrace() to kint::dump() as a single parameter will display it as trace too:
+	 *   $trace = debug_backtrace( true );
+	 *   Kint::dump( $trace );
+	 *  Or simply:
+	 *   Kint::dump( debug_backtrace() );
+	 *
+	 *
+	 * @param mixed $data
+	 *
+	 * @return void|string
+	 */
+	public static function dump( $data = null )
+	{
+		if ( !Kint::enabled() ) return '';
+
+		# find caller information
+		list( $names, $modifiers, $callee, $previousCaller, $miniTrace ) = self::_getPassedNames(
+			defined( 'DEBUG_BACKTRACE_IGNORE_ARGS' )
+				? debug_backtrace( DEBUG_BACKTRACE_IGNORE_ARGS )
+				: debug_backtrace()
+		);
+
+		# process modifiers: @, +, !, ~ and -
+		if ( strpos( $modifiers, '-' ) !== false ) {
+			self::$_firstRun = true;
+			while ( ob_get_level() ) {
+				ob_end_clean();
+			}
+		}
+		if ( strpos( $modifiers, '!' ) !== false ) {
+			$expandedByDefaultOldValue = self::$expandedByDefault;
+			self::$expandedByDefault   = true;
+		}
+		if ( strpos( $modifiers, '+' ) !== false ) {
+			$maxLevelsOldValue = self::$maxLevels;
+			self::$maxLevels   = false;
+		}
+		if ( strpos( $modifiers, '@' ) !== false ) {
+			$firstRunOldValue = self::$_firstRun;
+			self::$_firstRun  = true;
+		}
+		# disable mode detection
+		if ( strpos( $modifiers, '@' ) !== false || strpos( $modifiers, '~' ) === false ) {
+			$modeOldValue   = self::$mode;
+			$isAjaxOldValue = self::$_isAjax;
+			if ( self::$_detected === 'ajax' ) {
+				self::$_isAjax = true;
+			} elseif ( self::$_detected === 'cli' && self::$cliDetection ) {
+				# cli detection is checked here as you can toggle the feature for individual dumps
+				self::$mode = self::$cliColors ? 'cli' : 'whitespace';
+			}
+		}
+
+
+		$decoratorsMap = array(
+			'cli'        => 'Kint_Decorators_Cli',
+			'plain'      => 'Kint_Decorators_Plain',
+			'rich'       => 'Kint_Decorators_Rich',
+			'whitespace' => 'Kint_Decorators_Whitespace',
+		);
+		$decorator     = $decoratorsMap[self::$mode];
+		$output        = $decorator::wrapStart( $callee );
+
+		$trace = false;
+		if ( $names === array( null ) && func_num_args() === 1 && $data === 1 ) {
+			$trace = debug_backtrace( true ); # Kint::dump(1) shorthand
+		} elseif ( func_num_args() === 1 && is_array( $data ) ) {
+			$trace = $data; # test if the single parameter is result of debug_backtrace()
+		}
+		$trace and $trace = self::_parseTrace( $trace );
+
+		if ( $trace ) {
+			$output .= $decorator::decorateTrace( $trace );
+		} else {
+			$data = func_num_args() === 0
+				? array( "[[no arguments passed]]" )
+				: func_get_args();
+
+			foreach ( $data as $k => $argument ) {
+				kintParser::reset();
+				$output .= $decorator::decorate( kintParser::factory( $argument, $names[$k] ) );
+			}
+		}
+
+
+		$output .= $decorator::wrapEnd( $callee, $miniTrace, $previousCaller );
+
+		if ( strpos( $modifiers, '~' ) === false ) {
+			self::$mode = $modeOldValue;
+		}
+		if ( strpos( $modifiers, '!' ) !== false ) {
+			self::$expandedByDefault = $expandedByDefaultOldValue;
+		}
+		if ( strpos( $modifiers, '+' ) !== false ) {
+			self::$maxLevels = $maxLevelsOldValue;
+		}
+		if ( strpos( $modifiers, '@' ) !== false ) {
+			self::$_firstRun = $firstRunOldValue;
+			return $output;
+		}
+
+		if ( self::$_isAjax ) {
+			$data   = rawurlencode( $output );
+			$chunks = array();
+
+			while ( strlen( $data ) > 4096 ) {
+				$chunks[] = substr( $data, 0, 4096 );
+				$data     = substr( $data, 4096 );
+			}
+			$chunks[] = $data;
+
+			for ( $i = 0, $c = count( $chunks ); $i < $c; $i++ ) {
+				$index = self::$_headerNo++;
+				$name  = 'kint' . ( $index > 0 ? "-$index" : '' );
+				header( "$name: {$chunks[$i]}" );
+			}
+
+			if ( strpos( $modifiers, '~' ) === false ) {
+				self::$_isAjax = $isAjaxOldValue;
+			}
+			return '';
+		}
+
+		echo $output;
+		return '';
+	}
+
+
+	/**
+	 * generic path display callback, can be configured in the settings; purpose is to show relevant path info and hide
+	 * as much of the path as possible.
+	 *
+	 * @param string $file
+	 * @param int    $line [OPTIONAL]
+	 * @param bool   $wrapInHtml
+	 *
+	 * @return string
+	 */
+	public static function shortenPath( $file, $line = null, $wrapInHtml = true )
+	{
+		$file          = str_replace( '\\', '/', $file );
+		$shortenedName = $file;
+		$replaced      = false;
+		if ( is_array( self::$appRootDirs ) ) foreach ( self::$appRootDirs as $path => $replaceString ) {
+			if ( empty( $path ) ) continue;
+
+			$path = str_replace( '\\', '/', $path );
+
+			if ( strpos( $file, $path ) === 0 ) {
+				$shortenedName = $replaceString . substr( $file, strlen( $path ) );
+				$replaced      = true;
+				break;
+			}
+		}
+
+		if ( !$replaced ) {
+			$pathParts = explode( '/', str_replace( '\\', '/', KINT_DIR ) );
+			$fileParts = explode( '/', $file );
+			$i         = 0;
+			foreach ( $fileParts as $i => $filePart ) {
+				if ( !isset( $pathParts[$i] ) || $pathParts[$i] !== $filePart ) break;
+			}
+			$shortenedName = '.../' . implode( '/', array_slice( $fileParts, $i ) );
+		}
+
+
+		if ( !$line ) { # means this is called from resource type dump
+			return $shortenedName;
+		}
+
+		if ( !self::$fileLinkFormat ) {
+			return "{$shortenedName}:{$line}";
+		}
+
+		$url = str_replace( array( '%f', '%l' ), array( $file, $line ), self::$fileLinkFormat );
+
+		if ( $wrapInHtml ) {
+			$class = ( strpos( $url, 'http://' ) === 0 ) ? 'class="kint-ide-link" ' : '';
+			return "<a {$class}href=\"{$url}\">{$shortenedName}:{$line}</a>";
+		} else {
+			return array( $url, $shortenedName . ':' . $line );
+		}
+	}
+
+	/**
+	 * trace helper, shows the place in code inline
+	 *
+	 * @param string $file full path to file
+	 * @param int    $lineNumber the line to display
+	 * @param int    $padding surrounding lines to show besides the main one
+	 *
+	 * @return bool|string
+	 */
+	private static function _showSource( $file, $lineNumber, $padding = 7 )
+	{
+		if ( !$file OR !is_readable( $file ) ) {
+			# continuing will cause errors
+			return false;
+		}
+
+		# open the file and set the line position
+		$file = fopen( $file, 'r' );
+		$line = 0;
+
+		# Set the reading range
+		$range = array(
+			'start' => $lineNumber - $padding,
+			'end'   => $lineNumber + $padding
+		);
+
+		# set the zero-padding amount for line numbers
+		$format = '% ' . strlen( $range['end'] ) . 'd';
+
+		$source = '';
+		while ( ( $row = fgets( $file ) ) !== false ) {
+			# increment the line number
+			if ( ++$line > $range['end'] ) {
+				break;
+			}
+
+			if ( $line >= $range['start'] ) {
+				# make the row safe for output
+				$row = htmlspecialchars( $row, ENT_NOQUOTES, 'UTF-8' );
+
+				# trim whitespace and sanitize the row
+				$row = '<span>' . sprintf( $format, $line ) . '</span> ' . $row;
+
+				if ( $line === $lineNumber ) {
+					# apply highlighting to this row
+					$row = '<div class="kint-highlight">' . $row . '</div>';
+				} else {
+					$row = '<div>' . $row . '</div>';
+				}
+
+				# add to the captured source
+				$source .= $row;
+			}
+		}
+
+		# close the file
+		fclose( $file );
+
+		return $source;
+	}
+
+
+	/**
+	 * returns parameter names that the function was passed, as well as any predefined symbols before function
+	 * call (modifiers)
+	 *
+	 * @param array $trace
+	 *
+	 * @return array( $parameters, $modifier, $callee, $previousCaller )
+	 */
+	private static function _getPassedNames( $trace )
+	{
+		list( $previousCaller, $miniTrace, $callee ) = self::_getCallerInfo( $trace );
+
+		if ( !isset( $callee['file'] ) || !is_readable( $callee['file'] ) ) {
+			return false;
+		}
+
+		# open the file and read it up to the position where the function call expression ended
+		$file   = fopen( $callee['file'], 'r' );
+		$line   = 0;
+		$source = '';
+		while ( ( $row = fgets( $file ) ) !== false ) {
+			if ( ++$line > $callee['line'] ) break;
+			$source .= $row;
+		}
+		fclose( $file );
+		$source = self::_removeAllButCode( $source );
+
+
+		$codePattern = empty( $callee['class'] )
+			? $callee['function']
+			: $callee['class'] . "\x07*" . $callee['type'] . "\x07*" . $callee['function'];
+
+
+		# get the position of the last call to the function
+		preg_match_all(
+			$r = "~
+			# beginning of statement
+			[\x07{(]
+
+			# search for modifiers (group 1)
+			([-+!@\\~]*)?
+
+			# spaces, spaces everywhere
+			\x07*
+
+			# check if output is assigned to a variable (group 2)
+			(
+				\\$[a-z0-9_]+ # variable
+				\x07*\\.?=\x07*  # assignment
+			)?
+
+			# possibly a namespace symbol
+			\\\\?
+
+			\x07*
+
+			# main call to Kint
+			{$codePattern}
+
+			\x07*
+
+			# find the character where kint's opening bracket resides (group 3)
+			(\\()
+
+			~ix",
+			$source,
+			$matches,
+			PREG_OFFSET_CAPTURE
+		);
+
+		$modifiers  = end( $matches[1] );
+		$assignment = end( $matches[2] );
+		$bracket    = end( $matches[3] );
+
+		$modifiers = $modifiers[0];
+		if ( $assignment[1] !== -1 ) {
+			$modifiers .= '@';
+		}
+
+		$passedParameters = preg_replace( "[\x07+]", ' ', substr( $source, $bracket[1] + 1 ) );
+		# we now have a string like this:
+		# <parameters passed>); <the rest of the last read line>
+
+		# remove everything in brackets and quotes, we don't need nested statements nor literal strings which would
+		# only complicate separating individual arguments
+		$c          = strlen( $passedParameters );
+		$inString   = $escaped = false;
+		$i          = 0;
+		$inBrackets = 0;
+		while ( $i < $c ) {
+			$letter = $passedParameters[$i];
+			if ( $inString === false ) {
+				if ( $letter === '\'' || $letter === '"' ) {
+					$inString = $letter;
+				} elseif ( $letter === '(' ) {
+					$inBrackets++;
+				} elseif ( $letter === ')' ) {
+					$inBrackets--;
+					if ( $inBrackets === -1 ) { # this means we are out of the brackets that denote passed parameters
+						$passedParameters = substr( $passedParameters, 0, $i );
+						break;
+					}
+				}
+			} elseif ( $letter === $inString && !$escaped ) {
+				$inString = false;
+			}
+
+			# place an untype-able character instead of whatever was inside quotes or brackets, we don't
+			# need that info. We'll later replace it with '...'
+			if ( $inBrackets > 0 ) {
+				if ( $inBrackets > 1 || $letter !== '(' ) {
+					$passedParameters[$i] = "\x07";
+				}
+			}
+			if ( $inString !== false ) {
+				if ( $letter !== $inString || $escaped ) {
+					$passedParameters[$i] = "\x07";
+				}
+			}
+
+			$escaped = !$escaped && ( $letter === '\\' );
+			$i++;
+		}
+
+		# by now we have an unnested arguments list, lets make it to an array for processing further
+		$arguments = explode( ',', preg_replace( "~\x07+~", '...', $passedParameters ) );
+
+		# test each argument whether it was passed literary or was it an expression or a variable name
+		$parameters = array();
+		$blacklist  = array( 'null', 'true', 'false', 'array(...)', 'array()', '"..."', 'b"..."', );
+		foreach ( $arguments as $argument ) {
+			$argument = trim( $argument );
+
+			if ( is_numeric( $argument )
+				|| in_array( str_replace( "'", '"', strtolower( $argument ) ), $blacklist, true )
+			) {
+				$parameters[] = null;
+			} else {
+				$parameters[] = $argument;
+			}
+		}
+
+		return array( $parameters, $modifiers, $callee, $previousCaller, $miniTrace );
+	}
+
+	/**
+	 * removes comments and zaps whitespace & <?php tags from php code, makes for easier further parsing
+	 *
+	 * @param string $source
+	 *
+	 * @return string
+	 */
+	private static function _removeAllButCode( $source )
+	{
+		$newStr        = '';
+		$tokens        = token_get_all( $source );
+		$commentTokens = array( T_COMMENT => true, T_INLINE_HTML => true, T_DOC_COMMENT => true );
+
+		defined( 'T_NS_SEPARATOR' ) or define( 'T_NS_SEPARATOR', 380 );
+
+		$whiteSpaceTokens = array(
+			T_WHITESPACE => true, T_CLOSE_TAG => true,
+			T_OPEN_TAG   => true, T_OPEN_TAG_WITH_ECHO => true,
+		);
+
+		foreach ( $tokens as $token ) {
+			if ( is_array( $token ) ) {
+				if ( isset( $commentTokens[$token[0]] ) ) continue;
+
+				if ( $token[0] === T_NEW ) {
+					$token = 'new ';
+				} elseif ( $token[0] === T_NS_SEPARATOR ) {
+					$token = "\\\x07";
+				} elseif ( isset( $whiteSpaceTokens[$token[0]] ) ) {
+					$token = "\x07";
+				} else {
+					$token = $token[1];
+				}
+			} elseif ( $token === ';' ) {
+				$token = "\x07";
+			}
+
+			$newStr .= $token;
+		}
+		return $newStr;
+	}
+
+	/**
+	 * @param $trace
+	 *
+	 * @return array
+	 */
+	private static function _getCallerInfo( $trace )
+	{
+		$previousCaller = array();
+		$miniTrace      = array();
+		$prevStep       = array();
+
+		# go from back of trace to find first occurrence of call to Kint or its wrappers
+		while ( $step = array_pop( $trace ) ) {
+
+			if ( self::_stepIsInternal( $step ) ) {
+				$previousCaller = $prevStep;
+				break;
+			} elseif ( isset( $step['file'], $step['line'] ) ) {
+				unset( $step['object'], $step['args'] );
+				array_unshift( $miniTrace, $step );
+			}
+
+			$prevStep = $step;
+		}
+
+		return array( $previousCaller, $miniTrace, $step );
+	}
+
+	/**
+	 * returns whether current trace step belongs to Kint or its wrappers
+	 *
+	 * @param $step
+	 *
+	 * @return array
+	 */
+	private static function _stepIsInternal( $step )
+	{
+		if ( isset( $step['class'] ) ) {
+			foreach ( self::$aliases['methods'] as $alias ) {
+				if ( $alias[0] === strtolower( $step['class'] ) && $alias[1] === strtolower( $step['function'] ) ) {
+					return true;
+				}
+			}
+			return false;
+		} else {
+			return in_array( strtolower( $step['function'] ), self::$aliases['functions'], true );
+		}
+	}
+
+	private static function _parseTrace( array $data )
+	{
+		$trace          = array();
+		$tracePrototype = array( 'file', 'line', 'args', 'class' );
+		while ( $step = array_pop( $data ) ) {
+			if ( !is_array( $step ) ) return false;
+
+			$valid = false; # this method also validates whether a trace was indeed passed
+			if ( sizeof( $step ) <= 7 ) {
+				$found = 0;
+				foreach ( $tracePrototype as $element ) {
+					if ( isset( $step[$element] ) ) {
+						if ( ++$found === 2 ) {
+							$valid = true;
+							break;
+						}
+					}
+				}
+
+				if ( !$valid && isset( $step['function'] )
+					&& substr( $step['function'], -9, 9 ) === '{closure}'
+				) {
+					$valid = true;
+				}
+			}
+
+			if ( !$valid ) return false;
+
+			if ( self::_stepIsInternal( $step ) ) {
+				$step = array(
+					'file'     => $step['file'],
+					'line'     => $step['line'],
+					'function' => '',
+				);
+				array_unshift( $trace, $step );
+				break;
+			}
+			array_unshift( $trace, $step );
+		}
+
+		$output = array();
+		foreach ( $trace as $step ) {
+			if ( isset( self::$traceCleanupCallback ) ) {
+				$step = call_user_func( self::$traceCleanupCallback, $step );
+
+				# if the user defined trace cleanup function returns null, skip this line
+				if ( $step === null ) {
+					continue;
+				}
+			}
+
+			if ( isset( $step['file'] ) ) {
+				$file = $step['file'];
+
+				if ( isset( $step['line'] ) ) {
+					$line = $step['line'];
+					# include the source of this step
+					if ( self::$mode === 'rich' ) {
+						$source = self::_showSource( $file, $line );
+					}
+				}
+			}
+
+			# still, might be not a trace
+			if ( !isset( $step['function'] ) ) return false;
+
+
+			$function = $step['function'];
+
+			if ( in_array( $function, self::$_statements ) ) { # include, require
+				if ( empty( $step['args'] ) ) {
+					# no arguments
+					$args = array();
+				} else {
+					# sanitize the file path
+					$args = array( self::shortenPath( $step['args'][0] ) );
+				}
+			} elseif ( isset( $step['args'] ) ) {
+				if ( empty( $step['class'] ) && !function_exists( $function ) ) {
+					# introspection on closures or language constructs in a stack trace is impossible before PHP 5.3
+					$params = null;
+				} else {
+					try {
+						if ( isset( $step['class'] ) ) {
+							if ( method_exists( $step['class'], $function ) ) {
+								$reflection = new ReflectionMethod( $step['class'], $function );
+							} else if ( isset( $step['type'] ) && $step['type'] == '::' ) {
+								$reflection = new ReflectionMethod( $step['class'], '__callStatic' );
+							} else {
+								$reflection = new ReflectionMethod( $step['class'], '__call' );
+							}
+						} else {
+							$reflection = new ReflectionFunction( $function );
+						}
+
+						# get the function parameters
+						$params = $reflection->getParameters();
+					} catch ( Exception $e ) { # avoid various PHP version incompatibilities
+						$params = null;
+					}
+				}
+
+				$args = array();
+				foreach ( $step['args'] as $i => $arg ) {
+					if ( isset( $params[$i] ) ) {
+						# assign the argument by the parameter name
+						$args[$params[$i]->name] = $arg;
+					} else {
+						# assign the argument by number
+						$args['#' . ( $i + 1 )] = $arg;
+					}
+				}
+			}
+
+			if ( isset( $step['class'] ) ) {
+				# Class->method() or Class::method()
+				$function = $step['class'] . $step['type'] . $function;
+			}
+
+			$output[] = array(
+				'function' => $function,
+				'args'     => isset( $args ) ? $args : null,
+				'file'     => isset( $file ) ? $file : null,
+				'line'     => isset( $line ) ? $line : null,
+				'source'   => isset( $source ) ? $source : null,
+				'object'   => isset( $step['object'] ) ? $step['object'] : null,
+			);
+
+			unset( $function, $args, $file, $line, $source );
+		}
+
+		return $output;
+	}
+
+	public static function _ajaxHandler()
+	{
+		if ( !Kint::$enabled ) return;
+
+		# if content type is not HTML (e.g. csv export) and/or is downloaded - skip
+		foreach ( headers_list() as $header ) {
+			if ( substr( strtolower( $header ), 0, 13 ) === "content-type:" ) {
+				if ( strpos( $header, 'text/html' ) === false ) {
+					return;
+				}
+			} elseif ( substr( strtolower( $header ), 0, 20 ) === "content-disposition:" ) {
+				return;
+			}
+		}
+
+		$baseDir = KINT_DIR . 'view/compiled/modular-window/';
+
+		if ( !is_readable( $cssFile = $baseDir . Kint::$theme . '.css' ) ) {
+			$cssFile = $baseDir . 'original.css';
+		}
+
+		echo '<script>' . file_get_contents( $baseDir . 'kint.js' ) . '</script>'
+			. '<style>' . file_get_contents( $cssFile ) . "</style>";
+	}
+}
+
+
+if ( !function_exists( 'd' ) ) {
+	/**
+	 * Alias of Kint::dump()
+	 *
+	 * @return string
+	 */
+	function d()
+	{
+		if ( !Kint::enabled() ) return null;
+
+		$args = func_get_args();
+		return call_user_func_array( array( 'Kint', 'dump' ), $args );
+	}
+}
+
+if ( !function_exists( 'dd' ) ) {
+	/**
+	 * Alias of Kint::dump()
+	 * [!!!] IMPORTANT: execution will halt after call to this function
+	 *
+	 * @return string
+	 */
+	function dd()
+	{
+		if ( !Kint::enabled() ) return;
+
+		$args = func_get_args();
+		call_user_func_array( array( 'Kint', 'dump' ), $args );
+		die;
+	}
+}
+
+if ( !function_exists( 's' ) ) {
+
+	/**
+	 * Alias of kintLite()
+	 *
+	 * @return string
+	 */
+	function s()
+	{
+		if ( !Kint::enabled() ) return;
+		$mode       = Kint::$mode;
+		Kint::$mode = 'plain';
+		$o          = call_user_func_array( 'Kint::dump', func_get_args() );
+		Kint::$mode = $mode;
+		return $o;
+	}
+
+	/**
+	 * Alias of kintLite()
+	 * [!!!] IMPORTANT: execution will halt after call to this function
+	 *
+	 * @return string
+	 */
+	function sd()
+	{
+		if ( !Kint::enabled() ) return;
+		$mode       = Kint::$mode;
+		Kint::$mode = 'plain';
+		call_user_func_array( 'Kint::dump', func_get_args() );
+		Kint::$mode = $mode;
+		die;
+	}
+
+}
diff --git a/modules/contrib/devel/kint/kint/LICENCE b/modules/contrib/devel/kint/kint/LICENCE
new file mode 100644
index 0000000..936fe1f
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/LICENCE
@@ -0,0 +1,20 @@
+The MIT License (MIT)
+
+Copyright (c) 2013 Rokas Šleinius (raveren@gmail.com)
+
+Permission is hereby granted, free of charge, to any person obtaining a copy of
+this software and associated documentation files (the "Software"), to deal in
+the Software without restriction, including without limitation the rights to
+use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
+the Software, and to permit persons to whom the Software is furnished to do so,
+subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in all
+copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
+FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
+COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/README.md b/modules/contrib/devel/kint/kint/README.md
new file mode 100644
index 0000000..9fa5b48
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/README.md
@@ -0,0 +1,62 @@
+# Kint - debugging helper for PHP developers
+
+[![Total Downloads](https://poser.pugx.org/raveren/kint/downloads.png)](https://packagist.org/packages/raveren/kint)
+
+http://raveren.github.com/kint/
+
+![Screenshot](http://raveren.github.com/kint/img/preview.png)
+
+Kint for PHP is a powerful and modern, zero-setup replacement for **[var_dump()](http://php.net/manual/en/function.var-dump.php)**, **[print_r()](http://php.net/manual/en/function.print-r.php)** and **[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)**. You'll wonder how you developed without it.
+
+
+----
+
+
+## Installation and usage
+```php
+<?php
+require '/kint/Kint.class.php';
+
+########## DUMP VARIABLE ###########################
+Kint::dump($GLOBALS, $_SERVER); // any nuber of parameters
+// or simply use d() as a shorthand:
+d($_SERVER);
+
+
+########## DEBUG BACKTRACE #########################
+Kint::trace();
+// or via shorthand:
+d(1);
+
+
+########## TEXT-ONLY OUTPUT ########################
+s($GLOBALS);
+
+
+########## MISCELLANEOUS ###########################
+// to disable all output
+Kint::enabled(false);
+// further calls, this one included, will not yield any output
+d('Get off my lawn!'); // no effect
+
+```
+
+### Furthermore
+
+* `sd()` and `dd()` are shorthands for `s();die;` and `d();die;` respectively.
+* `!Kint::dump()` and `!dd()` will display the dump expanded by default.
+
+----
+
+
+[Visit the project page](http://raveren.github.com/kint/) for documentation, configuration, and more advanced usage examples.
+
+### Author
+
+**Rokas Šleinius** (Raveren)
+
+![](http://img199.yfrog.com/img199/4323/imageda.png)
+
+### License
+
+Licensed under the MIT License
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/composer.json b/modules/contrib/devel/kint/kint/composer.json
new file mode 100644
index 0000000..b14ffbd
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/composer.json
@@ -0,0 +1,29 @@
+{
+    "name": "raveren/kint",
+    "description": "Kint - debugging helper for PHP developers",
+    "keywords": ["kint", "php", "debug"],
+    "type": "library",
+    "homepage": "https://github.com/raveren/kint",
+    "license": "MIT",
+    "authors": [
+        {
+            "name": "Rokas Šleinius",
+            "homepage": "https://github.com/raveren"
+        },
+        {
+            "name": "Contributors",
+            "homepage": "https://github.com/raveren/kint/contributors"
+        }
+    ],
+    "require": {
+        "php": ">=5.2.0"
+    },
+    "autoload": {
+        "files": ["Kint.class.php"]
+    },
+    "extra": {
+        "branch-alias": {
+            "dev-1.0.0-wip": "1.0-dev"
+        }
+    }
+}
diff --git a/modules/contrib/devel/kint/kint/config.default.php b/modules/contrib/devel/kint/kint/config.default.php
new file mode 100644
index 0000000..bcb6825
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/config.default.php
@@ -0,0 +1,148 @@
+<?php
+isset( $GLOBALS['_kint_settings'] ) or $GLOBALS['_kint_settings'] = array();
+$_kintSettings = &$GLOBALS['_kint_settings'];
+
+
+/** @var bool if set to false, kint will become silent, same as Kint::enabled(false) or Kint::$enabled = false */
+$_kintSettings['enabled'] = true;
+
+
+/**
+ * @var bool whether to display where kint was called from
+ */
+$_kintSettings['displayCalledFrom'] = true;
+
+
+/**
+ * @var string format of the link to the source file in trace entries. Use %f for file path, %l for line number.
+ * Defaults to xdebug.file_link_format if not set.
+ *
+ * [!] EXAMPLE (works with for phpStorm and RemoteCall Plugin):
+ *
+ * $_kintSettings['fileLinkFormat'] = 'http://localhost:8091/?message=%f:%l';
+ *
+ */
+$_kintSettings['fileLinkFormat'] = ini_get( 'xdebug.file_link_format' );
+
+
+/**
+ * @var array base directories of your application that will be displayed instead of the full path. Keys are paths,
+ * values are replacement strings
+ *
+ * Defaults to array( $_SERVER['DOCUMENT_ROOT'] => '&lt;ROOT&gt;' )
+ *
+ * [!] EXAMPLE (for Kohana framework):
+ *
+ * $_kintSettings['appRootDirs'] = array(
+ *      APPPATH => 'APPPATH', // make sure the constants are already defined at the time of including this config file
+ *      SYSPATH => 'SYSPATH',
+ *      MODPATH => 'MODPATH',
+ *      DOCROOT => 'DOCROOT',
+ * );
+ *
+ * [!] EXAMPLE #2 (for a semi-universal approach)
+ *
+ * $_kintSettings['appRootDirs'] = array(
+ *      realpath( __DIR__ . '/../../..' ) => 'ROOT', // go up as many levels as needed in the realpath() param
+ * );
+ *
+ * $_kintSettings['fileLinkFormat'] = 'http://localhost:8091/?message=%f:%l';
+ *
+ */
+$_kintSettings['appRootDirs'] = isset( $_SERVER['DOCUMENT_ROOT'] )
+	? array( $_SERVER['DOCUMENT_ROOT'] => '&lt;ROOT&gt;' )
+	: array();
+
+
+/**
+ * @var callable|null
+ *
+ * @param array $step each step of the backtrace is passed to this callback to clean it up or skip it entirely
+ *
+ * @return array|null you can return null if you want to bypass outputting this step
+ *
+ * [!] EXAMPLE:
+ *
+ * $_kintSettings['traceCleanupCallback'] = function( $traceStep ) {
+ *      if ( isset( $traceStep['class'] ) && strtolower( $traceStep['class'] ) === 'errorHandler' ) {
+ *           return null;
+ *      }
+ *
+ *      if ( isset( $traceStep['function'] ) && strtolower( $traceStep['function'] ) === '__tostring' ) {
+ *          $traceStep['function'] = "[object converted to string]";
+ *      }
+ *
+ *       return $traceStep;
+ * };
+ */
+$_kintSettings['traceCleanupCallback'] = null;
+
+
+/** @var int max length of string before it is truncated and displayed separately in full. Zero or false to disable */
+$_kintSettings['maxStrLength'] = 60;
+
+/** @var array possible alternative char encodings in order of probability, eg. array('windows-1251') */
+$_kintSettings['charEncodings'] = array();
+
+
+/** @var int max array/object levels to go deep, if zero no limits are applied */
+$_kintSettings['maxLevels'] = 5;
+
+
+/** @var bool whether dumped indexed arrays that are in ideal sequence are displayed */
+$_kintSettings['hideSequentialKeys'] = true;
+
+
+/** @var string name of theme for rich view */
+$_kintSettings['theme'] = 'original';
+
+
+
+/** @var bool enable detection when a Kint dump was outputted in a (background) ajax request. The output with some
+ * additional features is then presented to the user on-screen.
+ *
+ * CAVEATS:
+ * 1) you must use jQuery and/or always append HTTP_X_REQUESTED_WITH header to ajax requests
+ * 2) if not outputting HTML source, you must denote that in the headers (content-type and/or content-disposition)
+ * 3) some js&css is always outputted after page HTML. It's not displayed and has no side effects, but it's there unless
+ *    content-type is not HTML, or a content-disposition header is sent
+ *
+ * Basically, the caveats boil down to that you have to adhere to general best practice guidelines in your code.
+ */
+$_kintSettings['ajaxDetection'] = false;
+
+/** @var bool enable detection when Kint is command line. Formats output with whitespace only; does not HTML-escape it */
+$_kintSettings['cliDetection'] = true;
+
+/** @var bool in addition to above setting, enable detection when Kint is run in *UNIX* command line.
+ * Attempts to add coloring, but if seen as plain text, the color information is visible as gibberish
+ */
+$_kintSettings['cliColors'] = false;
+
+
+/**
+ * @var callback filters array/object keys before outputting; return false if you do not wish to see it in the output
+ *
+ * @param string $key the key being output
+ * @param mixed  $val the contents of the dumped element in case you need it
+ *
+ * @return bool return false to skip displaying
+ *
+ * [!] EXAMPLE:
+ *
+ * $_kintSettings['keyFilterCallback'] = function( $key, $val ) {
+ *     if ( preg_match( '#_mt$#', $key ) ) {
+ *         return false;
+ *     }
+ *
+ *     if ( $val === '--testing--' ) {
+ *         return false;
+ *     }
+ *
+ *     // no need to return true to continue output
+ * };
+ *
+ */
+$_kintSettings['keyFilterCallback'] = null;
+
+unset( $_kintSettings );
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/decorators/cli.php b/modules/contrib/devel/kint/kint/decorators/cli.php
new file mode 100644
index 0000000..36992a2
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/decorators/cli.php
@@ -0,0 +1,187 @@
+<?php
+class Kint_Decorators_Cli extends Kint
+{
+	private static $_enableColors;
+
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		self::_init();
+
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			if ( self::$_enableColors ) {
+				$output .= "\033[0;32m#-----------------{$name}#-----------------#\033[0m\n";
+			} else {
+				$output .= "#-----------------{$name}#-----------------#\n";
+			}
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return "\n";
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "\033[0;32mCalled from {$calleeInfo}{$callingFunction}\033[0m\n"
+			: "\n";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+		if ( self::$_enableColors ) {
+			$output .= " \033[1;35m" . $kintVar->type . "\033[0m";
+		} else {
+			$output .= $kintVar->type;
+		}
+
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( , $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		return $shortenedName;
+	}
+
+	private static function _init()
+	{
+		if ( !isset( self::$_enableColors ) ) {
+			self::$_enableColors = strtoupper( substr( PHP_OS, 0, 3 ) ) !== 'WIN' || getenv( 'ANSICON' );
+		}
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/decorators/concise.php b/modules/contrib/devel/kint/kint/decorators/concise.php
new file mode 100644
index 0000000..74c3db6
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/decorators/concise.php
@@ -0,0 +1,58 @@
+<?php
+class Kint_Decorators_Concise extends Kint
+{
+	/**
+	 * output:
+	 *
+	 * [value]
+	 *
+	 * value [title="[access] [name] [operator *] [subtype] [size] "]
+	 * OR
+	 * type [title="[access] [name] type [operator *] [subtype] [size] "]
+	 * <ul>extendedValue
+	 *
+	 * @param kintVariableData $kintVar
+	 *
+	 * @return string
+	 */
+	public static function decorate( kintVariableData $kintVar )
+	{
+		if ( $kintVar->extendedValue !== null || !empty( $kintVar->_alternatives ) ) {
+			return Kint_Decorators_Rich::decorate( $kintVar );
+		}
+
+		if ( $kintVar->value !== null ) {
+			$output = '<p title="';
+
+			if ( $kintVar->access !== null ) {
+				$output .= $kintVar->access . " ";
+			}
+
+			if ( $kintVar->name !== null ) {
+				$output .= $kintVar->name . " ";
+			}
+
+			if ( $kintVar->type !== null ) {
+				$output .= $kintVar->type;
+				if ( $kintVar->subtype !== null ) {
+					$output .= " " . $kintVar->subtype;
+				}
+				$output .= " ";
+			}
+
+			if ( $kintVar->operator !== null ) {
+				$output .= $kintVar->operator . "";
+			}
+
+			if ( $kintVar->size !== null ) {
+				$output .= "(" . $kintVar->size . ") ";
+			}
+
+			$output = trim( $output ) . '">' . $kintVar->value . '</p>';
+		} else {
+			$output = '<u>NULL</u>';
+		}
+
+		return $output;
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/decorators/plain.php b/modules/contrib/devel/kint/kint/decorators/plain.php
new file mode 100644
index 0000000..fb19fe8
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/decorators/plain.php
@@ -0,0 +1,178 @@
+<?php
+// todo make cli, plain and whitespace decorators DRY
+class Kint_Decorators_Plain extends Kint
+{
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			$output .= "#-----------------$name-----------------#\n";
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "<pre>\n";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return '</pre>';
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "Called from {$calleeInfo}{$callingFunction}</pre>"
+			: "</pre>";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+
+		$output .= ' <b>' . $kintVar->type . '</b>';
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( $url, $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		if ( strpos( $url, 'http://' ) === 0 ) {
+			return
+				"<a href=\"#\"onclick=\""
+				. "X=new XMLHttpRequest;"
+				. "X.open('GET','{$url}');"
+				. "X.send();"
+				. "return!1\">{$shortenedName}</a>";
+		} else {
+			return "<a href=\"{$url}\">{$shortenedName}</a>";
+		}
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/decorators/rich.php b/modules/contrib/devel/kint/kint/decorators/rich.php
new file mode 100644
index 0000000..538c736
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/decorators/rich.php
@@ -0,0 +1,325 @@
+<?php
+class Kint_Decorators_Rich extends Kint
+{
+	# make calls to Kint::dump() from different places in source coloured differently.
+	private static $_usedColors = array();
+
+	public static function decorate( kintVariableData $kintVar )
+	{
+		$output = '<dl>';
+
+		$extendedPresent = $kintVar->extendedValue !== null || $kintVar->_alternatives !== null;
+
+		if ( $extendedPresent ) {
+			$class = 'kint-parent';
+			if ( Kint::$expandedByDefault ) {
+				$class .= ' kint-show';
+			}
+			$output .= '<dt class="' . $class . '">';
+		} else {
+			$output .= '<dt>';
+		}
+
+		if ( $extendedPresent ) {
+			$output .= '<span class="kint-popup-trigger" title="Open in new window">&rarr;</span><nav></nav>';
+		}
+
+		$output .= self::_drawHeader( $kintVar ) . $kintVar->value . '</dt>';
+
+
+		if ( $extendedPresent ) {
+			$output .= '<dd>';
+		}
+
+		if ( isset( $kintVar->extendedValue ) ) {
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= '<pre>' . $kintVar->extendedValue . '</pre>';
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue ); //it's kint's container
+			}
+
+		} elseif ( isset( $kintVar->_alternatives ) ) {
+			$output .= "<ul class=\"kint-tabs\">";
+
+			foreach ( $kintVar->_alternatives as $k => $var ) {
+				$active = $k === 0 ? ' class="kint-active-tab"' : '';
+				$output .= "<li{$active}>" . self::_drawHeader( $var, false ) . '</li>';
+			}
+
+			$output .= "</ul><ul>";
+
+			foreach ( $kintVar->_alternatives as $var ) {
+				$output .= "<li>";
+
+				$var = $var->value;
+
+				if ( is_array( $var ) ) {
+					foreach ( $var as $v ) {
+						$output .= is_string( $v )
+							? '<pre>' . $v . '</pre>'
+							: self::decorate( $v );
+					}
+				} elseif ( is_string( $var ) ) {
+					$output .= '<pre>' . $var . '</pre>';
+				} elseif ( isset( $var ) ) {
+					throw new Exception(
+						'Kint has encountered an error, '
+						. 'please paste this report to https://github.com/raveren/kint/issues<br>'
+						. 'Error encountered at ' . basename( __FILE__ ) . ':' . __LINE__ . '<br>'
+						. ' variables: '
+						. htmlspecialchars( var_export( $kintVar->_alternatives, true ), ENT_QUOTES )
+					);
+				}
+
+				$output .= "</li>";
+			}
+
+			$output .= "</ul>";
+		}
+		if ( $extendedPresent ) {
+			$output .= '</dd>';
+		}
+
+		$output .= '</dl>';
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '<dl class="kint-trace">';
+
+		foreach ( $traceData as $i => $step ) {
+			$class = 'kint-parent';
+			if ( Kint::$expandedByDefault ) {
+				$class .= ' kint-show';
+			}
+
+			$output .= '<dt class="' . $class . '">'
+				. '<b>' . ( $i + 1 ) . '</b> '
+				. '<nav></nav>'
+				. '<var>';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= Kint::shortenPath( $step['file'], $step['line'] );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= '</var>';
+
+			$output .= $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= '</dt><dd>';
+			$firstTab = ' class="kint-active-tab"';
+			$output .= '<ul class="kint-tabs">';
+
+			if ( !empty( $step['source'] ) ) {
+				$output .= "<li{$firstTab}>Source</li>";
+				$firstTab = '';
+			}
+
+			if ( !empty( $step['args'] ) ) {
+				$output .= "<li{$firstTab}>Arguments</li>";
+				$firstTab = '';
+			}
+
+			if ( !empty( $step['object'] ) ) {
+				kintParser::reset();
+				$calleeDump = kintParser::factory( $step['object'] );
+
+				$output .= "<li{$firstTab}>Callee object [{$calleeDump->subtype}]</li>";
+			}
+
+
+			$output .= '</ul><ul>';
+
+
+			if ( !empty( $step['source'] ) ) {
+				$output .= "<li><pre class=\"kint-source\">{$step['source']}</pre></li>";
+			}
+
+			if ( !empty( $step['args'] ) ) {
+				$output .= "<li>";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ) );
+				}
+				$output .= "</li>";
+			}
+			if ( !empty( $step['object'] ) ) {
+				$output .= "<li>" . self::decorate( $calleeDump ) . "</li>";
+			}
+
+			$output .= '</ul></dd>';
+		}
+		$output .= '</dl>';
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		// colors looping outputs the same (i.e. if same line in code dumps variables multiple time,
+		// we assume it's in a loop)
+
+		$uid = isset( $callee['file'] ) ? crc32( $callee['file'] . $callee['line'] ) : 'no-file';
+
+		if ( isset( self::$_usedColors[$uid] ) ) {
+			$class = self::$_usedColors[$uid];
+		} else {
+			$class                   = sizeof( self::$_usedColors );
+			self::$_usedColors[$uid] = $class;
+		}
+
+		$class = "kint_{$class}";
+
+
+		return self::_css() . "<div class=\"kint {$class}\">";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return '</div>';
+		}
+
+		$callingFunction = '';
+		$calleeInfo      = '';
+		$traceDisplay    = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " [{$callingFunction}]";
+
+
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo .= 'Called from ' . self::shortenPath( $callee['file'], $callee['line'], true );
+		}
+
+		if ( !empty( $miniTrace ) ) {
+			$traceDisplay = '<ol>';
+			foreach ( $miniTrace as $step ) {
+				$traceDisplay .= '<li>' . self::shortenPath( $step['file'], $step['line'], true ); // closing tag not required
+				if ( isset( $step['function'] ) && !in_array( $step['function'], Kint::$_statements ) ) {
+					$classString = ' [';
+					if ( isset( $step['class'] ) ) {
+						$classString .= $step['class'];
+					}
+					if ( isset( $step['type'] ) ) {
+						$classString .= $step['type'];
+					}
+					$classString .= $step['function'] . '()]';
+					$traceDisplay .= $classString;
+				}
+			}
+			$traceDisplay .= '</ol>';
+
+			$calleeInfo = '<nav></nav>' . $calleeInfo;
+		}
+
+
+		return "<footer>"
+		. '<span class="kint-popup-trigger" title="Open in new window">&rarr;</span> '
+		. "{$calleeInfo}{$callingFunction}{$traceDisplay}"
+		. "</footer></div>";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar, $verbose = true )
+	{
+		$output = '';
+		if ( $verbose ) {
+			if ( $kintVar->access !== null ) {
+				$output .= "<var>" . $kintVar->access . "</var> ";
+			}
+
+			if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+				$output .= "<dfn>" . $kintVar->name . "</dfn> ";
+			}
+
+			if ( $kintVar->operator !== null ) {
+				$output .= $kintVar->operator . " ";
+			}
+		}
+
+		if ( $kintVar->type !== null ) {
+			if ( $verbose ) {
+				$output .= "<var>";
+			}
+
+			$output .= $kintVar->type;
+			if ( $kintVar->subtype !== null ) {
+				$output .= " " . $kintVar->subtype;
+			}
+
+			if ( $verbose ) {
+				$output .= "</var>";
+			} else {
+				$output .= " ";
+			}
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= "(" . $kintVar->size . ") ";
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * produces css and js required for display. May be called multiple times, will only produce output once per
+	 * pageload or until `-` or `@` modifier is used
+	 *
+	 * @return string
+	 */
+	private static function _css()
+	{
+		if ( !Kint::$_firstRun ) return '';
+		Kint::$_firstRun = false;
+
+		$baseDir = KINT_DIR . 'view/compiled/main/';
+
+		if ( !is_readable( $cssFile = $baseDir . self::$theme . '.css' ) ) {
+			$cssFile = $baseDir . 'original.css';
+		}
+
+		return
+			'<script class="-kint-js">' . file_get_contents( $baseDir . 'kint.js' ) . '</script>'
+			. '<style class="-kint-css">' . file_get_contents( $cssFile ) . "</style>\n";
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/decorators/whitespace.php b/modules/contrib/devel/kint/kint/decorators/whitespace.php
new file mode 100644
index 0000000..da3f8c6
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/decorators/whitespace.php
@@ -0,0 +1,168 @@
+<?php
+class Kint_Decorators_Whitespace extends Kint
+{
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			$output .= "#-----------------$name-----------------#\n";
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "\n";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return "\n";
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "Called from {$calleeInfo}{$callingFunction}\n"
+			: "\n";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+
+		$output .= $kintVar->type;
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( , $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		return $shortenedName;
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/examples/overview.php b/modules/contrib/devel/kint/kint/examples/overview.php
new file mode 100644
index 0000000..57a0a6d
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/examples/overview.php
@@ -0,0 +1,181 @@
+<html>
+<?php
+require('../Kint.class.php');
+
+$selectedTheme = isset($_GET['theme']) ? $_GET['theme'] : 'original';
+$allowedThemes = array();
+$dh  = opendir('../view/inc');
+while(($filename = readdir($dh)) !== false) {
+     if(strpos($filename, '.css') !== false) {
+         $allowedThemes[] = str_replace('.css', '', $filename);
+     }
+}
+
+sort($allowedThemes);
+
+if(in_array($selectedTheme, $allowedThemes)) {
+    Kint::$theme = $selectedTheme;
+}
+
+class BaseUser
+{
+    /**
+     * @return string
+     */
+    public function getFullName() {}
+}
+
+class User extends BaseUser
+{
+    CONST DEFAULT_PATH = 'some/default/path';
+    CONST ROLE_DISALLOWED = 1;
+    CONST ROLE_ALLOWED = 2;
+    CONST ROLE_FORBIDDEN = 3;
+
+    public $additionalData;
+    private $username = 'demo_username';
+    private $password = 'demo_password';
+    private $createdDate;
+
+    public function __construct() {}
+
+    /**
+     * Check is user is equal to another user
+     */
+    public function isEqualTo(BaseUser $user) {}
+
+    /**
+     * Get data from this demo class
+     *
+     * @param string $username
+     * @return array
+     */
+    public function setUsername($username) {}
+
+    /**
+     * Set additional data
+     *
+     * @array $data
+     */
+    public function setAdditionalData(array $data) { $this->additionalData = $data; }
+
+    /**
+     * @return \DateTime date object
+     */
+    public function getCreatedDate() {}
+
+    /**
+     * @param \DateTime $date
+     */
+    public function setCreatedDate(DateTime $date) { $this->createdDate = $date; }
+
+    /**
+     * Dummy method that triggers trace
+     */
+    public function ensure() { Kint::trace(); }
+}
+
+class UserManager
+{
+    private $user;
+
+    /**
+     * Get user from manager
+     */
+    public function getUser() { return $this->user; }
+
+    /**
+     * Debug specific user
+     *
+     * @param \User $user
+     */
+    public function debugUser($user) {
+        $this->user = $user;
+        d($this->getUser());
+    }
+
+    /**
+     * Ensure user (triggers ensure() method on \User object that trace)
+     *
+     * @void
+     */
+    public function ensureUser() { $this->user->ensure(); }
+}
+
+$user = new User;
+$user->setAdditionalData(array(
+    'last_login' => new DateTime(),
+    'current_unix_timestamp' => time(),
+    'random_rgb_color_code' => '#FF9900',
+    'impressions' => 60,
+    'nickname' => 'Someuser',
+));
+$user->setCreatedDate(new DateTime('2013-10-10'));
+$userManager = new UserManager();
+
+for($i = 1; $i < 6; $i ++) {
+    $tabularData[] = array(
+        'date' => "2013-01-0{$i}",
+        'allowed' => $i % 3 == 0,
+        'action' => "action {$i}",
+        'clicks' => rand(100, 50000),
+        'impressions' => rand(10000, 500000),
+    );
+
+    if($i % 2 == 0) {
+        unset($tabularData[$i - 1]['clicks']);
+    }
+}
+
+$nestedArray = array();
+
+for($i = 1; $i < 6; $i ++) {
+    $nestedArray["user group {$i}"] = array(
+        "user {$i}" => array(
+            'name' => "Name {$i}",
+            'surname' => "Surname {$i}"
+        ),
+
+        'data' => array(
+            'conversions' => rand(100, 5000),
+            'spent' => array('currency' => 'EUR', 'amount' => rand(10000, 500000))
+        ),
+    );
+}
+?>
+<head>
+	<title>Kint PHP debugging tool - overview</title>
+	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
+	<script>
+		$(function() {
+			$('#themeSelect').val('<?php echo isset($_GET['theme']) ? $_GET['theme'] : 'original' ?>');
+
+			$('#themeSelect').change(function(e) {
+				window.location = '?theme=' + $(this).val();
+			});
+		});
+	</script>
+</head>
+<body>
+<div>
+    <div style="float: right">Switch theme:
+        <select id="themeSelect">
+            <?php foreach($allowedThemes as $theme) : ?>
+                <option value="<?php echo $theme ?>">
+                    <?php echo ucfirst(str_replace('-', ' ', $theme)) ?>
+                </option>
+            <?php endforeach ?>
+        </select>
+    </div>
+    <h2>Kint PHP debugging tool - overview</h2>
+</div>
+<h3>Debug variables</h3>
+<?php
+    $userManager->debugUser($user);
+    d($userManager, $tabularData);
+    d($nestedArray);
+?>
+<h3>Trace</h3>
+<?php $userManager->ensureUser(); ?>
+</body>
+</html>
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/classmethods.php b/modules/contrib/devel/kint/kint/parsers/custom/classmethods.php
new file mode 100644
index 0000000..7b6e949
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/classmethods.php
@@ -0,0 +1,153 @@
+<?php
+
+class Kint_Parsers_ClassMethods extends kintParser
+{
+	private static $cache = array();
+
+	protected function _parse( &$variable )
+	{
+		if ( !is_object( $variable ) ) return false;
+
+		$className = get_class( $variable );
+
+		# assuming class definition will not change inside one request
+		if ( !isset( self::$cache[$className] ) ) {
+			$reflection = new \ReflectionClass( $variable );
+
+			$public = $private = $protected = array();
+
+			// Class methods
+			foreach ( $reflection->getMethods() as $method ) {
+				$params = array();
+
+				// Access type
+				$access = implode( ' ', \Reflection::getModifierNames( $method->getModifiers() ) );
+
+				// Method parameters
+				foreach ( $method->getParameters() as $param ) {
+					$paramString = '';
+
+					if ( $param->isArray() ) {
+						$paramString .= 'array ';
+					} else {
+						try {
+							if ( $paramClassName = $param->getClass() ) {
+								$paramString .= $paramClassName->name . ' ';
+							}
+						} catch ( ReflectionException $e ) {
+							preg_match( '/\[\s\<\w+?>\s([\w]+)/s', $param->__toString(), $matches );
+							$paramClassName = isset( $matches[1] ) ? $matches[1] : '';
+
+							$paramString .= ' UNDEFINED CLASS (' . $paramClassName . ') ';
+						}
+					}
+
+					$paramString .= ( $param->isPassedByReference() ? '&' : '' ) . '$' . $param->getName();
+
+					if ( $param->isDefaultValueAvailable() ) {
+						if ( is_array( $param->getDefaultValue() ) ) {
+							$arrayValues = array();
+							foreach ( $param->getDefaultValue() as $key => $value ) {
+								$arrayValues[] = $key . ' => ' . $value;
+							}
+
+							$defaultValue = 'array(' . implode( ', ', $arrayValues ) . ')';
+						} elseif ( $param->getDefaultValue() === null ) {
+							$defaultValue = 'NULL';
+						} elseif ( $param->getDefaultValue() === false ) {
+							$defaultValue = 'false';
+						} elseif ( $param->getDefaultValue() === true ) {
+							$defaultValue = 'true';
+						} elseif ( $param->getDefaultValue() === '' ) {
+							$defaultValue = '""';
+						} else {
+							$defaultValue = $param->getDefaultValue();
+						}
+
+						$paramString .= ' = ' . $defaultValue;
+					}
+
+					$params[] = $paramString;
+				}
+
+				$output = new kintVariableData;
+
+				// Simple DocBlock parser, look for @return
+				if ( ( $docBlock = $method->getDocComment() ) ) {
+					$matches = array();
+					if ( preg_match_all( '/@(\w+)\s+(.*)\r?\n/m', $docBlock, $matches ) ) {
+						$lines = array_combine( $matches[1], $matches[2] );
+						if ( isset( $lines['return'] ) ) {
+							$output->operator = '->';
+							# since we're outputting code, assumption that the string is utf8 is most likely correct
+							# and saves resources
+							$output->type = self::_escape( $lines['return'], 'UTF-8' );
+						}
+					}
+				}
+
+				$output->name   = ( $method->returnsReference() ? '&' : '' ) . $method->getName() . '('
+					. implode( ', ', $params ) . ')';
+				$output->access = $access;
+
+				if ( is_string( $docBlock ) ) {
+					$lines = array();
+					foreach ( explode( "\n", $docBlock ) as $line ) {
+						$line = trim( $line );
+
+						if ( in_array( $line, array( '/**', '/*', '*/' ) ) ) {
+							continue;
+						} elseif ( strpos( $line, '*' ) === 0 ) {
+							$line = substr( $line, 1 );
+						}
+
+						$lines[] = self::_escape( trim( $line ), 'UTF-8' );
+					}
+
+					$output->extendedValue = implode( "\n", $lines ) . "\n\n";
+				}
+
+				$declaringClass     = $method->getDeclaringClass();
+				$declaringClassName = $declaringClass->getName();
+
+				if ( $declaringClassName !== $className ) {
+					$output->extendedValue .= "<small>Inherited from <i>{$declaringClassName}</i></small>\n";
+				}
+
+				$fileName = \Kint::shortenPath( $method->getFileName(), $method->getStartLine() );
+
+				if ( $fileName ) {
+					$output->extendedValue .= "<small>Defined in {$fileName}</small>";
+				}
+
+				$sortName = $access . $method->getName();
+
+				if ( $method->isPrivate() ) {
+					$private[$sortName] = $output;
+				} elseif ( $method->isProtected() ) {
+					$protected[$sortName] = $output;
+				} else {
+					$public[$sortName] = $output;
+				}
+			}
+
+			if ( !$private && !$protected && !$public ) {
+				self::$cache[$className] = false;
+			}
+
+			ksort( $public );
+			ksort( $protected );
+			ksort( $private );
+
+			self::$cache[$className] = $public + $protected + $private;
+		}
+
+		if ( count( self::$cache[$className] ) === 0 ) {
+			return false;
+		}
+
+		$this->value = self::$cache[$className];
+		$this->type  = 'Available methods';
+		$this->size  = count( self::$cache[$className] );
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/classstatics.php b/modules/contrib/devel/kint/kint/parsers/custom/classstatics.php
new file mode 100644
index 0000000..1c6d0e4
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/classstatics.php
@@ -0,0 +1,54 @@
+<?php
+class Kint_Parsers_ClassStatics extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) ) return false;
+
+		$extendedValue = array();
+
+		$reflection = new ReflectionClass( $variable );
+		// first show static values
+		foreach ( $reflection->getProperties( ReflectionProperty::IS_STATIC ) as $property ) {
+			if ( $property->isPrivate() ) {
+				if ( !method_exists( $property, 'setAccessible' ) ) {
+					break;
+				}
+				$property->setAccessible( true );
+				$access = "private";
+			} elseif ( $property->isProtected() ) {
+				$property->setAccessible( true );
+				$access = "protected";
+			} else {
+				$access = 'public';
+			}
+
+			if ( Kint::$keyFilterCallback
+				&& call_user_func( Kint::$keyFilterCallback, $property->getName(), $property->getValue() ) === false
+			) {
+				continue;
+			}
+
+			$_      = $property->getValue();
+			$output = kintParser::factory( $_, '$' . $property->getName() );
+
+			$output->access   = $access;
+			$output->operator = '::';
+			$extendedValue[]  = $output;
+		}
+
+		foreach ( $reflection->getConstants() as $constant => $val ) {
+			$output = kintParser::factory( $val, $constant );
+
+			$output->access   = 'constant';
+			$output->operator = '::';
+			$extendedValue[]  = $output;
+		}
+
+		if ( empty( $extendedValue ) ) return false;
+
+		$this->value = $extendedValue;
+		$this->type  = 'Static class properties';
+		$this->size  = count( $extendedValue );
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/color.php b/modules/contrib/devel/kint/kint/parsers/custom/color.php
new file mode 100644
index 0000000..7e5c211
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/color.php
@@ -0,0 +1,400 @@
+<?php
+class Kint_Parsers_Color extends kintParser
+{
+	private static $_css3Named = array(
+		'aliceblue'=>'#f0f8ff','antiquewhite'=>'#faebd7','aqua'=>'#00ffff','aquamarine'=>'#7fffd4','azure'=>'#f0ffff',
+		'beige'=>'#f5f5dc','bisque'=>'#ffe4c4','black'=>'#000000','blanchedalmond'=>'#ffebcd','blue'=>'#0000ff',
+		'blueviolet'=>'#8a2be2','brown'=>'#a52a2a','burlywood'=>'#deb887','cadetblue'=>'#5f9ea0','chartreuse'=>'#7fff00',
+		'chocolate'=>'#d2691e','coral'=>'#ff7f50','cornflowerblue'=>'#6495ed','cornsilk'=>'#fff8dc','crimson'=>'#dc143c',
+		'cyan'=>'#00ffff','darkblue'=>'#00008b','darkcyan'=>'#008b8b','darkgoldenrod'=>'#b8860b','darkgray'=>'#a9a9a9',
+		'darkgrey'=>'#a9a9a9','darkgreen'=>'#006400','darkkhaki'=>'#bdb76b','darkmagenta'=>'#8b008b',
+		'darkolivegreen'=>'#556b2f','darkorange'=>'#ff8c00','darkorchid'=>'#9932cc','darkred'=>'#8b0000',
+		'darksalmon'=>'#e9967a','darkseagreen'=>'#8fbc8f','darkslateblue'=>'#483d8b','darkslategray'=>'#2f4f4f',
+		'darkslategrey'=>'#2f4f4f','darkturquoise'=>'#00ced1','darkviolet'=>'#9400d3','deeppink'=>'#ff1493',
+		'deepskyblue'=>'#00bfff','dimgray'=>'#696969','dimgrey'=>'#696969','dodgerblue'=>'#1e90ff',
+		'firebrick'=>'#b22222','floralwhite'=>'#fffaf0','forestgreen'=>'#228b22','fuchsia'=>'#ff00ff',
+		'gainsboro'=>'#dcdcdc','ghostwhite'=>'#f8f8ff','gold'=>'#ffd700','goldenrod'=>'#daa520','gray'=>'#808080',
+		'grey'=>'#808080','green'=>'#008000','greenyellow'=>'#adff2f','honeydew'=>'#f0fff0','hotpink'=>'#ff69b4',
+		'indianred'=>'#cd5c5c','indigo'=>'#4b0082','ivory'=>'#fffff0','khaki'=>'#f0e68c','lavender'=>'#e6e6fa',
+		'lavenderblush'=>'#fff0f5','lawngreen'=>'#7cfc00','lemonchiffon'=>'#fffacd','lightblue'=>'#add8e6',
+		'lightcoral'=>'#f08080','lightcyan'=>'#e0ffff','lightgoldenrodyellow'=>'#fafad2','lightgray'=>'#d3d3d3',
+		'lightgrey'=>'#d3d3d3','lightgreen'=>'#90ee90','lightpink'=>'#ffb6c1','lightsalmon'=>'#ffa07a',
+		'lightseagreen'=>'#20b2aa','lightskyblue'=>'#87cefa','lightslategray'=>'#778899','lightslategrey'=>'#778899',
+		'lightsteelblue'=>'#b0c4de','lightyellow'=>'#ffffe0','lime'=>'#00ff00','limegreen'=>'#32cd32','linen'=>'#faf0e6',
+		'magenta'=>'#ff00ff','maroon'=>'#800000','mediumaquamarine'=>'#66cdaa','mediumblue'=>'#0000cd',
+		'mediumorchid'=>'#ba55d3','mediumpurple'=>'#9370d8','mediumseagreen'=>'#3cb371','mediumslateblue'=>'#7b68ee',
+		'mediumspringgreen'=>'#00fa9a','mediumturquoise'=>'#48d1cc','mediumvioletred'=>'#c71585',
+		'midnightblue'=>'#191970','mintcream'=>'#f5fffa','mistyrose'=>'#ffe4e1','moccasin'=>'#ffe4b5',
+		'navajowhite'=>'#ffdead','navy'=>'#000080','oldlace'=>'#fdf5e6','olive'=>'#808000','olivedrab'=>'#6b8e23',
+		'orange'=>'#ffa500','orangered'=>'#ff4500','orchid'=>'#da70d6','palegoldenrod'=>'#eee8aa','palegreen'=>'#98fb98',
+		'paleturquoise'=>'#afeeee','palevioletred'=>'#d87093','papayawhip'=>'#ffefd5','peachpuff'=>'#ffdab9',
+		'peru'=>'#cd853f','pink'=>'#ffc0cb','plum'=>'#dda0dd','powderblue'=>'#b0e0e6','purple'=>'#800080',
+		'red'=>'#ff0000','rosybrown'=>'#bc8f8f','royalblue'=>'#4169e1','saddlebrown'=>'#8b4513','salmon'=>'#fa8072',
+		'sandybrown'=>'#f4a460','seagreen'=>'#2e8b57','seashell'=>'#fff5ee','sienna'=>'#a0522d','silver'=>'#c0c0c0',
+		'skyblue'=>'#87ceeb','slateblue'=>'#6a5acd','slategray'=>'#708090','slategrey'=>'#708090','snow'=>'#fffafa',
+		'springgreen'=>'#00ff7f','steelblue'=>'#4682b4','tan'=>'#d2b48c','teal'=>'#008080','thistle'=>'#d8bfd8',
+		'tomato'=>'#ff6347','turquoise'=>'#40e0d0','violet'=>'#ee82ee','wheat'=>'#f5deb3','white'=>'#ffffff',
+		'whitesmoke'=>'#f5f5f5','yellow'=>'#ffff00','yellowgreen'=>'#9acd32'
+	);
+
+
+	protected function _parse( & $variable )
+	{
+		if ( !self::_fits( $variable ) ) return false;
+
+		$this->type  = 'CSS color';
+		$variants    = self::_convert( $variable );
+		$this->value =
+			"<div style=\"background:{$variable}\" class=\"kint-color-preview\">{$variable}</div>"
+			. "<strong>hex :</strong> {$variants['hex']}\n"
+			. "<strong>rgb :</strong> {$variants['rgb']}\n"
+			. ( isset( $variants['name'] ) ? "<strong>name:</strong> {$variants['name']}\n" : '' )
+			. "<strong>hsl :</strong> {$variants['hsl']}";
+	}
+
+
+	private static function _fits( $variable )
+	{
+		if ( !is_string( $variable ) ) return false;
+
+		$var = strtolower( trim( $variable ) );
+
+		return isset( self::$_css3Named[$var] )
+			|| preg_match(
+				'/^(?:#[0-9A-Fa-f]{3}|#[0-9A-Fa-f]{6}|(?:rgb|hsl)a?\s*\((?:\s*[0-9.%]+\s*,?){3,4}\))$/',
+				$var
+			);
+	}
+
+	private static function _convert( $color )
+	{
+		$color         = strtolower( $color );
+		$decimalColors = array();
+		$variants      = array(
+			'hex'   => null,
+			'rgb'   => null,
+			'name'  => null,
+			'hsl'   => null,
+		);
+
+		if ( isset( self::$_css3Named[$color] ) ) {
+			$variants['name'] = $color;
+			$color            = self::$_css3Named[$color];
+		}
+
+		if ( $color{0} === '#' ) {
+			$variants['hex'] = $color;
+			$color           = substr( $color, 1 );
+			if ( strlen( $color ) === 6 ) {
+				$colors = str_split( $color, 2 );
+			} else {
+				$colors = array(
+					$color{0} . $color{0},
+					$color{1} . $color{1},
+					$color{2} . $color{2},
+				);
+			}
+
+			$decimalColors = array_map( 'hexdec', $colors );
+		} elseif ( substr( $color, 0, 3 ) === 'rgb' ) {
+			$variants['rgb'] = $color;
+			preg_match_all( '#([0-9.%]+)#', $color, $matches );
+			$decimalColors = $matches[1];
+			foreach ( $decimalColors as &$color ) {
+				if ( strpos( $color, '%' ) !== false ) {
+					$color = str_replace( '%', '', $color ) * 2.55;
+				}
+			}
+
+
+		} elseif ( substr( $color, 0, 3 ) === 'hsl' ) {
+			$variants['hsl'] = $color;
+			preg_match_all( '#([0-9.%]+)#', $color, $matches );
+
+			$colors = $matches[1];
+			$colors[0] /= 360;
+			$colors[1] = str_replace( '%', '', $colors[1] ) / 100;
+			$colors[2] = str_replace( '%', '', $colors[2] ) / 100;
+
+			$decimalColors = self::_HSLtoRGB( $colors );
+			if ( isset( $colors[3] ) ) {
+				$decimalColors[] = $colors[3];
+			}
+		}
+
+		if ( isset( $decimalColors[3] ) ) {
+			$alpha = $decimalColors[3];
+			unset( $decimalColors[3] );
+		} else {
+			$alpha = null;
+		}
+		foreach ( $variants as $type => &$variant ) {
+			if ( isset( $variant ) ) continue;
+
+			switch ( $type ) {
+				case 'hex':
+					$variant = '#';
+					foreach ( $decimalColors as &$color ) {
+						$variant .= str_pad( dechex( $color ), 2, "0", STR_PAD_LEFT );
+					}
+					$variant .= isset( $alpha ) ? ' (alpha omitted)' : '';
+					break;
+				case 'rgb':
+					$rgb = $decimalColors;
+					if ( isset( $alpha ) ) {
+						$rgb[] = $alpha;
+						$a     = 'a';
+					} else {
+						$a = '';
+					}
+					$variant = "rgb{$a}( " . implode( ', ', $rgb ) . " )";
+					break;
+				case 'hsl':
+					$rgb = self::_RGBtoHSL( $decimalColors );
+					if ( $rgb === null ) {
+						unset( $variants[$type] );
+						break;
+					}
+					if ( isset( $alpha ) ) {
+						$rgb[] = $alpha;
+						$a     = 'a';
+					} else {
+						$a = '';
+					}
+
+					$variant = "hsl{$a}( " . implode( ', ', $rgb ) . " )";
+					break;
+				case 'name':
+					// [!] name in initial variants array must go after hex
+					if ( ( $key = array_search( $variants['hex'], self::$_css3Named, true ) ) !== false ) {
+						$variant = $key;
+					} else {
+						unset( $variants[$type] );
+					}
+					break;
+			}
+
+		}
+
+		return $variants;
+	}
+
+
+	private static function _HSLtoRGB( array $hsl )
+	{
+		list( $h, $s, $l ) = $hsl;
+		$m2 = ( $l <= 0.5 ) ? $l * ( $s + 1 ) : $l + $s - $l * $s;
+		$m1 = $l * 2 - $m2;
+		return array(
+			round( self::_hue2rgb( $m1, $m2, $h + 0.33333 ) * 255 ),
+			round( self::_hue2rgb( $m1, $m2, $h ) * 255 ),
+			round( self::_hue2rgb( $m1, $m2, $h - 0.33333 ) * 255 ),
+		);
+	}
+
+
+	/**
+	 * Helper function for _color_hsl2rgb().
+	 */
+	private static function _hue2rgb( $m1, $m2, $h )
+	{
+		$h = ( $h < 0 ) ? $h + 1 : ( ( $h > 1 ) ? $h - 1 : $h );
+		if ( $h * 6 < 1 ) return $m1 + ( $m2 - $m1 ) * $h * 6;
+		if ( $h * 2 < 1 ) return $m2;
+		if ( $h * 3 < 2 ) return $m1 + ( $m2 - $m1 ) * ( 0.66666 - $h ) * 6;
+		return $m1;
+	}
+
+
+	private static function _RGBtoHSL( array $rgb )
+	{
+		list( $clrR, $clrG, $clrB ) = $rgb;
+
+		$clrMin   = min( $clrR, $clrG, $clrB );
+		$clrMax   = max( $clrR, $clrG, $clrB );
+		$deltaMax = $clrMax - $clrMin;
+
+		$L = ( $clrMax + $clrMin ) / 510;
+
+		if ( 0 == $deltaMax ) {
+			$H = 0;
+			$S = 0;
+		} else {
+			if ( 0.5 > $L ) {
+				$S = $deltaMax / ( $clrMax + $clrMin );
+			} else {
+				$S = $deltaMax / ( 510 - $clrMax - $clrMin );
+			}
+
+			if ( $clrMax == $clrR ) {
+				$H = ( $clrG - $clrB ) / ( 6.0 * $deltaMax );
+			} else if ( $clrMax == $clrG ) {
+				$H = 1 / 3 + ( $clrB - $clrR ) / ( 6.0 * $deltaMax );
+			} else {
+				$H = 2 / 3 + ( $clrR - $clrG ) / ( 6.0 * $deltaMax );
+			}
+
+			if ( 0 > $H ) $H += 1;
+			if ( 1 < $H ) $H -= 1;
+		}
+		return array(
+			round( $H * 360 ),
+			round( $S * 100 ) . '%',
+			round( $L * 100 ) . '%'
+		);
+
+	}
+}
+
+/* *************
+ * TEST DATA
+ *
+dd(array(
+'hsl(0,  100%,50%)',
+'hsl(30, 100%,50%)',
+'hsl(60, 100%,50%)',
+'hsl(90, 100%,50%)',
+'hsl(120,100%,50%)',
+'hsl(150,100%,50%)',
+'hsl(180,100%,50%)',
+'hsl(210,100%,50%)',
+'hsl(240,100%,50%)',
+'hsl(270,100%,50%)',
+'hsl(300,100%,50%)',
+'hsl(330,100%,50%)',
+'hsl(360,100%,50%)',
+'hsl(120,100%,25%)',
+'hsl(120,100%,50%)',
+'hsl(120,100%,75%)',
+'hsl(120,100%,50%)',
+'hsl(120, 67%,50%)',
+'hsl(120, 33%,50%)',
+'hsl(120,  0%,50%)',
+'hsl(120, 60%,70%)',
+'#f03',
+'#F03',
+'#ff0033',
+'#FF0033',
+'rgb(255,0,51)',
+'rgb(255, 0, 51)',
+'rgb(100%,0%,20%)',
+'rgb(100%, 0%, 20%)',
+'hsla(240,100%,50%,0.05)',
+'hsla(240,100%,50%, 0.4)',
+'hsla(240,100%,50%, 0.7)',
+'hsla(240,100%,50%,   1)',
+'rgba(255,0,0,0.1)',
+'rgba(255,0,0,0.4)',
+'rgba(255,0,0,0.7)',
+'rgba(255,0,0,  1)',
+'black',
+'silver',
+'gray',
+'white',
+'maroon',
+'red',
+'purple',
+'fuchsia',
+'green',
+'lime',
+'olive',
+'yellow',
+'navy',
+'blue',
+'teal',
+'aqua',
+'orange',
+'aliceblue',
+'antiquewhite',
+'aquamarine',
+'azure',
+'beige',
+'bisque',
+'blanchedalmond',
+'blueviolet',
+'brown',
+'burlywood',
+'cadetblue',
+'chartreuse',
+'chocolate',
+'coral',
+'cornflowerblue',
+'cornsilk',
+'crimson',
+'darkblue',
+'darkcyan',
+'darkgoldenrod',
+'darkgray',
+'darkgreen',
+'darkgrey',
+'darkkhaki',
+'darkmagenta',
+'darkolivegreen',
+'darkorange',
+'darkorchid',
+'darkred',
+'darksalmon',
+'darkseagreen',
+'darkslateblue',
+'darkslategray',
+'darkslategrey',
+'darkturquoise',
+'darkviolet',
+'deeppink',
+'deepskyblue',
+'dimgray',
+'dimgrey',
+'dodgerblue',
+'firebrick',
+'floralwhite',
+'forestgreen',
+'gainsboro',
+'ghostwhite',
+'gold',
+'goldenrod',
+'greenyellow',
+'grey',
+'honeydew',
+'hotpink',
+'indianred',
+'indigo',
+'ivory',
+'khaki',
+'lavender',
+'lavenderblush',
+'lawngreen',
+'lemonchiffon',
+'lightblue',
+'lightcoral',
+'lightcyan',
+'lightgoldenrodyellow',
+'lightgray',
+'lightgreen',
+'lightgrey',
+'lightpink',
+'lightsalmon',
+'lightseagreen',
+'lightskyblue',
+'lightslategray',
+'lightslategrey',
+'lightsteelblue',
+'lightyellow',
+'limegreen',
+'linen',
+'mediumaquamarine',
+'mediumblue',
+'mediumorchid',
+'mediumpurple',
+'mediumseagreen',
+'mediumslateblue',
+'mediumspringgreen',
+'mediumturquoise',
+'mediumvioletred',
+'midnightblue',
+'mintcream',
+'mistyrose',
+'moccasin',
+'navajowhite',
+'oldlace',
+'olivedrab',
+));*/
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/fspath.php b/modules/contrib/devel/kint/kint/parsers/custom/fspath.php
new file mode 100644
index 0000000..0425cc7
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/fspath.php
@@ -0,0 +1,67 @@
+<?php
+class Kint_Parsers_FsPath extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable )
+			|| strlen( $variable ) > 2048
+			|| preg_match( '[[:?<>"*|]]', $variable )
+			|| !@is_readable( $variable ) # f@#! PHP and its random warnings
+		) return false;
+
+		try {
+			$fileInfo = new \SplFileInfo( $variable );
+			$flags    = array();
+			$perms    = $fileInfo->getPerms();
+
+			if ( ( $perms & 0xC000 ) === 0xC000 ) {
+				$type    = 'File socket';
+				$flags[] = 's';
+			} elseif ( ( $perms & 0xA000 ) === 0xA000 ) {
+				$type    = 'File symlink';
+				$flags[] = 'l';
+			} elseif ( ( $perms & 0x8000 ) === 0x8000 ) {
+				$type    = 'File';
+				$flags[] = '-';
+			} elseif ( ( $perms & 0x6000 ) === 0x6000 ) {
+				$type    = 'Block special file';
+				$flags[] = 'b';
+			} elseif ( ( $perms & 0x4000 ) === 0x4000 ) {
+				$type    = 'Directory';
+				$flags[] = 'd';
+			} elseif ( ( $perms & 0x2000 ) === 0x2000 ) {
+				$type    = 'Character special file';
+				$flags[] = 'c';
+			} elseif ( ( $perms & 0x1000 ) === 0x1000 ) {
+				$type    = 'FIFO pipe file';
+				$flags[] = 'p';
+			} else {
+				$type    = 'Unknown file';
+				$flags[] = 'u';
+			}
+
+			// owner
+			$flags[] = ( ( $perms & 0x0100 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0080 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0040 ) ? ( ( $perms & 0x0800 ) ? 's' : 'x' ) : ( ( $perms & 0x0800 ) ? 'S' : '-' ) );
+
+			// group
+			$flags[] = ( ( $perms & 0x0020 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0010 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0008 ) ? ( ( $perms & 0x0400 ) ? 's' : 'x' ) : ( ( $perms & 0x0400 ) ? 'S' : '-' ) );
+
+			// world
+			$flags[] = ( ( $perms & 0x0004 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0002 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0001 ) ? ( ( $perms & 0x0200 ) ? 't' : 'x' ) : ( ( $perms & 0x0200 ) ? 'T' : '-' ) );
+
+			$this->type  = $type;
+			$this->size  = sprintf( '%.2fK', $fileInfo->getSize() / 1024 );
+			$this->value = implode( $flags );
+
+		} catch ( Exception $e ) {
+			return false;
+		}
+
+	}
+}
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/json.php b/modules/contrib/devel/kint/kint/parsers/custom/json.php
new file mode 100644
index 0000000..0327468
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/json.php
@@ -0,0 +1,17 @@
+<?php
+class Kint_Parsers_Json extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable )
+			|| !isset( $variable{0} ) || ( $variable{0} !== '{' && $variable{0} !== '[' )
+			|| ( $json = json_decode( $variable ) ) === null
+		) return false;
+
+		$val = (array)$json;
+		if ( empty( $val ) ) return false;
+
+		$this->value = kintParser::factory( $val )->extendedValue;
+		$this->type  = 'JSON';
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/microtime.php b/modules/contrib/devel/kint/kint/parsers/custom/microtime.php
new file mode 100644
index 0000000..3251b7d
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/microtime.php
@@ -0,0 +1,55 @@
+<?php
+class Kint_Parsers_Microtime extends kintParser
+{
+	private static $_times = array();
+	private static $_laps = array();
+
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable ) || !preg_match( '[0\.[0-9]{8} [0-9]{10}]', $variable ) ) {
+			return false;
+		}
+
+		list( $usec, $sec ) = explode( " ", $variable );
+
+		$time = (float) $usec + (float) $sec;
+		$size = memory_get_usage( true );
+
+		# '@' is used to prevent the dreaded timezone not set error
+		$this->value = @date( 'Y-m-d H:i:s', $sec ) . '.' . substr( $usec, 2, 4 );
+
+		$numberOfCalls = count( self::$_times );
+		if ( $numberOfCalls > 0 ) { # meh, faster than count($times) > 1
+			$lap           = $time - end( self::$_times );
+			self::$_laps[] = $lap;
+
+			$this->value .= "\n<b>SINCE LAST CALL:</b> <b class=\"kint-microtime\">" . round( $lap, 4 ) . '</b>s.';
+			if ( $numberOfCalls > 1 ) {
+				$this->value .= "\n<b>SINCE START:</b> " . round( $time - self::$_times[0], 4 ) . 's.';
+				$this->value .= "\n<b>AVERAGE DURATION:</b> "
+					. round( array_sum( self::$_laps ) / $numberOfCalls, 4 ) . 's.';
+			}
+		}
+
+		$unit = array( 'B', 'KB', 'MB', 'GB', 'TB' );
+		$this->value .= "\n<b>MEMORY USAGE:</b> " . $size . " bytes ("
+			. round( $size / pow( 1024, ( $i = floor( log( $size, 1024 ) ) ) ), 3 ) . ' ' . $unit[$i] . ")";
+
+		self::$_times[] = $time;
+		$this->type     = 'Stats';
+	}
+
+	/*
+	function test() {
+		d( 'start', microtime() );
+		for ( $i = 0; $i < 10; $i++ ) {
+			d(
+				$duration = mt_rand( 0, 200000 ), // the reported duration will be larger because of Kint overhead
+				usleep( $duration ),
+				microtime()
+	        );
+		}
+		dd(  );
+	}
+	 */
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/objectiterateable.php b/modules/contrib/devel/kint/kint/parsers/custom/objectiterateable.php
new file mode 100644
index 0000000..d307e94
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/objectiterateable.php
@@ -0,0 +1,15 @@
+<?php
+
+class Kint_Parsers_objectIterateable extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || !$variable instanceof Traversable ) return false;
+
+
+		$arrayCopy   = iterator_to_array( $variable, true );
+		$this->value = kintParser::factory( $arrayCopy )->extendedValue;
+		$this->type  = 'Iterator contents';
+		$this->size  = count( $arrayCopy );
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/splfileinfo.php b/modules/contrib/devel/kint/kint/parsers/custom/splfileinfo.php
new file mode 100644
index 0000000..6338141
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/splfileinfo.php
@@ -0,0 +1,13 @@
+<?php
+class Kint_Parsers_SplFileInfo extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || !$variable instanceof SplFileInfo ) return false;
+
+		$this->type    = 'object';
+		$this->subtype = 'SplFileInfo';
+		$realPath      = $variable->getRealPath();
+		$this->value   = Kint::shortenPath( $realPath ) . " ( {$realPath} )";
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/splobjectstorage.php b/modules/contrib/devel/kint/kint/parsers/custom/splobjectstorage.php
new file mode 100644
index 0000000..c355771
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/splobjectstorage.php
@@ -0,0 +1,20 @@
+<?php
+class Kint_Parsers_SplObjectStorage extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || get_class( $variable ) !== 'SplObjectStorage' ) return false;
+
+		/** @var $variable SplObjectStorage */
+
+		$variable->rewind();
+		while ( $variable->valid() ) {
+			$current       = $variable->current();
+			$this->value[] = kintParser::factory( $current );
+			$variable->next();
+		}
+
+		$this->type = 'Storage contents';
+		$this->size = $variable->count();
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/timestamp.php b/modules/contrib/devel/kint/kint/parsers/custom/timestamp.php
new file mode 100644
index 0000000..4c5f487
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/timestamp.php
@@ -0,0 +1,22 @@
+<?php
+class Kint_Parsers_Timestamp extends kintParser
+{
+	private static function _fits( $variable )
+	{
+		if ( !is_string( $variable ) && !is_int( $variable ) ) return false;
+
+		$len = strlen( (int)$variable );
+		return ( $len === 9 || $len === 10 ) // a little naive
+			&& ( (string)(int)$variable == $variable );
+	}
+
+
+	protected function _parse( & $variable )
+	{
+		if ( !self::_fits( $variable ) ) return false;
+
+		$this->type = 'timestamp';
+		# avoid dreaded "Timezone must be set" error
+		$this->value = @date( 'Y-m-d H:i:s', $variable );
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/custom/xml.php b/modules/contrib/devel/kint/kint/parsers/custom/xml.php
new file mode 100644
index 0000000..50d0def
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/custom/xml.php
@@ -0,0 +1,18 @@
+<?php
+class Kint_Parsers_Xml extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		try {
+			if ( !is_string( $variable )
+				|| substr( $variable, 0, 5 ) !== '<?xml'
+				|| ( $xml = simplexml_load_string( $variable ) ) === null
+			) return false;
+		} catch ( Exception $e ) {
+			return false;
+		}
+
+		$this->value = kintParser::factory( $xml )->extendedValue;
+		$this->type  = 'XML';
+	}
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/parsers/objects/smarty.php b/modules/contrib/devel/kint/kint/parsers/objects/smarty.php
new file mode 100644
index 0000000..b30937c
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/objects/smarty.php
@@ -0,0 +1,32 @@
+<?php
+class Kint_Objects_Smarty extends KintObject
+{
+	public function parse( & $variable )
+	{
+		if ( !$variable instanceof Smarty
+			|| !defined( 'Smarty::SMARTY_VERSION' ) # lower than 3.x
+		) return false;
+
+
+		$this->name = 'object Smarty (v' . substr( Smarty::SMARTY_VERSION, 7 ) . ')'; # trim 'Smarty-'
+
+		$assigned = $globalAssigns = array();
+		foreach ( $variable->tpl_vars as $name => $var ) {
+			$assigned[$name] = $var->value;
+		}
+		foreach ( Smarty::$global_tpl_vars as $name => $var ) {
+			if ( $name === 'SCRIPT_NAME' ) continue;
+
+			$globalAssigns[$name] = $var->value;
+		}
+
+		return array(
+			'Assigned'          => $assigned,
+			'Assigned globally' => $globalAssigns,
+			'Configuration'     => array(
+				'Compiled files stored in' => $variable->compile_dir,
+			)
+		);
+
+	}
+}
diff --git a/modules/contrib/devel/kint/kint/parsers/parser.class.php b/modules/contrib/devel/kint/kint/parsers/parser.class.php
new file mode 100644
index 0000000..5a83691
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/parsers/parser.class.php
@@ -0,0 +1,698 @@
+<?php
+abstract class kintParser extends kintVariableData
+{
+	private static $_level = 0;
+	private static $_customDataTypes;
+	private static $_objectParsers;
+	private static $_objects;
+	private static $_marker;
+
+	private static $_skipAlternatives = false;
+
+
+	private static function _init()
+	{
+		$fh = opendir( KINT_DIR . 'parsers/custom/' );
+		while ( $fileName = readdir( $fh ) ) {
+			if ( substr( $fileName, -4 ) !== '.php' ) continue;
+
+			require KINT_DIR . 'parsers/custom/' . $fileName;
+			self::$_customDataTypes[] = substr( $fileName, 0, -4 );
+		}
+		$fh = opendir( KINT_DIR . 'parsers/objects/' );
+		while ( $fileName = readdir( $fh ) ) {
+			if ( substr( $fileName, -4 ) !== '.php' ) continue;
+
+			require KINT_DIR . 'parsers/objects/' . $fileName;
+			self::$_objectParsers[] = substr( $fileName, 0, -4 );
+		}
+	}
+
+	public static function reset()
+	{
+		self::$_level   = 0;
+		self::$_objects = self::$_marker = null;
+	}
+
+	/**
+	 * main and usually single method a custom parser must implement
+	 *
+	 * @param mixed $variable
+	 *
+	 * @return mixed [!!!] false is returned if the variable is not of current type
+	 */
+	abstract protected function _parse( & $variable );
+
+
+	/**
+	 * the only public entry point to return a parsed representation of a variable
+	 *
+	 * @static
+	 *
+	 * @param      $variable
+	 * @param null $name
+	 *
+	 * @throws Exception
+	 * @return \kintParser
+	 */
+	public final static function factory( & $variable, $name = null )
+	{
+		isset( self::$_customDataTypes ) or self::_init();
+
+		# save internal data to revert after dumping to properly handle recursions etc
+		$revert = array(
+			'level'   => self::$_level,
+			'objects' => self::$_objects,
+		);
+
+		self::$_level++;
+
+		$name          = self::_escape( $name );
+		$varData       = new kintVariableData;
+		$varData->name = $name;
+
+		# first parse the variable based on its type
+		$varType = gettype( $variable );
+		$varType === 'unknown type' and $varType = 'unknown'; # PHP 5.4 inconsistency
+		$methodName = '_parse_' . $varType;
+
+		# objects can be presented in a different way altogether, INSTEAD, not ALONGSIDE the generic parser
+		if ( $varType === 'object' ) {
+			foreach ( self::$_objectParsers as $parserClass ) {
+				$className = 'Kint_Objects_' . $parserClass;
+
+				/** @var $object KintObject */
+				$object = new $className;
+				if ( ( $alternatives = $object->parse( $variable ) ) !== false ) {
+					self::$_skipAlternatives  = true;
+					$alternativeDisplay       = new kintVariableData;
+					$alternativeDisplay->type = $object->name;
+
+					foreach ( $alternatives as $name => $values ) {
+						$alternative       = kintParser::factory( $values );
+						$alternative->type = $name;
+						if ( Kint::$mode === 'text' || Kint::$mode === 'cli' ) {
+							$alternativeDisplay->extendedValue[] = $alternative;
+						} else {
+							empty( $alternative->value ) and $alternative->value = $alternative->extendedValue;
+							$alternativeDisplay->_alternatives[] = $alternative;
+						}
+					}
+
+					self::$_skipAlternatives = false;
+					return $alternativeDisplay;
+				}
+			}
+		}
+
+		# base type parser returning false means "stop processing further": e.g. recursion
+		if ( self::$methodName( $variable, $varData ) === false ) {
+			self::$_level--;
+			return $varData;
+		}
+
+		if ( Kint::$mode === 'rich' && !self::$_skipAlternatives ) {
+			# if an alternative returns something that can be represented in an alternative way, don't :)
+			self::$_skipAlternatives = true;
+
+			# now check whether the variable can be represented in a different way
+			foreach ( self::$_customDataTypes as $parserClass ) {
+				$className = 'Kint_Parsers_' . $parserClass;
+
+				/** @var $parser kintParser */
+				$parser       = new $className;
+				$parser->name = $name; # the parser may overwrite the name value, so set it first
+
+				if ( $parser->_parse( $variable ) !== false ) {
+					$varData->_alternatives[] = $parser;
+				}
+			}
+
+
+			# if alternatives exist, push extendedValue to their front and display it as one of alternatives
+			if ( !empty( $varData->_alternatives ) && isset( $varData->extendedValue ) ) {
+				$_ = new kintVariableData;
+
+				$_->value = $varData->extendedValue;
+				$_->type  = $varData->type;
+				$_->size  = $varData->size;
+
+				array_unshift( $varData->_alternatives, $_ );
+				$varData->extendedValue = null;
+			}
+
+			self::$_skipAlternatives = false;
+		}
+
+		self::$_level   = $revert['level'];
+		self::$_objects = $revert['objects'];
+		return $varData;
+	}
+
+	private static function _checkDepth()
+	{
+		return Kint::$maxLevels != 0 && self::$_level > Kint::$maxLevels;
+	}
+
+	private static function _isArrayTabular( $variable )
+	{
+		if ( Kint::$mode === 'plain' || Kint::$mode === 'cli' ) return false;
+
+		foreach ( $variable as $row ) {
+			if ( is_array( $row ) && !empty( $row ) ) {
+				if ( isset( $keys ) ) {
+					if ( $keys === array_keys( $row ) ) { // two rows have same keys in a row? Close enough.
+						return true;
+					}
+				} else {
+
+					foreach ( $row as $col ) {
+						if ( !is_scalar( $col ) && $col !== null ) {
+							break 2;
+						}
+					}
+
+					$keys = array_keys( $row );
+				}
+			} else {
+				break;
+			}
+		}
+
+		return false;
+	}
+
+	private static $_dealingWithGlobals = false;
+
+	private static function _parse_array( &$variable, kintVariableData $variableData )
+	{
+		isset( self::$_marker ) or self::$_marker = "\x00" . uniqid();
+
+		# naturally, $GLOBALS variable is an intertwined recursion nightmare, use black magic
+		$globalsDetector = false;
+		if ( array_key_exists( 'GLOBALS', $variable ) && is_array( $variable['GLOBALS'] ) ) {
+			$globalsDetector = "\x01" . uniqid();
+
+			$variable['GLOBALS'][$globalsDetector] = true;
+			if ( isset( $variable[$globalsDetector] ) ) {
+				unset( $variable[$globalsDetector] );
+				self::$_dealingWithGlobals = true;
+			} else {
+				unset( $variable['GLOBALS'][$globalsDetector] );
+				$globalsDetector = false;
+			}
+		}
+
+		$variableData->type = 'array';
+		$variableData->size = count( $variable );
+
+		if ( $variableData->size === 0 ) {
+			return;
+		}
+		if ( isset( $variable[self::$_marker] ) ) { # recursion; todo mayhaps show from where
+			if ( self::$_dealingWithGlobals ) {
+				$variableData->value = '*RECURSION*';
+			} else {
+				unset( $variable[self::$_marker] );
+				$variableData->value = self::$_marker;
+			}
+			return false;
+		}
+		if ( self::_checkDepth() ) {
+			$variableData->extendedValue = "*DEPTH TOO GREAT*";
+			return false;
+		}
+
+		$isSequential = self::_isSequential( $variable );
+
+		$tabular = self::_isArrayTabular( $variable );
+		if ( $tabular ) {
+
+			$firstRow      = true;
+			$extendedValue = '<table class="kint-report">';
+			$arrayKeys     = array();
+
+
+			// assure no values are unreported if an extra key appears in one of the lines
+			foreach ( $variable as $row ) {
+				// todo process all keys in _isArrayTabular()
+				if ( !is_array( $row ) ) {
+					$tabular = false;
+					break;
+				}
+				$arrayKeys = array_unique( array_merge( $arrayKeys, array_keys( $row ) ) );
+
+				if ( Kint::$keyFilterCallback ) {
+					foreach ( $arrayKeys as $k => $key ) {
+						if ( call_user_func( Kint::$keyFilterCallback, $key ) === false ) {
+							unset( $arrayKeys[$k] );
+						}
+					}
+				}
+			}
+		}
+
+
+		if ( $tabular ) {
+			$variable[self::$_marker] = true;
+			foreach ( $variable as $rowIndex => &$row ) {
+				if ( $rowIndex === self::$_marker ) continue;
+
+				if ( isset( $row[self::$_marker] ) ) {
+					$variableData->value = "*RECURSION*";
+					return false;
+				}
+
+
+				$extendedValue .= '<tr>';
+				$output = '<td>' . ( $isSequential ? '#' . ( $rowIndex + 1 ) : $rowIndex ) . '</td>';
+				if ( $firstRow ) {
+					$extendedValue .= '<th>&nbsp;</th>';
+				}
+
+				foreach ( $arrayKeys as $key ) {
+					if ( $firstRow ) {
+						$extendedValue .= '<th>' . self::_escape( $key ) . '</th>';
+					}
+
+					if ( !array_key_exists( $key, $row ) ) {
+						$output .= '<td class="kint-empty"></td>';
+						continue;
+					}
+
+					# display strings in their full length so as not to trigger rich decoration
+					$maxStrLength       = kint::$maxStrLength;
+					kint::$maxStrLength = false;
+					$var                = kintParser::factory( $row[$key] );
+					kint::$maxStrLength = $maxStrLength;
+
+					if ( $var->value === self::$_marker ) {
+						$variableData->value = '*RECURSION*';
+						return false;
+					} elseif ( $var->value === '*RECURSION*' ) {
+						$output .= '<td class="kint-empty">' . Kint_Decorators_Concise::decorate( $var ) . '</td>';
+					} else {
+						$output .= '<td>' . Kint_Decorators_Concise::decorate( $var ) . '</td>';
+					}
+					unset( $var );
+				}
+
+				if ( $firstRow ) {
+					$extendedValue .= '</tr><tr>';
+					$firstRow = false;
+				}
+
+				$extendedValue .= $output . '</tr>';
+			}
+
+			$variableData->extendedValue = $extendedValue . '</table>';
+
+		} else {
+			$variable[self::$_marker] = true;
+			$extendedValue            = array();
+
+			foreach ( $variable as $key => & $val ) {
+				if ( $key === self::$_marker
+					|| ( Kint::$keyFilterCallback && call_user_func( Kint::$keyFilterCallback, $key, $val ) === false )
+				) {
+					continue;
+				}
+
+
+				$output = kintParser::factory( $val );
+				if ( $output->value === self::$_marker ) {
+					$variableData->value = "*RECURSION*"; // recursion occurred on a higher level, thus $this is recursion
+					return false;
+				}
+				if ( !$isSequential ) {
+					$output->operator = '=>';
+				}
+				$output->name    = $isSequential ? null : "'" . self::_escape( $key ) . "'";
+				$extendedValue[] = $output;
+			}
+			$variableData->extendedValue = $extendedValue;
+		}
+
+		if ( $globalsDetector ) {
+			self::$_dealingWithGlobals = false;
+		}
+
+		unset( $variable[self::$_marker] );
+	}
+
+
+	private static function _parse_object( &$variable, kintVariableData $variableData )
+	{
+		if ( function_exists( 'spl_object_hash' ) ) {
+			$hash = spl_object_hash( $variable );
+		} else {
+			ob_start();
+			var_dump( $variable );
+			preg_match( '[#(\d+)]', ob_get_clean(), $match );
+			$hash = $match[1];
+		}
+
+		$castedArray           = (array) $variable;
+		$variableData->type    = 'object';
+		$variableData->subtype = get_class( $variable );
+		$variableData->size    = count( $castedArray );
+
+		if ( isset( self::$_objects[$hash] ) ) {
+			$variableData->value = '*RECURSION*';
+			return false;
+		}
+		if ( self::_checkDepth() ) {
+			$variableData->extendedValue = "*DEPTH TOO GREAT*";
+			return false;
+		}
+
+
+		# ArrayObject (and maybe ArrayIterator, did not try yet) unsurprisingly consist of mainly dark magic.
+		# What bothers me most, var_dump sees no problem with it, and ArrayObject also uses a custom,
+		# undocumented serialize function, so you can see the properties in internal functions, but
+		# can never iterate some of them if the flags are not STD_PROP_LIST. Fun stuff.
+		if ( $variableData->subtype === 'ArrayObject' || is_subclass_of( $variable, 'ArrayObject' ) ) {
+			$arrayObjectFlags = $variable->getFlags();
+			$variable->setFlags( ArrayObject::STD_PROP_LIST );
+		}
+
+		self::$_objects[$hash] = true; // todo store reflectorObject here for alternatives cache
+		$reflector             = new \ReflectionObject( $variable );
+
+		if ( Kint::$mode !== 'cli' && Kint::$mode !== 'whitespace' && Kint::$fileLinkFormat && $reflector->isUserDefined() ) {
+			list( $url ) = Kint::shortenPath(
+				$reflector->getFileName(),
+				$reflector->getStartLine(),
+				false
+			);
+
+			$_                     = ( strpos( $url, 'http://' ) === 0 ) ? 'class="kint-ide-link" ' : '';
+			$variableData->subtype = "<a {$_}href=\"{$url}\">{$variableData->subtype}</a>";
+		}
+		$variableData->size = 0;
+
+		$extendedValue = array();
+		$encountered   = array();
+
+		# copy the object as an array as it provides more info than Reflection (depends)
+		foreach ( $castedArray as $key => $value ) {
+			if ( Kint::$keyFilterCallback
+				&& call_user_func_array( Kint::$keyFilterCallback, array( $key, $value ) ) === false
+			) {
+				continue;
+			}
+
+			/* casting object to array:
+			 * integer properties are inaccessible;
+			 * private variables have the class name prepended to the variable name;
+			 * protected variables have a '*' prepended to the variable name.
+			 * These prepended values have null bytes on either side.
+			 * http://www.php.net/manual/en/language.types.array.php#language.types.array.casting
+			 */
+			if ( $key{0} === "\x00" ) {
+
+				$access = $key{1} === "*" ? "protected" : "private";
+
+				// Remove the access level from the variable name
+				$key = substr( $key, strrpos( $key, "\x00" ) + 1 );
+			} else {
+				$access = "public";
+			}
+
+			$encountered[$key] = true;
+
+			$output           = kintParser::factory( $value, self::_escape( $key ) );
+			$output->access   = $access;
+			$output->operator = '->';
+			$extendedValue[]  = $output;
+			$variableData->size++;
+		}
+
+		foreach ( $reflector->getProperties() as $property ) {
+			$name = $property->name;
+			if ( $property->isStatic() || isset( $encountered[$name] ) ) continue;
+
+			if ( $property->isProtected() ) {
+				$property->setAccessible( true );
+				$access = "protected";
+			} elseif ( $property->isPrivate() ) {
+				$property->setAccessible( true );
+				$access = "private";
+			} else {
+				$access = "public";
+			}
+
+			$value = $property->getValue( $variable );
+
+			if ( Kint::$keyFilterCallback
+				&& call_user_func_array( Kint::$keyFilterCallback, array( $name, $value ) ) === false
+			) {
+				continue;
+			}
+
+			$output           = kintParser::factory( $value, self::_escape( $name ) );
+			$output->access   = $access;
+			$output->operator = '->';
+			$extendedValue[]  = $output;
+			$variableData->size++;
+		}
+
+		if ( isset( $arrayObjectFlags ) ) {
+			$variable->setFlags( $arrayObjectFlags );
+		}
+
+		if ( $variableData->size ) {
+			$variableData->extendedValue = $extendedValue;
+		}
+	}
+
+
+	private static function _parse_boolean( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'bool';
+		$variableData->value = $variable ? 'TRUE' : 'FALSE';
+	}
+
+	private static function _parse_double( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'float';
+		$variableData->value = $variable;
+	}
+
+	private static function _parse_integer( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'integer';
+		$variableData->value = $variable;
+	}
+
+	private static function _parse_null( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type = 'NULL';
+	}
+
+	private static function _parse_resource( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type    = 'resource';
+		$variableData->subtype = get_resource_type( $variable );
+
+		if ( $variableData->subtype === 'stream' && $meta = stream_get_meta_data( $variable ) ) {
+
+			if ( isset( $meta['uri'] ) ) {
+				$file = $meta['uri'];
+
+				if ( function_exists( 'stream_is_local' ) ) {
+					// Only exists on PHP >= 5.2.4
+					if ( stream_is_local( $file ) ) {
+						$file = Kint::shortenPath( $file );
+					}
+				}
+
+				$variableData->value = $file;
+			}
+		}
+	}
+
+	private static function _parse_string( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type = 'string';
+
+		if ( Kint::$mode === 'cli' || Kint::$mode === 'whitespace' ) {
+			$variableData->value = '"' . $variable . '"';
+			return;
+		}
+
+
+		$encoding = self::_detectEncoding( $variable );
+		if ( $encoding !== 'ASCII' ) {
+			$variableData->subtype = $encoding;
+		}
+
+		$variableData->size = self::_strlen( $variable, $encoding );
+		$strippedString     = Kint::$mode === 'rich' ? self::_stripWhitespace( $variable ) : $variable;
+		if ( Kint::$mode === 'rich' && Kint::$maxStrLength && $variableData->size > Kint::$maxStrLength ) {
+
+			// encode and truncate
+			$variableData->value         = '"'
+				. self::_escape( self::_substr( $strippedString, Kint::$maxStrLength, $encoding ), $encoding )
+				. '&nbsp;&hellip;"';
+			$variableData->extendedValue = self::_escape( $variable, $encoding );
+
+		} elseif ( $variable !== $strippedString ) { // omit no data from display
+
+			$variableData->value         = '"' . self::_escape( $variable, $encoding ) . '"';
+			$variableData->extendedValue = self::_escape( $variable, $encoding );
+		} else {
+			$variableData->value = '"' . self::_escape( $variable, $encoding ) . '"';
+		}
+	}
+
+	private static function _parse_unknown( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type    = "UNKNOWN";
+		$variableData->subtype = gettype( $variable );
+		$variableData->value   = var_export( $variable, true );
+	}
+
+}
+
+# todo separate classes into separate files
+
+class kintVariableData
+{
+	/** @var string */
+	public $type;
+	/** @var string */
+	public $access;
+	/** @var string */
+	public $name;
+	/** @var string */
+	public $operator;
+	/** @var string */
+	public $subtype;
+	/** @var int */
+	public $size;
+	/**
+	 * @var kintVariableData[] array of kintVariableData objects or strings; displayed collapsed, each element from
+	 * the array is a separate possible representation of the dumped var
+	 */
+	public $extendedValue;
+	/** @var string inline value */
+	public $value;
+
+	/** @var kintVariableData[] array of alternative representations for same variable, don't use in custom parsers */
+	public $_alternatives;
+
+	/* *******************************************
+	 * HELPERS
+	 */
+
+	protected static function _escape( $value, $encoding = null )
+	{
+		if ( Kint::$mode === 'cli' || Kint::$mode === 'whitespace' || empty( $value ) ) return $value;
+
+		$value = htmlspecialchars( $value, ENT_QUOTES );
+		if ( function_exists( 'mb_encode_numericentity' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $value );
+			$value = mb_encode_numericentity(
+				$value,
+				array( 0x80, 0xffff, 0, 0xffff, ),
+				$encoding
+			);
+		}
+
+		# when possible force invisible characters to have some sort of display (experimental)
+		// todo we could make the symbols hover-title show the code for the invisible symbol
+		return preg_replace( '/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\x9F]/u', '�', $value );
+	}
+
+	protected static function _detectEncoding( $value )
+	{
+		$ret = null;
+		if ( function_exists( 'mb_detect_encoding' ) ) {
+			$mbDetected = mb_detect_encoding( $value );
+			if ( $mbDetected === 'ASCII' ) {
+				return 'ASCII';
+			}
+		}
+
+		if ( empty( Kint::$charEncodings ) || !function_exists( 'iconv' ) ) {
+			return !empty( $mbDetected ) ? $mbDetected : 'UTF-8';
+		}
+
+		$md5 = md5( $value );
+		foreach ( array_merge( array( 'UTF-8' ), Kint::$charEncodings ) as $encoding ) {
+			if ( empty( $encoding ) ) continue;
+
+			# fuck knows why, //IGNORE and //TRANSLIT still throw notice
+			if ( md5( @iconv( $encoding, $encoding, $value ) ) === $md5 ) {
+				return $encoding;
+			}
+		}
+
+		return 'ASCII';
+	}
+
+	/**
+	 * zaps all excess whitespace from string, compacts it but hurts readability
+	 *
+	 * @param string $string
+	 *
+	 * @return string
+	 */
+	protected static function _stripWhitespace( $string )
+	{
+		return preg_replace( '[\s+]', ' ', $string );
+	}
+
+
+	/**
+	 * returns whether the array:
+	 *  1) is numeric and
+	 *  2) in sequence starting from zero
+	 *
+	 * @param array $array
+	 *
+	 * @return bool
+	 */
+	protected static function _isSequential( array $array )
+	{
+		return Kint::$hideSequentialKeys
+			? array_keys( $array ) === range( 0, count( $array ) - 1 )
+			: false;
+	}
+
+	protected static function _strlen( $string, $encoding = null )
+	{
+		if ( function_exists( 'mb_strlen' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $string );
+			return mb_strlen( $string, $encoding );
+		} else {
+			return strlen( $string );
+		}
+	}
+
+	protected static function _substr( $string, $end, $encoding = null )
+	{
+		if ( function_exists( 'mb_substr' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $string );
+			return mb_substr( $string, 0, $end, $encoding );
+		} else {
+			return substr( $string, 0, $end );
+		}
+	}
+}
+
+abstract class KintObject
+{
+	/** @var string type of variable, can be set in inherited object or in static::parse() method */
+	public $name = 'NOT SET';
+
+	/**
+	 * returns false or associative array - each key represents a tab in default view, values may be anything
+	 *
+	 * @param $variable
+	 *
+	 * @return mixed
+	 */
+	abstract public function parse( & $variable );
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/scripts/source.reg b/modules/contrib/devel/kint/kint/scripts/source.reg
new file mode 100644
index 0000000..3d80930
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/scripts/source.reg
@@ -0,0 +1,12 @@
+REGEDIT4
+
+[HKEY_CLASSES_ROOT\source]
+@="URL:source Protocol"
+"URL Protocol"=""
+
+[HKEY_CLASSES_ROOT\source\shell]
+
+[HKEY_CLASSES_ROOT\source\shell\open]
+
+[HKEY_CLASSES_ROOT\source\shell\open\command]
+@="wscript.exe \"C:\\Program Files\\bin\\source.vbs\" \"%1\"" 
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/scripts/source.vbs b/modules/contrib/devel/kint/kint/scripts/source.vbs
new file mode 100644
index 0000000..3345dbe
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/scripts/source.vbs
@@ -0,0 +1,80 @@
+'INSTALLATION:
+'set editor link format to 'source:<filename>:<line>'
+'move this file to C:\Program Files\bin\source.vbs and run source.reg
+'customize directory mappings and editor command below
+
+'*****************
+'start of settings
+'*****************
+Dim command, protocol, change_slashes, debug
+Set dirmap = CreateObject("Scripting.Dictionary")
+
+'list of server paths (as regular expressions) 
+'and matching local paths (as regexp replace strings)
+'use this to replace the beginning of the path
+'if none of the regular expressions match, the script will show an error
+
+'local setup, when PHP and editor runs from the same machine
+dirmap.Add "^([C-Z]:\\)", "$1"
+
+'a typical remote Linux setup
+'dirmap.Add "^/var/www/", "C:\Projects\"
+'dirmap.Add "^/usr/share/php5/",  "C:\Projects\debug-source"
+
+'command to execute; %f is the file name, %l is the line number
+'dont forget to quote file names (quotes can be escaped by writing twice)
+command = """C:\Program Files\Notepad++\notepad++.exe"" -n%l ""%f"""
+
+'if true, forward slashes will be changed to backslashes in the filename
+'(after the regex replacements)
+change_slashes = True
+
+'protocol name used in the source edit links
+protocol = "source"
+
+'if true, alerts the command before executing it
+debug = False
+
+'***************
+'end of settings
+'***************
+
+Select Case WScript.Arguments.Count
+	Case 0
+		WScript.Echo "Wrong source link"
+		WScript.Quit
+End Select
+
+Dim link, split, file, line, found, strArgs
+
+link = Mid(WScript.Arguments.Item(0), Len(protocol) + 2)
+split = InStrRev(link, ":")
+file = Left(link, split - 1)
+line = Mid(link, split + 1)
+
+found = False
+For Each serverPath In dirmap
+	Set regexp = New RegExp
+	regexp.Pattern = serverPath
+	If regexp.Test(file) Then
+		found = True
+		Exit For
+	End If
+Next
+If Not found Then
+	WScript.Echo "don't know where to find " & file & " locally"
+	WScript.Quit
+End If
+file = regexp.Replace(file, dirmap.Item(serverPath))
+if change_slashes Then
+	file = Replace(file, "/", "\")
+End If
+
+strArgs = command
+strArgs = Replace(strArgs, "%l", line)
+strArgs = Replace(strArgs, "%f", file)
+If debug Then
+	WScript.Echo strArgs
+End If
+Set oShell = CreateObject ("Wscript.Shell") 
+oShell.Run strArgs, 0, false
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/compiled/main/aante-light.css b/modules/contrib/devel/kint/kint/view/compiled/main/aante-light.css
new file mode 100644
index 0000000..c3d4a2e
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/main/aante-light.css
@@ -0,0 +1 @@
+.kint::selection{background:#aaa;color:#1d1e1e}.kint::-moz-selection{background:#aaa;color:#1d1e1e}.kint::-webkit-selection{background:#aaa;color:#1d1e1e}.kint{font-family:Consolas,"Courier New",monospace;color:#1d1e1e;padding:0;margin:8px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#f8f8f8;border:1px solid #d7d7d7;color:#1d1e1e;display:block;font-weight:bold;list-style:none outside none;padding:4px}.kint dt:hover{border-color:#aaa}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 12px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAYAAAC5OOBJAAAAvklEQVR42mNgGMFAS0uLLSQk5HxoaOh/XDg4OLgdpwEBAQEGQAN+YtMIFH/i4ODAg9cFQNMbsWkOCgrKJMv5ID5Qipko/6M7PzAw0ImkAIQ5H0hvISv0gZpP+fn5qZAVfcBAkmEYBaNZcjRLjmbJUUCvqAIlDlAiASUWkjWDkiU0eTaSpBGUEZBy1E9QRiFWLzO2LEmU80GZHkcRhN/5oGIGVNzgKIbwOx9UwOErAIl2/igYzZKjWXI0S9IHAAASJijo0Ypj8AAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #d7d7d7}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#06f;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#f00}.kint dfn{font-style:normal;font-family:monospace;color:#1d1e1e}.kint pre{color:#1d1e1e;margin:0 0 0 12px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #d7d7d7;background:#f8f8f8;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#aaa}.kint .kint-popup-trigger:hover{color:#d7d7d7}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#1d1e1e;text-shadow:none}.kint a:hover{color:#1d1e1e;border-bottom:1px dotted #1d1e1e}.kint ul{list-style:none;padding-left:12px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #d7d7d7}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 12px;padding-left:0;background:#f8f8f8;border:1px solid #d7d7d7;border-top:0}.kint ul.kint-tabs li{background:#f8f8f8;border:1px solid #d7d7d7;cursor:pointer;display:inline-block;height:23px;line-height:23px;margin:0 4px 4px;padding:0 10px 2px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#aaa;color:#f00}.kint ul.kint-tabs li.kint-active-tab{background:#f8f8f8;border-top:0;margin-top:-1px;padding-bottom:2px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#aaa;color:#f00}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#1d1e1e}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #d7d7d7}.kint-report td,.kint-report th{border:1px solid #d7d7d7;vertical-align:top}.kint-report td{background:#f8f8f8;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#f8f8f8;color:#1d1e1e}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #aaa inset}.kint-report tr:hover var{color:#f00}.kint-trace .kint-source{line-height:1.08em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #06f}.kint-trace .kint-source .kint-highlight{background:#f8f8f8}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#1d1e1e}.kint-trace .kint-parent>var>a{color:#06f}.kint-focused{box-shadow:0 0 3px 2px #f00}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint dt{font-weight:normal}.kint dt.kint-parent{margin-top:4px}.kint dl dl{margin-top:4px;padding-left:25px;border-left:none}.kint>dl>dt{background:#f8f8f8}.kint ul{margin:0;padding-left:0}.kint ul:not(.kint-tabs)>li{border-left:0}.kint ul.kint-tabs{background:#f8f8f8;border:1px solid #d7d7d7;border-width:0 1px 1px 1px;padding:4px 0 0 12px;margin-left:-1px;margin-top:-1px}.kint ul.kint-tabs li,.kint ul.kint-tabs li+li{margin:0 0 0 4px}.kint ul.kint-tabs li{border-bottom-width:0}.kint ul.kint-tabs li:first-child{margin-left:0}.kint ul.kint-tabs li.kint-active-tab{border-top:1px solid #d7d7d7;background:#fff;font-weight:bold;padding-top:0;border-bottom:1px solid #fff!important;margin-bottom:-1px}.kint ul.kint-tabs li.kint-active-tab:hover{border-bottom:1px solid #fff}.kint ul>li>pre{border:1px solid #d7d7d7}.kint dt:hover+dd>ul{border-color:#aaa}.kint pre{background:#fff;margin-top:4px;margin-left:25px}.kint .kint-popup-trigger:hover{color:#f00}.kint .kint-source .kint-highlight{background:#cfc}.kint-report td{background:#fff;padding:1px 2px!important}.kint-report td:first-child,.kint-report th{padding:0 2px!important}.kint-report td.kint-empty{background:#d7d7d7!important}.kint-report tr:hover>td{box-shadow:none;background:#cfc}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/compiled/main/kint.js b/modules/contrib/devel/kint/kint/view/compiled/main/kint.js
new file mode 100644
index 0000000..cfd5dbf
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/main/kint.js
@@ -0,0 +1,9 @@
+(function(){if("undefined"===typeof kintInitialized){kintInitialized=1;var e=[],f=-1,g=function(b){var a=window.getSelection(),c=document.createRange();c.selectNodeContents(b);a.removeAllRanges();a.addRange(c)},h=function(b){Array.prototype.slice.call(document.querySelectorAll(".kint nav, .kint-tabs>li:not(.kint-active-tab)"),0).forEach(b)},k=function(b,a){"undefined"===typeof a&&(a="kint-show");return RegExp("(\\s|^)"+a+"(\\s|$)").test(b.className)},m=function(b,a){"undefined"===typeof a&&(a="kint-show");l(b,
+a).className+=" "+a},l=function(b,a){"undefined"===typeof a&&(a="kint-show");b.className=b.className.replace(RegExp("(\\s|^)"+a+"(\\s|$)")," ");return b},n=function(b){do b=b.nextElementSibling;while("dd"!==b.nodeName.toLowerCase());return b},p=function(b,a){var c=n(b);"undefined"===typeof a&&(a=k(b));a?l(b):m(b);1===c.childNodes.length&&(c=c.childNodes[0].childNodes[0],k(c,"kint-parent")&&p(c,a))},r=function(b,a){var c=n(b).getElementsByClassName("kint-parent"),d=c.length;for("undefined"===typeof a&&
+(a=k(b));d--;)p(c[d],a);p(b,a)},s=function(b){var a=b,c=0;b.parentNode.getElementsByClassName("kint-active-tab")[0].className="";for(b.className="kint-active-tab";a=a.previousSibling;)1===a.nodeType&&c++;b=b.parentNode.nextSibling.childNodes;for(var d=0;d<b.length;d++)d===c?(b[d].style.display="block",1===b[d].childNodes.length&&(a=b[d].childNodes[0].childNodes[0],k(a,"kint-parent")&&p(a,!1))):b[d].style.display="none"},t=function(b){for(;b=b.parentNode,b&&!k(b,"kint"););return!!b},u=function(){e=
+[];h(function(b){0===b.offsetWidth&&0===b.offsetHeight||e.push(b)})},v=function(b){var a;if(a=window.open())a.document.open(),a.document.write("<html><head><title>Kint ("+(new Date).toISOString()+')</title><meta charset="utf-8">'+document.getElementsByClassName("-kint-js")[0].outerHTML+document.getElementsByClassName("-kint-css")[0].outerHTML+'</head><body><input style="width: 100%" placeholder="Take some notes!"><div class="kint">'+b.parentNode.outerHTML+"</div></body>"),a.document.close()},w=function(b){var a=
+document.querySelector(".kint-focused");a&&l(a,"kint-focused");if(-1!==b){a=e[b];m(a,"kint-focused");var c=function(a){return a.offsetTop+(a.offsetParent?c(a.offsetParent):0)};window.scrollTo(0,c(a)-window.innerHeight/2)}f=b},x=function(b,a){b?0>--a&&(a=e.length-1):++a>=e.length&&(a=0);w(a);return!1};window.addEventListener("click",function(b){var a=b.target,c=a.nodeName.toLowerCase();if(t(a)){"dfn"===c?(g(a),a=a.parentNode):"var"===c&&(a=a.parentNode,c=a.nodeName.toLowerCase());if("li"===c&&"kint-tabs"===
+a.parentNode.className)return"kint-active-tab"!==a.className&&(s(a),-1!==f&&u()),!1;if("nav"===c)return"footer"===a.parentNode.nodeName.toLowerCase()?(a=a.parentNode,k(a)?l(a):m(a)):setTimeout(function(){0<parseInt(a.a,10)?a.a--:(r(a.parentNode),-1!==f&&u())},300),b.stopPropagation(),!1;if(k(a,"kint-parent"))return p(a),-1!==f&&u(),!1;if(k(a,"kint-ide-link"))return b.preventDefault(),b=new XMLHttpRequest,b.open("GET",a.href),b.send(null),!1;if(k(a,"kint-popup-trigger")){b=a.parentNode;if("footer"===
+b.nodeName.toLowerCase())b=b.previousSibling;else for(;b&&!k(b,"kint-parent");)b=b.parentNode;v(b)}}},!1);window.addEventListener("dblclick",function(b){var a=b.target;if(t(a)&&"nav"===a.nodeName.toLowerCase()){a.a=2;for(var c=document.getElementsByClassName("kint-parent"),d=c.length,a=k(a.parentNode);d--;)p(c[d],a);-1!==f&&u();b.stopPropagation()}},!1);window.onkeydown=function(b){if(b.target===document.body&&!b.altKey){var a=b.keyCode,c=b.shiftKey;b=f;if(68===a){if(-1===b)return u(),x(!1,b);w(-1);
+return!1}if(-1!==b){if(9===a)return x(c,b);if(38===a)return x(!0,b);if(40===a)return x(!1,b);if(-1!==b){c=e[b];if("li"===c.nodeName.toLowerCase()){if(32===a||13===a)return s(c),u(),x(!0,b);if(39===a)return x(!1,b);if(37===a)return x(!0,b)}c=c.parentNode;if(32===a||13===a)return p(c),u(),!1;if(39===a||37===a){var d=k(c),a=37===a;if(d)r(c,a);else{if(a){do c=c.parentNode;while(c&&"dd"!==c.nodeName.toLowerCase());if(c){c=c.previousElementSibling;b=-1;for(d=c.querySelector("nav");d!==e[++b];);w(b)}else c=
+e[b].parentNode}p(c,a)}u();return!1}}}}};var y=function(){var b=Array.prototype.slice.call(document.querySelectorAll(".kint-microtime"),0);b.forEach(function(a){var c=parseFloat(a.innerHTML),d=Infinity,q=-Infinity;b.forEach(function(a){a=parseFloat(a.innerHTML);d>a&&(d=a);q<a&&(q=a)});a.style.background="hsl("+Math.round(120*(1-(c-d)/(q-d)))+",60%,70%)"})};window.addEventListener("load",y);window.addEventListener("kint-load",y)};})()
diff --git a/modules/contrib/devel/kint/kint/view/compiled/main/original.css b/modules/contrib/devel/kint/kint/view/compiled/main/original.css
new file mode 100644
index 0000000..5937fc1
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/main/original.css
@@ -0,0 +1 @@
+.kint::selection{background:#0092db;color:#1d1e1e}.kint::-moz-selection{background:#0092db;color:#1d1e1e}.kint::-webkit-selection{background:#0092db;color:#1d1e1e}.kint{font-family:Consolas,"Courier New",monospace;color:#1d1e1e;padding:0;margin:8px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#e0eaef;border:1px solid #b6cedb;color:#1d1e1e;display:block;font-weight:bold;list-style:none outside none;padding:4px}.kint dt:hover{border-color:#0092db}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 12px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAACVBMVEX///82b4tctzBls0NMAAAAQklEQVR42rWRIQ4AAAgCwf8/2qgER2BeuwJsgAqIzekMfMryPL9XQSkobE6vwKcsz/N7FfPvh09lnPf/b+7673+f0uHuAZ/EdkNQAAAAAElFTkSuQmCC") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #b6cedb}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#0092db;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#5cb730}.kint dfn{font-style:normal;font-family:monospace;color:#1d1e1e}.kint pre{color:#1d1e1e;margin:0 0 0 12px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #b6cedb;background:#e0eaef;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#0092db}.kint .kint-popup-trigger:hover{color:#b6cedb}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#1d1e1e;text-shadow:none}.kint a:hover{color:#1d1e1e;border-bottom:1px dotted #1d1e1e}.kint ul{list-style:none;padding-left:12px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #b6cedb}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 12px;padding-left:0;background:#e0eaef;border:1px solid #b6cedb;border-top:0}.kint ul.kint-tabs li{background:#c1d4df;border:1px solid #b6cedb;cursor:pointer;display:inline-block;height:23px;line-height:23px;margin:0 4px 4px;padding:0 10px 2px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#0092db;color:#5cb730}.kint ul.kint-tabs li.kint-active-tab{background:#e0eaef;border-top:0;margin-top:-1px;padding-bottom:2px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#0092db;color:#5cb730}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#1d1e1e}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #b6cedb}.kint-report td,.kint-report th{border:1px solid #b6cedb;vertical-align:top}.kint-report td{background:#e0eaef;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#c1d4df;color:#1d1e1e}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #0092db inset}.kint-report tr:hover var{color:#5cb730}.kint-trace .kint-source{line-height:1.08em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #0092db}.kint-trace .kint-source .kint-highlight{background:#c1d4df}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#1d1e1e}.kint-trace .kint-parent>var>a{color:#0092db}.kint-focused{box-shadow:0 0 3px 2px #5cb730}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint>dl>dt{background:linear-gradient(to bottom,#e3ecf0 0,#c0d4df 100%)}.kint ul.kint-tabs{background:linear-gradient(to bottom,#9dbed0 0,#b2ccda 100%)}.kint>dl:not(.kint-trace)>dd>ul.kint-tabs li{background:#e0eaef}.kint>dl:not(.kint-trace)>dd>ul.kint-tabs li.kint-active-tab{background:#c1d4df}.kint>dl.kint-trace>dt{background:linear-gradient(to bottom,#c0d4df 0,#e3ecf0 100%)}.kint .kint-source .kint-highlight{background:#f0eb96}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/compiled/main/solarized-dark.css b/modules/contrib/devel/kint/kint/view/compiled/main/solarized-dark.css
new file mode 100644
index 0000000..7cf6cd5
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/main/solarized-dark.css
@@ -0,0 +1 @@
+.kint::selection{background:#268bd2;color:#839496}.kint::-moz-selection{background:#268bd2;color:#839496}.kint::-webkit-selection{background:#268bd2;color:#839496}.kint{font-family:Consolas,"Courier New",monospace;color:#839496;padding:0;margin:10px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#002b36;border:1px solid #586e75;color:#839496;display:block;font-weight:bold;list-style:none outside none;padding:5px}.kint dt:hover{border-color:#268bd2}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 15px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #586e75}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#268bd2;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#2aa198}.kint dfn{font-style:normal;font-family:monospace;color:#93a1a1}.kint pre{color:#839496;margin:0 0 0 15px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #586e75;background:#002b36;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#268bd2}.kint .kint-popup-trigger:hover{color:#586e75}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#839496;text-shadow:none}.kint a:hover{color:#93a1a1;border-bottom:1px dotted #93a1a1}.kint ul{list-style:none;padding-left:15px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #586e75}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 15px;padding-left:0;background:#002b36;border:1px solid #586e75;border-top:0}.kint ul.kint-tabs li{background:#073642;border:1px solid #586e75;cursor:pointer;display:inline-block;height:24px;line-height:24px;margin:0 5px 5px;padding:0 12px 3px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#268bd2;color:#2aa198}.kint ul.kint-tabs li.kint-active-tab{background:#002b36;border-top:0;margin-top:-1px;padding-bottom:3px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#268bd2;color:#2aa198}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#839496}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #586e75}.kint-report td,.kint-report th{border:1px solid #586e75;vertical-align:top}.kint-report td{background:#002b36;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#073642;color:#93a1a1}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #268bd2 inset}.kint-report tr:hover var{color:#2aa198}.kint-trace .kint-source{line-height:1.1em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #268bd2}.kint-trace .kint-source .kint-highlight{background:#073642}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#93a1a1}.kint-trace .kint-parent>var>a{color:#268bd2}.kint-focused{box-shadow:0 0 3px 2px #859900 inset;border-radius:7px}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}body{background:#073642;color:#fff}.kint{background:#073642;box-shadow:0 0 5px 3px #073642}.kint>dl>dt,.kint ul.kint-tabs{box-shadow:4px 0 2px -3px #268bd2 inset}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/compiled/main/solarized.css b/modules/contrib/devel/kint/kint/view/compiled/main/solarized.css
new file mode 100644
index 0000000..882442b
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/main/solarized.css
@@ -0,0 +1 @@
+.kint::selection{background:#268bd2;color:#657b83}.kint::-moz-selection{background:#268bd2;color:#657b83}.kint::-webkit-selection{background:#268bd2;color:#657b83}.kint{font-family:Consolas,"Courier New",monospace;color:#657b83;padding:0;margin:10px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#fdf6e3;border:1px solid #93a1a1;color:#657b83;display:block;font-weight:bold;list-style:none outside none;padding:5px}.kint dt:hover{border-color:#268bd2}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 15px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #93a1a1}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#268bd2;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#2aa198}.kint dfn{font-style:normal;font-family:monospace;color:#586e75}.kint pre{color:#657b83;margin:0 0 0 15px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #93a1a1;background:#fdf6e3;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#268bd2}.kint .kint-popup-trigger:hover{color:#93a1a1}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#657b83;text-shadow:none}.kint a:hover{color:#586e75;border-bottom:1px dotted #586e75}.kint ul{list-style:none;padding-left:15px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #93a1a1}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 15px;padding-left:0;background:#fdf6e3;border:1px solid #93a1a1;border-top:0}.kint ul.kint-tabs li{background:#eee8d5;border:1px solid #93a1a1;cursor:pointer;display:inline-block;height:24px;line-height:24px;margin:0 5px 5px;padding:0 12px 3px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#268bd2;color:#2aa198}.kint ul.kint-tabs li.kint-active-tab{background:#fdf6e3;border-top:0;margin-top:-1px;padding-bottom:3px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#268bd2;color:#2aa198}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#657b83}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #93a1a1}.kint-report td,.kint-report th{border:1px solid #93a1a1;vertical-align:top}.kint-report td{background:#fdf6e3;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#eee8d5;color:#586e75}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #268bd2 inset}.kint-report tr:hover var{color:#2aa198}.kint-trace .kint-source{line-height:1.1em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #268bd2}.kint-trace .kint-source .kint-highlight{background:#eee8d5}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#586e75}.kint-trace .kint-parent>var>a{color:#268bd2}.kint-focused{box-shadow:0 0 3px 2px #859900 inset;border-radius:7px}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint>dl>dt,.kint ul.kint-tabs{box-shadow:4px 0 2px -3px #268bd2 inset}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/compiled/modular-window/kint.js b/modules/contrib/devel/kint/kint/view/compiled/modular-window/kint.js
new file mode 100644
index 0000000..9c0bfb9
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/modular-window/kint.js
@@ -0,0 +1,4 @@
+(function(){if("undefined"!==typeof jQuery){document.body.insertAdjacentHTML("beforeend",'<div id="kint-backdrop">Ajax output</div><div id="kint-modular"></div><div id="kint-modular-placeholder">[Debug output]</div>');var c=document.getElementById("kint-modular"),d=document.getElementById("kint-modular-placeholder"),f=document.getElementById("kint-backdrop"),h=window.getComputedStyle(document.body),h={a:h.backgroundColor,b:h.color},l=function(a){var b=a?"none":"block";a?(document.body.style.backgroundColor=h.a,
+document.body.style.color=h.b,a="block",window.addEventListener("mousedown",k)):(a="none",window.removeEventListener("mousedown",k));c.style.display=a;f.style.display=a;d.style.display=b},k=function(a){for(a=a.target;a&&a!==c;)a=a.parentNode;a||l();return!1},n=!1;jQuery(document).ajaxComplete(function(a,b,e){a=b.getResponseHeader("kint");var g;if(a){for(var m=1;;m++){g=b.getResponseHeader("kint-"+m);if(!g)break;a+=g}b=document.createElement("a");b.setAttribute("href",e.url);b.innerHTML=e.url+" ["+
+(new Date).toLocaleTimeString()+"]";b.title="Click to resend";e.complete=function(){c.style.opacity=1};b.onclick=function(){c.style.opacity=0.7;jQuery.ajax(e);return!1};c.appendChild(b);c.insertAdjacentHTML("beforeend",decodeURIComponent(a));n||(b=c.querySelectorAll(".-kint-js"),b.length&&(n=!0,a=document.createElement("script"),a.appendChild(document.createTextNode(b[0].innerHTML)),document.body.appendChild(a),b=document.createEvent("Event"),b.initEvent("kint-load",!0,!0),window.dispatchEvent(b)));
+l(!0)}});d.addEventListener("click",l)};})()
diff --git a/modules/contrib/devel/kint/kint/view/compiled/modular-window/original.css b/modules/contrib/devel/kint/kint/view/compiled/modular-window/original.css
new file mode 100644
index 0000000..d88c760
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/compiled/modular-window/original.css
@@ -0,0 +1 @@
+#kint-modular{background:#fff;border:1px solid #b6cedb;display:none;font-family:Consolas,"Courier New",monospace;left:calc(50% - 450px);line-height:15px;overflow-y:scroll;padding:8px;position:fixed;top:30px;bottom:30px;width:900px;z-index: 2147483647}#kint-modular pre{background:#e0eaef;border-radius:0;color:#1d1e1e;margin:8px 0;padding:5px;overflow-y:hidden;border:1px solid #b6cedb;display:block;word-break:normal}#kint-modular pre:last-child{margin-bottom:0}#kint-backdrop{cursor:pointer;opacity:.8;height:100%;position:fixed;width:100%;left:0;overflow:hidden;top:0;background:radial-gradient(ellipse at center,#e0eaef 0,#c1d4df 100%);z-index: 2147483647;display:none;text-align:center;font-size:15pt;text-shadow:0 0 5px #5cb730;color:#0092db}#kint-modular-placeholder{border:1px solid #b6cedb;display:none;position:fixed;bottom:0;left:0;background:#e0eaef;color:#1d1e1e;z-index:2147483647;cursor:move}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/js/main.js b/modules/contrib/devel/kint/kint/view/js/main.js
new file mode 100644
index 0000000..512c8ff
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/js/main.js
@@ -0,0 +1,411 @@
+/**
+ java -jar compiler.jar --js $FileName$ --js_output_file ../inc/kint.js --compilation_level ADVANCED_OPTIMIZATIONS --output_wrapper "(function(){%output%})()"
+ */
+
+if ( typeof kintInitialized === 'undefined' ) {
+	kintInitialized = 1;
+	var kint = {
+		visiblePluses : [], // all visible toggle carets
+		currentPlus   : -1, // currently selected caret
+
+		selectText : function( element ) {
+			var selection = window.getSelection(),
+				range = document.createRange();
+
+			range.selectNodeContents(element);
+			selection.removeAllRanges();
+			selection.addRange(range);
+		},
+
+		each : function( selector, callback ) {
+			Array.prototype.slice.call(document.querySelectorAll(selector), 0).forEach(callback)
+		},
+
+		hasClass : function( target, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			return new RegExp('(\\s|^)' + className + '(\\s|$)').test(target.className);
+		},
+
+		addClass : function( ele, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			kint.removeClass(ele, className).className += (" " + className);
+		},
+
+		removeClass : function( ele, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			ele.className = ele.className.replace(
+				new RegExp('(\\s|^)' + className + '(\\s|$)'), ' '
+			);
+			return ele;
+		},
+
+		next : function( element ) {
+			do {
+				element = element.nextElementSibling;
+			} while ( element.nodeName.toLowerCase() !== 'dd' );
+
+			return element;
+		},
+
+		toggle : function( element, hide ) {
+			var parent = kint.next(element);
+
+			if ( typeof hide === 'undefined' ) {
+				hide = kint.hasClass(element);
+			}
+
+			if ( hide ) {
+				kint.removeClass(element);
+			} else {
+				kint.addClass(element);
+			}
+
+			if ( parent.childNodes.length === 1 ) {
+				parent = parent.childNodes[0].childNodes[0]; // reuse variable cause I can
+
+				if ( kint.hasClass(parent, 'kint-parent') ) {
+					kint.toggle(parent, hide)
+				}
+			}
+		},
+
+		toggleChildren : function( element, hide ) {
+			var parent = kint.next(element)
+				, nodes = parent.getElementsByClassName('kint-parent')
+				, i = nodes.length;
+
+			if ( typeof hide === 'undefined' ) {
+				hide = kint.hasClass(element);
+			}
+
+			while ( i-- ) {
+				kint.toggle(nodes[i], hide);
+			}
+			kint.toggle(element, hide);
+		},
+
+		toggleAll : function( caret ) {
+			var elements = document.getElementsByClassName('kint-parent'),
+				i = elements.length,
+				visible = kint.hasClass(caret.parentNode);
+
+			while ( i-- ) {
+				kint.toggle(elements[i], visible);
+			}
+		},
+
+		switchTab : function( target ) {
+			var lis, el = target, index = 0;
+
+			target.parentNode.getElementsByClassName('kint-active-tab')[0].className = '';
+			target.className = 'kint-active-tab';
+
+			// take the index of clicked title tab and make the same n-th content tab visible
+			while ( el = el.previousSibling ) el.nodeType === 1 && index++;
+			lis = target.parentNode.nextSibling.childNodes;
+			for ( var i = 0; i < lis.length; i++ ) {
+				if ( i === index ) {
+					lis[i].style.display = 'block';
+
+					if ( lis[i].childNodes.length === 1 ) {
+						el = lis[i].childNodes[0].childNodes[0];
+
+						if ( kint.hasClass(el, 'kint-parent') ) {
+							kint.toggle(el, false)
+						}
+					}
+				} else {
+					lis[i].style.display = 'none';
+				}
+			}
+		},
+
+		isSibling : function( el ) {
+			for ( ; ; ) {
+				el = el.parentNode;
+				if ( !el || kint.hasClass(el, 'kint') ) break;
+			}
+
+			return !!el;
+		},
+
+		fetchVisiblePluses : function() {
+			kint.visiblePluses = [];
+			kint.each('.kint nav, .kint-tabs>li:not(.kint-active-tab)', function( el ) {
+				if ( el.offsetWidth !== 0 || el.offsetHeight !== 0 ) {
+					kint.visiblePluses.push(el)
+				}
+			});
+		},
+
+		openInNewWindow : function( kintContainer ) {
+			var newWindow;
+
+			if ( newWindow = window.open() ) {
+				newWindow.document.open();
+				newWindow.document.write(
+					'<html>'
+						+ '<head>'
+						+ '<title>Kint (' + new Date().toISOString() + ')</title>'
+						+ '<meta charset="utf-8">'
+						+ document.getElementsByClassName('-kint-js')[0].outerHTML
+						+ document.getElementsByClassName('-kint-css')[0].outerHTML
+						+ '</head>'
+						+ '<body>'
+						+ '<input style="width: 100%" placeholder="Take some notes!">'
+						+ '<div class="kint">'
+						+ kintContainer.parentNode.outerHTML
+						+ '</div></body>'
+				);
+				newWindow.document.close();
+			}
+		},
+
+		keyCallBacks : {
+			cleanup : function( i ) {
+				var focusedClass = 'kint-focused';
+				var prevElement = document.querySelector('.' + focusedClass);
+				prevElement && kint.removeClass(prevElement, focusedClass);
+
+				if ( i !== -1 ) {
+					var el = kint.visiblePluses[i];
+					kint.addClass(el, focusedClass);
+
+
+					var offsetTop = function( el ) {
+						return el.offsetTop + ( el.offsetParent ? offsetTop(el.offsetParent) : 0 );
+					};
+
+					var top = offsetTop(el) - (window.innerHeight / 2 );
+					window.scrollTo(0, top);
+				}
+
+				kint.currentPlus = i;
+			},
+
+			moveCursor : function( up, i ) {
+				// todo make the first VISIBLE plus active
+				if ( up ) {
+					if ( --i < 0 ) {
+						i = kint.visiblePluses.length - 1;
+					}
+				} else {
+					if ( ++i >= kint.visiblePluses.length ) {
+						i = 0;
+					}
+				}
+
+				kint.keyCallBacks.cleanup(i);
+				return false;
+			}
+		}
+	};
+
+	window.addEventListener("click", function( e ) {
+		var target = e.target
+			, nodeName = target.nodeName.toLowerCase();
+
+		if ( !kint.isSibling(target) ) return;
+
+		// auto-select name of variable
+		if ( nodeName === 'dfn' ) {
+			kint.selectText(target);
+			target = target.parentNode;
+		} else if ( nodeName === 'var' ) { // stupid workaround for misc elements
+			target = target.parentNode;    // to not stop event from further propagating
+			nodeName = target.nodeName.toLowerCase()
+		}
+
+		// switch tabs
+		if ( nodeName === 'li' && target.parentNode.className === 'kint-tabs' ) {
+			if ( target.className !== 'kint-active-tab' ) {
+				kint.switchTab(target);
+				if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			}
+			return false;
+		}
+
+		// handle clicks on the navigation caret
+		if ( nodeName === 'nav' ) {
+			if ( target.parentNode.nodeName.toLowerCase() === 'footer' ) {
+				target = target.parentNode;
+				if ( kint.hasClass(target) ) {
+					kint.removeClass(target)
+				} else {
+					kint.addClass(target)
+				}
+			} else {
+				// ensure doubleclick has different behaviour, see below
+				setTimeout(function() {
+					var timer = parseInt(target.kintTimer, 10);
+					if ( timer > 0 ) {
+						target.kintTimer--;
+					} else {
+						kint.toggleChildren(target.parentNode); // <dt>
+						if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+					}
+				}, 300);
+			}
+
+			e.stopPropagation();
+			return false;
+		} else if ( kint.hasClass(target, 'kint-parent') ) {
+			kint.toggle(target);
+			if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			return false;
+		} else if ( kint.hasClass(target, 'kint-ide-link') ) {
+			e.preventDefault();
+			var ajax = new XMLHttpRequest(); // add ajax call to contact editor but prevent link default action
+			ajax.open('GET', target.href);
+			ajax.send(null);
+			return false;
+		} else if ( kint.hasClass(target, 'kint-popup-trigger') ) {
+			var kintContainer = target.parentNode;
+			if ( kintContainer.nodeName.toLowerCase() === 'footer' ) {
+				kintContainer = kintContainer.previousSibling;
+			} else {
+				while ( kintContainer && !kint.hasClass(kintContainer, 'kint-parent') ) {
+					kintContainer = kintContainer.parentNode;
+				}
+			}
+
+			kint.openInNewWindow(kintContainer);
+		}
+	}, false);
+
+	window.addEventListener("dblclick", function( e ) {
+		var target = e.target;
+		if ( !kint.isSibling(target) ) return;
+
+
+		if ( target.nodeName.toLowerCase() === 'nav' ) {
+			target.kintTimer = 2;
+			kint.toggleAll(target);
+			if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			e.stopPropagation();
+		}
+	}, false);
+
+	// keyboard navigation
+	window.onkeydown = function( e ) { // direct assignment is used to have priority over ex FAYT
+
+		// do nothing if alt key is pressed or if we're actually typing somewhere
+		if ( e.target !== document.body || e.altKey ) return;
+
+		var keyCode = e.keyCode
+			, shiftKey = e.shiftKey
+			, i = kint.currentPlus;
+
+
+		if ( keyCode === 68 ) { // 'd' : toggles navigation on/off
+			if ( i === -1 ) {
+				kint.fetchVisiblePluses();
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else {
+				kint.keyCallBacks.cleanup(-1);
+				return false;
+			}
+		} else {
+			if ( i === -1 ) return;
+
+			if ( keyCode === 9 ) { // TAB : moves up/down depending on shift key
+				return kint.keyCallBacks.moveCursor(shiftKey, i);
+			} else if ( keyCode === 38 ) { // ARROW UP : moves up
+				return kint.keyCallBacks.moveCursor(true, i);
+			} else if ( keyCode === 40 ) { // ARROW DOWN : down
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else {
+				if ( i === -1 ) {
+					return;
+				}
+			}
+		}
+
+
+		var kintNode = kint.visiblePluses[i];
+		if ( kintNode.nodeName.toLowerCase() === 'li' ) { // we're on a trace tab
+			if ( keyCode === 32 || keyCode === 13 ) { // SPACE/ENTER
+				kint.switchTab(kintNode);
+				kint.fetchVisiblePluses();
+				return kint.keyCallBacks.moveCursor(true, i);
+			} else if ( keyCode === 39 ) { // arrows
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else if ( keyCode === 37 ) {
+				return kint.keyCallBacks.moveCursor(true, i);
+			}
+		}
+
+		kintNode = kintNode.parentNode; // simple dump
+		if ( keyCode === 32 || keyCode === 13 ) { // SPACE/ENTER : toggles
+			kint.toggle(kintNode);
+			kint.fetchVisiblePluses();
+			return false;
+		} else if ( keyCode === 39 || keyCode === 37 ) { // ARROW LEFT/RIGHT : respectively hides/shows and traverses
+			var visible = kint.hasClass(kintNode);
+			var hide = keyCode === 37;
+
+			if ( visible ) {
+				kint.toggleChildren(kintNode, hide); // expand/collapse all children if immediate ones are showing
+			} else {
+				if ( hide ) { // LEFT
+					// traverse to parent and THEN hide
+					do {kintNode = kintNode.parentNode} while ( kintNode && kintNode.nodeName.toLowerCase() !== 'dd' );
+
+					if ( kintNode ) {
+						kintNode = kintNode.previousElementSibling;
+
+						i = -1;
+						var parentPlus = kintNode.querySelector('nav');
+						while ( parentPlus !== kint.visiblePluses[++i] ) {}
+						kint.keyCallBacks.cleanup(i)
+					} else { // we are at root
+						kintNode = kint.visiblePluses[i].parentNode;
+					}
+				}
+				kint.toggle(kintNode, hide);
+			}
+			kint.fetchVisiblePluses();
+			return false;
+		}
+	};
+
+	var microtimePrettifier = function( e ) {
+		var elements = Array.prototype.slice.call(document.querySelectorAll('.kint-microtime'), 0);
+		elements.forEach(function( el ) {
+			var value = parseFloat(el.innerHTML)
+				, min = Infinity
+				, max = -Infinity
+				, ratio;
+
+			elements.forEach(function( el ) {
+				var val = parseFloat(el.innerHTML);
+
+				if ( min > val ) min = val;
+				if ( max < val ) max = val;
+			});
+
+			ratio = 1 - (value - min) / (max - min);
+
+			el.style.background = 'hsl(' + Math.round(ratio * 120) + ',60%,70%)';
+		});
+	};
+
+	window.addEventListener("load", microtimePrettifier)
+	window.addEventListener("kint-load", microtimePrettifier)
+}
+
+// debug purposes only, removed in minified source
+function clg( i ) {
+	if ( !window.console )return;
+	var l = arguments.length, o = 0;
+	while ( o < l )console.log(arguments[o++])
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/js/modular-window.js b/modules/contrib/devel/kint/kint/view/js/modular-window.js
new file mode 100644
index 0000000..eb79a2c
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/js/modular-window.js
@@ -0,0 +1,107 @@
+if ( typeof jQuery !== 'undefined' ) {
+	// this code is written in vanilla JS to future-proof it if we want to add other adapters like YUI
+	document.body.insertAdjacentHTML(
+		'beforeend',
+		'<div id="kint-backdrop">Ajax output</div><div id="kint-modular"></div>'
+			+ '<div id="kint-modular-placeholder">[Debug output]</div>'
+	);
+
+	var kintModular = document.getElementById("kint-modular");
+	var kintPlaceholder = document.getElementById("kint-modular-placeholder");
+	var kintBackdrop = document.getElementById("kint-backdrop");
+	var bodyStyle = window.getComputedStyle(document.body);
+	bodyStyle = {bg : bodyStyle.backgroundColor, clr : bodyStyle.color};
+
+	var toggleModular = function( show ) {
+		var hide = show ? 'none' : 'block';
+
+		if ( show ) {
+			// disregard body styles set by some skins
+			document.body.style.backgroundColor = bodyStyle.bg;
+			document.body.style.color = bodyStyle.clr;
+
+			show = 'block';
+			window.addEventListener('mousedown', kintCloseListener)
+		} else {
+			show = 'none';
+			window.removeEventListener('mousedown', kintCloseListener)
+		}
+
+		kintModular.style.display = show;
+		kintBackdrop.style.display = show;
+
+		kintPlaceholder.style.display = hide;
+	};
+
+	var kintCloseListener = function( e ) {
+		var el = e.target;
+
+		// are we clicking on the kint modular?
+		for ( ; ; ) {
+			if ( !el || el === kintModular ) break;
+			el = el.parentNode;
+		}
+
+		if ( !el ) toggleModular();
+
+		return false;
+	};
+
+
+	var scriptsInitialized = false;
+	jQuery(document)['ajaxComplete'](function( e, xhr, settings ) {
+		// todo display called url, post, timestamp
+		var data = xhr.getResponseHeader('kint')
+			, header
+			, returnedScript;
+
+		if ( !data ) return;
+
+		for ( var i = 1; ; i++ ) {
+			header = xhr.getResponseHeader('kint' + '-' + i);
+			if ( !header ) break;
+			data += header;
+		}
+
+		var a = document.createElement('a');
+		a.setAttribute('href', settings.url);
+		a.innerHTML = settings.url + " [" + (new Date()).toLocaleTimeString() + "]";
+		a.title = "Click to resend";
+
+		// jQuery specific part follows
+		settings.complete = function() {
+			kintModular.style.opacity = 1;
+		};
+		a.onclick = function() {
+			kintModular.style.opacity = .7;
+			jQuery['ajax'](settings);
+			return false;
+		};
+		// end jQuery specific
+
+		kintModular.appendChild(a);
+		kintModular.insertAdjacentHTML('beforeend', decodeURIComponent(data));
+
+		// exec script block from returned html once
+		if ( !scriptsInitialized ) {
+			returnedScript = kintModular.querySelectorAll(".-kint-js");
+			if ( returnedScript.length ) {
+
+				scriptsInitialized = true;
+
+				var script = document.createElement("script");
+				script.appendChild(document.createTextNode(returnedScript[0].innerHTML));
+
+				document.body.appendChild(script);
+
+				var evt = document.createEvent("Event");
+				evt.initEvent('kint-load', true, true);
+				window.dispatchEvent(evt);
+			}
+		}
+
+		toggleModular(true);
+	});
+
+	kintPlaceholder.addEventListener("click", toggleModular)
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/less/main.less b/modules/contrib/devel/kint/kint/view/less/main.less
new file mode 100644
index 0000000..46c2643
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/less/main.less
@@ -0,0 +1,408 @@
+//
+// VARIABLES FOR THEMES TO OVERRIDE
+// --------------------------------------------------
+
+@default-font: Consolas, "Courier New", monospace;
+
+@spacing : 4;
+
+// caret taken from solarized
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==");
+
+//
+// SET UP HELPER VARIABLES
+// --------------------------------------------------
+
+@border: 1px solid @border-color;
+
+.selection() {
+  background : @border-color-hover;
+  color      : @text-color;
+}
+
+//
+// BASE STYLES
+// --------------------------------------------------
+
+.kint::selection { .selection() }
+
+.kint::-moz-selection { .selection() }
+
+.kint::-webkit-selection { .selection() }
+
+.kint {
+  font-family : @default-font;
+  color       : @text-color;
+  padding     : 0;
+  margin      : @spacing * 2px 0;
+  font-size   : 10pt;
+  line-height : 15px;
+  white-space : nowrap;
+  overflow-x  : auto;
+  text-align  : left;
+
+  * {
+    float       : none !important;
+    line-height : 15px;
+    padding     : 0;
+    margin      : 0;
+  }
+
+  dt {
+    background  : @main-background;
+    border      : @border;
+    color       : @text-color;
+    display     : block;
+    font-weight : bold;
+    list-style  : none outside none;
+    padding     : @spacing * 1px;
+
+    &:hover {
+      border-color : @border-color-hover;
+    }
+
+    > var {
+      margin-right : 5px;
+    }
+  }
+
+  > dl dl {
+    padding : 0 0 0 @spacing * 3px;
+  }
+
+  //
+  // DROPDOWN CARET
+  // --------------------------------------------------
+
+  nav {
+    display        : inline-block;
+    height         : 15px;
+    width          : 15px;
+    margin-right   : 3px;
+    vertical-align : middle;
+    content        : ' ';
+    cursor         : pointer;
+    background     : @caret-image no-repeat scroll 0 0 transparent;
+  }
+
+  dt.kint-parent:hover nav {
+    background-position : 0 -15px;
+  }
+
+  dt.kint-parent.kint-show:hover > nav {
+    background-position : 0 -45px;
+  }
+
+  dt.kint-show > nav {
+    background-position : 0 -30px;
+  }
+
+  dt.kint-parent + dd {
+    display     : none;
+    border-left : 1px dashed @border-color;
+  }
+
+  dt.kint-parent.kint-show + dd {
+    display : block;
+  }
+
+  //
+  // INDIVIDUAL ITEMS
+  // --------------------------------------------------
+
+  var,
+  var a {
+    color      : @variable-type-color;
+    font-style : normal;
+  }
+
+  dt:hover var,
+  dt:hover var a {
+    color : @variable-type-color-hover;
+  }
+
+  dfn {
+    font-style  : normal;
+    font-family : monospace;
+    color       : @variable-name-color;
+  }
+
+  pre {
+    color      : @text-color;
+    margin     : 0 0 0 @spacing * 3px;
+    padding    : 5px;
+    overflow-y : hidden;
+    border-top : 0;
+    border     : @border;
+    background : @main-background;
+    display    : block;
+    word-break : normal;
+  }
+
+  .kint-popup-trigger {
+    float  : right !important;
+    cursor : pointer;
+    color  : @border-color-hover;
+
+    &:hover {
+      color : @border-color;
+    }
+  }
+
+  dt.kint-parent > .kint-popup-trigger {
+    font-size : 15pt;
+  }
+
+  footer {
+    padding   : 0 3px 3px;
+    font-size : .7em;
+
+    > .kint-popup-trigger {
+      font-size : 12px;
+    }
+
+    nav {
+      background-size : 10px;
+      height          : 10px;
+      width           : 10px;
+
+      &:hover {
+        background-position : 0 -10px;
+      }
+    }
+
+    > ol {
+      display     : none;
+      margin-left : 32px;
+    }
+
+    &.kint-show {
+      > ol {
+        display : block;
+      }
+
+      nav {
+        background-position : 0 -20px;
+
+        &:hover {
+          background-position : 0 -30px;
+        }
+      }
+    }
+  }
+
+  a {
+    color       : @text-color;
+    text-shadow : none;
+
+    &:hover {
+      color         : @variable-name-color;
+      border-bottom : 1px dotted @variable-name-color;
+    }
+  }
+
+  //
+  // TABS
+  // --------------------------------------------------
+
+  ul {
+    list-style   : none;
+    padding-left : @spacing * 3px;
+
+    &:not(.kint-tabs) {
+      li {
+        border-left : 1px dashed @border-color;
+
+        > dl {
+          border-left : none;
+        }
+      }
+    }
+
+    &.kint-tabs {
+      margin       : 0 0 0 @spacing * 3px;
+      padding-left : 0;
+      background   : @main-background;
+      border       : @border;
+      border-top   : 0;
+
+      li {
+        background  : @secondary-background;
+        border      : @border;
+        cursor      : pointer;
+        display     : inline-block;
+        height      : 16px + ceil(8px * (@spacing / 5));
+        line-height : 16px + ceil(8px * (@spacing / 5));
+        margin      : 0 @spacing * 1px @spacing * 1px;
+        padding     : 0 2px + @spacing * 2px floor(3px * (@spacing / 5));
+
+        &:hover,
+        &.kint-active-tab:hover {
+          border-color : @border-color-hover;
+          color        : @variable-type-color-hover;
+        }
+
+        &.kint-active-tab {
+          background     : @main-background;
+          border-top     : 0;
+          margin-top     : -1px;
+          padding-bottom : floor(3px * (@spacing / 5));
+          padding-top    : 1px + ceil(3px * (@spacing / 5));
+        }
+      }
+
+      li + li {
+        margin-left : 0
+      }
+    }
+
+    &:not(.kint-tabs) > li:not(:first-child) {
+      display : none;
+    }
+  }
+
+  dt:hover + dd > ul > li.kint-active-tab {
+    border-color : @border-color-hover;
+    color        : @variable-type-color-hover;
+  }
+}
+
+//
+// REPORT
+// --------------------------------------------------
+
+.kint-report {
+  border-collapse : collapse;
+  empty-cells     : show;
+  border-spacing  : 0;
+
+  * {
+    text-align  : left;
+    padding     : 0 !important;
+    margin      : 0 !important;
+    font-size   : 9pt;
+    overflow    : hidden;
+    font-family : @default-font;
+    color       : @text-color;
+  }
+
+  dt {
+    border     : 0;
+    background : none;
+
+    .kint-parent {
+      max-width     : 180px;
+      min-width     : 100%;
+      overflow      : hidden;
+      text-overflow : ellipsis;
+      white-space   : nowrap;
+      &.kint-show {
+        border-bottom : @border;
+      }
+    }
+  }
+
+  td,
+  th {
+    border         : @border;
+    vertical-align : top;
+  }
+
+  td {
+    background  : @main-background;
+    white-space : pre;
+
+    > dl {
+      border : 0;
+    }
+  }
+
+  pre {
+    border-top    : 0;
+    border-bottom : 0;
+    border-right  : 0;
+  }
+
+  th:first-child {
+    background : none;
+    border     : 0;
+  }
+
+  td:first-child,
+  th {
+    font-weight : bold;
+    background  : @secondary-background;
+    color       : @variable-name-color;
+  }
+
+  td.kint-empty {
+    background : #d33682 !important;
+  }
+
+  tr:hover {
+    > td {
+      box-shadow : 0px 0px 1px 0px @border-color-hover inset;
+    }
+
+    var {
+      color : @variable-type-color-hover;
+    }
+  }
+}
+
+//
+// TRACE
+// --------------------------------------------------
+.kint-trace {
+  .kint-source {
+    line-height : 1em + 0.02 * @spacing
+  }
+
+  .kint-source span {
+    padding-right : 1px;
+    border-right  : 3px inset @variable-type-color;
+  }
+
+  .kint-source .kint-highlight {
+    background : @secondary-background;
+  }
+
+  .kint-parent {
+    > b {
+      min-width  : 18px;
+      display    : inline-block;
+      text-align : right;
+      color      : @variable-name-color;
+    }
+
+    > var {
+      > a {
+        color : @variable-type-color;
+      }
+    }
+  }
+}
+
+//
+// MISC
+// --------------------------------------------------
+
+// keyboard navigation caret
+.kint-focused {
+  .keyboard-caret
+}
+
+.kint-microtime,
+.kint-color-preview {
+  box-shadow  : 0 0 2px 0 #b6cedb;
+  height      : 16px;
+  text-align  : center;
+  text-shadow : -1px 0 #839496, 0 1px #839496, 1px 0 #839496, 0 -1px #839496;
+  width       : 230px;
+  color       : #fdf6e3;
+}
+
+// mini trace
+.kint footer li {
+  color: #ddd;
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/less/modular-window.less b/modules/contrib/devel/kint/kint/view/less/modular-window.less
new file mode 100644
index 0000000..336b910
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/less/modular-window.less
@@ -0,0 +1,63 @@
+@border: 1px solid @border-color;
+
+#kint-modular {
+  background  : #fff;
+  border      : @border;
+  display     : none;
+  font-family : @default-font;
+  left        : calc(~"50% - 450px");
+  line-height : 15px;
+  overflow-y  : scroll;
+  padding     : @spacing * 2px;
+  position    : fixed;
+  top         : 30px;
+  bottom      : 30px;
+  width       : 900px;
+  z-index     : 2147483647; /*I'm a debugger, GTFO!*/
+}
+
+#kint-modular pre {
+  background    : @main-background;
+  border-radius : 0;
+  color         : @text-color;
+  margin        : @spacing * 2px 0;
+  padding       : 5px;
+  overflow-y    : hidden;
+  border        : @border;
+  display       : block;
+  word-break    : normal;
+}
+
+#kint-modular pre:last-child {
+  margin-bottom : 0;
+}
+
+#kint-backdrop {
+  cursor      : pointer;
+  opacity     : 0.8;
+  height      : 100%;
+  position    : fixed;
+  width       : 100%;
+  left        : 0;
+  overflow    : hidden;
+  top         : 0;
+  background  : radial-gradient(ellipse at center, @main-background 0, @secondary-background 100%);
+  z-index     : 2147483647;
+  display     : none;
+  text-align  : center;
+  font-size   : 15pt;
+  text-shadow : 0 0 5px @variable-type-color-hover;
+  color       : @variable-type-color;
+}
+
+#kint-modular-placeholder {
+  border     : @border;
+  display    : none;
+  position   : fixed;
+  bottom     : 0;
+  left       : 0;
+  background : @main-background;
+  color      : @text-color;
+  z-index    : 2147483647;
+  cursor     : move;
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/themes/main/aante-light.less b/modules/contrib/devel/kint/kint/view/themes/main/aante-light.less
new file mode 100644
index 0000000..25702d5
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/themes/main/aante-light.less
@@ -0,0 +1,136 @@
+/**
+ * @author Ante Aljinovic https://github.com/aljinovic
+ */
+@import "../../less/main";
+
+@main-background: #f8f8f8;
+@secondary-background : #f8f8f8;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #06f;
+@variable-type-color-hover: #f00;
+
+@border-color: #d7d7d7;
+@border-color-hover: #aaa;
+
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAYAAAC5OOBJAAAAvklEQVR42mNgGMFAS0uLLSQk5HxoaOh/XDg4OLgdpwEBAQEGQAN+YtMIFH/i4ODAg9cFQNMbsWkOCgrKJMv5ID5Qipko/6M7PzAw0ImkAIQ5H0hvISv0gZpP+fn5qZAVfcBAkmEYBaNZcjRLjmbJUUCvqAIlDlAiASUWkjWDkiU0eTaSpBGUEZBy1E9QRiFWLzO2LEmU80GZHkcRhN/5oGIGVNzgKIbwOx9UwOErAIl2/igYzZKjWXI0S9IHAAASJijo0Ypj8AAAAABJRU5ErkJggg==");
+
+.keyboard-caret() {
+  box-shadow : 0 0 3px 2px @variable-type-color-hover;
+}
+
+.kint {
+  dt {
+    font-weight : normal;
+
+    &.kint-parent {
+      margin-top : 4px;
+    }
+  }
+
+  dl dl {
+    margin-top   : 4px;
+    padding-left : 25px;
+    border-left  : none;
+  }
+
+  > dl > dt {
+    background : @secondary-background;
+  }
+
+  //
+  // TABS
+  // --------------------------------------------------
+
+  ul {
+    margin       : 0;
+    padding-left : 0;
+
+    &:not(.kint-tabs) > li {
+      border-left : 0;
+    }
+
+    &.kint-tabs {
+      background   : @secondary-background;
+      border       : @border;
+      border-width : 0px 1px 1px 1px;
+      padding      : 4px 0 0 12px;
+      margin-left  : -1px;
+      margin-top   : -1px;
+
+      li,
+      li + li {
+        margin : 0 0 0 4px;
+      }
+
+      li {
+        border-bottom-width : 0;
+
+        &:first-child {
+          margin-left : 0;
+        }
+
+        &.kint-active-tab {
+          border-top    : @border;
+          background    : #fff;
+          font-weight   : bold;
+          padding-top   : 0;
+          border-bottom : 1px solid #fff !important;
+          margin-bottom : -1px;
+        }
+
+        &.kint-active-tab:hover {
+          border-bottom : 1px solid #fff;
+        }
+      }
+    }
+
+    > li > pre {
+      border : @border;
+    }
+  }
+
+  dt:hover + dd > ul {
+    border-color : @border-color-hover;
+  }
+
+  pre {
+    background  : #fff;
+    margin-top  : 4px;
+    margin-left : 25px;
+  }
+
+  .kint-popup-trigger:hover {
+    color : @variable-type-color-hover;
+  }
+
+  .kint-source .kint-highlight {
+    background : #cfc;
+  }
+}
+
+//
+// REPORT
+// --------------------------------------------------
+
+.kint-report {
+  td {
+    background : #fff;
+    padding    : 1px 2px !important;
+  }
+
+  td:first-child,
+  th {
+    padding : 0 2px !important;
+  }
+
+  td.kint-empty {
+    background : @border-color !important;
+  }
+
+  tr:hover > td {
+    box-shadow : none;
+    background : #cfc;
+  }
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/themes/main/original.less b/modules/contrib/devel/kint/kint/view/themes/main/original.less
new file mode 100644
index 0000000..e730919
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/themes/main/original.less
@@ -0,0 +1,43 @@
+@import "../../less/main";
+
+@main-background: #e0eaef;
+@secondary-background: #c1d4df;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #0092db;
+@variable-type-color-hover: #5cb730;
+
+@border-color: #b6cedb;
+@border-color-hover: #0092db;
+
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAACVBMVEX///82b4tctzBls0NMAAAAQklEQVR42rWRIQ4AAAgCwf8/2qgER2BeuwJsgAqIzekMfMryPL9XQSkobE6vwKcsz/N7FfPvh09lnPf/b+7673+f0uHuAZ/EdkNQAAAAAElFTkSuQmCC");
+
+.keyboard-caret() {
+  box-shadow : 0 0 3px 2px #5cb730;
+}
+
+.kint {
+  > dl > dt {
+    background : linear-gradient(to bottom, #e3ecf0 0, #c0d4df 100%);
+  }
+
+  ul.kint-tabs {
+    background : linear-gradient(to bottom, #9dbed0 0px, #b2ccda 100%);
+  }
+
+  & > dl:not(.kint-trace) > dd > ul.kint-tabs li {
+    background : @main-background;
+    &.kint-active-tab {
+      background : @secondary-background;
+    }
+  }
+
+  & > dl.kint-trace > dt {
+    background : linear-gradient(to bottom, #c0d4df 0px, #e3ecf0 100%);
+  }
+
+  .kint-source .kint-highlight {
+    background : #f0eb96;
+  }
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/themes/main/solarized-dark.less b/modules/contrib/devel/kint/kint/view/themes/main/solarized-dark.less
new file mode 100644
index 0000000..c6c5b70
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/themes/main/solarized-dark.less
@@ -0,0 +1,34 @@
+@import "../../less/main";
+
+@spacing : 5;
+
+@main-background: #002b36; // base 03
+@secondary-background : #073642; // base 02
+
+@text-color: #839496; // base 0
+@variable-name-color: #93a1a1; // base 1
+@variable-type-color: #268bd2; // blue
+@variable-type-color-hover: #2aa198; // cyan
+
+@border-color: #586e75; // base 01
+@border-color-hover: #268bd2; // blue
+
+.keyboard-caret() {
+  box-shadow    : 0 0 3px 2px #859900 inset; // green
+  border-radius : 7px;
+}
+
+body {
+  background : @secondary-background;
+  color      : #fff; // for non-kint elements to remain at least semi-readable
+}
+
+.kint {
+  background : @secondary-background;
+  box-shadow : 0 0 5px 3px @secondary-background;
+
+  > dl > dt,
+  ul.kint-tabs {
+    box-shadow : 4px 0 2px -3px @variable-type-color inset;
+  }
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/themes/main/solarized.less b/modules/contrib/devel/kint/kint/view/themes/main/solarized.less
new file mode 100644
index 0000000..9ec8aba
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/themes/main/solarized.less
@@ -0,0 +1,24 @@
+@import "../../less/main";
+
+@spacing : 5;
+
+@main-background: #fdf6e3; // base 3
+@secondary-background : #eee8d5; // base 2
+
+@text-color: #657b83; // base 00
+@variable-name-color: #586e75; // base 01
+@variable-type-color: #268bd2; // blue
+@variable-type-color-hover: #2aa198; // cyan
+
+@border-color: #93a1a1; // base 1
+@border-color-hover: #268bd2; // blue
+
+.keyboard-caret() {
+  box-shadow    : 0 0 3px 2px #859900 inset; // green
+  border-radius : 7px;
+}
+
+.kint > dl > dt,
+.kint ul.kint-tabs {
+  box-shadow : 4px 0 2px -3px @variable-type-color inset;
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/kint/view/themes/modular-window/original.less b/modules/contrib/devel/kint/kint/view/themes/modular-window/original.less
new file mode 100644
index 0000000..fac5f6a
--- /dev/null
+++ b/modules/contrib/devel/kint/kint/view/themes/modular-window/original.less
@@ -0,0 +1,15 @@
+@import "../../less/modular-window";
+
+@default-font: Consolas, "Courier New", monospace;
+@spacing : 4;
+
+@main-background: #e0eaef;
+@secondary-background: #c1d4df;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #0092db;
+@variable-type-color-hover: #5cb730;
+
+@border-color: #b6cedb;
+@border-color-hover: #0092db;
\ No newline at end of file
diff --git a/modules/contrib/devel/kint/src/Plugin/Devel/Dumper/Kint.php b/modules/contrib/devel/kint/src/Plugin/Devel/Dumper/Kint.php
new file mode 100644
index 0000000..6755f94
--- /dev/null
+++ b/modules/contrib/devel/kint/src/Plugin/Devel/Dumper/Kint.php
@@ -0,0 +1,62 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\kint\Plugin\Devel\Dumper\Kint.
+ */
+
+namespace Drupal\kint\Plugin\Devel\Dumper;
+
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a Kint dumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "kint",
+ *   label = @Translation("Kint"),
+ *   description = @Translation("Wrapper for Kint debugging tool."),
+ * )
+ */
+class Kint extends DevelDumperBase {
+
+  /**
+   * Constructs a KintDevelDumper object.
+   *
+   * @TODO find another solution for kint class inclusion!
+   */
+  public function __construct() {
+    kint_require();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    if ($name) {
+      $input = [(string) $name => $input];
+    }
+
+    \Kint::dump($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    if ($name) {
+      $input = [(string) $name => $input];
+    }
+
+    $dump = @\Kint::dump($input);
+    return $this->setSafeMarkup($dump);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return kint_require();
+  }
+
+}
diff --git a/modules/contrib/devel/kint/src/Twig/KintExtension.php b/modules/contrib/devel/kint/src/Twig/KintExtension.php
new file mode 100644
index 0000000..139c517
--- /dev/null
+++ b/modules/contrib/devel/kint/src/Twig/KintExtension.php
@@ -0,0 +1,136 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\kint\Twig\KintExtension.
+ */
+
+namespace Drupal\kint\Twig;
+
+/**
+ * Provides the Kint debugging function within Twig templates.
+ */
+class KintExtension extends \Twig_Extension {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'kint';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFunctions() {
+    return array(
+      new \Twig_SimpleFunction('kint', array($this, 'kint'), array(
+        'is_safe' => array('html'),
+        'needs_environment' => TRUE,
+        'needs_context' => TRUE,
+      )),
+    );
+  }
+
+  /**
+   * Provides Kint function to Twig templates.
+   *
+   * Handles 0, 1, or multiple arguments.
+   *
+   * Code derived from https://github.com/barelon/CgKintBundle.
+   *
+   * @param Twig_Environment $env
+   *   The twig environment instance.
+   * @param array $context
+   *   An array of parameters passed to the template.
+   */
+  public function kint(\Twig_Environment $env, array $context) {
+    // Don't do anything unless twig_debug is enabled. This reads from the Twig
+    // environment, not Drupal Settings, so a container rebuild is necessary
+    // when toggling twig_debug on and off. We can consider injecting Settings.
+    if (!$env->isDebug()) {
+      return;
+    }
+    kint_require();
+    // Don't display where Kint was called from.
+    // @todo Can we add information about which template Kint was called from?
+    \Kint::$displayCalledFrom = FALSE;
+
+    $output = '';
+
+    if (func_num_args() === 2) {
+      // No arguments passed to kint(), display full Twig context.
+      $kint_variable = array();
+      foreach ($context as $key => $value) {
+        if (!$value instanceof \Twig_Template) {
+          $kint_variable[$key] = $value;
+        }
+      }
+
+      $result = @\Kint::dump($kint_variable);
+      $output = str_replace('$kint_variable', 'Twig context', $result);
+    }
+    else {
+      // Try to get the names of variables from the Twig template.
+      $trace = debug_backtrace();
+      $callee = $trace[0];
+
+      $lines = file($callee['file']);
+      $source = $lines[$callee['line'] - 1];
+
+      preg_match('/kint\((.+)\);/', $source, $matches);
+      $parameters = $matches[1];
+      $parameters = preg_replace('/\$this->getContext\(\$context, "(.+)"\)/U', "$1", $parameters);
+      $parameters = preg_replace('/\(isset\(\$context\["(.+)"\]\) \? \$context\["(.+)"\] : null\)/U', "$1", $parameters);
+      do {
+        $parameters = preg_replace('/\$this->getAttribute\((.+), "(.+)"\)/U', "$1.$2", $parameters, 1, $found);
+      } while ($found);
+
+      $parameters = explode(', ', $parameters);
+      foreach ($parameters as $index => $parameter) {
+        // Remove bad entries from the parameters array. Maybe we can avoid this
+        // by doing more with the regular expressions.
+        // This only seems to be needed for cases like:
+        // {{ my_array['#hash_index'] }}
+        if (in_array($parameter, array('array()', '"array'))) {
+          unset($parameters[$index]);
+          continue;
+        }
+        // Trim parens and quotes from the parameter strings.
+        $parameters[$index] = trim($parameter, '()"');
+      }
+
+      // Don't include $env and $context arguments in $args and $parameters.
+      $args = array_slice(func_get_args(), 2);
+      $parameters = array_slice($parameters, 2);
+
+      // If there is only one argument, pass to Kint without too much hassle.
+      if (count($args) == 1) {
+        $kint_variable = reset($args);
+        $result = @\Kint::dump($kint_variable);
+        // Replace $kint_variable with the name of the variable in the Twig
+        // template.
+        $output = str_replace('$kint_variable', reset($parameters), $result);
+      }
+      else {
+        // Build an array of variable to pass to Kint.
+        // @todo Can we just call_user_func_array while still retaining the
+        //   variable names?
+        foreach ($args as $index => $arg) {
+          // Prepend a unique index to allow debugging the same variable more
+          // than once in the same Kint dump.
+          $kint_args['_index_' . $index . '_' . $parameters[$index]] = $arg;
+        }
+
+        $result = @\Kint::dump($kint_args);
+        // Display a comma separated list of the variables contained in this group.
+        $output = str_replace('$kint_args', implode(', ', $parameters), $result);
+        // Remove unique indexes from output.
+        $output = preg_replace('/_index_([0-9]+)_/', '', $output);
+      }
+    }
+
+    return $output;
+  }
+
+}
diff --git a/modules/contrib/devel/run-tests-drush.sh b/modules/contrib/devel/run-tests-drush.sh
new file mode 100755
index 0000000..4dcd4fb
--- /dev/null
+++ b/modules/contrib/devel/run-tests-drush.sh
@@ -0,0 +1,21 @@
+#!/usr/bin/env sh
+
+# This script will run phpunit-based test classes using Drush's
+# test framework.  First, the Drush executable is located, and
+# then phpunit is invoked, pointing to Drush's phpunit.xml as
+# the configuration.
+#
+# Any parameters that may be passed to `phpunit` may also be used
+# with this script.
+
+DRUSH_PATH="`which drush`"
+DRUSH_DIRNAME="`dirname -- "$DRUSH_PATH"`"
+# The following line is needed is you use a `drush` that differs from `which drush`
+# export UNISH_DRUSH=$DRUSH_PATH
+
+if [ $# = 0 ] ; then
+   phpunit --configuration="$DRUSH_DIRNAME/tests" drush
+else
+   # Pass along any arguments.
+   phpunit --configuration="$DRUSH_DIRNAME/tests" $@
+fi
diff --git a/modules/contrib/devel/src/Annotation/DevelDumper.php b/modules/contrib/devel/src/Annotation/DevelDumper.php
new file mode 100644
index 0000000..f4dbbb5
--- /dev/null
+++ b/modules/contrib/devel/src/Annotation/DevelDumper.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Annotation\DevelDumper.
+ */
+
+namespace Drupal\devel\Annotation;
+
+use Drupal\Component\Annotation\Plugin;
+
+/**
+ * Defines a DevelDumper annotation object.
+ *
+ * @Annotation
+ *
+ * @see \Drupal\devel\DevelDumperPluginManager
+ * @see \Drupal\devel\DevelDumperInterface
+ * @see \Drupal\devel\DevelDumperBase
+ * @see plugin_api
+ */
+class DevelDumper extends Plugin {
+
+  /**
+   * The plugin ID.
+   *
+   * @var string
+   */
+  public $id;
+
+  /**
+   * The human-readable name of the DevelDumper type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $label;
+
+  /**
+   * A short description of the DevelDumper type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $description;
+
+}
diff --git a/modules/contrib/devel/src/Controller/DevelController.php b/modules/contrib/devel/src/Controller/DevelController.php
new file mode 100644
index 0000000..b75765e
--- /dev/null
+++ b/modules/contrib/devel/src/Controller/DevelController.php
@@ -0,0 +1,310 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Controller\DevelController.
+ */
+
+namespace Drupal\devel\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field;
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Url;
+use Drupal\field\Entity\FieldConfig;
+use Drupal\field\Entity\FieldStorageConfig;
+use Symfony\Component\HttpFoundation\Request;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelController extends ControllerBase {
+
+  /**
+   * Clears all caches, then redirects to the previous page.
+   */
+  public function cacheClear() {
+    drupal_flush_all_caches();
+    drupal_set_message('Cache cleared.');
+    return $this->redirect('<front>');
+  }
+
+  /**
+   * Returns a dump of a route object.
+   *
+   * @param \Symfony\Component\HttpFoundation\Request $request
+   *   Page request object.
+   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   *   The route match.
+   *
+   * @return array
+   *   A render array containing the route object.
+   */
+  public function menuItem(Request $request, RouteMatchInterface $route_match) {
+    $output = [];
+
+    // Get the route object from the path query string if available.
+    if ($path = $request->query->get('path')) {
+      try {
+        /* @var \Symfony\Cmf\Component\Routing\ChainRouter $router */
+        $router = \Drupal::service('router');
+        $route = $router->match($path);
+        $output['route'] = ['#markup' => kpr($route, TRUE)];
+      }
+      catch (\Exception $e) {
+        drupal_set_message($this->t("Unable to load route for url '%url'", ['%url' => $path]), 'warning');
+      }
+    }
+    // No path specified, get the current route.
+    else {
+      $route = $route_match->getRouteObject();
+      $output['route'] = ['#markup' => kpr($route, TRUE)];
+    }
+
+    return $output;
+  }
+
+  public function themeRegistry() {
+    $hooks = theme_get_registry();
+    ksort($hooks);
+    return array('#markup' => kprint_r($hooks, TRUE));
+  }
+
+  /**
+   * Builds the elements info overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function elementsPage() {
+    $element_info_manager = \Drupal::service('element_info');
+
+    $elements_info = array();
+    foreach ($element_info_manager->getDefinitions() as $element_type => $definition) {
+      $elements_info[$element_type] = $definition + $element_info_manager->getInfo($element_type);
+    }
+
+    ksort($elements_info);
+
+    return array('#markup' => kdevel_print_object($elements_info));
+  }
+
+  /**
+   * Builds the fields info overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function fieldInfoPage() {
+    $fields = FieldStorageConfig::loadMultiple();
+    ksort($fields);
+    $output['fields'] = array('#markup' => kprint_r($fields, TRUE, $this->t('Fields')));
+
+    $field_instances = FieldConfig::loadMultiple();
+    ksort($field_instances);
+    $output['instances'] = array('#markup' => kprint_r($field_instances, TRUE, $this->t('Instances')));
+
+    $bundles = $this->entityManager()->getAllBundleInfo();
+    ksort($bundles);
+    $output['bundles'] = array('#markup' => kprint_r($bundles, TRUE, $this->t('Bundles')));
+
+    $field_types = \Drupal::service('plugin.manager.field.field_type')->getUiDefinitions();
+    ksort($field_types);
+    $output['field_types'] = array('#markup' => kprint_r($field_types, TRUE, $this->t('Field types')));
+
+    $formatter_types = \Drupal::service('plugin.manager.field.formatter')->getDefinitions();
+    ksort($formatter_types);
+    $output['formatter_types'] = array('#markup' => kprint_r($formatter_types, TRUE, $this->t('Formatter types')));
+
+    $widget_types = \Drupal::service('plugin.manager.field.widget')->getDefinitions();
+    ksort($widget_types);
+    $output['widget_types'] = array('#markup' => kprint_r($widget_types, TRUE, $this->t('Widget types')));
+
+    return $output;
+  }
+
+  /**
+   * Builds the entity types overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function entityInfoPage() {
+    $types = $this->entityManager()->getEntityTypeLabels();
+    ksort($types);
+    $result = array();
+    foreach (array_keys($types) as $type) {
+      $definition = $this->entityManager()->getDefinition($type);
+      $reflected_definition = new \ReflectionClass($definition);
+      $props = array();
+      foreach ($reflected_definition->getProperties() as $property) {
+        $property->setAccessible(TRUE);
+        $value = $property->getValue($definition);
+        $props[$property->name] = $value;
+      }
+      $result[$type] = $props;
+    }
+
+    return array('#markup' => kprint_r($result, TRUE));
+  }
+
+  /**
+   * Builds the state variable overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function stateSystemPage() {
+    $output['#attached']['library'][] = 'system/drupal.system.modules';
+
+    $output['filters'] = array(
+      '#type' => 'container',
+      '#attributes' => array(
+        'class' => array('table-filter', 'js-show'),
+      ),
+    );
+
+    $output['filters']['text'] = array(
+      '#type' => 'search',
+      '#title' => $this->t('Search'),
+      '#size' => 30,
+      '#placeholder' => $this->t('Enter state name'),
+      '#attributes' => array(
+        'class' => array('table-filter-text'),
+        'data-table' => '.devel-state-list',
+        'autocomplete' => 'off',
+        'title' => $this->t('Enter a part of the state name to filter by.'),
+      ),
+    );
+
+    $can_edit = $this->currentUser()->hasPermission('administer site configuration');
+
+    $header = array(
+      'name' => $this->t('Name'),
+      'value' => $this->t('Value'),
+    );
+
+    if ($can_edit) {
+      $header['edit'] = $this->t('Operations');
+    }
+
+    $rows = array();
+    // State class doesn't have getAll method so we get all states from the
+    // KeyValueStorage.
+    foreach ($this->keyValue('state')->getAll() as $state_name => $state) {
+      $rows[$state_name] = array(
+        'name' => array(
+          'data' => $state_name,
+          'class' => 'table-filter-text-source',
+        ),
+        'value' => array(
+          'data' => kprint_r($state, TRUE),
+        ),
+      );
+
+      if ($can_edit) {
+        $operations['edit'] = array(
+          'title' => $this->t('Edit'),
+          'url' => Url::fromRoute('devel.system_state_edit', array('state_name' => $state_name)),
+        );
+        $rows[$state_name]['edit'] = array(
+          'data' => array('#type' => 'operations', '#links' => $operations),
+        );
+      }
+    }
+
+    $output['states'] = array(
+      '#type' => 'table',
+      '#header' => $header,
+      '#rows' => $rows,
+      '#empty' => $this->t('No state variables found.'),
+      '#attributes' => array(
+        'class' => array('devel-state-list'),
+      ),
+    );
+
+    return $output;
+  }
+
+  /**
+   * Builds the session overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function session() {
+    $output['description'] = array(
+      '#markup' => '<p>' . $this->t('Here are the contents of your $_SESSION variable.') . '</p>',
+    );
+    $output['session'] = array(
+      '#type' => 'table',
+      '#header' => array($this->t('Session name'), $this->t('Session ID')),
+      '#rows' => array(array(session_name(), session_id())),
+      '#empty' => $this->t('No session available.'),
+    );
+    $output['data'] = array(
+      '#markup' => kprint_r($_SESSION, TRUE),
+    );
+
+    return $output;
+  }
+
+  /**
+   * Prints the loaded structure of the current entity.
+   *
+   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   *    A RouteMatch object.
+   *
+   * @return array
+   *    Array of page elements to render.
+   */
+  public function entityLoad(RouteMatchInterface $route_match) {
+    $output = array();
+
+    $parameter_name = $route_match->getRouteObject()->getOption('_devel_entity_type_id');
+    $entity = $route_match->getParameter($parameter_name);
+
+    if ($entity && $entity instanceof EntityInterface) {
+      $output = array('#markup' => kdevel_print_object($entity));
+    }
+
+    return $output;
+  }
+
+  /**
+   * Prints the render structure of the current entity.
+   *
+   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   *    A RouteMatch object.
+   *
+   * @return array
+   *    Array of page elements to render.
+   */
+  public function entityRender(RouteMatchInterface $route_match) {
+    $output = array();
+
+    $parameter_name = $route_match->getRouteObject()->getOption('_devel_entity_type_id');
+    $entity = $route_match->getParameter($parameter_name);
+
+    if ($entity && $entity instanceof EntityInterface) {
+      $entity_type_id = $entity->getEntityTypeId();
+      $view_hook = $entity_type_id . '_view';
+
+      $build = array();
+      // If module implements own {entity_type}_view
+      if (function_exists($view_hook)) {
+        $build = $view_hook($entity);
+      }
+      // If entity has view_builder handler
+      elseif ($this->entityManager()->hasHandler($entity_type_id, 'view_builder')) {
+        $build = $this->entityManager()->getViewBuilder($entity_type_id)->view($entity);
+      }
+
+      $output = array('#markup' => kdevel_print_object($build));
+    }
+
+    return $output;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Controller/SwitchUserController.php b/modules/contrib/devel/src/Controller/SwitchUserController.php
new file mode 100644
index 0000000..0e981c3
--- /dev/null
+++ b/modules/contrib/devel/src/Controller/SwitchUserController.php
@@ -0,0 +1,125 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Controller\SwitchUserController.
+ */
+
+namespace Drupal\devel\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Session\AccountProxyInterface;
+use Drupal\Core\Session\SessionManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\Session\Session;
+use Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException;
+
+/**
+ * Controller for switch to another user account.
+ */
+class SwitchUserController extends ControllerBase {
+
+  /**
+   * The current user.
+   *
+   * @var \Drupal\Core\Session\AccountProxyInterface
+   */
+  protected $account;
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * The session manager service.
+   *
+   * @var \Drupal\Core\Session\SessionManagerInterface
+   */
+  protected $sessionManager;
+
+  /**
+   * The session.
+   *
+   * @var \Symfony\Component\HttpFoundation\Session\Session
+   */
+  protected $session;
+
+  /**
+   * Constructs a new SwitchUserController object
+   *
+   * @param \Drupal\Core\Session\AccountProxyInterface $account
+   *   The current user.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $user_storage
+   *   The user storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The user storage.
+   * @param \Drupal\Core\Session\SessionManagerInterface $session_manager
+   *   The session manager service.
+   * @param \Symfony\Component\HttpFoundation\Session\Session $session
+   *   The session.
+   */
+  public function __construct(AccountProxyInterface $account, EntityStorageInterface $user_storage, ModuleHandlerInterface $module_handler, SessionManagerInterface $session_manager, Session $session) {
+    $this->account = $account;
+    $this->userStorage = $user_storage;
+    $this->moduleHandler = $module_handler;
+    $this->sessionManager = $session_manager;
+    $this->session = $session;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('current_user'),
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('module_handler'),
+      $container->get('session_manager'),
+      $container->get('session')
+    );
+  }
+
+  /**
+   * Switches to a different user.
+   *
+   * We don't call session_save_session() because we really want to change users.
+   * Usually unsafe!
+   *
+   * @param string $name
+   *   The username to switch to, or NULL to log out.
+   *
+   * @return \Symfony\Component\HttpFoundation\RedirectResponse
+   *   A redirect response object.
+   *
+   * @throws \Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException
+   */
+  public function switchUser($name = NULL) {
+    if (empty($name) || !($account = $this->userStorage->loadByProperties(['name' => $name]))) {
+      throw new AccessDeniedHttpException();
+    }
+    $account = reset($account);
+
+    // Call logout hooks when switching from original user.
+    $this->moduleHandler->invokeAll('user_logout', [$this->account]);
+
+    // Regenerate the session ID to prevent against session fixation attacks.
+    $this->sessionManager->regenerate();
+
+    // Based off masquarade module as:
+    // https://www.drupal.org/node/218104 doesn't stick and instead only
+    // keeps context until redirect.
+    $this->account->setAccount($account);
+    $this->session->set('uid', $account->id());
+
+    // Call all login hooks when switching to masquerading user.
+    $this->moduleHandler->invokeAll('user_login', [$account]);
+
+    return $this->redirect('<front>');
+  }
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperBase.php b/modules/contrib/devel/src/DevelDumperBase.php
new file mode 100644
index 0000000..25c231a
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperBase.php
@@ -0,0 +1,43 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperBase.
+ */
+
+namespace Drupal\devel;
+
+use Drupal\Core\Render\Markup;
+use Drupal\Core\Plugin\PluginBase;
+
+/**
+ * Defines a base devel dumper implementation.
+ *
+ * @see \Drupal\devel\Annotation\DevelDumper
+ * @see \Drupal\devel\DevelDumperInterface
+ * @see \Drupal\devel\DevelDumperPluginManager
+ * @see plugin_api
+ */
+abstract class DevelDumperBase extends PluginBase implements DevelDumperInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function exportAsRenderable($input, $name = NULL) {
+    return ['#markup' => $this->export($input, $name)];
+  }
+
+  /**
+   * Wrapper for \Drupal\Core\Render\Markup::create().
+   *
+   * @param string $input
+   *   The input string to mark as safe.
+   *
+   * @return string
+   *   The unaltered input value.
+   */
+  protected function setSafeMarkup($input) {
+    return Markup::create($input);
+  }
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperInterface.php b/modules/contrib/devel/src/DevelDumperInterface.php
new file mode 100644
index 0000000..41e8c78
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperInterface.php
@@ -0,0 +1,64 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperInterface.
+ */
+
+namespace Drupal\devel;
+
+/**
+ * Base interface definition for DevelDumper plugins.
+ *
+ * @see \Drupal\devel\Annotation\DevelDumper
+ * @see \Drupal\devel\DevelDumperPluginManager
+ * @see \Drupal\devel\DevelDumperBase
+ * @see plugin_api
+ */
+interface DevelDumperInterface {
+
+  /**
+   * Dumps information about a variable.
+   *
+   * @param mixed $input
+   *   The variable to dump.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   */
+  public function dump($input, $name = NULL);
+
+  /**
+   * Returns a string representation of a variable.
+   *
+   * @param mixed $input
+   *   The variable to export.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   *
+   * @return string
+   *   String representation of a variable.
+   */
+  public function export($input, $name = NULL);
+
+  /**
+   * Returns a string representation of a variable wrapped in a render array.
+   *
+   * @param mixed $input
+   *   The variable to export.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   *
+   * @return array
+   *   String representation of a variable wrapped in a render array.
+   */
+  public function exportAsRenderable($input, $name = NULL);
+
+  /**
+   * Checks if requirements for this plugin are satisfied.
+   *
+   * @return bool
+   *   TRUE is requirements are satisfied, FALSE otherwise.
+   */
+  public static function checkRequirements();
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperManager.php b/modules/contrib/devel/src/DevelDumperManager.php
new file mode 100644
index 0000000..ff6056b
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperManager.php
@@ -0,0 +1,147 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperManager.
+ */
+
+namespace Drupal\devel;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Session\AccountProxyInterface;
+
+/**
+ * Class DevelDumperManager
+ */
+class DevelDumperManager implements DevelDumperManagerInterface {
+
+  /**
+   * The devel config.
+   *
+   * @var \Drupal\Core\Config\ImmutableConfig
+   */
+  protected $config;
+
+  /**
+   * The current account.
+   *
+   * @var \Drupal\Core\Session\AccountProxyInterface
+   */
+  protected $account;
+
+  /**
+   * The devel dumper plugin manager.
+   *
+   * @var \Drupal\devel\DevelDumperPluginManagerInterface
+   */
+  protected $dumperManager;
+
+  /**
+   * Constructs a DevelDumperPluginManager object.
+   *
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   *   The config factory service.
+   * @param \Drupal\Core\Session\AccountProxyInterface $account
+   *   The current account.
+   * @param \Drupal\devel\DevelDumperPluginManagerInterface $dumper_manager
+   *   The devel dumper plugin manager.
+   */
+  public function __construct(ConfigFactoryInterface $config_factory, AccountProxyInterface $account, DevelDumperPluginManagerInterface $dumper_manager) {
+    $this->config = $config_factory->get('devel.settings');
+    $this->account = $account;
+    $this->dumperManager = $dumper_manager;
+  }
+
+  /**
+   * Instances a new dumper plugin.
+   *
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   *
+   * @return \Drupal\devel\DevelDumperInterface
+   *   Returns the devel dumper plugin instance.
+   */
+  protected function createInstance($plugin_id = NULL) {
+    if (!$plugin_id || !$this->dumperManager->isPluginSupported($plugin_id)) {
+      $plugin_id = $this->config->get('devel_dumper');
+    }
+    return $this->dumperManager->createInstance($plugin_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL, $plugin_id = NULL) {
+    if ($this->hasAccessToDevelInformation()) {
+      $this->createInstance($plugin_id)->dump($input, $name);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL, $plugin_id = NULL) {
+    if ($this->hasAccessToDevelInformation()) {
+      return $this->createInstance($plugin_id)->export($input, $name);
+    }
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function message($input, $name = NULL, $type = 'status', $plugin_id = NULL) {
+    if ($this->hasAccessToDevelInformation()) {
+      $output = $this->export($input, $name, $plugin_id);
+      drupal_set_message($output, $type, TRUE);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function debug($input, $name = NULL, $plugin_id = NULL) {
+    $output = $this->createInstance($plugin_id)->export($input, $name) . "\n";
+    // The temp directory does vary across multiple simpletest instances.
+    $file = file_directory_temp() . '/drupal_debug.txt';
+    if (file_put_contents($file, $output, FILE_APPEND) === FALSE && $this->hasAccessToDevelInformation()) {
+      drupal_set_message(t('Devel was unable to write to %file.', ['%file' => $file]), 'error');
+      return FALSE;
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dumpOrExport($input, $name = NULL, $export = TRUE, $plugin_id = NULL) {
+    if ($this->hasAccessToDevelInformation()) {
+      $dumper = $this->createInstance($plugin_id);
+      if ($export) {
+        return $dumper->export($input, $name);
+      }
+      $dumper->dump($input, $name);
+    }
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function exportAsRenderable($input, $name = NULL, $plugin_id = NULL) {
+    if ($this->hasAccessToDevelInformation()) {
+      return $this->createInstance($plugin_id)->exportAsRenderable($input, $name);
+    }
+    return [];
+  }
+
+  /**
+   * Checks whether a user has access to devel information.
+   *
+   * @return bool
+   *   TRUE if the user has the permission, FALSE otherwise.
+   */
+  protected function hasAccessToDevelInformation() {
+    return $this->account && $this->account->hasPermission('access devel information');
+  }
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperManagerInterface.php b/modules/contrib/devel/src/DevelDumperManagerInterface.php
new file mode 100644
index 0000000..fcd4cad
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperManagerInterface.php
@@ -0,0 +1,107 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperManagerInterface.
+ */
+
+namespace Drupal\devel;
+
+/**
+ * Interface DevelDumperManagerInterface
+ */
+interface DevelDumperManagerInterface {
+
+  /**
+   * Dumps information about a variable.
+   *
+   * @param mixed $input
+   *   The variable to dump.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   */
+  public function dump($input, $name = NULL, $plugin_id = NULL);
+
+  /**
+   * Returns a string representation of a variable.
+   *
+   * @param mixed $input
+   *   The variable to dump.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   *
+   * @return string
+   *   String representation of a variable.
+   */
+  public function export($input, $name = NULL, $plugin_id = NULL);
+
+  /**
+   * Sets a message with a string representation of a variable.
+   *
+   * @param mixed $input
+   *   The variable to dump.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   * @param string $type
+   *   (optional) The message's type. Defaults to 'status'.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   */
+  public function message($input, $name = NULL, $type = 'status', $plugin_id = NULL);
+
+  /**
+   * Logs a variable to a drupal_debug.txt in the site's temp directory.
+   *
+   * @param mixed $input
+   *   The variable to log to the drupal_debug.txt log file.
+   * @param string $name
+   *   (optional) If set, a label to output before $data in the log file.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   *
+   * @return void|false
+   *   Empty if successful, FALSE if the log file could not be written.
+   *
+   * @see dd()
+   * @see http://drupal.org/node/314112
+   */
+  public function debug($input, $name = NULL, $plugin_id = NULL);
+
+  /**
+   * Wrapper for ::dump() and ::export().
+   *
+   * @param mixed $input
+   *   The variable to dump.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   * @param bool $export
+   *   (optional) Whether return string representation of a variable.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   *
+   * @return string|null
+   *   String representation of a variable if $export is set to TRUE,
+   *   NULL otherwise.
+   */
+  public function dumpOrExport($input, $name = NULL, $export = TRUE, $plugin_id = NULL);
+
+  /**
+   * Returns a render array representation of a variable.
+   *
+   * @param mixed $input
+   *   The variable to export.
+   * @param string $name
+   *   (optional) The label to output before variable, defaults to NULL.
+   * @param string $plugin_id
+   *   (optional) The plugin ID, defaults to NULL.
+   *
+   * @return array
+   *   String representation of a variable wrapped in a render array.
+   */
+  public function exportAsRenderable($input, $name = NULL, $plugin_id = NULL);
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperPluginManager.php b/modules/contrib/devel/src/DevelDumperPluginManager.php
new file mode 100644
index 0000000..1d2ee5f
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperPluginManager.php
@@ -0,0 +1,76 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperPluginManager.
+ */
+
+namespace Drupal\devel;
+
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Drupal\devel\Annotation\DevelDumper;
+
+/**
+ * Plugin type manager for Devel Dumper plugins.
+ *
+ * @see \Drupal\devel\Annotation\DevelDumper
+ * @see \Drupal\devel\DevelDumperInterface
+ * @see \Drupal\devel\DevelDumperBase
+ * @see plugin_api
+ */
+class DevelDumperPluginManager extends DefaultPluginManager implements DevelDumperPluginManagerInterface {
+
+  /**
+   * Constructs a DevelDumperPluginManager object.
+   *
+   * @param \Traversable $namespaces
+   *   An object that implements \Traversable which contains the root paths
+   *   keyed by the corresponding namespace to look for plugin implementations.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   *   Cache backend instance to use.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler to invoke the alter hook with.
+   */
+  public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
+    parent::__construct('Plugin/Devel/Dumper', $namespaces, $module_handler, DevelDumperInterface::class, DevelDumper::class);
+    $this->setCacheBackend($cache_backend, 'devel_dumper_plugins');
+    $this->alterInfo('devel_dumper_info');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function processDefinition(&$definition, $plugin_id) {
+    parent::processDefinition($definition, $plugin_id);
+
+    $definition['supported'] = (bool) call_user_func([$definition['class'], 'checkRequirements']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function isPluginSupported($plugin_id) {
+    $definition = $this->getDefinition($plugin_id, FALSE);
+    return $definition && $definition['supported'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createInstance($plugin_id, array $configuration = []) {
+    if (!$this->isPluginSupported($plugin_id)) {
+      $plugin_id = $this->getFallbackPluginId($plugin_id);
+    }
+    return parent::createInstance($plugin_id, $configuration);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFallbackPluginId($plugin_id, array $configuration = []) {
+    return 'default';
+  }
+
+}
diff --git a/modules/contrib/devel/src/DevelDumperPluginManagerInterface.php b/modules/contrib/devel/src/DevelDumperPluginManagerInterface.php
new file mode 100644
index 0000000..5aeee12
--- /dev/null
+++ b/modules/contrib/devel/src/DevelDumperPluginManagerInterface.php
@@ -0,0 +1,29 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\DevelDumperPluginManagerInterface.
+ */
+
+namespace Drupal\devel;
+
+use Drupal\Component\Plugin\FallbackPluginManagerInterface;
+use Drupal\Component\Plugin\PluginManagerInterface;
+
+/**
+ * Interface DevelDumperPluginManagerInterface.
+ */
+interface DevelDumperPluginManagerInterface extends PluginManagerInterface, FallbackPluginManagerInterface {
+
+  /**
+   * Checks if plugin has a definition and is supported.
+   *
+   * @param string $plugin_id
+   *   The ID of the plugin to check.
+   *
+   * @return bool
+   *   TRUE if the plugin is supported, FALSE otherwise.
+   */
+  public function isPluginSupported($plugin_id);
+
+}
diff --git a/modules/contrib/devel/src/EventSubscriber/DevelEventSubscriber.php b/modules/contrib/devel/src/EventSubscriber/DevelEventSubscriber.php
new file mode 100644
index 0000000..c05b30a
--- /dev/null
+++ b/modules/contrib/devel/src/EventSubscriber/DevelEventSubscriber.php
@@ -0,0 +1,131 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\EventSubscriber\DevelEventSubscriber.
+ */
+
+namespace Drupal\devel\EventSubscriber;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Symfony\Component\EventDispatcher\EventSubscriberInterface;
+use Symfony\Component\HttpKernel\KernelEvents;
+use Symfony\Component\HttpKernel\Event\GetResponseEvent;
+
+class DevelEventSubscriber implements EventSubscriberInterface {
+
+  /**
+   * The devel.settings config object.
+   *
+   * @var \Drupal\Core\Config\Config;
+   */
+  protected $config;
+
+  /**
+   * The current user.
+   *
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  protected $account;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * Constructs a DevelEventSubscriber object.
+   */
+  public function __construct(ConfigFactoryInterface $config, AccountInterface $account, ModuleHandlerInterface $module_handler, UrlGeneratorInterface $url_generator) {
+    $this->config = $config->get('devel.settings');
+    $this->account = $account;
+    $this->moduleHandler = $module_handler;
+    $this->urlGenerator = $url_generator;
+  }
+
+  /**
+   * Initializes devel module requirements.
+   */
+  public function onRequest(GetResponseEvent $event) {
+
+    if ($this->account->hasPermission('access devel information')) {
+      devel_set_handler(devel_get_handlers());
+
+      // See http://www.firephp.org/HQ/Install.htm
+      $path = NULL;
+      if ((@include_once 'fb.php') || (@include_once 'FirePHPCore/fb.php')) {
+        // FirePHPCore is in include_path. Probably a PEAR installation.
+        $path = '';
+      }
+      elseif ($this->moduleHandler->moduleExists('libraries')) {
+        // Support Libraries API - http://drupal.org/project/libraries
+        $firephp_path = libraries_get_path('FirePHPCore');
+        $firephp_path = ($firephp_path ? $firephp_path . '/lib/FirePHPCore/' : '');
+        $chromephp_path = libraries_get_path('chromephp');
+      }
+      else {
+        $firephp_path = DRUPAL_ROOT . '/libraries/FirePHPCore/lib/FirePHPCore/';
+        $chromephp_path = DRUPAL_ROOT . '/libraries/chromephp';
+      }
+
+      // Include FirePHP if it exists.
+      if (!empty($firephp_path) && file_exists($firephp_path . 'fb.php')) {
+        include_once $firephp_path . 'fb.php';
+        include_once $firephp_path . 'FirePHP.class.php';
+      }
+
+      // Include ChromePHP if it exists.
+      if (!empty($chromephp_path) && file_exists($chromephp_path .= '/ChromePhp.php')) {
+        include_once $chromephp_path;
+      }
+
+    }
+
+    if ($this->config->get('rebuild_theme')) {
+      drupal_theme_rebuild();
+
+      // Ensure that the active theme object is cleared.
+      $theme_name = \Drupal::theme()->getActiveTheme()->getName();
+      \Drupal::state()->delete('theme.active_theme.' . $theme_name);
+      \Drupal::theme()->resetActiveTheme();
+
+      /** @var \Drupal\Core\Extension\ThemeHandlerInterface $theme_handler*/
+      $theme_handler = \Drupal::service('theme_handler');
+      $theme_handler->refreshInfo();
+      // @todo This is not needed after https://www.drupal.org/node/2330755
+      $list = $theme_handler->listInfo();
+      $theme_handler->addTheme($list[$theme_name]);
+
+      if (\Drupal::service('flood')->isAllowed('devel.rebuild_theme_warning', 1)) {
+        \Drupal::service('flood')->register('devel.rebuild_theme_warning');
+        if ($this->account->hasPermission('access devel information')) {
+          drupal_set_message(t('The theme information is being rebuilt on every request. Remember to <a href=":url">turn off</a> this feature on production websites.', array(':url' => $this->urlGenerator->generateFromRoute('devel.admin_settings'))));
+        }
+      }
+    }
+  }
+
+  /**
+   * Implements EventSubscriberInterface::getSubscribedEvents().
+   *
+   * @return array
+   *   An array of event listener definitions.
+   */
+  static function getSubscribedEvents() {
+    // Set a low value to start as early as possible.
+    $events[KernelEvents::REQUEST][] = array('onRequest', -100);
+
+    return $events;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/ConfigEditor.php b/modules/contrib/devel/src/Form/ConfigEditor.php
new file mode 100644
index 0000000..b110337
--- /dev/null
+++ b/modules/contrib/devel/src/Form/ConfigEditor.php
@@ -0,0 +1,151 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ConfigEditor.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Serialization\Exception\InvalidDataTypeException;
+use Drupal\Component\Serialization\Yaml;
+use Drupal\Component\Utility\UrlHelper;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Edit config variable form.
+ */
+class ConfigEditor extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_config_system_edit_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $config_name = '') {
+    $config = $this->config($config_name);
+
+    if ($config === FALSE || $config->isNew()) {
+      drupal_set_message(t('Config @name does not exist in the system.', array('@name' => $config_name)), 'error');
+      return;
+    }
+
+    $data = $config->get();
+
+    if (empty($data)) {
+      drupal_set_message(t('Config @name exists but has no data.', array('@name' => $config_name)), 'warning');
+      return;
+    }
+
+    try {
+      $output = Yaml::encode($data);
+    }
+    catch (InvalidDataTypeException $e) {
+      drupal_set_message(t('Invalid data detected for @name : %error', array('@name' => $config_name, '%error' => $e->getMessage())), 'error');
+      return;
+    }
+
+    $form['current'] = array(
+      '#type' => 'details',
+      '#title' => $this->t('Current value for %variable', array('%variable' => $config_name)),
+      '#attributes' => array('class' => array('container-inline')),
+    );
+    $form['current']['value'] = array(
+      '#type' => 'item',
+      '#markup' => dpr($output, TRUE),
+    );
+
+    $form['name'] = array(
+      '#type' => 'value',
+      '#value' => $config_name,
+    );
+    $form['new'] = array(
+      '#type' => 'textarea',
+      '#title' => $this->t('New value'),
+      '#default_value' => $output,
+      '#rows' => 24,
+      '#required' => TRUE,
+    );
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Save'),
+    );
+    $form['actions']['cancel'] = array(
+      '#type' => 'link',
+      '#title' => $this->t('Cancel'),
+      '#url' => $this->buildCancelLinkUrl(),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    $value = $form_state->getValue('new');
+    // try to parse the new provided value
+    try {
+      $parsed_value = Yaml::decode($value);
+      // Config::setData needs array for the new configuration and
+      // a simple string is valid YAML for any reason.
+      if (is_array($parsed_value)) {
+        $form_state->setValue('parsed_value', $parsed_value);
+      }
+      else {
+        $form_state->setErrorByName('new', $this->t('Invalid input'));
+      }
+    }
+    catch (InvalidDataTypeException $e) {
+      $form_state->setErrorByName('new', $this->t('Invalid input: %error', array('%error' => $e->getMessage())));
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+    try {
+      $this->configFactory()->getEditable($values['name'])->setData($values['parsed_value'])->save();
+      drupal_set_message($this->t('Configuration variable %variable was successfully saved.', array('%variable' => $values['name'])));
+      $this->logger('devel')->info('Configuration variable %variable was successfully saved.', array('%variable' => $values['name']));
+
+      $form_state->setRedirectUrl(Url::fromRoute('devel.configs_list'));
+    }
+    catch (\Exception $e) {
+      drupal_set_message($e->getMessage(), 'error');
+      $this->logger('devel')->error('Error saving configuration variable %variable : %error.', array('%variable' => $values['name'], '%error' => $e->getMessage()));
+    }
+  }
+
+  /**
+   * Builds the cancel link url for the form.
+   *
+   * @return Url
+   *   Cancel url
+   */
+  private function buildCancelLinkUrl() {
+    $query = $this->getRequest()->query;
+
+    if ($query->has('destination')) {
+      $options = UrlHelper::parse($query->get('destination'));
+      $url = Url::fromUri('internal:/' . $options['path'], $options);
+    }
+    else {
+      $url = Url::fromRoute('devel.configs_list');
+    }
+
+    return $url;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/ConfigsList.php b/modules/contrib/devel/src/Form/ConfigsList.php
new file mode 100644
index 0000000..370ddbb
--- /dev/null
+++ b/modules/contrib/devel/src/Form/ConfigsList.php
@@ -0,0 +1,90 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ConfigsList.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Utility\Html;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Form that displays all the config variables to edit them.
+ */
+class ConfigsList extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_config_system_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $filter = '') {
+    $form['filter'] = array(
+      '#type' => 'details',
+      '#title' => t('Filter variables'),
+      '#attributes' => array('class' => array('container-inline')),
+      '#open' => isset($filter) && trim($filter) != '',
+    );
+    $form['filter']['name'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('Variable name'),
+      '#title_display' => 'invisible',
+      '#default_value' => $filter,
+    );
+    $form['filter']['show'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Filter'),
+    );
+
+    $header = array(
+      'name' => array('data' => $this->t('Name')),
+      'edit' => array('data' => $this->t('Operations')),
+    );
+
+    $rows = array();
+
+    $destination = $this->getDestinationArray();
+
+    // List all the variables filtered if any filter was provided.
+    $names = $this->configFactory()->listAll($filter);
+
+    foreach ($names as $config_name) {
+      $operations['edit'] = array(
+        'title' => $this->t('Edit'),
+        'url' => Url::fromRoute('devel.config_edit', array('config_name' => $config_name)),
+        'query' => $destination
+      );
+      $rows[] = array(
+        'name' => $config_name,
+        'operation' => array('data' => array('#type' => 'operations', '#links' => $operations)),
+      );
+    }
+
+    $form['variables'] = array(
+      '#type' => 'table',
+      '#header' => $header,
+      '#rows' => $rows,
+      '#empty' => $this->t('No variables found')
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $filter = $form_state->getValue('name');
+    $form_state->setRedirectUrl(Url::FromRoute('devel.configs_list', array('filter' => Html::escape($filter))));
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/DevelRebuildMenus.php b/modules/contrib/devel/src/Form/DevelRebuildMenus.php
new file mode 100644
index 0000000..d00ffe5
--- /dev/null
+++ b/modules/contrib/devel/src/Form/DevelRebuildMenus.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\DevelRebuildMenus.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\ConfirmFormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Routing\RouteBuilderInterface;
+use Drupal\Core\Url;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides confirmation form for rebuilding the routes.
+ */
+class DevelRebuildMenus extends ConfirmFormBase {
+
+  /**
+   * The route builder service.
+   *
+   * @var \Drupal\Core\Routing\RouteBuilderInterface
+   */
+  protected $routeBuilder;
+
+  /**
+   * Constructs a new DevelRebuildMenus object.
+   *
+   * @param \Drupal\Core\Routing\RouteBuilderInterface $route_builder
+   *   The route builder service.
+   */
+  public function __construct(RouteBuilderInterface $route_builder) {
+    $this->routeBuilder = $route_builder;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('router.builder')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_menu_rebuild';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getQuestion() {
+    return $this->t('Are you sure you want to rebuild menus?');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCancelUrl() {
+    return new Url('<front>');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDescription() {
+    return $this->t('Rebuild menu based on hook_menu() and revert any custom changes. All menu items return to their default settings.');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getConfirmText() {
+    return $this->t('Rebuild');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $this->routeBuilder->rebuild();
+    drupal_set_message($this->t('The menu router has been rebuilt.'));
+    $form_state->setRedirect('<front>');
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/DevelReinstall.php b/modules/contrib/devel/src/Form/DevelReinstall.php
new file mode 100644
index 0000000..70a19f4
--- /dev/null
+++ b/modules/contrib/devel/src/Form/DevelReinstall.php
@@ -0,0 +1,159 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\DevelReinstall.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Extension\ModuleInstallerInterface;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Display a dropdown of installed modules with the option to reinstall them.
+ */
+class DevelReinstall extends FormBase {
+
+  /**
+   * The module installer.
+   *
+   * @var \Drupal\Core\Extension\ModuleInstallerInterface
+   */
+  protected $moduleInstaller;
+
+  /**
+   * Constructs a new DevelReinstall form.
+   *
+   * @param \Drupal\Core\Extension\ModuleInstallerInterface $module_installer
+   *   The module installer.
+   */
+  public function __construct(ModuleInstallerInterface $module_installer) {
+    $this->moduleInstaller = $module_installer;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('module_installer')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_reinstall_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    // Get a list of all available modules.
+    $modules = system_rebuild_module_data();
+
+    $uninstallable = array_filter($modules, function ($module) use ($modules) {
+      return empty($modules[$module->getName()]->info['required']) && drupal_get_installed_schema_version($module->getName()) > SCHEMA_UNINSTALLED && $module->getName() !== 'devel';
+    });
+
+    $form['filters'] = array(
+      '#type' => 'container',
+      '#attributes' => array(
+        'class' => array('table-filter', 'js-show'),
+      ),
+    );
+    $form['filters']['text'] = array(
+      '#type' => 'search',
+      '#title' => $this->t('Search'),
+      '#size' => 30,
+      '#placeholder' => $this->t('Enter module name'),
+      '#attributes' => array(
+        'class' => array('table-filter-text'),
+        'data-table' => '#devel-reinstall-form',
+        'autocomplete' => 'off',
+        'title' => $this->t('Enter a part of the module name or description to filter by.'),
+      ),
+    );
+
+    // Only build the rest of the form if there are any modules available to
+    // uninstall;
+    if (empty($uninstallable)) {
+      return $form;
+    }
+
+    $header = array(
+      'name' => $this->t('Name'),
+      'description' => $this->t('Description'),
+    );
+
+    $rows = array();
+
+    foreach ($uninstallable as $module) {
+      $name = $module->info['name'] ? : $module->getName();
+
+      $rows[$module->getName()] = array(
+        'name' => array(
+          'data' => array(
+            '#type' => 'inline_template',
+            '#template' => '<label class="module-name table-filter-text-source">{{ module_name }}</label>',
+            '#context' => array('module_name' => $name),
+          )
+        ),
+        'description' => array(
+          'data' => $module->info['description'],
+          'class' => array('description'),
+        ),
+      );
+    }
+
+    $form['reinstall'] = array(
+      '#type' => 'tableselect',
+      '#header' => $header,
+      '#options' => $rows,
+      '#js_select' => FALSE,
+      '#empty' => $this->t('No modules are available to uninstall.'),
+    );
+
+    $form['#attached']['library'][] = 'system/drupal.system.modules';
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Reinstall'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    // Form submitted, but no modules selected.
+    if (!array_filter($form_state->getValue('reinstall'))) {
+      $form_state->setErrorByName('reinstall', $this->t('No modules selected.'));
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    try {
+      $modules = $form_state->getValue('reinstall');
+      $reinstall = array_keys(array_filter($modules));
+      $this->moduleInstaller->uninstall($reinstall, FALSE);
+      $this->moduleInstaller->install($reinstall, FALSE);
+      drupal_set_message($this->t('Uninstalled and installed: %names.', array('%names' => implode(', ', $reinstall))));
+    }
+    catch (\Exception $e) {
+      drupal_set_message($this->t('Unable to reinstall modules. Error: %error.', array('%error' => $e->getMessage())), 'error');
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/ExecutePHP.php b/modules/contrib/devel/src/Form/ExecutePHP.php
new file mode 100644
index 0000000..7630865
--- /dev/null
+++ b/modules/contrib/devel/src/Form/ExecutePHP.php
@@ -0,0 +1,60 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ExecutePHP.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Defines a form that allows privileged users to execute arbitrary PHP code.
+ */
+class ExecutePHP extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_execute_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form = array(
+      '#title' => $this->t('Execute PHP Code'),
+      '#description' => $this->t('Execute some PHP code'),
+    );
+    $form['execute']['code'] = array(
+      '#type' => 'textarea',
+      '#title' => t('PHP code to execute'),
+      '#description' => t('Enter some code. Do not use <code>&lt;?php ?&gt;</code> tags.'),
+      '#default_value' => (isset($_SESSION['devel_execute_code']) ? $_SESSION['devel_execute_code'] : ''),
+      '#rows' => 20,
+    );
+    $form['execute']['op'] = array('#type' => 'submit', '#value' => t('Execute'));
+    $form['#redirect'] = FALSE;
+    if (isset($_SESSION['devel_execute_code'])) {
+      unset($_SESSION['devel_execute_code']);
+    }
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    ob_start();
+    $code = $form_state->getValue('code');
+    print eval($code);
+    $_SESSION['devel_execute_code'] = $code;
+    dpm(ob_get_clean());
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/SettingsForm.php b/modules/contrib/devel/src/Form/SettingsForm.php
new file mode 100644
index 0000000..b585fed
--- /dev/null
+++ b/modules/contrib/devel/src/Form/SettingsForm.php
@@ -0,0 +1,202 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SettingsForm.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\ConfigFormBase;
+use Drupal\devel\DevelDumperPluginManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Defines a form that configures devel settings.
+ */
+class SettingsForm extends ConfigFormBase {
+
+  /**
+   * Devel Dumper Plugin Manager.
+   *
+   * @var \Drupal\devel\DevelDumperPluginManager
+   */
+  protected $dumperManager;
+
+  /**
+   * Constructs a new SettingsForm object.
+   *
+   * @param \Drupal\devel\DevelDumperPluginManagerInterface $devel_dumper_manager
+   *   Devel Dumper Plugin Manager.
+   */
+  public function __construct(DevelDumperPluginManagerInterface $devel_dumper_manager) {
+    $this->dumperManager = $devel_dumper_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('plugin.manager.devel_dumper')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_admin_settings_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function getEditableConfigNames() {
+    return [
+      'devel.settings',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, Request $request = NULL) {
+    $current_url = Url::createFromRequest($request);
+    $devel_config = $this->config('devel.settings');
+
+    $form['api_url'] = array('#type' => 'textfield',
+      '#title' => t('API Site'),
+      '#default_value' => $devel_config->get('api_url'),
+      '#description' => t('The base URL for your developer documentation links. You might change this if you run <a href=":url">api.module</a> locally.', array(':url' => Url::fromUri('http://drupal.org/project/api')->toString())));
+    $form['page_alter'] = array('#type' => 'checkbox',
+      '#title' => t('Display $page array'),
+      '#default_value' => $devel_config->get('page_alter'),
+      '#description' => t('Display $page array from <a href="http://api.drupal.org/api/function/hook_page_alter/7">hook_page_alter()</a> in the messages area of each page.'),
+    );
+    $form['raw_names'] = array('#type' => 'checkbox',
+      '#title' => t('Display machine names of permissions and modules'),
+      '#default_value' => $devel_config->get('raw_names'),
+      '#description' => t('Display the language-independent machine names of the permissions in mouse-over hints on the <a href=":permissions_url">Permissions</a> page and the module base file names on the Permissions and <a href=":modules_url">Modules</a> pages.', array(':permissions_url' => Url::fromRoute('user.admin_permissions')->toString(), ':modules_url' => Url::fromRoute('system.modules_list')->toString())),
+    );
+
+    $error_handlers = devel_get_handlers();
+    $form['error_handlers'] = array(
+      '#type' => 'select',
+      '#title' => t('Error handlers'),
+      '#options' => array(
+        DEVEL_ERROR_HANDLER_NONE => t('None'),
+        DEVEL_ERROR_HANDLER_STANDARD => t('Standard Drupal'),
+        DEVEL_ERROR_HANDLER_BACKTRACE_DPM => t('Kint backtrace in the message area'),
+        DEVEL_ERROR_HANDLER_BACKTRACE_KINT => t('Kint backtrace above the rendered page'),
+      ),
+      '#multiple' => TRUE,
+      '#default_value' => empty($error_handlers) ? DEVEL_ERROR_HANDLER_NONE : $error_handlers,
+      '#description' => [
+        [
+          '#markup' => $this->t('Select the error handler(s) to use, in case you <a href=":choose">choose to show errors on screen</a>.', [':choose' => $this->url('system.logging_settings')])
+        ],
+        [
+          '#theme' => 'item_list',
+          '#items' => [
+            $this->t('<em>None</em> is a good option when stepping through the site in your debugger.'),
+            $this->t('<em>Standard Drupal</em> does not display all the information that is often needed to resolve an issue.'),
+            $this->t('<em>Kint backtrace</em> displays nice debug information when any type of error is noticed, but only to users with the %perm permission.', ['%perm' => t('Access developer information')]),
+          ],
+        ],
+        [
+          '#markup' => $this->t('Depending on the situation, the theme, the size of the call stack and the arguments, etc., some handlers may not display their messages, or display them on the subsequent page. Select <em>Standard Drupal</em> <strong>and</strong> <em>Kint backtrace above the rendered page</em> to maximize your chances of not missing any messages.') . '<br />' .
+            $this->t('Demonstrate the current error handler(s):') . ' ' .
+            $this->l('notice', $current_url->setOption('query', ['demo' => 'notice'])) . ', ' .
+            $this->l('notice+warning', $current_url->setOption('query', ['demo' => 'warning'])). ', ' .
+            $this->l('notice+warning+error', $current_url->setOption('query', ['demo' => 'error'])) . ' (' .
+            $this->t('The presentation of the @error is determined by PHP.', ['@error' => 'error']) . ')'
+        ],
+      ],
+    );
+    $form['error_handlers']['#size'] = count($form['error_handlers']['#options']);
+    if ($request->query->has('demo')) {
+      if ($request->getMethod() == 'GET') {
+        $this->demonstrateErrorHandlers($request->query->get('demo'));
+      }
+      $request->query->remove('demo');
+    }
+
+    $form['rebuild_theme'] = array(
+     '#type' => 'checkbox',
+     '#title' => t('Rebuild the theme information like the registry'),
+     '#description' => t('While creating new templates, change the $theme.info.yml and theme_ overrides the theme information needs to be rebuilt.'),
+     '#default_value' => $devel_config->get('rebuild_theme'),
+    );
+
+    $dumper = $devel_config->get('devel_dumper');
+    $default = $this->dumperManager->isPluginSupported($dumper) ? $dumper : $this->dumperManager->getFallbackPluginId(NULL);
+
+    $form['dumper'] = array(
+      '#type' => 'radios',
+      '#title' => $this->t('Variables Dumper'),
+      '#options' => [],
+      '#default_value' => $default,
+      '#description' => $this->t('Select the debugging tool used for formatting and displaying the variables inspected through the debug functions of Devel. You can enable the <a href=":kint_install">Kint module</a> (shipped with Devel) and select the Kint debugging tool for an improved debugging experience. <strong>NOTE</strong>: Some of these plugins require external libraries for to be enabled. Learn how install external libraries with <a href=":url">Composer</a>.', [':url' => 'https://www.drupal.org/node/2404989', ':kint_install' => Url::fromRoute('system.modules_list')->toString()]),
+    );
+
+    foreach ($this->dumperManager->getDefinitions() as $id => $definition) {
+      $form['dumper']['#options'][$id] = $definition['label'];
+
+      $supported = $this->dumperManager->isPluginSupported($id);
+      $form['dumper'][$id]['#disabled'] = !$supported;
+
+      $form['dumper'][$id]['#description'] = [
+        '#type' => 'inline_template',
+        '#template' => '{{ description }}{% if not supported %}<div><small>{% trans %}<strong>Not available</strong>. You may need to install external dependencies for use this plugin.{% endtrans %}</small></div>{% endif %}',
+        '#context' => [
+          'description' => $definition['description'],
+          'supported' => $supported,
+        ]
+      ];
+    }
+
+    return parent::buildForm($form, $form_state);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+    $this->config('devel.settings')
+      ->set('api_url', $values['api_url'])
+      ->set('page_alter', $values['page_alter'])
+      ->set('raw_names', $values['raw_names'])
+      ->set('error_handlers', $values['error_handlers'])
+      ->set('rebuild_theme', $values['rebuild_theme'])
+      ->set('devel_dumper', $values['dumper'])
+      ->save();
+
+    parent::submitForm($form, $form_state);
+  }
+
+  /**
+   * @param string $severity
+   */
+  protected function demonstrateErrorHandlers($severity) {
+    switch ($severity) {
+      case 'notice':
+        $undefined = $undefined;
+        break;
+      case 'warning':
+        $undefined = $undefined;
+        1/0;
+        break;
+      case 'error':
+        $undefined = $undefined;
+        1/0;
+        devel_undefined_function();
+        break;
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/SwitchUserForm.php b/modules/contrib/devel/src/Form/SwitchUserForm.php
new file mode 100644
index 0000000..e216955
--- /dev/null
+++ b/modules/contrib/devel/src/Form/SwitchUserForm.php
@@ -0,0 +1,113 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SwitchUserForm.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Access\CsrfTokenGenerator;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+use Drupal\user\Entity\User;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Defines a form that allows privileged users to generate entities.
+ */
+class SwitchUserForm extends FormBase {
+
+  /**
+   * The csrf token generator.
+   *
+   * @var \Drupal\Core\Access\CsrfTokenGenerator
+   */
+  protected $csrfToken;
+
+  /**
+   * Constructs a new SwitchUserForm object.
+   *
+   * @param \Drupal\Core\Access\CsrfTokenGenerator $csrf_token_generator
+   */
+  public function __construct(CsrfTokenGenerator $csrf_token_generator) {
+    $this->csrfToken = $csrf_token_generator;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('csrf_token')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_switchuser_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form['autocomplete'] = [
+      '#type' => 'container',
+      '#attributes' => [
+        'class' => ['container-inline'],
+      ],
+    ];
+    $form['autocomplete']['userid'] = [
+      '#type' => 'entity_autocomplete',
+      '#title' => $this->t('Username'),
+      '#placeholder' => $this->t('Enter username'),
+      '#target_type' => 'user',
+      '#selection_settings' => [
+        'include_anonymous' => FALSE
+      ],
+      '#process_default_value' => FALSE,
+      '#maxlength' => USERNAME_MAX_LENGTH,
+      '#title_display' => 'invisible',
+      '#required' => TRUE,
+      '#size' => '28',
+    ];
+
+    $form['autocomplete']['actions'] = ['#type' => 'actions'];
+    $form['autocomplete']['actions']['submit'] = [
+      '#type' => 'submit',
+      '#value' => $this->t('Switch'),
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    if (!$account = User::load($form_state->getValue('userid'))) {
+      $form_state->setErrorByName('userid', $this->t('Username not found'));
+    }
+    else {
+      $form_state->setValue('username', $account->getAccountName());
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    // We cannot rely on automatic token creation, since the csrf seed changes
+    // after the redirect and the generated token is not more valid.
+    // TODO find another way to do this.
+    $url = Url::fromRoute('devel.switch', ['name' => $form_state->getValue('username')]);
+    $url->setOption('query', ['token' => $this->csrfToken->get($url->getInternalPath())]);
+
+    $form_state->setRedirectUrl($url);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Form/SystemStateEdit.php b/modules/contrib/devel/src/Form/SystemStateEdit.php
new file mode 100644
index 0000000..281cc2e
--- /dev/null
+++ b/modules/contrib/devel/src/Form/SystemStateEdit.php
@@ -0,0 +1,194 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SystemStateEdit.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Serialization\Exception\InvalidDataTypeException;
+use Drupal\Component\Serialization\Yaml;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\State\StateInterface;
+use Drupal\Core\Url;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Form API form to edit a state.
+ */
+class SystemStateEdit extends FormBase {
+
+  /**
+   * The state store.
+   *
+   * @var \Drupal\Core\State\StateInterface
+   */
+  protected $state;
+
+  /**
+   * Constructs a new SystemStateEdit object.
+   *
+   * @param \Drupal\Core\State\StateInterface $state
+   *   The state service.
+   */
+  public function __construct(StateInterface $state) {
+    $this->state = $state;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('state')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_state_system_edit_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $state_name = '') {
+    // Get the old value
+    $old_value = $this->state->get($state_name);
+
+    if (!isset($old_value)) {
+      drupal_set_message(t('State @name does not exist in the system.', array('@name' => $state_name)), 'warning');
+      return;
+    }
+
+    // Only simple structures are allowed to be edited.
+    $disabled = !$this->checkObject($old_value);
+
+    if ($disabled) {
+      drupal_set_message(t('Only simple structures are allowed to be edited. State @name contains objects.', array('@name' => $state_name)), 'warning');
+    }
+
+    // First we will show the user the content of the variable about to be edited.
+    $form['value'] = array(
+      '#type' => 'item',
+      '#title' => $this->t('Current value for %name', array('%name' => $state_name)),
+      '#markup' => kprint_r($old_value, TRUE),
+    );
+
+    $transport = 'plain';
+
+    if (!$disabled && is_array($old_value)) {
+      try {
+        $old_value = Yaml::encode($old_value);
+        $transport = 'yaml';
+      }
+      catch (InvalidDataTypeException $e) {
+        drupal_set_message(t('Invalid data detected for @name : %error', array('@name' => $state_name, '%error' => $e->getMessage())), 'error');
+        return;
+      }
+    }
+
+    // Store in the form the name of the state variable
+    $form['state_name'] = array(
+      '#type' => 'value',
+      '#value' => $state_name,
+    );
+    // Set the transport format for the new value. Values:
+    //  - plain
+    //  - yaml
+    $form['transport'] = array(
+      '#type' => 'value',
+      '#value' => $transport,
+    );
+
+    $form['new_value'] = array(
+      '#type' => 'textarea',
+      '#title' => $this->t('New value'),
+      '#default_value' => $disabled ? '' : $old_value,
+      '#disabled' => $disabled,
+      '#rows' => 15,
+    );
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Save'),
+      '#disabled' => $disabled,
+    );
+    $form['actions']['cancel'] = array(
+      '#type' => 'link',
+      '#title' => $this->t('Cancel'),
+      '#url' => Url::fromRoute('devel.state_system_page')
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+
+    if ($values['transport'] == 'yaml') {
+      // try to parse the new provided value
+      try {
+        $parsed_value = Yaml::decode($values['new_value']);
+        $form_state->setValue('parsed_value', $parsed_value);
+      }
+      catch (InvalidDataTypeException $e) {
+        $form_state->setErrorByName('new_value', $this->t('Invalid input: %error', array('%error' => $e->getMessage())));
+      }
+    }
+    else {
+      $form_state->setValue('parsed_value', $values['new_value']);
+    }
+
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    // Save the state
+    $values = $form_state->getValues();
+    $this->state->set($values['state_name'], $values['parsed_value']);
+
+    $form_state->setRedirectUrl(Url::fromRoute('devel.state_system_page'));
+
+    drupal_set_message($this->t('Variable %variable was successfully edited.', array('%variable' => $values['state_name'])));
+    $this->logger('devel')->info('Variable %variable was successfully edited.', array('%variable' => $values['state_name']));
+  }
+
+  /**
+   * Helper function to determine if a variable is or contains an object.
+   *
+   * @param $data
+   *   Input data to check
+   *
+   * @return bool
+   *   TRUE if the variable is not an object and does not contain one.
+   */
+  protected function checkObject($data) {
+    if (is_object($data)) {
+      return FALSE;
+    }
+    if (is_array($data)) {
+      // If the current object is an array, then check recursively.
+      foreach ($data as $value) {
+        // If there is an object the whole container is "contaminated"
+        if (!$this->checkObject($value)) {
+          return FALSE;
+        }
+      }
+    }
+
+    // All checks pass
+    return TRUE;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Block/DevelExecutePHP.php b/modules/contrib/devel/src/Plugin/Block/DevelExecutePHP.php
new file mode 100644
index 0000000..9c3a9f8
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Block/DevelExecutePHP.php
@@ -0,0 +1,38 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Block\DevelExecutePHP.
+ */
+
+namespace Drupal\devel\Plugin\Block;
+
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Block\BlockBase;
+use Drupal\Core\Session\AccountInterface;
+
+/**
+ * Provides a block for executing PHP code.
+ *
+ * @Block(
+ *   id = "devel_execute_php",
+ *   admin_label = @Translation("Execute PHP")
+ * )
+ */
+class DevelExecutePHP extends BlockBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function blockAccess(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, 'execute php code');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    return \Drupal::formBuilder()->getForm('Drupal\devel\Form\ExecutePHP');
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Block/SwitchUserBlock.php b/modules/contrib/devel/src/Plugin/Block/SwitchUserBlock.php
new file mode 100644
index 0000000..5735ffc
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Block/SwitchUserBlock.php
@@ -0,0 +1,291 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Block\SwitchUserBlock.
+ */
+
+namespace Drupal\devel\Plugin\Block;
+
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Block\BlockBase;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormBuilderInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\Core\Routing\RedirectDestinationTrait;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\Session\AnonymousUserSession;
+use Drupal\Core\Url;
+use Drupal\user\Entity\Role;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a block for switching users.
+ *
+ * @Block(
+ *   id = "devel_switch_user",
+ *   admin_label = @Translation("Switch user"),
+ *   category = @Translation("Forms")
+ * )
+ */
+class SwitchUserBlock extends BlockBase implements ContainerFactoryPluginInterface {
+
+  use RedirectDestinationTrait;
+
+  /**
+   * The FormBuilder object.
+   *
+   * @var \Drupal\Core\Form\FormBuilderInterface
+   */
+  protected $formBuilder;
+
+  /**
+   * The Current User object.
+   *
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  protected $currentUser;
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * Constructs a new SwitchUserBlock object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Session\AccountInterface $current_user
+   *   Current user.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $user_storage
+   *   The user storage.
+   * @param \Drupal\Core\Form\FormBuilderInterface $form_builder
+   *   The form builder service.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, AccountInterface $current_user, EntityStorageInterface $user_storage, FormBuilderInterface $form_builder) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+    $this->formBuilder = $form_builder;
+    $this->currentUser = $current_user;
+    $this->userStorage = $user_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration,
+      $plugin_id,
+      $plugin_definition,
+      $container->get('current_user'),
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('form_builder')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function defaultConfiguration() {
+    return [
+      'list_size' => 12,
+      'include_anon' => FALSE,
+      'show_form' => TRUE,
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockAccess(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, 'switch users');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockForm($form, FormStateInterface $form_state) {
+    $anononymous = new AnonymousUserSession();
+    $form['list_size'] = [
+      '#type' => 'number',
+      '#title' => $this->t('Number of users to display in the list'),
+      '#default_value' => $this->configuration['list_size'],
+      '#min' => 1,
+      '#max' => 50,
+    ];
+    $form['include_anon'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Include %anonymous', ['%anonymous' => $anononymous->getAccountName()]),
+      '#default_value' => $this->configuration['include_anon'],
+    ];
+    $form['show_form'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Allow entering any user name'),
+      '#default_value' => $this->configuration['show_form'],
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockSubmit($form, FormStateInterface $form_state) {
+    $this->configuration['list_size'] = $form_state->getValue('list_size');
+    $this->configuration['include_anon'] = $form_state->getValue('include_anon');
+    $this->configuration['show_form'] = $form_state->getValue('show_form');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCacheMaxAge() {
+    return 0;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    $build = [];
+    if ($accounts = $this->getUsers()) {
+      $build['devel_links'] = $this->buildUserList($accounts);
+
+      if ($this->configuration['show_form']) {
+        $build['devel_form'] = $this->formBuilder->getForm('\Drupal\devel\Form\SwitchUserForm');
+      }
+    }
+
+    return $build;
+  }
+
+  /**
+   * Provides the list of accounts that can be used for the user switch.
+   *
+   * Inactive users are omitted from all of the following db selects. Users
+   * with 'switch users' permission and anonymous user if include_anon property
+   * is set to TRUE, are prioritized.
+   *
+   * @return \Drupal\core\Session\AccountInterface[]
+   *   List of accounts to be used for the switch.
+   */
+  protected function getUsers() {
+    $list_size = $this->configuration['list_size'];
+    $include_anonymous = $this->configuration['include_anon'];
+
+    $list_size = $include_anonymous ? $list_size - 1 : $list_size;
+
+    // Users with 'switch users' permission are prioritized so
+    // we try to load first users with this permission.
+    $query = $this->userStorage->getQuery()
+      ->condition('uid', 0, '>')
+      ->condition('status', 0, '>')
+      ->sort('access', 'DESC')
+      ->range(0, $list_size);
+
+    $roles = user_roles(TRUE, 'switch users');
+
+    if (!empty($roles) && !isset($roles[Role::AUTHENTICATED_ID])) {
+      $query->condition('roles', array_keys($roles), 'IN');
+    }
+
+    $user_ids = $query->execute();
+
+    // If we don't have enough users with 'switch users' permission, add
+    // uids until we hit $list_size.
+    if (count($user_ids) < $list_size) {
+      $query = $this->userStorage->getQuery()
+        ->condition('uid', 0, '>')
+        ->condition('status', 0, '>')
+        ->sort('access', 'DESC')
+        ->range(0, $list_size);
+
+      // Excludes the prioritized user ids only if the previous query return
+      // some records.
+      if (!empty($user_ids)) {
+        $query->condition('uid', array_keys($user_ids), 'NOT IN');
+        $query->range(0, $list_size - count($user_ids));
+      }
+
+      $user_ids += $query->execute();
+    }
+
+    $accounts = $this->userStorage->loadMultiple($user_ids);
+
+    if ($include_anonymous) {
+      $anonymous = new AnonymousUserSession();
+      $accounts[$anonymous->id()] = $anonymous;
+    }
+
+    uasort($accounts, 'static::sortUserList');
+
+    return $accounts;
+  }
+
+  /**
+   * Builds the user listing as renderable array.
+   *
+   * @param \Drupal\core\Session\AccountInterface[] $accounts
+   *   The accounts to be rendered in the list.
+   *
+   * @return array
+   *   A renderable array.
+   */
+  protected function buildUserList(array $accounts) {
+    $links = [];
+
+    foreach ($accounts as $account) {
+      $links[$account->id()] = [
+        'title' => $account->getDisplayName(),
+        'url' => Url::fromRoute('devel.switch', ['name' => $account->getAccountName()]),
+        'query' => $this->getDestinationArray(),
+        'attributes' => [
+          'title' => $account->hasPermission('switch users') ? $this->t('This user can switch back.') : $this->t('Caution: this user will be unable to switch back.'),
+        ],
+      ];
+
+      if ($account->isAnonymous()) {
+        $links[$account->id()]['url'] = Url::fromRoute('user.logout');
+      }
+
+      if ($this->currentUser->id() === $account->id()) {
+        $links[$account->id()]['title'] = new FormattableMarkup('<strong>%user</strong>', ['%user' => $account->getDisplayName()]);
+      }
+    }
+
+    return [
+      '#theme' => 'links',
+      '#links' => $links,
+      '#attached' => ['library' => ['devel/devel']],
+    ];
+  }
+
+  /**
+   * Helper callback for uasort() to sort accounts by last access.
+   */
+  public static function sortUserList(AccountInterface $a, AccountInterface $b) {
+    $a_access = (int) $a->getLastAccessedTime();
+    $b_access = (int) $b->getLastAccessedTime();
+
+    if ($a_access === $b_access) {
+      return 0;
+    }
+
+    // User never access to site.
+    if ($a_access === 0) {
+      return 1;
+    }
+
+    return ($a_access > $b_access) ? -1 : 1;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Derivative/DevelLocalTask.php b/modules/contrib/devel/src/Plugin/Derivative/DevelLocalTask.php
new file mode 100644
index 0000000..1eb1f63
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Derivative/DevelLocalTask.php
@@ -0,0 +1,101 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Derivative\DevelLocalTask.
+ */
+
+namespace Drupal\devel\Plugin\Derivative;
+
+use Drupal\Component\Plugin\Derivative\DeriverBase;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Plugin\Discovery\ContainerDeriverInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\StringTranslation\TranslationInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides local task definitions for all entity bundles.
+ */
+class DevelLocalTask extends DeriverBase implements ContainerDeriverInterface {
+
+  use StringTranslationTrait;
+
+  /**
+   * The entity manager
+   *
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  protected $entityManager;
+
+  /**
+   * Creates an DevelLocalTask object.
+   *
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entity_manager
+   *   The entity manager.
+   * @param \Drupal\Core\StringTranslation\TranslationInterface $string_translation
+   *   The translation manager.
+   */
+  public function __construct(EntityManagerInterface $entity_manager, TranslationInterface $string_translation) {
+    $this->entityManager = $entity_manager;
+    $this->stringTranslation = $string_translation;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, $base_plugin_id) {
+    return new static(
+      $container->get('entity.manager'),
+      $container->get('string_translation')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDerivativeDefinitions($base_plugin_definition) {
+    $this->derivatives = array();
+
+    foreach ($this->entityManager->getDefinitions() as $entity_type_id => $entity_type) {
+
+      $has_edit_path = $entity_type->hasLinkTemplate('devel-load');
+      $has_canonical_path = $entity_type->hasLinkTemplate('devel-render');
+
+      if ($has_edit_path || $has_canonical_path) {
+
+        $this->derivatives["$entity_type_id.devel_tab"] = array(
+          'route_name' => "entity.$entity_type_id." . ($has_edit_path ? 'devel_load' : 'devel_render'),
+          'title' => $this->t('Devel'),
+          'base_route' => "entity.$entity_type_id." . ($has_canonical_path ? "canonical" : "edit_form"),
+          'weight' => 100,
+        );
+
+        if ($has_canonical_path) {
+          $this->derivatives["$entity_type_id.devel_render_tab"] = array(
+            'route_name' => "entity.$entity_type_id.devel_render",
+            'weight' => 100,
+            'title' => $this->t('Render'),
+            'parent_id' => "devel.entities:$entity_type_id.devel_tab",
+          );
+        }
+
+        if ($has_edit_path) {
+          $this->derivatives["$entity_type_id.devel_load_tab"] = array(
+            'route_name' => "entity.$entity_type_id.devel_load",
+            'weight' => 100,
+            'title' => $this->t('Load'),
+            'parent_id' => "devel.entities:$entity_type_id.devel_tab",
+          );
+        }
+      }
+    }
+
+    foreach ($this->derivatives as &$entry) {
+      $entry += $base_plugin_definition;
+    }
+
+    return $this->derivatives;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Devel/Dumper/ChromePhp.php b/modules/contrib/devel/src/Plugin/Devel/Dumper/ChromePhp.php
new file mode 100644
index 0000000..8450f4e
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Devel/Dumper/ChromePhp.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Devel\Dumper\ChromePhp.
+ */
+
+namespace Drupal\devel\Plugin\Devel\Dumper;
+
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a ChromePhp dumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "chromephp",
+ *   label = @Translation("ChromePhp"),
+ *   description = @Translation("Wrapper for <a href='https://craig.is/writing/chrome-logger'>ChromePhp</a> debugging tool.")
+ * )
+ */
+class ChromePhp extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    \ChromePhp::log($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    $this->dump($input);
+    return $this->t('Dump was redirected to the console.');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return class_exists('ChromePhp', FALSE);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Devel/Dumper/DoctrineDebug.php b/modules/contrib/devel/src/Plugin/Devel/Dumper/DoctrineDebug.php
new file mode 100644
index 0000000..7126a0a
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Devel/Dumper/DoctrineDebug.php
@@ -0,0 +1,79 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Devel\Dumper\DoctrineDebug.
+ */
+
+namespace Drupal\devel\Plugin\Devel\Dumper;
+
+use Doctrine\Common\Util\Debug;
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a DoctrineDebug dumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "default",
+ *   label = @Translation("Default"),
+ *   description = @Translation("Wrapper for <a href='http://www.doctrine-project.org/api/common/2.3/class-Doctrine.Common.Util.Debug.html'>Doctrine</a> debugging tool.")
+ * )
+ */
+class DoctrineDebug extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    if ($name) {
+      echo $name . ' => ';
+    }
+    Debug::dump($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    $name = $name ? $name . ' => ' : '';
+    $variable = Debug::export($input, 6);
+
+    ob_start();
+    print_r($variable);
+    $dump = ob_get_contents();
+    ob_end_clean();
+
+    $dump = '<pre>' . $name . $dump . '</pre>';
+
+    return $this->setSafeMarkup($dump);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function exportAsRenderable($input, $name = NULL) {
+    $output['container'] = [
+      '#type' => 'details',
+      '#title' => $name ? : $this->t('Variable'),
+      '#attached' => [
+        'library' => ['devel/devel']
+      ],
+      '#attributes' => [
+        'class' => ['container-inline', 'devel-dumper', 'devel-selectable'],
+      ],
+      'export' => [
+        '#markup' => $this->export($input),
+      ],
+    ];
+
+    return $output;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return TRUE;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Devel/Dumper/DrupalVariable.php b/modules/contrib/devel/src/Plugin/Devel/Dumper/DrupalVariable.php
new file mode 100644
index 0000000..9200322
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Devel/Dumper/DrupalVariable.php
@@ -0,0 +1,70 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Devel\Dumper\DrupalVariable.
+ */
+
+namespace Drupal\devel\Plugin\Devel\Dumper;
+
+use Drupal\Component\Utility\Variable;
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a DrupalVariable dumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "drupal_variable",
+ *   label = @Translation("Drupal variable."),
+ *   description = @Translation("Wrapper for <a href='https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Component%21Utility%21Variable.php/class/Variable/8'>Drupal Variable</a> class.")
+ * )
+ */
+class DrupalVariable extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    $name = $name ? $name . ' => ' : '';
+    $output = Variable::export($input);
+    echo '<pre>' . $name . print_r($output) . '</pre>';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    $name = $name ? $name . ' => ' : '';
+    $dump = '<pre>' . $name . Variable::export($input) . '</pre>';
+    return $this->setSafeMarkup($dump);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function exportAsRenderable($input, $name = NULL) {
+    $output['container'] = [
+      '#type' => 'details',
+      '#title' => $name ? : $this->t('Variable'),
+      '#attached' => [
+        'library' => ['devel/devel']
+      ],
+      '#attributes' => [
+        'class' => ['container-inline', 'devel-dumper', 'devel-selectable'],
+      ],
+      'export' => [
+        '#markup' => $this->export($input),
+      ],
+    ];
+
+    return $output;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return TRUE;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Devel/Dumper/FirePhp.php b/modules/contrib/devel/src/Plugin/Devel/Dumper/FirePhp.php
new file mode 100644
index 0000000..47ebf48
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Devel/Dumper/FirePhp.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Devel\Dumper\FirePhp.
+ */
+
+namespace Drupal\devel\Plugin\Devel\Dumper;
+
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a FirePhp dumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "firephp",
+ *   label = @Translation("FirePhp"),
+ *   description = @Translation("Wrapper for <a href='http://www.firephp.org'>FirePhp</a> debugging tool.")
+ * )
+ */
+class FirePhp extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    fb($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    $this->dump($input);
+    return $this->t('Dump was redirected to the console.');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return class_exists('FirePHP', FALSE);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Mail/DevelMailLog.php b/modules/contrib/devel/src/Plugin/Mail/DevelMailLog.php
new file mode 100644
index 0000000..b6f3083
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Mail/DevelMailLog.php
@@ -0,0 +1,103 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Mail\DevelMailLog.
+ */
+
+namespace Drupal\devel\Plugin\Mail;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Mail\Plugin\Mail\PhpMail;
+use Drupal\Core\Site\Settings;
+use Exception;
+
+/**
+ * Defines a mail backend that saves emails as temporary files.
+ *
+ * To enable, save a variable in settings.php (or otherwise) whose value
+ * can be as simple as:
+ * @code
+ * $config['system.mail']['interface']['default'] = 'devel_mail_log';
+ * @endcode
+ *
+ * By default the mails are saved in 'temporary://devel-mails'. This setting
+ * can be changed using 'debug_mail_directory' config setting. For example,
+ * @code
+ * $config['devel.settings']['debug_mail_directory'] = 'temporary://my-directory';
+ * @endcode
+ *
+ * The default filename pattern used is '%to-%subject-%datetime.mail.txt'. This
+ * setting can be changed using 'debug_mail_directory' config setting. For example,
+ * @code
+ * $config['devel.settings']['debug_mail_file_format'] = 'devel-mail-%to-%subject-%datetime.mail.txt';
+ * @endcode
+ *
+ * The following placeholders can be used in the filename pattern:
+ *   - %to: the email recipient.
+ *   - %subject: the email subject.
+ *   - %datetime: the current datetime in 'y-m-d_his' format.
+ *
+ * @Mail(
+ *   id = "devel_mail_log",
+ *   label = @Translation("Devel Logging Mailer"),
+ *   description = @Translation("Outputs the message as a file in the temporary directory.")
+ * )
+ */
+class DevelMailLog extends PhpMail {
+
+  public function composeMessage($message) {
+    $mimeheaders = array();
+    $message['headers']['To'] = $message['to'];
+    foreach ($message['headers'] as $name => $value) {
+      $mimeheaders[] = $name . ': ' . Unicode::mimeHeaderEncode($value);
+    }
+
+    $line_endings = Settings::get('mail_line_endings', PHP_EOL);
+    $output = join($line_endings, $mimeheaders) . $line_endings;
+    // 'Subject:' is a mail header and should not be translated.
+    $output .= 'Subject: ' . $message['subject'] . $line_endings;
+    // Blank line to separate headers from body.
+    $output .= $line_endings;
+    $output .= preg_replace('@\r?\n@', $line_endings, $message['body']);
+    return $output;
+  }
+
+  public function getFileName($message) {
+    $output_directory = $this->getOutputDirectory();
+    $this->makeOutputDirectory($output_directory);
+    $output_file_format = \Drupal::config('devel.settings')->get('debug_mail_file_format');
+
+    $tokens = array(
+      '%to' => $message['to'],
+      '%subject' => $message['subject'],
+      '%datetime' => date('y-m-d_his'),
+    );
+    return $output_directory . '/' . $this->dirify(str_replace(array_keys($tokens), array_values($tokens), $output_file_format));
+  }
+
+  private function dirify($string) {
+    return preg_replace('/[^a-zA-Z0-9_\-\.@]/', '_', $string);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function mail(array $message) {
+    $output = $this->composeMessage($message);
+    $output_file = $this->getFileName($message);
+
+    return file_put_contents($output_file, $output);
+  }
+
+  protected function makeOutputDirectory($output_directory) {
+    if (!file_prepare_directory($output_directory, FILE_CREATE_DIRECTORY)) {
+      throw new Exception("Unable to continue sending mail, $output_directory is not writable");
+    }
+  }
+
+  public function getOutputDirectory() {
+    return \Drupal::config('devel.settings')->get('debug_mail_directory');
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Menu/DestinationMenuLink.php b/modules/contrib/devel/src/Plugin/Menu/DestinationMenuLink.php
new file mode 100644
index 0000000..8185067
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Menu/DestinationMenuLink.php
@@ -0,0 +1,37 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Menu\DestinationMenuLink.
+ */
+
+namespace Drupal\devel\Plugin\Menu;
+
+use Drupal\Core\Menu\MenuLinkDefault;
+use Drupal\Core\Url;
+
+/**
+ * Modifies the menu link to add destination.
+ */
+class DestinationMenuLink extends MenuLinkDefault {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getOptions() {
+    $options = parent::getOptions();
+    // Append the current path as destination to the query string.
+    $options['query']['destination'] = Url::fromRoute('<current>')->toString();
+    return $options;
+  }
+
+  /**
+   * {@inheritdoc}
+   *
+   * @todo Make cacheable once https://www.drupal.org/node/2582797 lands.
+   */
+  public function getCacheMaxAge() {
+    return 0;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Plugin/Menu/MenuItemMenuLink.php b/modules/contrib/devel/src/Plugin/Menu/MenuItemMenuLink.php
new file mode 100644
index 0000000..537c1ce
--- /dev/null
+++ b/modules/contrib/devel/src/Plugin/Menu/MenuItemMenuLink.php
@@ -0,0 +1,34 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Menu\MenuItemMenuLink.
+ */
+
+namespace Drupal\devel\Plugin\Menu;
+
+use Drupal\Core\Menu\MenuLinkDefault;
+use Drupal\Core\Url;
+
+/**
+ * Modifies the menu link to add current route path.
+ */
+class MenuItemMenuLink extends MenuLinkDefault {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getOptions() {
+    $options = parent::getOptions();
+    $options['query']['path'] = '/' . Url::fromRoute('<current>')->getInternalPath();
+    return $options;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCacheMaxAge() {
+    return 0;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Routing/RouteSubscriber.php b/modules/contrib/devel/src/Routing/RouteSubscriber.php
new file mode 100644
index 0000000..c3e5ae5
--- /dev/null
+++ b/modules/contrib/devel/src/Routing/RouteSubscriber.php
@@ -0,0 +1,124 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Routing\RouteSubscriber.
+ */
+
+namespace Drupal\devel\Routing;
+
+use Drupal\Core\Entity\EntityTypeInterface;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\Core\Routing\RouteSubscriberBase;
+use Drupal\Core\Routing\RoutingEvents;
+use Symfony\Component\Routing\Route;
+use Symfony\Component\Routing\RouteCollection;
+
+/**
+ * Subscriber for Devel routes.
+ */
+class RouteSubscriber extends RouteSubscriberBase {
+
+  /**
+   * The entity type manager service.
+   *
+   * @var \Drupal\Core\Entity\EntityTypeManagerInterface
+   */
+  protected $entityTypeManager;
+
+  /**
+   * Constructs a new RouteSubscriber object.
+   *
+   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_manager
+   *   The entity type manager.
+   */
+  public function __construct(EntityTypeManagerInterface $entity_manager) {
+    $this->entityTypeManager = $entity_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function alterRoutes(RouteCollection $collection) {
+    foreach ($this->entityTypeManager->getDefinitions() as $entity_type_id => $entity_type) {
+      if ($route = $this->getDevelLoadRoute($entity_type)) {
+        $collection->add("entity.$entity_type_id.devel_load", $route);
+      }
+      if ($route = $this->getDevelRenderRoute($entity_type)) {
+        $collection->add("entity.$entity_type_id.devel_render", $route);
+      }
+    }
+  }
+
+  /**
+   * Gets the devel load route.
+   *
+   * @param \Drupal\Core\Entity\EntityTypeInterface $entity_type
+   *   The entity type.
+   *
+   * @return \Symfony\Component\Routing\Route|null
+   *   The generated route, if available.
+   */
+  protected function getDevelLoadRoute(EntityTypeInterface $entity_type) {
+    if ($devel_load = $entity_type->getLinkTemplate('devel-load')) {
+      $entity_type_id = $entity_type->id();
+      $route = new Route($devel_load);
+      $route
+        ->addDefaults([
+          '_controller' => '\Drupal\devel\Controller\DevelController::entityLoad',
+          '_title' => 'Devel Load',
+        ])
+        ->addRequirements([
+          '_permission' => 'access devel information',
+        ])
+        ->setOption('_admin_route', TRUE)
+        ->setOption('_devel_entity_type_id', $entity_type_id)
+        ->setOption('parameters', [
+          $entity_type_id => ['type' => 'entity:' . $entity_type_id],
+        ]);
+
+      return $route;
+    }
+  }
+
+  /**
+   * Gets the devel render route.
+   *
+   * @param \Drupal\Core\Entity\EntityTypeInterface $entity_type
+   *   The entity type.
+   *
+   * @return \Symfony\Component\Routing\Route|null
+   *   The generated route, if available.
+   */
+  protected function getDevelRenderRoute(EntityTypeInterface $entity_type) {
+    if ($devel_render = $entity_type->getLinkTemplate('devel-render')) {
+      $entity_type_id = $entity_type->id();
+      $route = new Route($devel_render);
+      $route
+        ->addDefaults([
+          '_controller' => '\Drupal\devel\Controller\DevelController::entityRender',
+          '_title' => 'Devel Render',
+        ])
+        ->addRequirements([
+          '_permission' => 'access devel information'
+        ])
+        ->setOption('_admin_route', TRUE)
+        ->setOption('_devel_entity_type_id', $entity_type_id)
+        ->setOption('parameters', [
+          $entity_type_id => ['type' => 'entity:' . $entity_type_id],
+        ]);
+
+      return $route;
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function getSubscribedEvents() {
+    $events = parent::getSubscribedEvents();
+    $events[RoutingEvents::ALTER] = array('onAlterRoutes', 100);
+    return $events;
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelControllerTest.php b/modules/contrib/devel/src/Tests/DevelControllerTest.php
new file mode 100644
index 0000000..889c3a8
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelControllerTest.php
@@ -0,0 +1,114 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelControllerTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests Devel controller.
+ *
+ * @group devel
+ */
+class DevelControllerTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel', 'node', 'entity_test', 'devel_entity_test', 'block');
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    // Create a test entity.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'entity_test', 'name' => $random_label);
+    $this->entity = entity_create('entity_test', $data);
+    $this->entity->save();
+
+    // Create a test entity with only canonical route.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_canonical', 'name' => $random_label);
+    $this->entity_canonical = entity_create('devel_entity_test_canonical', $data);
+    $this->entity_canonical->save();
+
+    // Create a test entity with only edit route.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_edit', 'name' => $random_label);
+    $this->entity_edit = entity_create('devel_entity_test_edit', $data);
+    $this->entity_edit->save();
+
+    // Create a test entity with no routes.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_no_links', 'name' => $random_label);
+    $this->entity_no_links = entity_create('devel_entity_test_no_links', $data);
+    $this->entity_no_links->save();
+
+    $this->drupalPlaceBlock('local_tasks_block');
+
+    $web_user = $this->drupalCreateUser(array(
+      'view test entity',
+      'administer entity_test content',
+      'access devel information',
+    ));
+    $this->drupalLogin($web_user);
+  }
+
+  function testRouteGeneration() {
+    // Test Devel load and render routes for entities with both route
+    // definitions.
+    $this->drupalGet('entity_test/' . $this->entity->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    $this->drupalGet('devel/entity_test/' . $this->entity->id());
+    $this->assertResponse(200);
+    $this->assertText('Load', 'Devel load tab is present');
+    $this->assertText('Render', 'Devel load tab is present');
+    $this->assertLinkByHref('devel/entity_test/' . $this->entity->id() . '/render');
+    $this->drupalGet('devel/entity_test/' . $this->entity->id() . '/render');
+    $this->assertResponse(200);
+
+    // Test Devel load and render routes for entities with only canonical route
+    // definitions.
+    $this->drupalGet('devel_entity_test_canonical/' . $this->entity_canonical->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    //TODO this fail since assertNoLinkByHref search by partial value.
+    //$this->assertNoLinkByHref('devel/devel_entity_test_canonical/' . $this->entity_canonical->id());
+    $this->assertLinkByHref('devel/devel_entity_test_canonical/' . $this->entity_canonical->id() . '/render');
+    $this->drupalGet('devel/devel_entity_test_canonical/' . $this->entity_canonical->id());
+    $this->assertResponse(404);
+    $this->drupalGet('devel/devel_entity_test_canonical/' . $this->entity_canonical->id() . '/render');
+    $this->assertResponse(200);
+
+    // Test Devel load and render routes for entities with only edit route
+    // definitions.
+    $this->drupalGet('devel_entity_test_edit/manage/' . $this->entity_edit->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    $this->assertLinkByHref('devel/devel_entity_test_edit/' . $this->entity_edit->id());
+    $this->assertNoLinkByHref('devel/devel_entity_test_edit/' . $this->entity_edit->id() . '/render');
+    $this->drupalGet('devel/devel_entity_test_edit/' . $this->entity_edit->id());
+    $this->assertResponse(200);
+    $this->drupalGet('devel/devel_entity_test_edit/' . $this->entity_edit->id() . '/render');
+    $this->assertResponse(404);
+
+    // Test Devel load and render routes for entities with no route
+    // definitions.
+    $this->drupalGet('devel_entity_test_no_links/' . $this->entity_edit->id());
+    $this->assertNoText('Devel', 'Devel tab is not present');
+    $this->assertNoLinkByHref('devel/devel_entity_test_no_links/' . $this->entity_no_links->id());
+    $this->assertNoLinkByHref('devel/devel_entity_test_no_links/' . $this->entity_no_links->id() . '/render');
+    $this->drupalGet('devel/devel_entity_test_no_links/' . $this->entity_no_links->id());
+    $this->assertResponse(404);
+    $this->drupalGet('devel/devel_entity_test_no_links/' . $this->entity_no_links->id() . '/render');
+    $this->assertResponse(404);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelDumperTest.php b/modules/contrib/devel/src/Tests/DevelDumperTest.php
new file mode 100644
index 0000000..3ab069e
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelDumperTest.php
@@ -0,0 +1,164 @@
+<?php
+
+/**
+ * @file
+ * Tests for devel module.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests pluggable dumper feature.
+ *
+ * @group devel
+ */
+class DevelDumperTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel', 'devel_dumper_test'];
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $admin_user = $this->drupalCreateUser(['administer site configuration', 'access devel information']);
+    $this->drupalLogin($admin_user);
+  }
+
+  /**
+   * Test dumpers configuration page.
+   */
+  public function testDumpersConfiguration() {
+    $this->drupalGet('admin/config/development/devel');
+
+    // Ensures that the dumper input is present on the config page.
+    $this->assertFieldByName('dumper');
+
+    // Ensures that the 'default' dumper is enabled by default.
+    $this->assertFieldChecked('edit-dumper-default');
+
+    // Ensures that all dumpers declared by devel are present on the config page
+    // and that only the available dumpers are selectable.
+    $dumpers = ['default', 'drupal_variable', 'firephp', 'chromephp'];
+    $available_dumpers = ['default', 'drupal_variable'];
+
+    foreach ($dumpers as $dumper) {
+      $this->assertFieldByXPath('//input[@type="radio" and @name="dumper"]', $dumper, new FormattableMarkup('Radio button for @dumper found.', ['@dumper' => $dumper]));
+      if (in_array($dumper, $available_dumpers)) {
+        $this->assertFieldByXPath('//input[@name="dumper" and not(@disabled="disabled")]', $dumper, new FormattableMarkup('Dumper @dumper is available.', ['@dumper' => $dumper]));
+      }
+      else {
+        $this->assertFieldByXPath('//input[@name="dumper" and @disabled="disabled"]', $dumper, new FormattableMarkup('Dumper @dumper is disabled.', ['@dumper' => $dumper]));
+      }
+    }
+
+    // Ensures that dumper plugins declared by other modules are present on the
+    // config page and that only the available dumpers are selectable.
+    $this->assertFieldByName('dumper', 'available_test_dumper');
+    $this->assertText('Available test dumper.', 'Available dumper label is present');
+    $this->assertText('Drupal dumper for testing purposes (available).', 'Available dumper description is present');
+    $this->assertFieldByXPath('//input[@name="dumper" and not(@disabled="disabled")]', 'available_test_dumper', 'Available dumper input not is disabled.');
+
+    $this->assertFieldByName('dumper', 'not_available_test_dumper');
+    $this->assertText('Not available test dumper.', 'Non available dumper label is present');
+    $this->assertText('Drupal dumper for testing purposes (not available).Not available. You may need to install external dependencies for use this plugin.', 'Non available dumper description is present');
+    $this->assertFieldByXPath('//input[@name="dumper" and @disabled="disabled"]', 'not_available_test_dumper', 'Non available dumper input is disabled.');
+
+    // Ensures that saving of the dumpers configuration works as expected.
+    $edit = [
+      'dumper' => 'drupal_variable',
+    ];
+    $this->drupalPostForm('admin/config/development/devel', $edit, t('Save configuration'));
+    $this->assertText(t('The configuration options have been saved.'));
+
+    $config = \Drupal::config('devel.settings')->get('devel_dumper');
+    $this->assertEqual('drupal_variable', $config, 'The configuration options have been properly saved');
+
+    // Ensure that if the chosen dumper is not available (e.g. the module that
+    // provide it is uninstalled) the 'default' dumper appears selected in the
+    // config page.
+    \Drupal::service('module_installer')->install(['kint']);
+
+    $this->drupalGet('admin/config/development/devel');
+    $this->assertFieldByName('dumper', 'kint');
+
+    $edit = [
+      'dumper' => 'kint',
+    ];
+    $this->drupalPostForm('admin/config/development/devel', $edit, t('Save configuration'));
+    $this->assertText(t('The configuration options have been saved.'));
+
+    $config = \Drupal::config('devel.settings')->get('devel_dumper');
+    $this->assertEqual('kint', $config, 'The configuration options have been properly saved');
+
+    \Drupal::service('module_installer')->uninstall(['kint']);
+
+    $this->drupalGet('admin/config/development/devel');
+    $this->assertNoFieldByName('dumper', 'kint');
+    $this->assertFieldChecked('edit-dumper-default');
+  }
+
+  /**
+   * Test variable is dumped in page.
+   */
+  function testDumpersOutput() {
+    $edit = [
+      'dumper' => 'available_test_dumper',
+    ];
+    $this->drupalPostForm('admin/config/development/devel', $edit, t('Save configuration'));
+    $this->assertText(t('The configuration options have been saved.'));
+
+    $this->drupalGet('devel_dumper_test/dump');
+    $elements = $this->xpath('//body/pre[contains(text(), :message)]', [':message' => 'AvailableTestDumper::dump() Test output']);
+    $this->assertTrue(!empty($elements), 'Dumped message is present.');
+
+    $this->drupalGet('devel_dumper_test/message');
+    $elements = $this->xpath('//div[contains(@class, "messages")]/pre[contains(text(), :message)]', [':message' => 'AvailableTestDumper::export() Test output']);
+    $this->assertTrue(!empty($elements), 'Dumped message is present.');
+
+    $this->drupalGet('devel_dumper_test/export');
+    $elements = $this->xpath('//div[@class="layout-content"]//pre[contains(text(), :message)]', [':message' => 'AvailableTestDumper::export() Test output']);
+    $this->assertTrue(!empty($elements), 'Dumped message is present.');
+
+    $this->drupalGet('devel_dumper_test/export_renderable');
+    $elements = $this->xpath('//div[@class="layout-content"]//pre[contains(text(), :message)]', [':message' => 'AvailableTestDumper::exportAsRenderable() Test output']);
+    $this->assertTrue(!empty($elements), 'Dumped message is present.');
+    // Ensures that plugins can add libraries to the page when the
+    // ::exportAsRenderable() method is used.
+    $this->assertRaw('devel_dumper_test/css/devel_dumper_test.css');
+    $this->assertRaw('devel_dumper_test/js/devel_dumper_test.js');
+
+    $debug_filename = file_directory_temp() . '/drupal_debug.txt';
+
+    $this->drupalGet('devel_dumper_test/debug');
+    $file_content = file_get_contents($debug_filename);
+    $expected = <<<EOF
+<pre>AvailableTestDumper::export() Test output</pre>
+
+EOF;
+    $this->assertEqual($file_content, $expected, 'Dumped message is present.');
+
+    // Ensures that the DevelDumperManager::debug() is not access checked and
+    // that the dump is written in the debug file even if the user has not the
+    // 'access devel information' permission.
+    file_put_contents($debug_filename, '');
+    $this->drupalLogout();
+    $this->drupalGet('devel_dumper_test/debug');
+    $file_content = file_get_contents($debug_filename);
+    $expected = <<<EOF
+<pre>AvailableTestDumper::export() Test output</pre>
+
+EOF;
+    $this->assertEqual($file_content, $expected, 'Dumped message is present.');
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelMailTest.php b/modules/contrib/devel/src/Tests/DevelMailTest.php
new file mode 100644
index 0000000..18192d4
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelMailTest.php
@@ -0,0 +1,53 @@
+<?php
+
+/**
+ * @file
+ * Tests for devel module.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\devel\Plugin\Mail\DevelMailLog;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests sending mails with debug interface.
+ *
+ * @group devel
+ */
+class DevelMailTest extends WebTestBase {
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+  protected $profile = 'testing';
+
+  /**
+   * Test mail logging functionality.
+   */
+  public function testDevelMail() {
+    $message = array();
+    $message['to'] = 'drupal@example.com';
+    $message['subject'] = 'Test mail';
+    $message['headers'] = array(
+      'From' => 'postmaster@example.com',
+      'X-stupid' => 'dumb',
+    );
+    $message['body'] = "I am the body of this message";
+    $d = new DevelMailLog();
+
+    $filename = $d->getFileName($message);
+    $content = $d->composeMessage($message);
+    $expected_filename = $d->getOutputDirectory() . '/drupal@example.com-Test_mail-' . date('y-m-d_his') . '.mail.txt';
+    $this->assertEqual($filename, $expected_filename);
+    $content = str_replace("\r", '', $content);
+    $this->assertEqual($content, 'From: postmaster@example.com
+X-stupid: dumb
+To: drupal@example.com
+Subject: Test mail
+
+I am the body of this message');
+  }
+}
diff --git a/modules/contrib/devel/src/Tests/DevelMenuLinksTest.php b/modules/contrib/devel/src/Tests/DevelMenuLinksTest.php
new file mode 100644
index 0000000..35d5e54
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelMenuLinksTest.php
@@ -0,0 +1,152 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelMenuLinksTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Core\Url;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests devel menu links.
+ *
+ * @group devel
+ */
+class DevelMenuLinksTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel', 'block', 'devel_test'];
+
+  /**
+   * The user for tests.
+   *
+   * @var \Drupal\user\UserInterface
+   */
+  protected $develUser;
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+    // Devel links currently appears only in the devel menu.
+    // Place the devel menu block so we can ensure that these link works
+    // properly.
+    $this->drupalPlaceBlock('system_menu_block:devel');
+    $this->drupalPlaceBlock('page_title_block');
+
+    $this->develUser = $this->drupalCreateUser(['access devel information', 'administer site configuration']);
+    $this->drupalLogin($this->develUser);
+  }
+
+  /**
+   * Tests CSFR protected links.
+   */
+  public function testCsrfProtectedLinks() {
+    // Ensure CSRF link are not accessible directly.
+    $this->drupalGet('devel/run-cron');
+    $this->assertResponse(403);
+    $this->drupalGet('devel/cache/clear');
+    $this->assertResponse(403);
+
+    // Ensure clear cache link works properly.
+    $this->assertLink('Cache clear');
+    $this->clickLink('Cache clear');
+    $this->assertText('Cache cleared.');
+
+    // Ensure run cron link works properly.
+    $this->assertLink('Run cron');
+    $this->clickLink('Run cron');
+    $this->assertText('Cron ran successfully.');
+
+    // Ensure CSRF protected links work properly after change session.
+    $this->drupalLogout();
+    $this->drupalLogin($this->develUser);
+
+    $this->assertLink('Cache clear');
+    $this->clickLink('Cache clear');
+    $this->assertText('Cache cleared.');
+
+    $this->assertLink('Run cron');
+    $this->clickLink('Run cron');
+    $this->assertText('Cron ran successfully.');
+  }
+
+  /**
+   * Tests redirect destination links.
+   */
+  public function testRedirectDestinationLinks() {
+    // By default, in the testing profile, front page is the user canonical URI.
+    // For better testing do not use the default frontpage.
+    $url = Url::fromRoute('devel.simple_page');
+    $destination = Url::fromRoute('devel.simple_page', [], ['absolute' => FALSE]);
+
+    $this->drupalGet($url);
+    $this->assertLink(t('Reinstall Modules'));
+    $this->clickLink(t('Reinstall Modules'));
+    $this->assertUrl('devel/reinstall', ['query' => ['destination' => $destination->toString()]]);
+
+    $this->drupalGet($url);
+    $this->assertLink(t('Rebuild Menu'));
+    $this->clickLink(t('Rebuild Menu'));
+    $this->assertUrl('devel/menu/reset', ['query' => ['destination' => $destination->toString()]]);
+
+    $this->drupalGet($url);
+    $this->assertLink(t('Cache clear'));
+    $this->clickLink(t('Cache clear'));
+    $this->assertText('Cache cleared.');
+    $this->assertUrl($url);
+
+    $this->drupalGet($url);
+    $this->assertLink(t('Run cron'));
+    $this->clickLink(t('Run cron'));
+    $this->assertText(t('Cron ran successfully.'));
+    $this->assertUrl($url);
+  }
+
+  /**
+   * Tests menu item link.
+   */
+  public function testMenuItemLink() {
+    // Ensures that devel menu item works properly.
+    $url = $this->develUser->toUrl();
+    $path = '/' . $url->getInternalPath();
+
+    $this->drupalGet($url);
+    $this->clickLink(t('Menu Item'));
+    $this->assertResponse(200);
+    $this->assertText('Menu item');
+    $this->assertUrl('devel/menu/item', ['query' => ['path' => $path]]);
+
+    // Ensures that devel menu item works properly even when dynamic cache is
+    // enabled.
+    $url = Url::fromRoute('devel.simple_page');
+    $path = '/' . $url->getInternalPath();
+
+    $this->drupalGet($url);
+    $this->clickLink(t('Menu Item'));
+    $this->assertResponse(200);
+    $this->assertText('Menu item');
+    $this->assertUrl('devel/menu/item', ['query' => ['path' => $path]]);
+
+    // Ensures that if no 'path' query string is passed devel menu item does
+    // not return errors.
+    $this->drupalGet('devel/menu/item');
+    $this->assertResponse(200);
+    $this->assertText('Menu item');
+
+    // Ensures that devel menu item is accessible ony to users with the
+    // adequate permissions.
+    $this->drupalLogout();
+    $this->drupalGet('devel/menu/item');
+    $this->assertResponse(403);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelRebuildMenusTest.php b/modules/contrib/devel/src/Tests/DevelRebuildMenusTest.php
new file mode 100644
index 0000000..ad5d51e
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelRebuildMenusTest.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelRebuildMenusTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests routes rebuild.
+ *
+ * @group devel
+ */
+class DevelRebuildMenusTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $web_user = $this->drupalCreateUser(array('administer site configuration'));
+    $this->drupalLogin($web_user);
+  }
+
+  /**
+   * Test routes rebuild.
+   */
+  public function testDevelRebuildMenus() {
+    $this->drupalGet('devel/menu/reset');
+    $this->assertResponse(200);
+    $this->drupalPostForm('devel/menu/reset', array(), t('Rebuild'));
+    $this->assertText(t('The menu router has been rebuilt.'));
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelReinstallTest.php b/modules/contrib/devel/src/Tests/DevelReinstallTest.php
new file mode 100644
index 0000000..69af943
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelReinstallTest.php
@@ -0,0 +1,65 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelReinstallTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests reinstall modules.
+ *
+ * @group devel
+ */
+class DevelReinstallTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+
+  /**
+   * The profile to install as a basis for testing.
+   *
+   * @var string
+   */
+  protected $profile = 'minimal';
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $web_user = $this->drupalCreateUser(array('administer site configuration'));
+    $this->drupalLogin($web_user);
+  }
+
+  /**
+   * Reinstall modules.
+   */
+  public function testDevelReinstallModules() {
+    // Minimal profile enables only dblog, block and node.
+    $modules = array('dblog', 'block');
+
+    // Needed for compare correctly the message.
+    sort($modules);
+
+    $this->drupalGet('devel/reinstall');
+
+    // Prepare field data in an associative array
+    $edit = array();
+    foreach ($modules as $module) {
+      $edit["reinstall[$module]"] = TRUE;
+    }
+
+    $this->drupalPostForm('devel/reinstall', $edit, t('Reinstall'));
+    $this->assertText(t('Uninstalled and installed: @names.', array('@names' => implode(', ', $modules))));
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelStateEditorTest.php b/modules/contrib/devel/src/Tests/DevelStateEditorTest.php
new file mode 100644
index 0000000..c400d17
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelStateEditorTest.php
@@ -0,0 +1,215 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelStateEditorTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests devel state editor.
+ *
+ * @group devel
+ */
+class DevelStateEditorTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel'];
+
+  /**
+   * The state store.
+   *
+   * @var \Drupal\Core\State\StateInterface
+   */
+  protected $state;
+
+  /**
+   * The user for tests.
+   *
+   * @var \Drupal\user\UserInterface
+   */
+  protected $develUser;
+
+  /**
+   * The user for tests.
+   *
+   * @var \Drupal\user\UserInterface
+   */
+  protected $adminUser;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setUp() {
+    parent::setUp();
+
+    $this->state = $this->container->get('state');
+
+    $this->develUser = $this->drupalCreateUser(['access devel information']);
+    $this->adminUser = $this->drupalCreateUser(['access devel information', 'administer site configuration']);
+  }
+
+  /**
+   * Tests state listing.
+   */
+  public function testStateListing() {
+    // Ensure that state listing page is accessible only by users with the
+    // adequate permissions.
+    $this->drupalGet('devel/state');
+    $this->assertResponse(403);
+
+    $this->drupalLogin($this->develUser);
+    $this->drupalGet('devel/state');
+    $this->assertResponse(200);
+    $this->assertText(t('State editor'));
+
+    // Ensure that the state variables table is visible.
+    $table = $this->xpath('//table[contains(@class, "devel-state-list")]');
+    $this->assertTrue($table, 'State list table found.');
+
+    // Ensure that all state variables are listed in the table.
+    $states = \Drupal::keyValue('state')->getAll();
+    $rows = $this->xpath('//table[contains(@class, "devel-state-list")]//tbody//tr');
+    $this->assertEqual(count($rows), count($states), 'All states are listed in the table.');
+
+    // Ensure that the added state variables are listed in the table.
+    $this->state->set('devel.simple', 'Hello!');
+    $this->drupalGet('devel/state');
+    $this->assertFieldByXpath('//table[contains(@class, "devel-state-list")]//tbody//td', 'devel.simple', 'Label found for the added state.');
+
+    $thead_xpath = '//table[contains(@class, "devel-state-list")]/thead/tr/th';
+    $action_xpath = '//table[contains(@class, "devel-state-list")]//ul[@class="dropbutton"]/li/a';
+
+    // Ensure that the operations column and the actions buttons are not
+    // available for user without 'administer site configuration' permission.
+    $elements = $this->xpath($thead_xpath);
+    $this->assertEqual(count($elements), 2, 'Correct number of table header cells found.');
+
+    $expected_items = ['Name', 'Value'];
+    foreach ($elements as $key => $element) {
+      $this->assertIdentical((string) $element[0], $expected_items[$key]);
+    }
+
+    $this->assertFalse($this->xpath($action_xpath), 'Action buttons are not visible.');
+
+    // Ensure that the operations column and the actions buttons are
+    // available for user with 'administer site configuration' permission.
+    $this->drupalLogin($this->adminUser);
+    $this->drupalGet('devel/state');
+
+    $elements = $this->xpath($thead_xpath);
+    $this->assertEqual(count($elements), 3, 'Correct number of table header cells found.');
+
+    $expected_items = ['Name', 'Value', 'Operations'];
+    foreach ($elements as $key => $element) {
+      $this->assertIdentical((string) $element[0], $expected_items[$key]);
+    }
+
+    $this->assertTrue($this->xpath($action_xpath), 'Action buttons are visible.');
+
+    // Test that the edit button works properly.
+    $this->clickLink(t('Edit'));
+    $this->assertResponse(200);
+  }
+
+  /**
+   * Tests state edit.
+   */
+  public function testStateEdit() {
+    // Create some state variables for the test.
+    $this->state->set('devel.simple', 0);
+    $this->state->set('devel.array', ['devel' => 'value']);
+    $this->state->set('devel.object', $this->randomObject());
+
+    // Ensure that state edit form is accessible only by users with the
+    // adequate permissions.
+    $this->drupalLogin($this->develUser);
+    $this->drupalGet('devel/state/edit/devel.simple');
+    $this->assertResponse(403);
+
+    $this->drupalLogin($this->adminUser);
+
+    // Ensure that accessing an un-existent state variable cause a warning
+    // message.
+    $this->drupalGet('devel/state/edit/devel.unknown');
+    $this->assertText(t('State @name does not exist in the system.', ['@name' => 'devel.unknown']));
+
+    // Ensure that state variables that contain simple type can be edited and
+    // saved.
+    $this->drupalGet('devel/state/edit/devel.simple');
+    $this->assertResponse(200);
+    $this->assertText(t('Edit state variable: @name', ['@name' => 'devel.simple']));
+    $this->assertInputNotDisabledById('edit-new-value');
+    $this->assertInputNotDisabledById('edit-submit');
+
+    $edit = ['new_value' => 1];
+    $this->drupalPostForm('devel/state/edit/devel.simple', $edit, t('Save'));
+    $this->assertText(t('Variable @name was successfully edited.', ['@name' => 'devel.simple']));
+    $this->assertEqual(1, $this->state->get('devel.simple'));
+
+    // Ensure that state variables that contain array can be edited and saved
+    // and the new value is properly validated.
+    $this->drupalGet('devel/state/edit/devel.array');
+    $this->assertResponse(200);
+    $this->assertText(t('Edit state variable: @name', ['@name' => 'devel.array']));
+    $this->assertInputNotDisabledById('edit-new-value');
+    $this->assertInputNotDisabledById('edit-submit');
+
+    // Try to save an invalid yaml input.
+    $edit = ['new_value' => 'devel: \'value updated'];
+    $this->drupalPostForm('devel/state/edit/devel.array', $edit, t('Save'));
+    $this->assertText(t('Invalid input:'));
+
+    $edit = ['new_value' => 'devel: \'value updated\''];
+    $this->drupalPostForm('devel/state/edit/devel.array', $edit, t('Save'));
+    $this->assertText(t('Variable @name was successfully edited.', ['@name' => 'devel.array']));
+    $this->assertEqual(['devel' => 'value updated'], $this->state->get('devel.array'));
+
+    // Ensure that state variables that contain objects cannot be edited.
+    $this->drupalGet('devel/state/edit/devel.object');
+    $this->assertResponse(200);
+    $this->assertText(t('Edit state variable: @name', ['@name' => 'devel.object']));
+    $this->assertText(t('Only simple structures are allowed to be edited. State @name contains objects.', ['@name' => 'devel.object']));
+    $this->assertInputDisabledById('edit-new-value');
+    $this->assertInputDisabledById('edit-submit');
+
+    // Ensure that the cancel link works as expected.
+    $this->clickLink(t('Cancel'));
+    $this->assertUrl('devel/state');
+  }
+
+  /**
+   * Helper function for check if an input is disabled.
+   *
+   * @param string $id
+   *   The ID of the input.
+   */
+  protected function assertInputDisabledById($id) {
+    $message = new FormattableMarkup('The input %id is disabled.', ['%id' => $id]);
+    $xpath = '//textarea[@id=:id and @disabled="disabled"]|//input[@id=:id and @disabled="disabled"]|//select[@id=:id and @disabled="disabled"]';
+    $query = $this->buildXPathQuery($xpath, [':id' => $id]);
+    $this->assertFieldByXPath($query, NULL, $message);
+  }
+
+  /**
+   * Helper function for check if an input is not disabled.
+   *
+   * @param string $id
+   *   The ID of the input.
+   */
+  protected function assertInputNotDisabledById($id) {
+    $message = new FormattableMarkup('The input %id is not disabled.', ['%id' => $id]);
+    $xpath = '//textarea[@id=:id and not(@disabled="disabled")]|//input[@id=:id and not(@disabled="disabled")]|//select[@id=:id and not(@disabled="disabled")]';
+    $query = $this->buildXPathQuery($xpath, [':id' => $id]);
+    $this->assertFieldByXPath($query, NULL, $message);
+  }
+
+}
diff --git a/modules/contrib/devel/src/Tests/DevelSwitchUserTest.php b/modules/contrib/devel/src/Tests/DevelSwitchUserTest.php
new file mode 100644
index 0000000..bae67f5
--- /dev/null
+++ b/modules/contrib/devel/src/Tests/DevelSwitchUserTest.php
@@ -0,0 +1,318 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelSwitchUserTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Component\Render\FormattableMarkup;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests switch user.
+ *
+ * @group devel
+ */
+class DevelSwitchUserTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel', 'block'];
+
+  /**
+   * The block used by this test.
+   *
+   * @var \Drupal\block\BlockInterface
+   */
+  protected $block;
+
+  /**
+   * The devel user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $develUser;
+
+  /**
+   * The switch user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $switchUser;
+
+  /**
+   * The web user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $webUser;
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $this->block = $this->drupalPlaceBlock('devel_switch_user', ['id' => 'switch-user']);
+
+    $this->develUser = $this->drupalCreateUser(['access devel information', 'switch users']);
+    $this->switchUser = $this->drupalCreateUser(['switch users']);
+    $this->webUser = $this->drupalCreateUser();
+  }
+
+  /**
+   * Tests switch user.
+   */
+  public function testSwitchUser() {
+    $this->drupalLogin($this->webUser);
+
+    $this->drupalGet('');
+    $this->assertNoText($this->block->label(), 'Block title was not found.');
+
+    // Ensure that a token is required to switch user.
+    $this->drupalGet('/devel/switch/' . $this->webUser->getUsername());
+    $this->assertResponse(403);
+
+    $this->drupalLogin($this->develUser);
+
+    $this->drupalGet('');
+    $this->assertText($this->block->label(), 'Block title was found.');
+
+    // Ensure that if name in not passed the controller returns access denied.
+    $this->drupalGet('/devel/switch');
+    $this->assertResponse(403);
+
+    // Ensure that a token is required to switch user.
+    $this->drupalGet('/devel/switch/' . $this->switchUser->getUsername());
+    $this->assertResponse(403);
+
+    // Switch to another user account.
+    $this->drupalGet('/user/' . $this->switchUser->id());
+    $this->clickLink($this->switchUser->getUsername());
+    $this->assertSessionByUid($this->switchUser->id());
+    $this->assertNoSessionByUid($this->develUser->id());
+
+    // Switch back to initial account.
+    $this->clickLink($this->develUser->getUsername());
+    $this->assertNoSessionByUid($this->switchUser->id());
+    $this->assertSessionByUid($this->develUser->id());
+
+    // Use the search form to switch to another account.
+    $edit = ['userid' => $this->switchUser->getUsername()];
+    $this->drupalPostForm(NULL, $edit, t('Switch'));
+    $this->assertSessionByUid($this->switchUser->id());
+    $this->assertNoSessionByUid($this->develUser->id());
+  }
+
+  /**
+   * Tests the switch user block configuration.
+   */
+  public function testSwitchUserBlockConfiguration() {
+    $anonymous = \Drupal::config('user.settings')->get('anonymous');
+
+    // Create some users for the test.
+    for ($i = 0; $i < 12; $i++) {
+      $this->drupalCreateUser();
+    }
+
+    $this->drupalLogin($this->develUser);
+
+    $this->drupalGet('');
+    $this->assertText($this->block->label(), 'Block title was found.');
+
+    // Ensure that block default configuration is effectively used. The block
+    // default configuration is the following:
+    // - list_size : 12
+    // - include_anon : FALSE
+    // - show_form : TRUE
+    $this->assertSwitchUserSearchForm();
+    $this->assertSwitchUserListCount(12);
+    $this->assertSwitchUserListNoContainsUser($anonymous);
+
+    // Ensure that changing the list_size configuration property the number of
+    // user displayed in the list change.
+    $this->setBlockConfiguration('list_size', 4);
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(4);
+
+    // Ensure that changing the include_anon configuration property the
+    // anonymous user is displayed in the list.
+    $this->setBlockConfiguration('include_anon', TRUE);
+    $this->drupalGet('');
+    $this->assertSwitchUserListContainsUser($anonymous);
+
+    // Ensure that changing the show_form configuration property the
+    // form is not displayed.
+    $this->setBlockConfiguration('show_form', FALSE);
+    $this->drupalGet('');
+    $this->assertSwitchUserNoSearchForm();
+  }
+
+  /**
+   * Test the user list items.
+   */
+  public function testSwitchUserListItems() {
+    $anonymous = \Drupal::config('user.settings')->get('anonymous');
+
+    $this->setBlockConfiguration('list_size', 2);
+
+    // Login as web user so we are sure that this account is prioritized
+    // in the list if not enougth user with 'switch users' permission are
+    // present.
+    $this->drupalLogin($this->webUser);
+
+    $this->drupalLogin($this->develUser);
+    $this->drupalGet('');
+
+    // Ensure that user with 'switch users' permission are prioritized.
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($this->switchUser->getUsername());
+
+    // Ensure that blocked users are not shown in the list.
+    $this->switchUser->set('status', 0)->save();
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($this->webUser->getUsername());
+    $this->assertSwitchUserListNoContainsUser($this->switchUser->getUsername());
+
+    // Ensure that anonymous user are prioritized if include_anon is set to true.
+    $this->setBlockConfiguration('include_anon', TRUE);
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($anonymous);
+
+    // Ensure that the switch user block works properly even if no prioritized
+    // users are found (special handling for user 1).
+    $this->drupalLogout();
+    $this->develUser->delete();
+
+    $this->drupalLogin($this->rootUser);
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->rootUser->getUsername());
+    $this->assertSwitchUserListContainsUser($anonymous);
+
+    // Ensure that the switch user block works properly even if no roles have
+    // the 'switch users' permission associated (special handling for user 1).
+    $roles = user_roles(TRUE, 'switch users');
+    \Drupal::entityTypeManager()->getStorage('user_role')->delete($roles);
+
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->rootUser->getUsername());
+    $this->assertSwitchUserListContainsUser($anonymous);
+  }
+
+  /**
+   * Helper function for verify the number of items shown in the user list.
+   *
+   * @param int $number
+   *   The expected numer of items.
+   */
+  public function assertSwitchUserListCount($number) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a', [':block' => 'block-switch-user']);
+    $this->assert(count($result) == $number, 'The number of users shown in switch user is correct.');
+  }
+
+  /**
+   * Helper function for verify if the user list contains a username.
+   *
+   * @param string $username
+   *   The username to check.
+   */
+  public function assertSwitchUserListContainsUser($username) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a[normalize-space()=:user]', [':block' => 'block-switch-user', ':user' => $username]);
+    $this->assert(count($result) > 0, new FormattableMarkup('User "%user" is included in the switch user list.', ['%user' => $username]));
+  }
+
+  /**
+   * Helper function for verify if the user list not contains a username.
+   *
+   * @param string $username
+   *   The username to check.
+   */
+  public function assertSwitchUserListNoContainsUser($username) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a[normalize-space()=:user]', [':block' => 'block-switch-user', ':user' => $username]);
+    $this->assert(count($result) == 0, new FormattableMarkup('User "%user" is not included in the switch user list.', ['%user' => $username]));
+  }
+
+  /**
+   * Helper function for verify if the search form is shown.
+   */
+  public function assertSwitchUserSearchForm() {
+    $result = $this->xpath('//div[@id=:block]//form[contains(@class, :form)]', [':block' => 'block-switch-user', ':form' => 'devel-switchuser-form']);
+    $this->assert(count($result) > 0, 'The search form is shown.');
+  }
+
+  /**
+   * Helper function for verify if the search form is not shown.
+   */
+  public function assertSwitchUserNoSearchForm() {
+    $result = $this->xpath('//div[@id=:block]//form[contains(@class, :form)]', [':block' => 'block-switch-user', ':form' => 'devel-switchuser-form']);
+    $this->assert(count($result) == 0, 'The search form is not shown.');
+  }
+
+  /**
+   * Protected helper method to set the test block's configuration.
+   */
+  protected function setBlockConfiguration($key, $value) {
+    $block = $this->block->getPlugin();
+    $block->setConfigurationValue($key, $value);
+    $this->block->save();
+  }
+
+  /**
+   * Asserts that there is a session for a given user ID.
+   *
+   * Based off masquarade module.
+   *
+   * @param int $uid
+   *   The user ID for which to find a session record.
+   *
+   * TODO find a cleaner way to do this check.
+   */
+  protected function assertSessionByUid($uid) {
+    $query = \Drupal::database()->select('sessions');
+    $query->fields('sessions', array('uid'));
+    $query->condition('uid', $uid);
+    $result = $query->execute()->fetchAll();
+
+    if (empty($result)) {
+      $this->fail(new FormattableMarkup('No session found for uid @uid', array('@uid' => $uid)));
+    }
+    elseif (count($result) > 1) {
+      // If there is more than one session, then that must be unexpected.
+      $this->fail("Found more than 1 session for uid $uid.");
+    }
+    else {
+      $this->pass("Found session for uid $uid.");
+    }
+  }
+
+  /**
+   * Asserts that no session exists for a given uid.
+   *
+   * Based off masquarade module.
+   *
+   * @param int $uid
+   *   The user ID to assert.
+   *
+   * TODO find a cleaner way to do this check.
+   */
+  protected function assertNoSessionByUid($uid) {
+    $query = \Drupal::database()->select('sessions');
+    $query->fields('sessions', array('uid'));
+    $query->condition('uid', $uid);
+    $result = $query->execute()->fetchAll();
+    $this->assert(empty($result), "No session for uid $uid found.");
+  }
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/css/devel_dumper_test.css b/modules/contrib/devel/tests/modules/devel_dumper_test/css/devel_dumper_test.css
new file mode 100644
index 0000000..e69de29
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.info.yml b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.info.yml
new file mode 100644
index 0000000..52d7233
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.info.yml
@@ -0,0 +1,12 @@
+name: 'Devel dumper test module'
+type: module
+description: 'Test pluggable dumpers.'
+package: Testing
+# version: VERSION
+# core: 8.x
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.libraries.yml b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.libraries.yml
new file mode 100644
index 0000000..8e8c2ad
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.libraries.yml
@@ -0,0 +1,7 @@
+devel_dumper_test:
+  version: 0
+  css:
+    theme:
+      css/devel_dumper_test.css: {}
+  js:
+    js/devel_dumper_test.js: {}
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.routing.yml b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.routing.yml
new file mode 100644
index 0000000..650b337
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/devel_dumper_test.routing.yml
@@ -0,0 +1,39 @@
+devel_dumper_test.dump:
+  path: '/devel_dumper_test/dump'
+  defaults:
+    _controller: '\Drupal\devel_dumper_test\Controller\DumperTestController::dump'
+    _title: 'Devel Dumper Test'
+  requirements:
+    _permission: 'access devel information'
+
+devel_dumper_test.message:
+  path: '/devel_dumper_test/message'
+  defaults:
+    _controller: '\Drupal\devel_dumper_test\Controller\DumperTestController::message'
+    _title: 'Devel Dumper Test'
+  requirements:
+    _permission: 'access devel information'
+
+devel_dumper_test.export:
+  path: '/devel_dumper_test/export'
+  defaults:
+    _controller: '\Drupal\devel_dumper_test\Controller\DumperTestController::export'
+    _title: 'Devel Dumper Test'
+  requirements:
+    _permission: 'access devel information'
+
+devel_dumper_test.export_renderable:
+  path: '/devel_dumper_test/export_renderable'
+  defaults:
+    _controller: '\Drupal\devel_dumper_test\Controller\DumperTestController::exportRenderable'
+    _title: 'Devel Dumper Test'
+  requirements:
+    _permission: 'access devel information'
+
+devel_dumper_test.debug:
+  path: '/devel_dumper_test/debug'
+  defaults:
+    _controller: '\Drupal\devel_dumper_test\Controller\DumperTestController::debug'
+    _title: 'Devel Dumper Test'
+  requirements:
+    _access: 'TRUE'
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/js/devel_dumper_test.js b/modules/contrib/devel/tests/modules/devel_dumper_test/js/devel_dumper_test.js
new file mode 100644
index 0000000..e69de29
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/src/Controller/DumperTestController.php b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Controller/DumperTestController.php
new file mode 100644
index 0000000..2a78e6e
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Controller/DumperTestController.php
@@ -0,0 +1,89 @@
+<?php
+
+namespace Drupal\devel_dumper_test\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\devel\DevelDumperManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class DumperTestController
+ */
+class DumperTestController  extends ControllerBase {
+
+  /**
+   * The dumper manager.
+   *
+   * @var \Drupal\devel\DevelDumperManagerInterface
+   */
+  protected $dumper;
+
+  /**
+   * Constructs a new DumperTestController object.
+   *
+   * @param \Drupal\devel\DevelDumperManagerInterface $devel_dumper_manager
+   *   The dumper manager.
+   */
+  public function __construct(DevelDumperManagerInterface $devel_dumper_manager) {
+    $this->dumper = $devel_dumper_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('devel.dumper')
+    );
+  }
+
+  /**
+   * @return array
+   */
+  public function dump() {
+    $this->dumper->dump('Test output');
+
+    return [
+      '#markup' => 'test',
+    ];
+  }
+
+  /**
+   * @return array
+   */
+  public function message() {
+    $this->dumper->message('Test output');
+
+    return [
+      '#markup' => 'test',
+    ];
+  }
+
+  /**
+   * @return array
+   */
+  public function debug() {
+    $this->dumper->debug('Test output');
+
+    return [
+      '#markup' => 'test',
+    ];
+  }
+
+  /**
+   * @return array
+   */
+  public function export() {
+    return [
+      '#markup' => $this->dumper->export('Test output'),
+    ];
+  }
+
+  /**
+   * @return array
+   */
+  public function exportRenderable() {
+    return $this->dumper->exportAsRenderable('Test output');
+  }
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/AvailableTestDumper.php b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/AvailableTestDumper.php
new file mode 100644
index 0000000..4425326
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/AvailableTestDumper.php
@@ -0,0 +1,65 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_dumper_test\Plugin\Devel\Dumper\AvailableTestDumper.
+ */
+
+namespace Drupal\devel_dumper_test\Plugin\Devel\Dumper;
+
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a AvailableTestDumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "available_test_dumper",
+ *   label = @Translation("Available test dumper."),
+ *   description = @Translation("Drupal dumper for testing purposes (available).")
+ * )
+ */
+class AvailableTestDumper extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    // Add a predetermined string to $input to check if this dumper has been
+    // selected successfully.
+    $input = '<pre>' . 'AvailableTestDumper::dump() ' . $input . '</pre>';
+    echo $input;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    // Add a predetermined string to $input to check if this dumper has been
+    // selected successfully.
+    $input = '<pre>' . 'AvailableTestDumper::export() ' . $input . '</pre>';
+    return $this->setSafeMarkup($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function exportAsRenderable($input, $name = NULL) {
+    // Add a predetermined string to $input to check if this dumper has been
+    // selected successfully.
+    $input = '<pre>' . 'AvailableTestDumper::exportAsRenderable() ' . $input . '</pre>';
+
+    return [
+      '#attached' => [
+        'library' => ['devel_dumper_test/devel_dumper_test']
+      ],
+      '#markup' => $this->setSafeMarkup($input),
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return TRUE;
+  }
+}
diff --git a/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/NotAvailableTestDumper.php b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/NotAvailableTestDumper.php
new file mode 100644
index 0000000..ce906a4
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_dumper_test/src/Plugin/Devel/Dumper/NotAvailableTestDumper.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_dumper_test\Plugin\Devel\Dumper\NotAvailableTestDumper.
+ */
+
+namespace Drupal\devel_dumper_test\Plugin\Devel\Dumper;
+
+use Drupal\devel\DevelDumperBase;
+
+/**
+ * Provides a NotAvailableTestDumper plugin.
+ *
+ * @DevelDumper(
+ *   id = "not_available_test_dumper",
+ *   label = @Translation("Not available test dumper."),
+ *   description = @Translation("Drupal dumper for testing purposes (not available).")
+ * )
+ */
+class NotAvailableTestDumper extends DevelDumperBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump($input, $name = NULL) {
+    $input = '<pre>' . $input . '</pre>';
+    echo $input;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function export($input, $name = NULL) {
+    $input = '<pre>' . $input . '</pre>';
+    return $this->setSafeMarkup($input);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function checkRequirements() {
+    return FALSE;
+  }
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml
new file mode 100644
index 0000000..1facd09
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml
@@ -0,0 +1,16 @@
+name: 'Devel entity test module'
+type: module
+description: 'Provides entity types for Devel tests.'
+package: Testing
+# version: VERSION
+# core: 8.x
+dependencies:
+  - field
+  - text
+  - entity_test
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml
new file mode 100644
index 0000000..052baa9
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml
@@ -0,0 +1,2 @@
+devel_entity_test.local_tasks:
+  deriver: 'Drupal\devel_entity_test\Plugin\Derivative\DevelEntityTestLocalTasks'
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.module b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.module
new file mode 100644
index 0000000..14cfee1
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/devel_entity_test.module
@@ -0,0 +1,29 @@
+<?php
+
+/**
+ * @file
+ * Test module for the entity API providing several entity types for testing.
+ */
+
+/**
+ * Implements hook_entity_view_mode_info_alter().
+ */
+function devel_entity_test_entity_view_mode_info_alter(&$view_modes) {
+  $entity_info = \Drupal::entityManager()->getDefinitions();
+  foreach ($entity_info as $entity_type => $info) {
+    if ($entity_info[$entity_type]->getProvider() == 'devel_entity_test_canonical' && !isset($view_modes[$entity_type])) {
+      $view_modes[$entity_type] = array(
+        'full' => array(
+          'label' => t('Full object'),
+          'status' => TRUE,
+          'cache' => TRUE,
+        ),
+        'teaser' => array(
+          'label' => t('Teaser'),
+          'status' => TRUE,
+          'cache' => TRUE,
+        ),
+      );
+    }
+  }
+}
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php
new file mode 100644
index 0000000..0747e11
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestCanonical.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_canonical",
+ *   label = @Translation("Devel test entity with canonical link"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_canonical",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   links = {
+ *     "canonical" = "/devel_entity_test_canonical/{devel_entity_test_canonical}",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestCanonical extends EntityTest {
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php
new file mode 100644
index 0000000..2f43069
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestEdit.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_edit",
+ *   label = @Translation("Devel test entity with edit form link"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_edit",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   links = {
+ *     "edit-form" = "/devel_entity_test_edit/manage/{devel_entity_test_edit}",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestEdit extends EntityTest {
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php
new file mode 100644
index 0000000..011ac53
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestNoLinks.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_no_links",
+ *   label = @Translation("Devel test entity with no links"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_no_links",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestNoLinks extends EntityTest {
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php b/modules/contrib/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php
new file mode 100644
index 0000000..b80ab6d
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php
@@ -0,0 +1,36 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Plugin\Derivative\DevelEntityTestLocalTasks.
+ */
+
+namespace Drupal\devel_entity_test\Plugin\Derivative;
+
+use Drupal\Component\Plugin\Derivative\DeriverBase;
+
+/**
+ * Defines the local tasks for all the entity_test entities.
+ */
+class DevelEntityTestLocalTasks extends DeriverBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDerivativeDefinitions($base_plugin_definition) {
+    $this->derivatives = array();
+
+    $this->derivatives['devel_entity_test_canonical.canonical'] = array();
+    $this->derivatives['devel_entity_test_canonical.canonical']['base_route'] = "entity.devel_entity_test_canonical.canonical";
+    $this->derivatives['devel_entity_test_canonical.canonical']['route_name'] = "entity.devel_entity_test_canonical.canonical";
+    $this->derivatives['devel_entity_test_canonical.canonical']['title'] = 'View';
+
+    $this->derivatives['devel_entity_test_edit.edit'] = array();
+    $this->derivatives['devel_entity_test_edit.edit']['base_route'] = "entity.devel_entity_test_edit.edit_form";
+    $this->derivatives['devel_entity_test_edit.edit']['route_name'] = "entity.devel_entity_test_edit.edit_form";
+    $this->derivatives['devel_entity_test_edit.edit']['title'] = 'Edit';
+
+    return parent::getDerivativeDefinitions($base_plugin_definition);
+  }
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_test/devel_test.info.yml b/modules/contrib/devel/tests/modules/devel_test/devel_test.info.yml
new file mode 100644
index 0000000..fabebb1
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_test/devel_test.info.yml
@@ -0,0 +1,12 @@
+name: 'Devel test module'
+type: module
+description: 'Support module for Devel testing.'
+package: Testing
+# version: VERSION
+# core: 8.x
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/tests/modules/devel_test/devel_test.module b/modules/contrib/devel/tests/modules/devel_test/devel_test.module
new file mode 100644
index 0000000..b756c48
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_test/devel_test.module
@@ -0,0 +1,16 @@
+<?php
+
+/**
+ * @file
+ * Support module for Devel testing.
+ */
+
+/**
+ * Implements hook_file_download().
+ */
+function devel_test_file_download($uri) {
+  $default_uri = \Drupal::state()->get('devel.test_file_download') ? : FALSE;
+  if ($default_uri === $uri) {
+    return array('X-Owned-By' => 'devel_test');
+  }
+}
diff --git a/modules/contrib/devel/tests/modules/devel_test/devel_test.routing.yml b/modules/contrib/devel/tests/modules/devel_test/devel_test.routing.yml
new file mode 100644
index 0000000..20ca3f3
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_test/devel_test.routing.yml
@@ -0,0 +1,32 @@
+devel.simple_page:
+  path: '/devel/simple-page'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelTestController::simplePage'
+    _title: 'Simple Page'
+  requirements:
+    _permission: 'access devel information'
+
+devel.silent_global:
+  path: '/devel-silent/global-shoutdown'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::globalShoutdown'
+    _title: 'Devel shoutdown'
+  requirements:
+    _permission: 'access devel information'
+
+devel.silent_route_parameter:
+  path: '/devel-silent/route-requirement'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::develSilentRouteRequirement'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'access devel information'
+    _devel_silent: 'TRUE'
+
+devel.silent_json:
+  path: '/devel-silent/json'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::jsonResponse'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'access devel information'
diff --git a/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php b/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php
new file mode 100644
index 0000000..6c97288
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php
@@ -0,0 +1,56 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_test\Controller\DevelSilentTestController.
+ */
+
+namespace Drupal\devel_test\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Symfony\Component\HttpFoundation\JsonResponse;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelSilentTestController extends ControllerBase {
+
+  /**
+   * Tests that devel is disabled if $GLOBALS['devel_shutdown'] is set.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function globalShoutdown() {
+    $GLOBALS['devel_shutdown'] = FALSE;
+
+    return [
+      '#markup' => $this->t('$GLOBALS[\'devel_shutdown\'] = FALSE forces devel to be inactive.'),
+    ];
+  }
+
+  /**
+   * Tests that devel is disabled if response come from routes that are
+   * declared with '_devel_silent' requirement.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function develSilentRouteRequirement() {
+    return [
+      '#markup' => $this->t('"_devel_silent" route requirement forces devel to be inactive.'),
+    ];
+  }
+
+  /**
+   * Tests that devel is disabled if is reyurned a JsonResponse response.
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   *   A json response.
+   */
+  public function jsonResponse() {
+    $data = ['data' => 'Devel is active only on HtmlResponse.'];
+    return new JsonResponse($data);
+  }
+
+}
diff --git a/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelTestController.php b/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelTestController.php
new file mode 100644
index 0000000..47b55ed
--- /dev/null
+++ b/modules/contrib/devel/tests/modules/devel_test/src/Controller/DevelTestController.php
@@ -0,0 +1,29 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_test\Controller\DevelTestController.
+ */
+
+namespace Drupal\devel_test\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelTestController extends ControllerBase {
+
+  /**
+   * Returns a simple page output.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function simplePage() {
+    return [
+      '#markup' => $this->t('Simple page'),
+    ];
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/README.md b/modules/contrib/devel/webprofiler/README.md
new file mode 100644
index 0000000..671f2c0
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/README.md
@@ -0,0 +1,28 @@
+!! README.md is a work in progress !!
+
+#Dependencies:
+
+- d3.js: Webprofiler module requires D3 library to proper render data.
+  Download https://github.com/mbostock/d3 into /libraries/d3/d3.min.js
+  
+- highlight.js: Webprofiler module requires highlight library to syntax highlight collected queries.
+  Download http://highlightjs.org into /libraries/highlight
+
+#IDE link:
+
+Every class name discovered while profiling (controller class, event class) are linked to an url for directly open in
+an IDE, you can configure the url of those link based on the IDE you are using:
+
+- Sublime text (2 and 3): see https://github.com/dhoulb/subl for Mac OS X
+- Textmate: should be supported by default, use txmt://open?url=file://@file&line=@line as link
+- PhpStorm 8+: use phpstorm://open?file=@file&line=@line as link
+
+#Timeline:
+
+Now it is possible to also collect the time needed to instantiate every single service used in a request, to make it 
+work you need to add these two lines to settings.php (or, event better, to settings.local.php):
+
+```
+$class_loader->addPsr4('Drupal\\webprofiler\\', [ __DIR__ . '/../../modules/contrib/devel/webprofiler/src']);
+$settings['container_base_class'] = '\Drupal\webprofiler\DependencyInjection\TraceableContainer';
+```
diff --git a/modules/contrib/devel/webprofiler/composer.json b/modules/contrib/devel/webprofiler/composer.json
new file mode 100644
index 0000000..b2af8ee
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/composer.json
@@ -0,0 +1,9 @@
+{
+  "name": "drupal/webprofiler",
+  "description": "Drupal Web Profiler.",
+  "type": "drupal-module",
+  "license": "GPL-2.0+",
+  "require": {
+    "symfony/stopwatch": "2.4.*"
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/config/install/webprofiler.config.yml b/modules/contrib/devel/webprofiler/config/install/webprofiler.config.yml
new file mode 100644
index 0000000..5e81274
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/config/install/webprofiler.config.yml
@@ -0,0 +1,28 @@
+purge_on_cache_clear: true
+storage: profiler.database_storage
+exclude: "/contextual/*\r\n/toolbar/*\r\n/edit/*\r\n*.js\r\n*.css"
+ide_link: "txmt://open?url=file://@file&line=@line"
+ide_link_remote: ""
+ide_link_local: ""
+active_toolbar_items:
+  devel: devel
+  assets: assets
+  blocks: blocks
+  cache: cache
+  database: database
+  drupal_extension: drupal_extension
+  forms: forms
+  performance_timing: performance_timing
+  php_config: php_config
+  request: request
+  time: time
+  user: user
+  views: views
+  config: '0'
+  events: '0'
+  http: '0'
+  routing: '0'
+  services: '0'
+  state: '0'
+query_sort: source
+query_highlight: 5
diff --git a/modules/contrib/devel/webprofiler/config/schema/webprofiler.schema.yml b/modules/contrib/devel/webprofiler/config/schema/webprofiler.schema.yml
new file mode 100644
index 0000000..1adc2f1
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/config/schema/webprofiler.schema.yml
@@ -0,0 +1,35 @@
+# Schema for the configuration files of the Webprofiler module.
+webprofiler.config:
+  type: config_object
+  label: 'Webprofiler configuration'
+  mapping:
+    purge_on_cache_clear:
+      type: boolean
+      label: 'Purge profiles on cache clear'
+    storage:
+      type: string
+      label: 'Storage implementation'
+    exclude:
+      type: string
+      label: 'Paths to exclude'
+    active_toolbar_items:
+      type: sequence
+      label: 'Active toolbar items'
+      sequence:
+        - type: string
+          label: 'Toolbar item'
+    ide_link:
+      type: string
+      label: 'IDE link'
+    ide_link_remote:
+      type: string
+      label: 'IDE link remote path'
+    ide_link_local:
+      type: string
+      label: 'IDE link local path'
+    query_sort:
+      type: string
+      label: 'Sort query log'
+    query_highlight:
+      type: integer
+      label: 'Slow query highlighting'
diff --git a/modules/contrib/devel/webprofiler/config/translations/console.en.yml b/modules/contrib/devel/webprofiler/config/translations/console.en.yml
new file mode 100644
index 0000000..2f4bfa9
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/config/translations/console.en.yml
@@ -0,0 +1,54 @@
+commands:
+  webprofiler:
+    export:
+      description: Exports Webprofiler profile/s to file.
+      arguments:
+        id: Profile id.
+      options:
+        directory: Destination directory to store exported file/s.
+      messages:
+        success: Succesfully exported to %s
+        exported_count: <info>Exported %s profiles</info>
+        error_writing: Error writing file %s
+        error_no_profile: No profile with id %s
+      progress:
+          exporting: Exporting profiles...
+          archive: Create archive...
+          delete_tmp: Delete temp files...
+          done: Done.
+    list:
+      description: Lists Webprofiler profiles.
+      options:
+        ip: Filter by IP.
+        url: Filter by URL.
+        method: Filter by HTTP method.
+        limit: Limit printed profiles.
+      rows:
+        time: D, m/d/Y - H:i:s
+      header:
+       token: Token
+       ip: IP
+       method: Method
+       url: URL
+       time: Time
+    benchmark:
+      description: Benchmark an url.
+      arguments:
+       url: Url to benchmark.
+      options:
+        runs: Number of runs.
+        file: Save results as file.
+        cache-rebuild: Rebuild cache before start benchmark.
+      messages:
+        not_git: Not in a git repository.
+        error_login: Impossibile to login in the user.
+      progress:
+        cache_rebuild: Rebuilding cache...
+        login: Login user...
+        get: Http request...
+        compute_avg: Compute average...
+        compute_median: Compute median...
+        compute_95percentile: Compute 95 percentile...
+        git_hash: Compute GIT hash...
+        yaml: Generate output...
+        done: Done.
diff --git a/modules/contrib/devel/webprofiler/config/translations/console.es.yml b/modules/contrib/devel/webprofiler/config/translations/console.es.yml
new file mode 100644
index 0000000..71f66ef
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/config/translations/console.es.yml
@@ -0,0 +1,54 @@
+commands:
+  webprofiler:
+    export:
+      description: Exportar Webprofiler perfil(es) a un archivo.
+      arguments:
+        id: Profile id.
+      options:
+        directory: Directorio de destiono para almacenar archivo(s) exportados.
+      messages:
+        success: Satisfactoriamente exportado en %s
+        exported_count: <info>Exportados %s perfiles</info>
+        error_writing: Error escribiendo el archivo %s
+        error_no_profile: No fue encontrado un perfil con id %s
+      progress:
+          exporting: Exportando perfiles...
+          archive: Creando archivos...
+          delete_tmp: Borrando archivos temporales...
+          done: Terminado.
+    list:
+      description: Listar perfiles Webprofiler.
+      options:
+        ip: Filtrar por IP.
+        url: Filtrar por URL.
+        method: Filtrar por método HTTP.
+        limit: Limitar perfiles a mostrar.
+      rows:
+        time: D, d/m/Y - H:i:s
+      header:
+       token: Token
+       ip: IP
+       method: Método
+       url: URL
+       time: Fecha
+    benchmark:
+      description: Benchmark una URL.
+      arguments:
+       url: Url para efectuar un benchmark.
+      options:
+        runs: Número de ejecuciones.
+        file: Guardar los resultados en un archivo.
+        cache-rebuild: Reconstruir cache antes de iniciar el benchmark.
+      messages:
+        not_git: No en un repositorio git.
+        error_login: Error ingresando al sistema.
+      progress:
+        cache_rebuild: Reconstruyendo cache...
+        login: Ingresando al sistema...
+        get: Solicitud Http...
+        compute_avg: Calculando promedio...
+        compute_median: Calculando media...
+        compute_95percentile: Calculando percentile 95...
+        git_hash: Calculando GIT hash...
+        yaml: Generando salida...
+        done: Terminado.
diff --git a/modules/contrib/devel/webprofiler/css/app/dashboard.css b/modules/contrib/devel/webprofiler/css/app/dashboard.css
new file mode 100644
index 0000000..dfa517a
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/css/app/dashboard.css
@@ -0,0 +1,582 @@
+/* base themes */
+#webrofiler {
+  overflow: hidden;
+  font-size: 1em;
+  line-height: 1.2;
+  color: rgba(0, 0, 0, 0.7);
+  background-color: #ffffff; }
+  #webrofiler * {
+    box-sizing: border-box; }
+
+#webprofiler {
+  /*
+  
+  overview example
+  
+  <ul class="overview__list">
+    <li>
+      <a class="overview__link">
+        <img class="overview__icon" src="data:">
+        <span class="overview__title">
+        <span class="overview__subtitle">
+  
+  
+  */
+  /*
+  
+  general element template
+  
+  will be implemented in the next dashboard relase
+  
+  this HTML will contain the preview of any single card present inside the dashboard
+  
+  <a class="ui--[red||pink||purple||deepPurple||indigo||blue||lightBlue||cyan||teal||green||lightGreen||lime||yellow||amber||orange||deepOrange||brown||gray||blueGray] app l-card">
+  
+    <div class="app__bar">
+      <h3 class="app__title">
+      <img class="app__icon" src="data:">
+  
+    <div class="app__container">
+      <div class="app__main-data"> text
+      <div class="app__secondary-data"> text
+  
+  */ }
+  #webprofiler .tabs:after, #webprofiler .tabs__tabs:after, #webprofiler .tabs__panels:after, #webprofiler .tabs__panel:after, #webprofiler .resume:after, #webprofiler .collectors:after, #webprofiler .panel:after, #webprofiler .panel__toolbar:after, #webprofiler .panel__container:after, #webprofiler .panel__expand-header:after, #webprofiler .panel__expand-content:after, #webprofiler .app__bar:after, #webprofiler .app__container:after, #webprofiler .modal__bar:after, #webprofiler .modal__content:after {
+    content: ' ';
+    display: block;
+    clear: both; }
+  #webprofiler .panel__container, #webprofiler .ui--red, #webprofiler .ui--pink, #webprofiler .ui--purple, #webprofiler .ui--deepPurple, #webprofiler .ui--indigo, #webprofiler .ui--blue, #webprofiler .ui--lightBlue, #webprofiler .ui--cyan, #webprofiler .ui--teal, #webprofiler .ui--green, #webprofiler .ui--lightGreen, #webprofiler .ui--lime, #webprofiler .ui--yellow, #webprofiler .ui--amber, #webprofiler .ui--orange, #webprofiler .ui--deepOrange, #webprofiler .ui--brown, #webprofiler .ui--gray, #webprofiler .ui--blueGray, #webprofiler .modal__container {
+    box-shadow: 0 2px 4px -2px #000000;
+    margin-bottom: 40px;
+    border-bottom-right-radius: 2px;
+    border-bottom-left-radius: 2px;
+    overflow: hidden; }
+  #webprofiler .ui--red .app__title, #webprofiler .ui--pink .app__title, #webprofiler .ui--purple .app__title, #webprofiler .ui--deepPurple .app__title, #webprofiler .ui--blue .app__title, #webprofiler .ui--lightBlue .app__title, #webprofiler .ui--cyan .app__title, #webprofiler .ui--green .app__title, #webprofiler .ui--lightGreen .app__title, #webprofiler .ui--lime .app__title, #webprofiler .ui--yellow .app__title, #webprofiler .ui--amber .app__title, #webprofiler .ui--orange .app__title, #webprofiler .ui--deepOrange .app__title, #webprofiler .ui--brown .app__title {
+    color: white; }
+  #webprofiler .ui--indigo .app__title, #webprofiler .ui--teal .app__title, #webprofiler .ui--gray .app__title, #webprofiler .ui--blueGray .app__title, #webprofiler .modal__title {
+    color: rgba(0, 0, 0, 0.87); }
+  #webprofiler .ui--red .app__main-data, #webprofiler .ui--pink .app__main-data, #webprofiler .ui--purple .app__main-data, #webprofiler .ui--deepPurple .app__main-data, #webprofiler .ui--indigo .app__main-data, #webprofiler .ui--blue .app__main-data, #webprofiler .ui--lightBlue .app__main-data, #webprofiler .ui--cyan .app__main-data, #webprofiler .ui--teal .app__main-data, #webprofiler .ui--green .app__main-data, #webprofiler .ui--lightGreen .app__main-data, #webprofiler .ui--lime .app__main-data, #webprofiler .ui--yellow .app__main-data, #webprofiler .ui--amber .app__main-data, #webprofiler .ui--orange .app__main-data, #webprofiler .ui--deepOrange .app__main-data, #webprofiler .ui--brown .app__main-data, #webprofiler .ui--gray .app__main-data, #webprofiler .ui--blueGray .app__main-data, #webprofiler .modal__content {
+    color: rgba(0, 0, 0, 0.7); }
+  #webprofiler .ui--red .app__secondary-data, #webprofiler .ui--pink .app__secondary-data, #webprofiler .ui--purple .app__secondary-data, #webprofiler .ui--deepPurple .app__secondary-data, #webprofiler .ui--indigo .app__secondary-data, #webprofiler .ui--blue .app__secondary-data, #webprofiler .ui--lightBlue .app__secondary-data, #webprofiler .ui--cyan .app__secondary-data, #webprofiler .ui--teal .app__secondary-data, #webprofiler .ui--green .app__secondary-data, #webprofiler .ui--lightGreen .app__secondary-data, #webprofiler .ui--lime .app__secondary-data, #webprofiler .ui--yellow .app__secondary-data, #webprofiler .ui--amber .app__secondary-data, #webprofiler .ui--orange .app__secondary-data, #webprofiler .ui--deepOrange .app__secondary-data, #webprofiler .ui--brown .app__secondary-data, #webprofiler .ui--gray .app__secondary-data, #webprofiler .ui--blueGray .app__secondary-data {
+    color: rgba(0, 0, 0, 0.3); }
+  #webprofiler a {
+    color: #2979ff; }
+    #webprofiler a:hover {
+      color: #2962ff;
+      text-decoration: none; }
+  #webprofiler .list--unstyled {
+    margin: 0;
+    list-style-type: none;
+    padding: 0; }
+    #webprofiler .list--unstyled > li {
+      display: block;
+      padding: 0 8px; }
+  #webprofiler .list--inline {
+    margin: 0;
+    list-style-type: none;
+    padding: 0; }
+  #webprofiler .list--inline > li {
+      display: inline-block;
+      padding: 8px; }
+  #webprofiler .list--level-0 li {
+    padding: 0 0 0 0; }
+  #webprofiler .list--level-1 li {
+    padding: 0 0 0 8px; }
+  #webprofiler .list--level-3 li {
+    padding: 0 0 0 16px; }
+  #webprofiler pre {
+    padding: 16px; }
+  #webprofiler pre, #webprofiler code {
+    white-space: normal;
+    word-break: break-all;
+    word-break: break-word;
+    font-size: 14px;
+    background-color: #f5f5f5; }
+  #webprofiler .list-item--bold {
+      font-weight: bold;
+  }
+  #webprofiler code.code--json {
+    white-space: pre-wrap; }
+  #webprofiler thead {
+    white-space: nowrap; }
+    #webprofiler thead th {
+      background-color: transparent; }
+  #webprofiler th {
+    font-size: 12px;
+    color: rgba(0, 0, 0, 0.54);
+    border: none; }
+  #webprofiler td {
+    word-break: break-all;
+    font-size: 13px;
+    color: rgba(0, 0, 0, 0.87); }
+  #webprofiler tr {
+    border-bottom: 1px solid rgba(0, 0, 0, 0.18); }
+    #webprofiler tr:hover {
+      background-color: #eeeeee; }
+  #webprofiler td, #webprofiler th {
+    padding: 16px 24px;
+    min-height: 46px;
+    text-transform: none;
+    vertical-align: top; }
+  #webprofiler .table--compact {
+    table-layout: fixed; }
+    #webprofiler .table--compact td, #webprofiler .table--compact th {
+      word-spacing: 99em; }
+  #webprofiler .table--fixed {
+    table-layout: fixed; }
+  #webprofiler .table--duo th:first-child,
+  #webprofiler .table--duo td:first-child {
+    width: 35%; }
+  #webprofiler .table--trio th:first-child,
+  #webprofiler .table--trio td:first-child {
+    width: 80%; }
+  #webprofiler .table--trio th:nth-child(2),
+  #webprofiler .table--trio td:nth-child(2),
+  #webprofiler .table--trio th:nth-child(3),
+  #webprofiler .table--trio td:nth-child(3) {
+    width: 10%; }
+  #webprofiler [class*="button"] {
+    display: block;
+    color: #2979ff;
+    border-bottom-right-radius: 2px;
+    border-bottom-left-radius: 2px;
+    border: none;
+    text-transform: uppercase;
+    font-size: 16px;
+    text-align: center;
+    padding: 16px;
+    margin: 8px;
+    cursor: pointer;
+    min-width: 42px; }
+  #webprofiler .button--flat {
+    background-color: transparent; }
+    #webprofiler .button--flat:hover {
+      background-color: #eeeeee; }
+    #webprofiler .button--flat:active, #webprofiler .button--flat:focus {
+      background-color: #bdbdbd; }
+  #webprofiler .tabs {
+    position: relative;
+    margin: -16px 0 16px 0; }
+    #webprofiler .tabs a {
+      display: inline; }
+    #webprofiler .tabs__radio {
+      display: none; }
+    #webprofiler .tabs__tabs {
+      margin: 0 -16px 16px -16px;
+      text-transform: uppercase;
+      height: 48px;
+      background-color: #f5f5f5; }
+      #webprofiler .tabs__tabs > li {
+        padding: 0; }
+    #webprofiler .tabs__label {
+      border-bottom: 5px solid transparent;
+      text-align: center;
+      line-height: 48px;
+      min-width: 160px;
+      display: inline-block;
+      margin: -5px 0 0 0; }
+    #webprofiler .tabs__panel {
+      display: none;
+      width: 100%; }
+    #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__panels .tabs__panel:nth-child(1) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__panels .tabs__panel:nth-child(2) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__panels .tabs__panel:nth-child(3) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__tabs li:nth-child(1) .tabs__label {
+      border-bottom-color: #2962ff; }
+    #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__tabs li:nth-child(2) .tabs__label {
+      border-bottom-color: #2962ff; }
+    #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__tabs li:nth-child(3) .tabs__label {
+      border-bottom-color: #2962ff; }
+  #webprofiler .overview {
+    display: table-cell;
+    width: 20%;
+    vertical-align: top;
+    font-size: 1.2em;
+    line-height: 2em;
+    background: #ffffff; }
+  #webprofiler .overview__list {
+    padding: 0;
+    margin: -1px -1px 0 0;
+    list-style-type: none;
+    border-top: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .overview__link {
+    position: relative;
+    display: block;
+    padding: 0 0 0 72px;
+    border-right: 5px solid transparent; }
+    #webprofiler .overview__link:after {
+      content: '';
+      display: block;
+      position: absolute;
+      bottom: 0;
+      right: -5px;
+      left: 72px;
+      border-bottom: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .overview__icon {
+    position: absolute;
+    top: 16px;
+    left: 16px; }
+  #webprofiler .overview__title {
+    display: block;
+    font-size: 16px;
+    line-height: 22px;
+    padding-top: 16px;
+    padding-bottom: 16px;
+    padding-right: 11px; }
+  #webprofiler .overview__subtitle {
+    display: block;
+    font-size: 14px;
+    line-height: 20px;
+    padding-bottom: 16px;
+    padding-right: 11px;
+    margin-top: -16px; }
+  #webprofiler .is--selected .overview__link {
+    color: #000000;
+    background-color: #f5f5f5;
+    border-right-color: #2962ff; }
+  #webprofiler .overview__link:hover {
+    color: #000000;
+    background-color: #82b1ff; }
+  #webprofiler .resume {
+    position: relative;
+    background-color: #e0e0e0;
+    border-bottom: 1px solid rgba(0, 0, 0, 0.18);
+    border-left: 1px solid rgba(0, 0, 0, 0.18);
+    padding: 16px 16px 0 16px;
+    margin-left: 20%; }
+  #webprofiler .resume__title {
+    display: block;
+    font-size: 24px;
+    line-height: 32px; }
+  #webprofiler .resume__subtitle,
+  #webprofiler .resume__time {
+    display: block;
+    font-size: 16px;
+    line-height: 24px; }
+  #webprofiler .resume__time {
+    margin-bottom: 52px; }
+  #webprofiler .resume__button {
+    position: absolute;
+    bottom: 0;
+    right: 16px; }
+  #webprofiler .collectors {
+    display: table;
+    width: 100%; }
+  #webprofiler .details {
+    display: table-cell;
+    overflow: hidden;
+    padding: 16px;
+    border-left: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .details__title {
+    border-bottom: 1px solid #ccc;
+    padding-bottom: 5px; }
+  #webprofiler .details svg {
+    max-width: 100%; }
+  #webprofiler [class*='panel__filter--'] {
+    display: inline-block;
+    padding: 32px 16px 0 16px;
+    position: relative; }
+  #webprofiler .panel {
+    margin: 0 0 20px;
+    padding: 0;
+    background: #fafafa;
+    border: none; }
+    #webprofiler .panel select,
+    #webprofiler .panel input[type="text"] {
+      min-width: 165px;
+      font-size: 16px;
+      background-color: #fafafa;
+      border-color: transparent;
+      border-width: 0;
+      border-bottom: 2px solid #ffffff;
+      padding: 8px 0;
+      margin-bottom: 8px; }
+      #webprofiler .panel select:focus,
+      #webprofiler .panel input[type="text"]:focus {
+        outline: none;
+        border-bottom-color: #2979ff; }
+        #webprofiler .panel select:focus + label,
+        #webprofiler .panel input[type="text"]:focus + label {
+          color: #2979ff; }
+    #webprofiler .panel select {
+      min-width: 165px;
+      padding-right: 24px;
+      border-radius: 0;
+      background: url(../../images/caret-down.svg) no-repeat 99% 63%;
+      -moz-appearance: none; }
+      #webprofiler .panel select:hover {
+        box-shadow: none; }
+    #webprofiler .panel__title {
+      font-size: 24px;
+      line-height: 1;
+      background-color: #f5f5f5;
+      text-transform: none;
+      padding: 16px;
+      margin: -16px -16px 16px -16px; }
+    #webprofiler .panel__toolbar {
+      background-color: #fafafa;
+      margin: -16px -16px 16px -16px; }
+    #webprofiler .panel__filter-action {
+      display: inline-block; }
+    #webprofiler .panel__filter-label {
+      display: block;
+      position: absolute;
+      top: 0;
+      margin-top: 16px; }
+    #webprofiler .panel__container {
+      background-color: #ffffff;
+      position: relative;
+      padding: 16px; }
+    #webprofiler .panel__expand-content {
+      display: none; }
+  #webprofiler .is--open .panel__expand-content {
+    display: block; }
+  #webprofiler .is--hightlighted {
+    border-right: 10px solid #aa00ff;
+    padding-right: 6px; }
+  #webprofiler .is--hidden {
+    display: none; }
+  #webprofiler .app {
+    overflow: hidden;
+    position: relative;
+    display: block;
+    cursor: pointer; }
+    #webprofiler .app__bar {
+      padding: 16px; }
+    #webprofiler .app__title {
+      margin: 8px 32px 0 0;
+      font-weight: normal; }
+    #webprofiler .app__icon {
+      float: right;
+      height: 32px;
+      width: 32px; }
+    #webprofiler .app__container {
+      padding: 16px; }
+    #webprofiler .app__main-data {
+      font-size: 24px;
+      padding-bottom: 16px; }
+    #webprofiler .app__secondary-data {
+      font-size: 14px;
+      padding-bottom: 16px;
+      margin-top: -8px; }
+  #webprofiler .ui--red .app__bar {
+    background-color: #ff1744; }
+  #webprofiler .ui--red .app__container {
+    background-color: #ff8a80; }
+  #webprofiler .ui--pink .app__bar {
+    background-color: #f50057; }
+  #webprofiler .ui--pink .app__container {
+    background-color: #ff80ab; }
+  #webprofiler .ui--purple .app__bar {
+    background-color: #d500f9; }
+  #webprofiler .ui--purple .app__container {
+    background-color: #ea80fc; }
+  #webprofiler .ui--deepPurple .app__bar {
+    background-color: #651fff; }
+  #webprofiler .ui--deepPurple .app__container {
+    background-color: #b388ff; }
+  #webprofiler .ui--indigo .app__bar {
+    background-color: #3d5afe; }
+  #webprofiler .ui--indigo .app__container {
+    background-color: #8c9eff; }
+  #webprofiler .ui--blue .app__bar {
+    background-color: #2979ff; }
+  #webprofiler .ui--blue .app__container {
+    background-color: #82b1ff; }
+  #webprofiler .ui--lightBlue .app__bar {
+    background-color: #00b0ff; }
+  #webprofiler .ui--lightBlue .app__container {
+    background-color: #80d8ff; }
+  #webprofiler .ui--cyan .app__bar {
+    background-color: #00e5ff; }
+  #webprofiler .ui--cyan .app__container {
+    background-color: #84ffff; }
+  #webprofiler .ui--teal .app__bar {
+    background-color: #ade9b6; }
+  #webprofiler .ui--teal .app__container {
+    background-color: #a7ffeb; }
+  #webprofiler .ui--green .app__bar {
+    background-color: #00e676; }
+  #webprofiler .ui--green .app__container {
+    background-color: #b9f6ca; }
+  #webprofiler .ui--lightGreen .app__bar {
+    background-color: #76ff03; }
+  #webprofiler .ui--lightGreen .app__container {
+    background-color: #ccff90; }
+  #webprofiler .ui--lime .app__bar {
+    background-color: #c6ff00; }
+  #webprofiler .ui--lime .app__container {
+    background-color: #f4ff81; }
+  #webprofiler .ui--yellow .app__bar {
+    background-color: #ffea00; }
+  #webprofiler .ui--yellow .app__container {
+    background-color: #ffff8d; }
+  #webprofiler .ui--amber .app__bar {
+    background-color: #ffc400; }
+  #webprofiler .ui--amber .app__container {
+    background-color: #ffe57f; }
+  #webprofiler .ui--orange .app__bar {
+    background-color: #ff9100; }
+  #webprofiler .ui--orange .app__container {
+    background-color: #ffd180; }
+  #webprofiler .ui--deepOrange .app__bar {
+    background-color: #ff3d00; }
+  #webprofiler .ui--deepOrange .app__container {
+    background-color: #ff9e80; }
+  #webprofiler .ui--brown .app__bar {
+    background-color: #8d6e63; }
+  #webprofiler .ui--brown .app__container {
+    background-color: #d7ccc8; }
+  #webprofiler .ui--gray .app__bar {
+    background-color: #bdbdbd; }
+  #webprofiler .ui--gray .app__container {
+    background-color: #f5f5f5; }
+  #webprofiler .ui--blueGray .app__bar {
+    background-color: #bdbdbd; }
+  #webprofiler .ui--blueGray .app__container {
+    background-color: #f5f5f5; }
+  #webprofiler .loader--fixed {
+    position: fixed;
+    right: 0;
+    top: 50%;
+    width: 80%;
+    height: 100px;
+    zoom: 1.7;
+    text-align: center; }
+  #webprofiler .loader__circle {
+    animation: rotate 2s linear infinite;
+    height: 100px;
+    position: relative;
+    width: 100px; }
+  #webprofiler .loader__path {
+    stroke-dasharray: 1, 200;
+    stroke-dashoffset: 0;
+    animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
+    stroke-linecap: round; }
+@keyframes rotate {
+  100% {
+    transform: rotate(360deg); } }
+@keyframes dash {
+  0% {
+    stroke-dasharray: 1, 200;
+    stroke-dashoffset: 0; }
+  50% {
+    stroke-dasharray: 89, 200;
+    stroke-dashoffset: -35; }
+  100% {
+    stroke-dasharray: 89, 200;
+    stroke-dashoffset: -124; } }
+@keyframes color {
+  100%, 0% {
+    stroke: #ff1744; }
+  40% {
+    stroke: #2979ff; }
+  66% {
+    stroke: #00e676; }
+  80%, 90% {
+    stroke: #ffea00; } }
+  #webprofiler .loader--linear {
+    height: 3px;
+    background-color: #ffea00;
+    position: absolute;
+    top: 0;
+    left: 0;
+    right: 0; }
+  #webprofiler .loader__bar {
+    content: "";
+    display: inline;
+    position: absolute;
+    width: 0;
+    height: 100%;
+    left: 50%;
+    text-align: center; }
+  #webprofiler .loader__bar:nth-child(1) {
+    background-color: #ff1744;
+    animation: loading 3s linear infinite; }
+  #webprofiler .loader__bar:nth-child(2) {
+    background-color: #2979ff;
+    animation: loading 3s linear 1s infinite; }
+  #webprofiler .loader__bar:nth-child(3) {
+    background-color: #00e676;
+    animation: loading 3s linear 2s infinite; }
+@keyframes loading {
+  from {
+    left: 50%;
+    width: 0;
+    z-index: 100; }
+  33.3333% {
+    left: 0;
+    width: 100%;
+    z-index: 10; }
+  to {
+    left: 0;
+    width: 100%; } }
+  #webprofiler .modal {
+    background-color: rgba(0, 0, 0, 0.87);
+    position: fixed;
+    top: 0;
+    bottom: 0;
+    left: 0;
+    right: 0; }
+    #webprofiler .modal__container {
+      border-top-right-radius: 2px;
+      border-top-left-radius: 2px;
+      box-shadow: 0 2px 4px -2px #000000;
+      background-color: #ffffff;
+      position: relative;
+      width: 33%;
+      min-width: 350px;
+      margin: 0 auto;
+      margin-top: 15%; }
+    #webprofiler .modal__bar {
+      padding: 16px; }
+    #webprofiler .modal__content {
+      padding: 16px;
+      font-size: 14px; }
+    #webprofiler .modal__title {
+      margin: 8px 32px 0 0;
+      font-weight: normal;
+      font-size: 24px; }
+    #webprofiler .modal__main-data {
+      font-size: 24px;
+      padding-bottom: 16px; }
+    #webprofiler .modal textarea {
+      white-space: normal;
+      word-break: break-all;
+      word-break: break-word;
+      font-size: 14px;
+      background-color: #f5f5f5;
+      max-width: 100%;
+      height: 320px;
+      width: 100%;
+      padding: 16px;
+      box-sizing: border-box;
+      border: none; }
+  #webprofiler .t--heading, #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__tabs li:nth-child(1) .tabs__label, #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__tabs li:nth-child(2) .tabs__label, #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__tabs li:nth-child(3) .tabs__label, #webprofiler .overview__title, #webprofiler .resume__title, #webprofiler .panel select,
+  #webprofiler .panel input[type="text"], #webprofiler .panel__title {
+    color: black; }
+  #webprofiler .t--notice, #webprofiler .tabs__label, #webprofiler .overview__subtitle, #webprofiler .resume__subtitle,
+  #webprofiler .resume__time, #webprofiler .panel__filter-label {
+    color: rgba(0, 0, 0, 0.3); }
+  #webprofiler .l-card {
+    width: 32%;
+    margin-left: 1%;
+    margin-right: 1%;
+    float: left; }
+    #webprofiler .l-card:nth-child(3n + 1) {
+      margin-left: 0; }
+    #webprofiler .l-card:nth-child(3n) {
+      margin-right: 0; }
+  #webprofiler .l-left {
+    float: left; }
+  #webprofiler .l-right {
+    float: right; }
+  #webprofiler .h--word-broken {
+    word-break: break-all; }
+  #webprofiler .h--word-intact {
+    word-break: normal; }
+
+/*# sourceMappingURL=dashboard.css.map */
diff --git a/modules/contrib/devel/webprofiler/css/timeline.css b/modules/contrib/devel/webprofiler/css/timeline.css
new file mode 100644
index 0000000..f762310
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/css/timeline.css
@@ -0,0 +1,106 @@
+/**
+ * Timeline
+ */
+
+.timeline__legends {
+  font-size: 12px;
+  line-height: 1.5em;
+}
+
+.timeline__legends span {
+  border-left-width: 10px;
+  border-left-style: solid;
+  padding: 0 10px 0 5px;
+}
+
+.timeline__legends--default {
+  border-left-color: #E91E63;
+}
+
+.timeline__legends--section {
+  border-left-color: #3F51B5;
+}
+
+.timeline__legends--event_listener {
+  border-left-color: #00BCD4;
+}
+
+.timeline__legends--event_listener_loading {
+  border-left-color: #8BC34A;
+}
+
+.timeline__legends--template {
+  border-left-color: #FFC107;
+}
+
+.timeline__legends--service {
+    border-left-color: #795548;
+}
+
+text {
+    font-size: 12px;
+    line-height: 20px;
+    height: 22px;
+    fill: rgba(0, 0, 0, 0.87);
+}
+#timeline {
+    background: white;
+    margin: 10px 0;
+    width: 100%;
+    position: relative;
+    padding:  0 0 40px 0;
+}
+.timeline__row,
+.timeline__scale--x,
+.timeline__label rect {
+    stroke: rgba(0, 0, 0, 0.18);
+}
+.timeline__row{
+    fill: transparent;
+}
+.timeline__label rect {
+    fill: white;
+}
+.timeline__period--default {
+    fill: #E91E63;
+}
+.timeline__period--service {
+    fill: #795548;
+}
+.timeline__period--section {
+    fill: #3F51B5;
+}
+.timeline__period--event_listener {
+    fill: #00BCD4;
+}
+.timeline__period--event_listener_loading {
+    fill: #8BC34A;
+}
+.timeline__period--template {
+    fill: #FFC107;
+}
+.timeline__period-trigger{
+    fill: transparent;
+}
+.tooltip{
+    position: absolute;
+    padding: 8px;
+    background: rgb(0,0,0);
+    background: rgba(0, 0, 0, 0.87);
+    border-bottom-left-radius: 2px;
+    border-bottom-right-radius: 2px;
+    width: 175px;
+    text-align: center;
+    display: none;
+    color: white;
+}
+.tooltip__title{
+    display: block;
+}
+.tooltip__content{
+    display: block;
+}
+.axis{
+    stroke-width: 2px;
+    fill: none;
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/webprofiler/images/caret-down.svg b/modules/contrib/devel/webprofiler/images/caret-down.svg
new file mode 100644
index 0000000..4e48c8c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/images/caret-down.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="#333333" d="M3.8 5.4c-.165-.22-.075-.4.2-.4h8.002c.275 0 .365.18.199.4l-3.898 5.2c-.166.221-.436.221-.6 0l-3.903-5.2z"/></svg>
diff --git a/modules/contrib/devel/webprofiler/js/app/collections/collectors.js b/modules/contrib/devel/webprofiler/js/app/collections/collectors.js
new file mode 100644
index 0000000..ed26836
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/collections/collectors.js
@@ -0,0 +1,35 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.collectors.Collectors = Backbone.Collection.extend({
+    model: Drupal.webprofiler.models.Collector,
+
+    url: Drupal.url('admin/reports/profiler/view/' + drupalSettings.webprofiler.token + '/collectors'),
+
+    /**
+     * Unselect all models.
+     */
+    resetSelected: function () {
+      this.each(function (model) {
+        model.set({"selected": false});
+      });
+    },
+
+    /**
+     * Select a specific model from the collection.
+     *
+     * @param id
+     * @returns {*}
+     */
+    selectByID: function (id) {
+      this.resetSelected();
+      var collector = this.get(id);
+      collector.set({"selected": true});
+
+      return collector.id;
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
+
diff --git a/modules/contrib/devel/webprofiler/js/app/helpers.js b/modules/contrib/devel/webprofiler/js/app/helpers.js
new file mode 100644
index 0000000..651deb8
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/helpers.js
@@ -0,0 +1,104 @@
+(function (drupalSettings) {
+
+  Drupal.webprofiler.helpers = (function () {
+
+    "use strict";
+
+    var escapeRx = function escapeRegExp(string) {
+        return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
+      },
+
+      repl = function replaceAll(string, find, replace) {
+        return string.replace(new RegExp(escapeRx(find), 'g'), replace);
+      },
+
+      shortLink = function (clazz) {
+        if (!clazz) {
+          return null;
+        }
+        clazz = repl(clazz, '/', '\\');
+        var parts = clazz.split("\\"), result = [], size = (parts.length - 1);
+
+        _.each(parts, function (item, key) {
+          if (key < size) {
+            result.push(item.substring(0, 1));
+          } else {
+            result.push(item);
+          }
+        });
+        return result.join("\\");
+      },
+
+      abbr = function (clazz) {
+        if (!clazz) {
+          return null;
+        }
+
+        return '<abbr title="' + clazz + '">' + shortLink(clazz) + '</abbr>';
+      },
+
+      ideLink = function (file, line) {
+        if (!file) {
+          return null;
+        }
+
+        line = line || 0;
+
+        file = file.replace(drupalSettings.webprofiler.ide_link_remote, drupalSettings.webprofiler.ide_link_local);
+
+        return drupalSettings.webprofiler.ide_link.replace("@file", file).replace("@line", line);
+      },
+
+      classLink = function (data) {
+        var link = ideLink(data['file'], data['line']), clazz = abbr(data['class']), method = data['method'], output = '';
+
+        output = clazz;
+        if (method) {
+          output += '::' + method;
+        }
+
+        if (link) {
+          output = '<a href="' + link + '">' + output + '</a>';
+        }
+
+        return output;
+      },
+
+      printTime = function (data, unit) {
+        unit = unit || 'ms';
+        data = Math.round((data + 0.00001) * 100) / 100;
+        return data + ' ' + unit;
+      },
+
+      frm = function (obj, level) {
+        level = level || 0;
+        var str = '<ul class="list--unstyled list--level-' + level + ' list--flat">', prop;
+        if (typeof obj != 'object') {
+          return obj;
+        }
+        for (prop in obj) {
+          if (isInt(prop)) {
+            str += '<li>' + frm(obj[prop], level + 1) + '</li>';
+          } else {
+            str += '<li><span class="list-item--bold">' + prop + '</span>: ' + frm(obj[prop], level + 1) + '</li>';
+          }
+        }
+        return str + '</ul>';
+      },
+
+      isInt = function (value) {
+        var x;
+        return isNaN(value) ? !1 : (x = parseFloat(value), (0 | x) === x);
+      };
+
+    return {
+      frm: frm,
+      ideLink: ideLink,
+      shortLink: shortLink,
+      classLink: classLink,
+      printTime: printTime
+    }
+
+  })();
+
+}(drupalSettings));
diff --git a/modules/contrib/devel/webprofiler/js/app/main.js b/modules/contrib/devel/webprofiler/js/app/main.js
new file mode 100644
index 0000000..d5d71cd
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/main.js
@@ -0,0 +1,105 @@
+(function ($, Drupal, Backbone) {
+
+    "use strict";
+
+    /**
+     * Define namespaces.
+     */
+    Drupal.webprofiler = {
+        views: {},
+        models: {},
+        collectors: {},
+        routers: {}
+    };
+
+    Drupal.behaviors.webprofiler = {
+        attach: function (context) {
+            var el,
+                elz,
+                key,
+                sel,
+                value,
+                select,
+                selector,
+                unselected,
+                filter = [],
+
+                livefilter = function (e) {
+                    el = $(e).attr('id').replace('edit-', '');
+                    value = $(e).val();
+                    filter[el] = value.replace('/', '\/');
+                    selector = [];
+                    unselected = [];
+
+                    for (key in filter) {
+                        if (filter[key].length > 0 && filter[key] != ' ') {
+                            select = filter[key].split(' ').filter(Boolean);
+                            for (sel in select) {
+                                selector.push('[data-wp-' + key + ' *= ' + select[sel].toLowerCase() + ']');
+                                unselected.push('[data-wp-' + key + ']:not([data-wp-' + key + ' *= ' + select[sel].toLowerCase() + '])');
+                            }
+                        }
+                        else {
+                            selector.push('[data-wp-' + key + ']');
+                        }
+                    }
+                    for (elz in unselected) {
+                        $(unselected[elz]).addClass('is--hidden');
+                    }
+                    $(selector.join('')).removeClass('is--hidden');
+                },
+
+                modalFill = function(t,c){
+                    $('.modal__title').html(t);
+                    $('.modal__main-data').html(c);
+                },
+
+                clipboard = function (e, t) {
+                    var clip = e.parent().find(t).get(0),
+                        title = 'Original Code',
+                        content = '<textarea readonly >' +
+                            clip.textContent +
+                            '</textarea>';
+
+                    modalFill(title,content);
+                    $('.modal').show();
+                };
+
+            $(context).find('#collectors').once('webprofiler').each(function () {
+                new Drupal.webprofiler.routers.CollectorsRouter({el: $('#collectors')});
+                Backbone.history.start({
+                    pushState: false
+                });
+            });
+
+            $(context).find('.js--modal-close').each(function () {
+                $(this).on('click', function () {
+                    $('.js--modal').hide();
+                });
+            });
+
+            $(context).find('.js--live-filter').each(function () {
+                $(this).on('keyup', function () {
+                    livefilter($(this));
+                });
+                $(this).on('change', function () {
+                    livefilter($(this));
+                });
+            });
+
+            $(context).find('.js--panel-toggle').once('js--panel-toggle').each(function () {
+                $(this).on('click', function () {
+                    $(this).parent().parent().toggleClass('is--open');
+                });
+            });
+
+            $(context).find('.js--clipboard-trigger').once('js--clipboard-trigger').each(function () {
+                $(this).on('click', function () {
+                        clipboard($(this), '.js--clipboard-target')
+                    }
+                );
+            });
+        }
+    };
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/models/collector.js b/modules/contrib/devel/webprofiler/js/app/models/collector.js
new file mode 100644
index 0000000..483033c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/models/collector.js
@@ -0,0 +1,15 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.models.Collector = Backbone.Model.extend({
+    idAttribute: 'name',
+    urlRoot: Drupal.url('admin/reports/profiler/view/' + drupalSettings.webprofiler.token + '/collectors'),
+    defaults: {
+      name: "default",
+      data: [],
+      selected: false
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/routers/collectors.js b/modules/contrib/devel/webprofiler/js/app/routers/collectors.js
new file mode 100644
index 0000000..876f238
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/routers/collectors.js
@@ -0,0 +1,48 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  var collectors = new Drupal.webprofiler.collectors.Collectors(drupalSettings.webprofiler.collectors);
+
+  Drupal.webprofiler.routers.CollectorsRouter = Backbone.Router.extend({
+    routes: {
+      ':id': 'selectCollector'
+    },
+
+    /**
+     *
+     * @param id
+     */
+    selectCollector: function (id) {
+      var collectors = this.collectors, layout = this.layout;
+
+      //collectors.resetSelected();
+      collectors.selectByID(id);
+
+      var collector = collectors.get(id);
+
+      if (collector.get('data').length != 0) {
+        layout.setDetails(collector);
+      } else {
+        var deferred = collectors.get(id).fetch();
+        deferred.done(function () {
+          layout.setDetails(collector);
+        });
+      }
+    },
+
+    /**
+     *
+     * @param options
+     */
+    initialize: function (options) {
+      this.collectors = collectors;
+      this.layout = Drupal.webprofiler.views.Layout.getInstance({
+        el: options.el,
+        router: this
+      });
+      this.layout.render();
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/views/collector.js b/modules/contrib/devel/webprofiler/js/app/views/collector.js
new file mode 100644
index 0000000..955a36e
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/views/collector.js
@@ -0,0 +1,29 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.CollectorView = Backbone.View.extend({
+    tagName: 'li',
+    template: _.template($("script#collector").html()),
+
+    /**
+     *
+     */
+    initialize: function () {
+      _.bindAll(this, "render");
+      this.listenTo(this.model, 'change:selected', this.render);
+    },
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.CollectorView}
+     */
+    render: function () {
+      this.$el.html(this.template(this.model.toJSON()));
+      this.$el.toggleClass('is--selected', this.model.get('selected'));
+      return this;
+    }
+
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/views/collectorsList.js b/modules/contrib/devel/webprofiler/js/app/views/collectorsList.js
new file mode 100644
index 0000000..8628371
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/views/collectorsList.js
@@ -0,0 +1,21 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.CollectorsList = Backbone.View.extend({
+    tagName: 'section',
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.CollectorsList}
+     */
+    render: function () {
+      var collectorsView = this.collection.map(function (collector) {
+        return (new Drupal.webprofiler.views.CollectorView({model: collector})).render().el;
+      });
+      this.$el.html(collectorsView);
+      return this;
+    }
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/views/details.js b/modules/contrib/devel/webprofiler/js/app/views/details.js
new file mode 100644
index 0000000..709f17e
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/views/details.js
@@ -0,0 +1,20 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.DetailsView = Backbone.View.extend({
+    el: '#details',
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.DetailsView}
+     */
+    render: function () {
+      var template = _.template($("script#" + this.model.get('name')).html());
+
+      this.$el.html(template(this.model.toJSON()));
+      return this;
+    }
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/app/views/layout.js b/modules/contrib/devel/webprofiler/js/app/views/layout.js
new file mode 100644
index 0000000..6168b34
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/app/views/layout.js
@@ -0,0 +1,83 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.Layout = Backbone.View.extend({
+    template: _.template(
+      '<div id="overview" class="overview">' +
+      '<ul class="overview__list"></ul>' +
+      '</div>' +
+      '<div id="details" class="details">' +
+      'Choose a collector.' +
+      '</div>'
+    ),
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.Layout}
+     */
+    render: function () {
+      this.$el.html(this.template());
+
+      if(this.currentDetails) {
+        this.currentDetails.setElement(this.$('#details')).render();
+      }
+
+      this.overview.setElement(this.$('#overview ul')).render();
+      return this;
+    },
+
+    /**
+     *
+     * @param options
+     */
+    initialize: function (options) {
+      options.router.collectors.on('request', this.beginSync);
+      options.router.collectors.on('sync', this.finishSync);
+
+      this.overview = new Drupal.webprofiler.views.CollectorsList({
+        collection: options.router.collectors,
+        router: options.router
+      });
+    },
+
+    /**
+     *
+     * @param collector
+     */
+    setDetails: function (collector) {
+      if (this.currentDetails) this.currentDetails.remove();
+      this.currentDetails = new Drupal.webprofiler.views.DetailsView({model: collector});
+      this.render();
+      Drupal.attachBehaviors(/*this.$el, drupalSettings*/);
+    },
+
+    /**
+     *
+     */
+    beginSync: function () {
+            $('.loader--fixed').fadeIn({duration: 100});
+    },
+
+    /**
+     *
+     */
+    finishSync: function () {
+            $('.loader--fixed').fadeOut({duration: 100});
+    }
+  });
+
+  var instance;
+  Drupal.webprofiler.views.Layout.getInstance = function (options) {
+    if (!instance) {
+      instance = new Drupal.webprofiler.views.Layout({
+        el: options.el,
+        router: options.router,
+        collection: options.router.collectors
+      });
+    }
+
+    return instance;
+  }
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/contrib/devel/webprofiler/js/database.js b/modules/contrib/devel/webprofiler/js/database.js
new file mode 100644
index 0000000..5f50430
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/database.js
@@ -0,0 +1,68 @@
+/**
+ * @file
+ * Database panel app.
+ */
+(function ($, Drupal, drupalSettings) {
+
+    "use strict";
+
+    Drupal.behaviors.webprofiler_database = {
+        attach: function (context) {
+            $(context).find('.js--explain-trigger').once('js--explain-trigger').each(function () {
+
+                $(this).on('click', function () {
+                    var position = $(this).attr('data-wp-queryPosition'),
+                        wrapper = $(this).parent().parent().find('.js--explain-target'),
+                        loader = $(this).parent().parent().find('.js--loader');
+
+                    if (wrapper.html().length === 0) {
+
+                        var url = Drupal.url('admin/reports/profiler/database_explain/' + drupalSettings.webprofiler.token + '/' + position);
+
+                        loader.show();
+
+                        $.getJSON(url, function (data) {
+                            _.templateSettings.variable = 'rc';
+                            var template = _.template(
+                                $("#wp-query-explain-template").html()
+                            );
+                            wrapper.html(template(data));
+                            loader.hide();
+                            delete _.templateSettings.variable;
+                        });
+                    }
+                    wrapper.toggle();
+
+                });
+            });
+
+            $(context).find('.js--code-toggle').once('js--code-toggle').each(function () {
+                $(this).on('click', function () {
+                    $(this).parent().find('.js--code-target').find('code').toggleClass('is--hidden');
+                });
+            });
+
+            $(context).find('.js--code-toggle--global').once('js--code-toggle--global').each(function () {
+                $(this).on('click', function () {
+
+                    if($(this).hasClass('js--placeholder-visible')){
+                        $('.js--placeholder-query').addClass('is--hidden');
+                        $('.js--original-query').removeClass('is--hidden');
+
+                    }else{
+                        $('.js--placeholder-query').removeClass('is--hidden');
+                        $('.js--original-query').addClass('is--hidden');
+                    }
+                    $(this).toggleClass('js--placeholder-visible');
+                });
+            });
+
+            if (typeof hljs != "undefined") {
+                $('code.sql').each(function (i, block) {
+                    hljs.highlightBlock(block);
+                });
+            }
+        }
+    }
+})
+(jQuery, Drupal, drupalSettings);
diff --git a/modules/contrib/devel/webprofiler/js/timeline.js b/modules/contrib/devel/webprofiler/js/timeline.js
new file mode 100644
index 0000000..0843f90
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/js/timeline.js
@@ -0,0 +1,226 @@
+/**
+ * @file
+ * Timeline panel app.
+ */
+(function ($, Drupal, drupalSettings) {
+
+    "use strict";
+
+    Drupal.behaviors.webprofiler_timeline = {
+        attach: function (context) {
+            if (typeof d3 != "undefined") {
+
+                // data
+                var data = drupalSettings.webprofiler.time.events,
+                    parts = [],
+                    dataL = data.length,
+                    perL,
+                    labelW = [],
+                    rowW,
+                    scalePadding,
+                    endTime = parseInt(data[(dataL - 1)].endtime),
+                    roundTime = Math.ceil(endTime / 1000) * 1000,
+                    endScale;
+
+                for (var j = 0; j < dataL; j++) {
+                    perL = data[j].periods.length;
+                    for (var k = 0; k < perL; k++) {
+                        parts.push({
+                            "lane": j,
+                            "category": data[j].category,
+                            "memory": data[j].memory,
+                            "name": data[j].name,
+                            "start": data[j].periods[k].start,
+                            "end": data[j].periods[k].end
+                        });
+                    }
+                }
+
+                var tooltipCtrl = function (d, i) {
+                    tooltip.html('<span class="tooltip__content">memory usage: ' + d.memory + '</span>' +
+                    '<span class="tooltip__content">' + parseInt(d.start) + 'ms ~ ' + parseInt(d.end) + 'ms</span>');
+                    tooltip
+                        .style("display", 'block')
+                        .style("left", (d3.event.layerX - 87 ) + "px")
+                        .style("top", ((d.lane + 1) * 22 ) + "px")
+                        .style("opacity", .9);
+                };
+
+                var xscale = d3.scale.linear().domain([0, roundTime]).range([0, 1000]),
+                    container = d3.select('#timeline').append('svg').attr('height', (dataL + 1 ) * 22 + 'px').attr('width', '100%').attr('class', 'timeline__canvas'),
+
+
+                //tooltops
+                    tooltip = d3.select('#timeline')
+                        .append("div")
+                        .attr("class", "tooltip"),
+
+
+// rows
+                    rows = d3.select('.timeline__canvas')
+                        .append('g')
+                        .attr('class', 'timeline__rows')
+                        .attr('x', 0)
+                        .attr('y', 0)
+                        .selectAll('g')
+                        .data(data)
+                        .enter()
+                        .append('rect')
+                        .attr('class', 'timeline__row')
+                        .attr('x', 0)
+                        .attr('y', function (d, i) {
+                            return (i * 22);
+                        })
+                        .attr('height', 22)
+                        .attr('width', '100%')
+                        .each(function () {
+                            rowW = this.getBoundingClientRect().width;
+                        }),
+// scale
+                    scale = d3.select('.timeline__canvas')
+                        .append('g')
+                        .attr('class', 'timeline__scale')
+                        .attr('id', 'timeline__scale')
+                        .attr('x', 0)
+                        .attr('y', 0)
+                        .selectAll('g')
+                        .data(data)
+                        .enter()
+                        .append('a')
+                        .attr('xlink:href', function (d) {
+                            return Drupal.webprofiler.helpers.ideLink(d.link);
+                        })
+                        .attr('class', function (d) {
+                            return 'timeline__label ' + d.category
+                        })
+                        .attr('x', xscale(5))
+                        .attr('y', function (d, i) {
+                            return (((i + 1) * 22) - 5)
+                        });
+
+                scale.append('title')
+                    .text(function (d) {
+                        return d.name;
+                    });
+
+                scale.append('text')
+                    .attr('x', xscale(5))
+                    .attr('y', function (d, i) {
+                        return (((i + 1) * 22) - 5)
+                    })
+                    .text(function (d) {
+                        return Drupal.webprofiler.helpers.shortLink(d.name);
+                    })
+                    .each(function (d) {
+                        labelW.push(this.getBoundingClientRect().width);
+                    });
+
+                scalePadding = Math.max.apply(null, labelW) + 10;
+
+                scale.insert('rect', 'title')
+                    .attr('x', 0)
+                    .attr('y', function (d, i) {
+                        return (i * 22)
+                    })
+                    .attr('height', 22)
+                    .attr('stroke', 'transparent')
+                    .attr('strokw-width', 1)
+                    .attr('width', scalePadding);
+
+// times
+                var events = d3.select('.timeline__canvas')
+                    .insert('g', '.timeline__scale')
+                    .attr('class', 'timeline__parts')
+                    .attr('x', 0)
+                    .attr('y', 0)
+                    .selectAll('g')
+                    .data(parts)
+                    .enter();
+
+                events.append('rect').attr('class', function (d) {
+                    return 'timeline__period--' + d.category
+                })
+                    .attr('x', function (d) {
+                        return xscale(parseInt(d.start)) + scalePadding
+                    })
+                    .attr('y', function (d) {
+                        return d.lane * 22
+                    })
+                    .attr('height', 22)
+                    .attr('width', function (d) {
+                        return xscale(Math.max(parseInt(d.end - d.start), 1))
+                    });
+
+                events.append('rect')
+                    .attr('class', function (d) {
+                        return 'timeline__period-trigger'
+                    })
+                    .attr('x', function (d) {
+                        return xscale(parseInt(d.start)) + scalePadding - 5
+                    })
+                    .attr('y', function (d) {
+                        return d.lane * 22
+                    })
+                    .attr('height', 22)
+                    .attr('width', function (d) {
+
+                        return xscale(Math.max(parseInt(d.end - d.start), 1)) + 11
+                    })
+                    .on("mouseover", function (d, i) {
+                        tooltipCtrl(d, i);
+                    })
+                    .on("mouseout", function (d) {
+                        tooltip
+                            .style("display", 'none');
+                    });
+
+// Draw X-axis grid lines
+                var axis = d3.select('.timeline__parts').insert('g', '.timeline__parts')
+                    .selectAll("line")
+                    .data(xscale.ticks(10))
+                    .enter()
+                    .append("line")
+                    .attr("class", "timeline__scale--x")
+                    .attr("x1", xscale)
+                    .attr("x2", xscale)
+                    .attr("y1", 0)
+                    .attr("y2", data.length * 22)
+                    .attr("transform", "translate( " + scalePadding + " , 0)");
+
+                var xAxis = d3.svg.axis().scale(xscale).ticks(10).orient('bottom').tickFormat(function (d) {
+                    return d + ' ms'
+                });
+
+                var axe = d3.select('.timeline__parts').insert('g', '.timeline__parts')
+                    .attr("class", "axis")
+                    .attr('transform', 'translate(' + scalePadding + ', ' + dataL * 22 + ')')
+                    .call(xAxis);
+
+
+                endScale = xscale(endTime) - rowW - parseInt(scalePadding);
+
+                if( parseInt(xscale(endTime)) > ( rowW - parseInt(scalePadding))){
+                    var zoom = d3.select('.timeline__canvas')
+                        .call(
+                        d3.behavior.zoom()
+                            .scaleExtent([1, 1])
+                            .x(xscale)
+                            .on("zoom", function () {
+
+                                var t = d3.event.translate,
+                                    tx = t[0];
+
+                                tx = tx > 0 ? 0 : tx;
+
+                                tx = tx < endScale ? endScale : tx;
+
+
+                                d3.select('.timeline__parts').attr("transform", "translate( " + tx + " , 0)");
+                            }));
+                }
+
+            }
+        }
+    }
+
+})(jQuery, Drupal, drupalSettings);
diff --git a/modules/contrib/devel/webprofiler/src/Access/AccessManagerWrapper.php b/modules/contrib/devel/webprofiler/src/Access/AccessManagerWrapper.php
new file mode 100644
index 0000000..5de834f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Access/AccessManagerWrapper.php
@@ -0,0 +1,83 @@
+<?php
+
+namespace Drupal\webprofiler\Access;
+
+use Drupal\Core\Access\AccessException;
+use Drupal\Core\Access\AccessManager;
+use Drupal\Component\Utility\ArgumentsResolverInterface;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Access\AccessResultInterface;
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\webprofiler\DataCollector\RequestDataCollector;
+use Symfony\Component\HttpFoundation\Request;
+
+/**
+ * Attaches access check services to routes and runs them on request.
+ *
+ * @see \Drupal\Tests\Core\Access\AccessManagerTest
+ */
+class AccessManagerWrapper extends AccessManager {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\RequestDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function check(RouteMatchInterface $route_match, AccountInterface $account = NULL, Request $request = NULL, $return_as_object = FALSE) {
+    if (!isset($account)) {
+      $account = $this->currentUser;
+    }
+    $route = $route_match->getRouteObject();
+    $checks = $route->getOption('_access_checks') ?: array();
+
+    // Filter out checks which require the incoming request.
+    if (!isset($request)) {
+      $checks = array_diff($checks, $this->checkProvider->getChecksNeedRequest());
+    }
+
+    $result = AccessResult::neutral();
+    if (!empty($checks)) {
+      $arguments_resolver = $this->argumentsResolverFactory->getArgumentsResolver($route_match, $account, $request);
+
+      if (!$checks) {
+        return AccessResult::neutral();
+      }
+      $result = AccessResult::allowed();
+      foreach ($checks as $service_id) {
+        $result = $result->andIf($this->performCheck($service_id, $arguments_resolver, $request));
+      }
+    }
+    return $return_as_object ? $result : $result->isAllowed();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function performCheck($service_id, ArgumentsResolverInterface $arguments_resolver, Request $request = NULL) {
+    $callable = $this->checkProvider->loadCheck($service_id);
+    $arguments = $arguments_resolver->getArguments($callable);
+    /** @var \Drupal\Core\Access\AccessResultInterface $service_access **/
+    $service_access = call_user_func_array($callable, $arguments);
+
+    if (!$service_access instanceof AccessResultInterface) {
+      throw new AccessException("Access error in $service_id. Access services must return an object that implements AccessResultInterface.");
+    }
+
+    if($request) {
+      $this->dataCollector->addAccessCheck($service_id, $callable, $request);
+    }
+
+    return $service_access;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\DataCollector\RequestDataCollector $dataCollector
+   */
+  public function setDataCollector(RequestDataCollector $dataCollector) {
+    $this->dataCollector = $dataCollector;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php b/modules/contrib/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php
new file mode 100644
index 0000000..7db35d3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Asset\CssCollectionRendererWrapper.
+ */
+
+namespace Drupal\webprofiler\Asset;
+
+use Drupal\Core\Asset\AssetCollectionRendererInterface;
+use Drupal\webprofiler\DataCollector\AssetsDataCollector;
+
+/**
+ * Class CssCollectionRendererWrapper.
+ */
+class CssCollectionRendererWrapper implements AssetCollectionRendererInterface {
+
+  /**
+   * @var \Drupal\Core\Asset\AssetCollectionRendererInterface
+   */
+  private $assetCollectionRenderer;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\AssetsDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $assetCollectionRenderer
+   * @param \Drupal\webprofiler\DataCollector\AssetsDataCollector $dataCollector
+   */
+  public function __construct(AssetCollectionRendererInterface $assetCollectionRenderer, AssetsDataCollector $dataCollector) {
+    $this->assetCollectionRenderer = $assetCollectionRenderer;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render(array $css_assets) {
+    $this->dataCollector->addCssAsset($css_assets);
+
+    return $this->assetCollectionRenderer->render($css_assets);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php b/modules/contrib/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php
new file mode 100644
index 0000000..ffb7037
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Asset\JsCollectionRendererWrapper.
+ */
+
+namespace Drupal\webprofiler\Asset;
+
+use Drupal\Core\Asset\AssetCollectionRendererInterface;
+use Drupal\webprofiler\DataCollector\AssetsDataCollector;
+
+/**
+ * Class JsCollectionRendererWrapper.
+ */
+class JsCollectionRendererWrapper implements AssetCollectionRendererInterface {
+
+  /**
+   * @var \Drupal\Core\Asset\AssetCollectionRendererInterface
+   */
+  private $assetCollectionRenderer;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\AssetsDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $assetCollectionRenderer
+   * @param \Drupal\webprofiler\DataCollector\AssetsDataCollector $dataCollector
+   */
+  public function __construct(AssetCollectionRendererInterface $assetCollectionRenderer, AssetsDataCollector $dataCollector) {
+    $this->assetCollectionRenderer = $assetCollectionRenderer;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render(array $js_assets) {
+    $this->dataCollector->addJsAsset($js_assets);
+
+    return $this->assetCollectionRenderer->render($js_assets);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Cache/CacheBackendWrapper.php b/modules/contrib/devel/webprofiler/src/Cache/CacheBackendWrapper.php
new file mode 100644
index 0000000..696cd5c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Cache/CacheBackendWrapper.php
@@ -0,0 +1,184 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Cache\CacheBackendWrapper.
+ */
+
+namespace Drupal\webprofiler\Cache;
+
+use Drupal\Core\Cache\Cache;
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+
+/**
+ * Wraps an existing cache backend to track calls to the cache backend.
+ */
+class CacheBackendWrapper implements CacheBackendInterface {
+
+  /**
+   * The data collector to register the calls.
+   *
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  protected $cacheDataCollector;
+
+  /**
+   * The wrapped cache backend.
+   *
+   * @var \Drupal\Core\Cache\CacheBackendInterface
+   */
+  protected $cacheBackend;
+
+  /**
+   * The name of the wrapped cache bin.
+   *
+   * @var string
+   */
+  protected $bin;
+
+  /**
+   * Constructs a new CacheBackendWrapper.
+   *
+   * @param \Drupal\webprofiler\DataCollector\CacheDataCollector $cacheDataCollector
+   *   The cache data collector to inform about cache get calls.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cacheBackend
+   *   The wrapped cache backend.
+   * @param string $bin
+   *   The name of the wrapped cache bin.
+   */
+  public function __construct(CacheDataCollector $cacheDataCollector, CacheBackendInterface $cacheBackend, $bin) {
+    $this->cacheDataCollector = $cacheDataCollector;
+    $this->cacheBackend = $cacheBackend;
+    $this->bin = $bin;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($cid, $allow_invalid = FALSE) {
+    $cache = $this->cacheBackend->get($cid, $allow_invalid);
+
+    if ($cache) {
+      $cacheCopy = new \StdClass();
+      $cacheCopy->cid = $cache->cid;
+      $cacheCopy->expire = $cache->expire;
+      $cacheCopy->tags = $cache->tags;
+
+      $this->cacheDataCollector->registerCacheHit($this->bin, $cacheCopy);
+    }
+    else {
+      $this->cacheDataCollector->registerCacheMiss($this->bin, $cid);
+    }
+
+    return $cache;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getMultiple(&$cids, $allow_invalid = FALSE) {
+    $cidsCopy = $cids;
+    $cache = $this->cacheBackend->getMultiple($cids, $allow_invalid);
+
+    foreach ($cidsCopy as $cid) {
+      if (in_array($cid, $cids)) {
+        $this->cacheDataCollector->registerCacheMiss($this->bin, $cid);
+      }
+      else {
+        $cacheCopy = new \StdClass();
+        $cacheCopy->cid = $cache[$cid]->cid;
+        $cacheCopy->expire = $cache[$cid]->expire;
+        $cacheCopy->tags = $cache[$cid]->tags;
+
+        $this->cacheDataCollector->registerCacheHit($this->bin, $cacheCopy);
+      }
+    }
+
+    return $cache;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function set($cid, $data, $expire = Cache::PERMANENT, array $tags = []) {
+    return $this->cacheBackend->set($cid, $data, $expire, $tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setMultiple(array $items) {
+    return $this->cacheBackend->setMultiple($items);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete($cid) {
+    return $this->cacheBackend->delete($cid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteMultiple(array $cids) {
+    return $this->cacheBackend->deleteMultiple($cids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteTags(array $tags) {
+    return $this->cacheBackend->deleteTags($tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteAll() {
+    return $this->cacheBackend->deleteAll();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidate($cid) {
+    return $this->cacheBackend->invalidate($cid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateMultiple(array $cids) {
+    return $this->cacheBackend->invalidateMultiple($cids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateTags(array $tags) {
+    return $this->cacheBackend->invalidateTags($tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateAll() {
+    return $this->cacheBackend->invalidateAll();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function garbageCollection() {
+    return $this->cacheBackend->garbageCollection();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function removeBin() {
+    return $this->cacheBackend->removeBin();
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Cache/CacheFactoryWrapper.php b/modules/contrib/devel/webprofiler/src/Cache/CacheFactoryWrapper.php
new file mode 100644
index 0000000..ab6ed59
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Cache/CacheFactoryWrapper.php
@@ -0,0 +1,67 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Cache\CacheFactoryWrapper.
+ */
+
+namespace Drupal\webprofiler\Cache;
+
+use Drupal\Core\Cache\CacheFactoryInterface;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+use Symfony\Component\DependencyInjection\ContainerAwareInterface;
+use Symfony\Component\DependencyInjection\ContainerAwareTrait;
+
+/**
+ * Wraps a cache factory to register all calls to the cache system.
+ */
+class CacheFactoryWrapper implements CacheFactoryInterface, ContainerAwareInterface {
+
+  use ContainerAwareTrait;
+
+  /**
+   * The cache factory.
+   *
+   * @var \Drupal\Core\Cache\CacheFactoryInterface
+   */
+  protected $cacheFactory;
+
+  /**
+   * The cache data collector.
+   *
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  protected $cacheDataCollector;
+
+  /**
+   * All wrapped cache backends.
+   *
+   * @var \Drupal\webprofiler\Cache\CacheBackendWrapper[]
+   */
+  protected $cacheBackends = [];
+
+  /**
+   * Creates a new CacheFactoryWrapper instance.
+   *
+   * @param \Drupal\Core\Cache\CacheFactoryInterface $cache_factory
+   *   The cache factory.
+   * @param \Drupal\webprofiler\DataCollector\CacheDataCollector $cacheDataCollector
+   *   The cache data collector.
+   */
+  public function __construct(CacheFactoryInterface $cache_factory, CacheDataCollector $cacheDataCollector) {
+    $this->cacheFactory = $cache_factory;
+    $this->cacheDataCollector = $cacheDataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($bin) {
+    if (!isset($this->cacheBackends[$bin])) {
+      $cache_backend = $this->cacheFactory->get($bin);
+      $this->cacheBackends[$bin] = new CacheBackendWrapper($this->cacheDataCollector, $cache_backend, $bin);
+    }
+    return $this->cacheBackends[$bin];
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Command/BenchmarkCommand.php b/modules/contrib/devel/webprofiler/src/Command/BenchmarkCommand.php
new file mode 100644
index 0000000..83fad27
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Command/BenchmarkCommand.php
@@ -0,0 +1,307 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\BenchmarkCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use GuzzleHttp\ClientInterface;
+use GuzzleHttp\Cookie\CookieJar;
+use Symfony\Component\Console\Helper\ProgressBar;
+use Symfony\Component\Console\Input\InputArgument;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+use Drupal\Console\Command\ContainerAwareCommand;
+use Symfony\Component\DomCrawler\Crawler;
+use Symfony\Component\Process\Process;
+use Symfony\Component\Yaml\Yaml;
+
+/**
+ * Class BenchmarkCommand
+ */
+class BenchmarkCommand extends ContainerAwareCommand {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:benchmark')
+      ->setDescription($this->trans('commands.webprofiler.benchmark.description'))
+      ->addArgument('url', InputArgument::REQUIRED, $this->trans('commands.webprofiler.benchmark.arguments.url'))
+      ->addOption('runs', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.benchmark.options.runs'), 100)
+      ->addOption('file', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.benchmark.options.file'))
+      ->addOption('cache-rebuild', 'cr', InputOption::VALUE_NONE, $this->trans('commands.webprofiler.benchmark.options.cache_rebuild'));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $runs = $input->getOption('runs');
+    $file = $input->getOption('file');
+    $cache_rebuild = $input->getOption('cache-rebuild');
+
+    // http://username:password@hostname/
+    $url = $input->getArgument('url');
+    $url_components = parse_url($url);
+    $login = isset($url_components['user']) && isset($url_components['pass']);
+
+    $steps = 3;
+
+    if ($cache_rebuild) {
+      $steps++;
+    }
+
+    if ($login) {
+      $steps++;
+    }
+
+    /** @var \Drupal\Core\Http\Client $client */
+    $client = $this->getContainer()->get('http_client');
+
+    $progress = new ProgressBar($output, $runs + $steps);
+    $progress->setFormat(' %current%/%max% [%bar%] %percent:3s%% %message%');
+
+    if ($cache_rebuild) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.cache_rebuild'));
+      $this->RebuildCache();
+      $progress->advance();
+    }
+
+    if ($login) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.login'));
+      $login_url = "{$url_components['scheme']}://{$url_components['host']}/user/login";
+
+      // Enable cookies storage.
+      $cookieJar = new CookieJar();
+      $client->setDefaultOption('cookies', $cookieJar);
+
+      // Retrieve a form_build_id using the DomCrawler component.
+      $response = $client->get($login_url)->getBody()->getContents();
+      $crawler = new Crawler($response);
+      $form_build_id = $crawler->filter('#user-login-form input[name=form_build_id]')
+        ->attr('value');
+      $op = $crawler->filter('#user-login-form input[name=op]')->attr('value');
+
+      // Login a user.
+      $response = $client->post($login_url, [
+        'body' => [
+          'name' => $url_components['user'],
+          'pass' => $url_components['pass'],
+          'form_build_id' => $form_build_id,
+          'form_id' => 'user_login_form',
+          'op' => $op,
+        ]
+      ]);
+      $progress->advance();
+
+      if ($response->getStatusCode() != 200) {
+        throw new \Exception($this->trans('commands.webprofiler.benchmark.messages.error_login'));
+      }
+    }
+
+    $datas = [];
+    for ($i = 0; $i < $runs; $i++) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.get'));
+      $datas[] = $this->getData($client, $url);
+      $progress->advance();
+    }
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_avg'));
+    $avg = $this->computeAvg($datas);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_median'));
+    $median = $this->computePercentile($datas, 50);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_95percentile'));
+    $percentile95 = $this->computePercentile($datas, 95);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.git_hash'));
+    $gitHash = $this->getGitHash();
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.yaml'));
+    $yaml = $this->generateYaml($gitHash, $runs, $url, $avg, $median, $percentile95);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.done'));
+    $progress->finish();
+    $output->writeln('');
+
+    if ($file) {
+      file_put_contents($file, $yaml);
+    }
+    else {
+      $output->writeln($yaml);
+    }
+
+  }
+
+  /**
+   * @param \GuzzleHttp\ClientInterface $client
+   * @param $url
+   *
+   * @return array
+   */
+  private function getData(ClientInterface $client, $url) {
+    /** @var \GuzzleHttp\Message\ResponseInterface $response */
+    $response = $client->get($url);
+
+    $token = $response->getHeader('X-Debug-Token');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+
+    /** @var \Symfony\Component\HttpKernel\Profiler\Profile $profile */
+    $profile = $profiler->loadProfile($token);
+
+    /** @var \Drupal\webprofiler\DataCollector\TimeDataCollector $timeDataCollector */
+    $timeDataCollector = $profile->getCollector('time');
+
+    return new BenchmarkData(
+      $token,
+      $timeDataCollector->getMemory(),
+      $timeDataCollector->getDuration());
+  }
+
+  /**
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   *
+   * @return \Drupal\webprofiler\Command\BenchmarkData
+   */
+  private function computeAvg($datas) {
+    $profiles = count($datas);
+    $totalTime = 0;
+    $totalMemory = 0;
+
+    foreach ($datas as $data) {
+      $totalTime += $data->getTime();
+      $totalMemory += $data->getMemory();
+    }
+
+    return new BenchmarkData(NULL, $totalMemory / $profiles, $totalTime / $profiles);
+  }
+
+  /**
+   * Computes percentile using The Nearest Rank method.
+   *
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   * @param $percentile
+   *
+   * @return \Drupal\webprofiler\Command\BenchmarkData
+   *
+   * @throws \Exception
+   */
+  private function computePercentile($datas, $percentile) {
+    if ($percentile < 0 || $percentile > 100) {
+      throw new \Exception('Percentile has to be between 0 and 100');
+    }
+
+    $profiles = count($datas);
+
+    $n = ceil((($percentile / 100) * $profiles));
+    $index = (int) $n - 1;
+
+    $orderedTime = $datas;
+    $this->getOrderedDatas($orderedTime, 'Time');
+
+    $orderedMemory = $datas;
+    $this->getOrderedDatas($orderedMemory, 'Memory');
+
+    return new BenchmarkData(NULL, $orderedMemory[$index]->getMemory(), $orderedTime[$index]->getTime());
+  }
+
+  /**
+   * @return string
+   */
+  private function getGitHash() {
+    try {
+      $process = new Process('git rev-parse HEAD');
+      $process->setTimeout(3600);
+      $process->run();
+      $git_hash = $process->getOutput();
+    } catch (\Exception $e) {
+      $git_hash = $this->trans('commands.webprofiler.benchmark.messages.not_git');
+    }
+
+    return $git_hash;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   * @param $string
+   *
+   * @return array
+   */
+  private function getOrderedDatas(&$datas, $string) {
+    usort($datas, function ($a, $b) use ($string) {
+      $method = 'get' . $string;
+      if ($a->{$method} > $b->{$method}) {
+        return 1;
+      }
+      if ($a->{$method} < $b->{$method}) {
+        return -1;
+      }
+      return 0;
+    });
+  }
+
+  /**
+   * Rebuilds Drupal cache.
+   */
+  protected function RebuildCache() {
+    require_once DRUPAL_ROOT . '/core/includes/utility.inc';
+    $kernelHelper = $this->getHelper('kernel');
+    $classLoader = $kernelHelper->getClassLoader();
+    $request = $kernelHelper->getRequest();
+    drupal_rebuild($classLoader, $request);
+  }
+
+  /**
+   * @param $gitHash
+   * @param $runs
+   * @param $url
+   * @param \Drupal\webprofiler\Command\BenchmarkData $avg
+   * @param \Drupal\webprofiler\Command\BenchmarkData $median
+   * @param \Drupal\webprofiler\Command\BenchmarkData $percentile95
+   *
+   * @return string
+   */
+  private function generateYaml($gitHash, $runs, $url, BenchmarkData $avg, BenchmarkData $median, BenchmarkData $percentile95) {
+    $yaml = Yaml::dump([
+      'date' => date($this->trans('commands.webprofiler.list.rows.time'), time()),
+      'git_commit' => $gitHash,
+      'number_of_runs' => $runs,
+      'url' => $url,
+      'results' => [
+        'average' => [
+          'time' => sprintf('%.0f ms', $avg->getTime()),
+          'memory' => sprintf('%.1f MB', $avg->getMemory() / 1024 / 1024),
+        ],
+        'median' => [
+          'time' => sprintf('%.0f ms', $median->getTime()),
+          'memory' => sprintf('%.1f MB', $median->getMemory() / 1024 / 1024),
+        ],
+        '95_percentile' => [
+          'time' => sprintf('%.0f ms', $percentile95->getTime()),
+          'memory' => sprintf('%.1f MB', $percentile95->getMemory() / 1024 / 1024),
+        ],
+      ],
+    ]);
+    return $yaml;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Command/BenchmarkData.php b/modules/contrib/devel/webprofiler/src/Command/BenchmarkData.php
new file mode 100644
index 0000000..44fbb7a
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Command/BenchmarkData.php
@@ -0,0 +1,62 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\BenchmarkData.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+/**
+ * Class BenchmarkData
+ */
+class BenchmarkData {
+
+  /**
+   * @var
+   */
+  private $token;
+
+  /**
+   * @var
+   */
+  private $memory;
+
+  /**
+   * @var
+   */
+  private $time;
+
+  /**
+   * @param $token
+   * @param $memory
+   * @param $time
+   */
+  public function __construct($token, $memory, $time) {
+    $this->token = $token;
+    $this->memory = $memory;
+    $this->time = $time;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getToken() {
+    return $this->token;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getMemory() {
+    return $this->memory;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTime() {
+    return $this->time;
+  }
+
+}
\ No newline at end of file
diff --git a/modules/contrib/devel/webprofiler/src/Command/ExportCommand.php b/modules/contrib/devel/webprofiler/src/Command/ExportCommand.php
new file mode 100644
index 0000000..370b86b
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Command/ExportCommand.php
@@ -0,0 +1,156 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\ExportCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use Drupal\Console\Command\ContainerAwareCommand;
+use Drupal\Core\Archiver\ArchiveTar;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\Console\Helper\ProgressBar;
+use Symfony\Component\Console\Input\InputArgument;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+
+/**
+ * Class ExportCommand
+ */
+class ExportCommand extends ContainerAwareCommand {
+
+  /** @var string */
+  private $filename;
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:export')
+      ->setDescription($this->trans('commands.webprofiler.export.description'))
+      ->addArgument('id', InputArgument::OPTIONAL, $this->trans('commands.webprofiler.export.arguments.id'))
+      ->addOption('directory', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.export.options.directory'), '/tmp');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $id = $input->getArgument('id');
+    $directory = $input->getOption('directory');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+
+    try {
+      if ($id) {
+        $this->filename = $this->exportSingle($profiler, $id, $directory);
+      }
+      else {
+        $this->filename = $this->exportAll($profiler, $directory, $output);
+      }
+
+    } catch (\Exception $e) {
+      $output->writeln('<error>' . $e->getMessage() . '</error>');
+    }
+  }
+
+  /**
+   * Exports a single profile.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param int $id
+   * @param string $directory
+   *
+   * @return string
+   *
+   * @throws \Exception
+   */
+  private function exportSingle(Profiler $profiler, $id, $directory) {
+    $profile = $profiler->loadProfile($id);
+    if ($profile) {
+      $data = $profiler->export($profile);
+
+      $filename = $directory . DIRECTORY_SEPARATOR . $id . '.txt';
+      if (file_put_contents($filename, $data) === FALSE) {
+        throw new \Exception(sprintf(
+          $this->trans('commands.webprofiler.export.messages.error_writing'),
+          $filename));
+      }
+    }
+    else {
+      throw new \Exception(sprintf(
+        $this->trans('commands.webprofiler.export.messages.error_no_profile'),
+        $id));
+    }
+
+    return $filename;
+  }
+
+  /**
+   * Exports all stored profiles (cap limit at 1000 items).
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param string $directory
+   * @param \Symfony\Component\Console\Output\OutputInterface $output
+   *
+   * @return string
+   */
+  private function exportAll(Profiler $profiler, $directory, $output) {
+    $filename = $directory . DIRECTORY_SEPARATOR . 'profiles_' . time() . '.tar.gz';
+    $archiver = new ArchiveTar($filename, 'gz');
+    $profiles = $profiler->find(NULL, NULL, 1000, NULL, '', '');
+    $progress = new ProgressBar($output, count($profiles) + 2);
+    $progress->setFormat(' %current%/%max% [%bar%] %percent:3s%% %message%');
+
+    $files = [];
+    $progress->start();
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.exporting'));
+    foreach ($profiles as $profile) {
+      $data = $profiler->export($profiler->loadProfile($profile['token']));
+      $profileFilename = $directory . "/{$profile['token']}.txt";
+      file_put_contents($profileFilename, $data);
+      $files[] = $profileFilename;
+      $progress->advance();
+    }
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.archive'));
+    $archiver->createModify($files, '', $directory);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.delete_tmp'));
+    foreach ($files as $file) {
+      unlink($file);
+    }
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.done'));
+    $progress->finish();
+    $output->writeln('');
+
+    $output->writeln(sprintf(
+      $this->trans('commands.webprofiler.export.messages.exported_count'),
+      count($profiles)));
+
+    return $filename;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+    if (!$this->filename) {
+      return;
+    }
+
+    $completeMessageKey = 'commands.webprofiler.export.messages.success';
+    $completeMessage = sprintf($this->trans($completeMessageKey), $this->filename);
+
+    if ($completeMessage != $completeMessageKey) {
+      parent::showMessage($output, $completeMessage);
+    }
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Command/ListCommand.php b/modules/contrib/devel/webprofiler/src/Command/ListCommand.php
new file mode 100644
index 0000000..af92882
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Command/ListCommand.php
@@ -0,0 +1,78 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\ListCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use Drupal\Console\Command\ContainerAwareCommand;
+use Symfony\Component\Console\Helper\Table;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+
+/**
+ * Class ListCommand
+ */
+class ListCommand extends ContainerAwareCommand {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:list')
+      ->setDescription($this->trans('commands.webprofiler.list.description'))
+      ->addOption('ip', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.ip'), NULL)
+      ->addOption('url', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.url'), NULL)
+      ->addOption('method', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.method'), NULL)
+      ->addOption('limit', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.limit'), 10);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $ip = $input->getOption('ip');
+    $url = $input->getOption('url');
+    $method = $input->getOption('method');
+    $limit = $input->getOption('limit');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+    $profiles = $profiler->find($ip, $url, $limit, $method, '', '');
+
+    $rows = [];
+    foreach ($profiles as $profile) {
+      $row = [];
+
+      $row[] = $profile['token'];
+      $row[] = $profile['ip'];
+      $row[] = $profile['method'];
+      $row[] = $profile['url'];
+      $row[] = date($this->trans('commands.webprofiler.list.rows.time'), $profile['time']);
+
+      $rows[] = $row;
+    }
+
+    $table = new Table($output);
+    $table
+      ->setHeaders([
+        $this->trans('commands.webprofiler.list.header.token'),
+        $this->trans('commands.webprofiler.list.header.ip'),
+        $this->trans('commands.webprofiler.list.header.method'),
+        $this->trans('commands.webprofiler.list.header.url'),
+        $this->trans('commands.webprofiler.list.header.time'),
+      ])
+      ->setRows($rows);
+    $table->render();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Compiler/DecoratorPass.php b/modules/contrib/devel/webprofiler/src/Compiler/DecoratorPass.php
new file mode 100644
index 0000000..6b60b82
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Compiler/DecoratorPass.php
@@ -0,0 +1,38 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\DecoratorPass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Reference;
+
+/**
+ * Class DecoratorPass.
+ */
+class DecoratorPass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    // Builds a decorator around plugin.manager.mail.
+    $definition = $container->findDefinition('plugin.manager.mail');
+    $definition->setPublic(FALSE);
+    $container->setDefinition('webprofiler.debug.plugin.manager.mail.default', $definition);
+    $container->register('plugin.manager.mail', 'Drupal\webprofiler\Mail\MailManagerWrapper')
+      ->addArgument(new Reference('container.namespaces'))
+      ->addArgument(new Reference('cache.discovery'))
+      ->addArgument(new Reference('module_handler'))
+      ->addArgument(new Reference('config.factory'))
+      ->addArgument(new Reference('logger.factory'))
+      ->addArgument(new Reference('string_translation'))
+      ->addArgument(new Reference('webprofiler.debug.plugin.manager.mail.default'))
+      ->addArgument(new Reference('webprofiler.mail'))
+      ->setProperty('_serviceId', 'plugin.manager.mail');
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Compiler/EventPass.php b/modules/contrib/devel/webprofiler/src/Compiler/EventPass.php
new file mode 100644
index 0000000..fbf2f85
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Compiler/EventPass.php
@@ -0,0 +1,35 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\EventPass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Reference;
+
+/**
+ * Class EventPass.
+ */
+class EventPass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    $definition = $container->findDefinition('http_kernel.basic');
+    $definition->replaceArgument(1, new Reference('webprofiler.debug.controller_resolver'));
+
+    // Replace the regular event_dispatcher service with the debug one.
+    $definition = $container->findDefinition('event_dispatcher');
+    $definition->setPublic(FALSE);
+    $container->setDefinition('webprofiler.debug.event_dispatcher.default', $definition);
+    $container->register('event_dispatcher', 'Drupal\webprofiler\TraceableEventDispatcher')
+      ->addArgument(new Reference('webprofiler.debug.event_dispatcher.default'))
+      ->addArgument(new Reference('stopwatch'))
+      ->setProperty('_serviceId', 'event_dispatcher');
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Compiler/ProfilerPass.php b/modules/contrib/devel/webprofiler/src/Compiler/ProfilerPass.php
new file mode 100644
index 0000000..10b8d24
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Compiler/ProfilerPass.php
@@ -0,0 +1,64 @@
+<?php
+
+namespace Drupal\webprofiler\Compiler;
+
+use Drupal\Core\StreamWrapper\PublicStream;
+use Symfony\Component\DependencyInjection\Reference;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+
+/**
+ * Class ProfilerPass
+ */
+class ProfilerPass implements CompilerPassInterface {
+
+  /**
+   * @param \Symfony\Component\DependencyInjection\ContainerBuilder $container
+   *
+   * @throws \InvalidArgumentException
+   */
+  public function process(ContainerBuilder $container) {
+    // configure the profiler service
+    if (FALSE === $container->hasDefinition('profiler')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('profiler');
+
+    $collectors = new \SplPriorityQueue();
+    $order = PHP_INT_MAX;
+    foreach ($container->findTaggedServiceIds('data_collector') as $id => $attributes) {
+      $priority = isset($attributes[0]['priority']) ? $attributes[0]['priority'] : 0;
+      $template = NULL;
+
+      if (isset($attributes[0]['template'])) {
+        if (!isset($attributes[0]['id'])) {
+          throw new \InvalidArgumentException(sprintf('Data collector service "%s" must have an id attribute in order to specify a template', $id));
+        }
+        if (!isset($attributes[0]['title'])) {
+          throw new \InvalidArgumentException(sprintf('Data collector service "%s" must have a title attribute', $id));
+        }
+
+        $template = [
+          $attributes[0]['id'],
+          $attributes[0]['template'],
+          $attributes[0]['title']
+        ];
+      }
+
+      $collectors->insert([$id, $template], [-$priority, --$order]);
+    }
+
+    $templates = [];
+    foreach ($collectors as $collector) {
+      $definition->addMethodCall('add', [new Reference($collector[0])]);
+      $templates[$collector[0]] = $collector[1];
+    }
+
+    $container->setParameter('data_collector.templates', $templates);
+
+    // set parameter to store the public folder path
+    $path = 'file:' . DRUPAL_ROOT . '/' . PublicStream::basePath() . '/profiler';
+    $container->setParameter('data_collector.storage', $path);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Compiler/ServicePass.php b/modules/contrib/devel/webprofiler/src/Compiler/ServicePass.php
new file mode 100644
index 0000000..b1be703
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Compiler/ServicePass.php
@@ -0,0 +1,115 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\ServicePass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+use Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraph;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Definition;
+
+/**
+ * Class ServicePass
+ */
+class ServicePass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    if (FALSE === $container->hasDefinition('webprofiler.services')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('webprofiler.services');
+    $graph = $container->getCompiler()->getServiceReferenceGraph();
+
+    $definition->addMethodCall('setServices', [$this->extractData($container, $graph)]);
+  }
+
+  /**
+   * @param \Symfony\Component\DependencyInjection\ContainerBuilder $container
+   * @param \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraph $graph
+   *
+   * @return array
+   */
+  private function extractData(ContainerBuilder $container, ServiceReferenceGraph $graph) {
+    $data = [];
+
+    foreach ($container->getDefinitions() as $id => $definition) {
+      $inEdges = [];
+      $outEdges = [];
+
+      if ($graph->hasNode($id)) {
+        $node = $graph->getNode($id);
+
+        /** @var \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraphEdge $edge */
+        foreach ($node->getInEdges() as $edge) {
+          /** @var \Symfony\Component\DependencyInjection\Reference $edgeValue */
+          $edgeValue = $edge->getValue();
+
+          $inEdges[] = [
+            'id' => $edge->getSourceNode()->getId(),
+            'invalidBehavior' => $edgeValue ? $edgeValue->getInvalidBehavior() : NULL,
+            'strict' => $edgeValue ? $edgeValue->isStrict() : NULL,
+          ];
+        }
+
+
+        /** @var \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraphEdge $edge */
+        foreach ($node->getOutEdges() as $edge) {
+          /** @var \Symfony\Component\DependencyInjection\Reference $edgeValue */
+          $edgeValue = $edge->getValue();
+
+          $outEdges[] = [
+            'id' => $edge->getDestNode()->getId(),
+            'invalidBehavior' => $edgeValue ? $edgeValue->getInvalidBehavior() : NULL,
+            'strict' => $edgeValue ? $edgeValue->isStrict() : NULL,
+          ];
+        }
+      }
+
+      if ($definition instanceof Definition) {
+        $class = $definition->getClass();
+
+        try {
+          $reflectedClass = new \ReflectionClass($class);
+          $file = $reflectedClass->getFileName();
+        } catch (\ReflectionException $e) {
+          $file = NULL;
+        }
+
+        $tags = $definition->getTags();
+        $public = $definition->isPublic();
+        $synthetic = $definition->isSynthetic();
+      }
+      else {
+        $id = $definition->__toString();
+        $class = NULL;
+        $file = NULL;
+        $tags = [];
+        $public = NULL;
+        $synthetic = NULL;
+      }
+
+      $data[$id] = [
+        'inEdges' => $inEdges,
+        'outEdges' => $outEdges,
+        'value' => [
+          'class' => $class,
+          'file' => $file,
+          'id' => $id,
+          'tags' => $tags,
+          'public' => $public,
+          'synthetic' => $synthetic,
+        ],
+      ];
+    }
+
+    return $data;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Compiler/StoragePass.php b/modules/contrib/devel/webprofiler/src/Compiler/StoragePass.php
new file mode 100644
index 0000000..9d19be5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Compiler/StoragePass.php
@@ -0,0 +1,37 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\StoragePass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Reference;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+
+/**
+ * Class StoragePass
+ */
+class StoragePass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    if (FALSE === $container->hasDefinition('profiler.storage_manager')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('profiler.storage_manager');
+
+    foreach ($container->findTaggedServiceIds('webprofiler_storage') as $id => $attributes) {
+      $definition->addMethodCall('addStorage', [
+        $id,
+        $attributes[0]['title'],
+        new Reference($id)
+      ]);
+    }
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Config/ConfigFactoryWrapper.php b/modules/contrib/devel/webprofiler/src/Config/ConfigFactoryWrapper.php
new file mode 100644
index 0000000..733a304
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Config/ConfigFactoryWrapper.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Config\ConfigFactoryWrapper.
+ */
+
+namespace Drupal\webprofiler\Config;
+
+use Drupal\Core\Config\ConfigFactory;
+use Drupal\webprofiler\DataCollector\ConfigDataCollector;
+
+/**
+ * Wraps a config factory to be able to figure out all used config files.
+ */
+class ConfigFactoryWrapper extends ConfigFactory {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\ConfigDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($name) {
+    $result = parent::get($name);
+    $this->dataCollector->addConfigName($name);
+    return $result;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultiple(array $names) {
+    $result = parent::loadMultiple($names);
+    foreach (array_keys($result) as $name) {
+      $this->dataCollector->addConfigName($name);
+    }
+    return $result;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\DataCollector\ConfigDataCollector $dataCollector
+   */
+  public function setDataCollector(ConfigDataCollector $dataCollector) {
+    $this->dataCollector = $dataCollector;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Controller/DashboardController.php b/modules/contrib/devel/webprofiler/src/Controller/DashboardController.php
new file mode 100644
index 0000000..2b1d93e
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Controller/DashboardController.php
@@ -0,0 +1,243 @@
+<?php
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Datetime\DateFormatter;
+use Drupal\Core\Url;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Profiler\ProfilerStorageManager;
+use Drupal\webprofiler\Profiler\TemplateManager;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\Routing\RouterInterface;
+
+/**
+ * Class DashboardController
+ */
+class DashboardController extends ControllerBase {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Symfony\Cmf\Component\Routing\ChainRouter
+   */
+  private $router;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\TemplateManager
+   */
+  private $templateManager;
+
+  /**
+   * @var \Drupal\Core\Datetime\DateFormatter
+   */
+  private $date;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\ProfilerStorageManager
+   */
+  private $storageManager;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('router'),
+      $container->get('template_manager'),
+      $container->get('date.formatter'),
+      $container->get('profiler.storage_manager')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param \Symfony\Component\Routing\RouterInterface $router
+   * @param \Drupal\webprofiler\Profiler\TemplateManager $templateManager
+   * @param \Drupal\Core\Datetime\DateFormatter $date
+   * @param \Drupal\webprofiler\Profiler\ProfilerStorageManager $storageManager
+   */
+  public function __construct(Profiler $profiler, RouterInterface $router, TemplateManager $templateManager, DateFormatter $date, ProfilerStorageManager $storageManager) {
+    $this->profiler = $profiler;
+    $this->router = $router;
+    $this->templateManager = $templateManager;
+    $this->date = $date;
+    $this->storageManager = $storageManager;
+  }
+
+  /**
+   * Generates the dashboard page.
+   *
+   * @param Profile $profile
+   *
+   * @return array
+   */
+  public function dashboardAction(Profile $profile) {
+    $this->profiler->disable();
+
+    $templateManager = $this->templateManager;
+    $templates = $templateManager->getTemplates($profile);
+
+    $panels = [];
+    $libraries = ['webprofiler/dashboard'];
+    $drupalSettings = [
+      'webprofiler' => [
+        'token' => $profile->getToken(),
+        'ide_link' => $this->config('webprofiler.config')->get('ide_link'),
+        'ide_link_remote' => $this->config('webprofiler.config')->get('ide_link_remote'),
+        'ide_link_local' => $this->config('webprofiler.config')->get('ide_link_local'),
+        'collectors' => [],
+      ],
+    ];
+
+    foreach ($templates as $name => $template) {
+      /** @var DrupalDataCollectorInterface $collector */
+      $collector = $profile->getCollector($name);
+
+      if ($collector->hasPanel()) {
+        $rendered = $template->renderBlock('panel', [
+          'token' => $profile->getToken(),
+          'name' => $name,
+        ]);
+
+        $panels[] = [
+          '#theme' => 'webprofiler_panel',
+          '#panel' => $rendered,
+        ];
+
+        $drupalSettings['webprofiler']['collectors'][] = [
+          'id' => $name,
+          'name' => $name,
+          'label' => $collector->getTitle(),
+          'summary' => $collector->getPanelSummary(),
+          'icon' => $collector->getIcon(),
+        ];
+
+        $libraries = array_merge($libraries, $collector->getLibraries());
+        $drupalSettings['webprofiler'] += $collector->getDrupalSettings();
+      }
+    }
+
+    $build = [];
+    $build['panels'] = [
+      '#theme' => 'webprofiler_dashboard',
+      '#profile' => $profile,
+      '#panels' => $panels,
+      '#spinner_path' => '/' . $this->moduleHandler()
+          ->getModule('webprofiler')
+          ->getPath() . '/images/searching.gif',
+      '#attached' => [
+        'drupalSettings' => $drupalSettings,
+        'library' => $libraries,
+      ],
+    ];
+
+    return $build;
+  }
+
+  /**
+   * Generates the list page.
+   *
+   * @param \Symfony\Component\HttpFoundation\Request $request
+   *
+   * @return array
+   */
+  public function listAction(Request $request) {
+    $limit = $request->get('limit', 10);
+    $this->profiler->disable();
+
+    $ip = $request->query->get('ip');
+    $method = $request->query->get('method');
+    $url = $request->query->get('url');
+
+    $profiles = $this->profiler->find($ip, $url, $limit, $method, '', '');
+
+    $rows = [];
+    if (count($profiles)) {
+      foreach ($profiles as $profile) {
+        $row = [];
+        $row[] = $this->l($profile['token'], new Url('webprofiler.dashboard', ['profile' => $profile['token']]));
+        $row[] = $profile['ip'];
+        $row[] = $profile['method'];
+        $row[] = $profile['url'];
+        $row[] = $this->date->format($profile['time']);
+
+        $rows[] = $row;
+      }
+    }
+    else {
+      $rows[] = [
+        [
+          'data' => $this->t('No profiles found'),
+          'colspan' => 6,
+        ],
+      ];
+    }
+
+    $build = [];
+
+    $storage_id = $this->config('webprofiler.config')->get('storage');
+    $storage = $this->storageManager->getStorage($storage_id);
+
+    $build['resume'] = [
+      '#type' => 'inline_template',
+      '#template' => '<p>{{ message }}</p>',
+      '#context' => [
+        'message' => $this->t('Profiles stored with %storage service.', ['%storage' => $storage['title']]),
+      ],
+    ];
+
+    $build['filters'] = $this->formBuilder()
+      ->getForm('Drupal\\webprofiler\\Form\\ProfilesFilterForm');
+
+    $build['table'] = [
+      '#type' => 'table',
+      '#rows' => $rows,
+      '#header' => [
+        $this->t('Token'),
+        [
+          'data' => $this->t('Ip'),
+          'class' => [RESPONSIVE_PRIORITY_LOW],
+        ],
+        [
+          'data' => $this->t('Method'),
+          'class' => [RESPONSIVE_PRIORITY_LOW],
+        ],
+        $this->t('Url'),
+        [
+          'data' => $this->t('Time'),
+          'class' => [RESPONSIVE_PRIORITY_MEDIUM],
+        ],
+      ],
+      '#sticky' => TRUE,
+    ];
+
+    return $build;
+  }
+
+  /**
+   * Exposes collector's data as JSON.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   * @param $collector
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   */
+  public function restCollectorAction(Profile $profile, $collector) {
+    $this->profiler->disable();
+
+    $data = $profile->getCollector($collector)->getData();
+
+    return new JsonResponse(['data' => $data]);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Controller/DatabaseController.php b/modules/contrib/devel/webprofiler/src/Controller/DatabaseController.php
new file mode 100644
index 0000000..fba3b51
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Controller/DatabaseController.php
@@ -0,0 +1,101 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Controller\DatabaseController.
+ */
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Database\Connection;
+use Drupal\Core\Database\Database;
+use Drupal\webprofiler\DataCollector\DatabaseDataCollector;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\Profiler;
+
+/**
+ * Class DatabaseController
+ */
+class DatabaseController extends ControllerBase {
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Drupal\Core\Database\Connection
+   */
+  private $database;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('database')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profiler $profiler
+   * @param \Drupal\Core\Database\Connection $database
+   */
+  public function __construct(Profiler $profiler, Connection $database) {
+    $this->profiler = $profiler;
+    $this->database = $database;
+  }
+
+  /**
+   * @param Profile $profile
+   * @param int $qid
+   *
+   * @return JsonResponse
+   */
+  public function explainAction(Profile $profile, $qid) {
+    $query = $this->getQuery($profile, $qid);
+
+    $data = [];
+    $result = $this->database->query('EXPLAIN ' . $query['query'], (array) $query['args'])
+      ->fetchAllAssoc('table');
+    $i = 1;
+    foreach ($result as $row) {
+      foreach ($row as $key => $value) {
+        $data[$i][$key] = $value;
+      }
+      $i++;
+    }
+
+    return new JsonResponse(['data' => $data]);
+  }
+
+  /**
+   * @param $profile ->getToken()
+   * @param int $qid
+   *
+   * @return array
+   */
+  private function getQuery(Profile $profile, $qid) {
+    $this->profiler->disable();
+    $token = $profile->getToken();
+
+    if (!$profile = $this->profiler->loadProfile($token)) {
+      throw new NotFoundHttpException($this->t('Token @token does not exist.', ['@token' => $token]));
+    }
+
+    /** @var DatabaseDataCollector $databaseCollector */
+    $databaseCollector = $profile->getCollector('database');
+
+    $queries = $databaseCollector->getQueries();
+    $query = $queries[$qid];
+
+    return $query;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Controller/ToolbarController.php b/modules/contrib/devel/webprofiler/src/Controller/ToolbarController.php
new file mode 100644
index 0000000..de0e240
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Controller/ToolbarController.php
@@ -0,0 +1,108 @@
+<?php
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Component\Serialization\Json;
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Render\RendererInterface;
+use Drupal\webprofiler\Profiler\Profiler;
+use Drupal\webprofiler\Profiler\TemplateManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+
+/**
+ * Class ToolbarController
+ */
+class ToolbarController extends ControllerBase {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\TemplateManager
+   */
+  private $templateManager;
+
+  /**
+   * @var \Drupal\Core\Render\RendererInterface
+   */
+  private $renderer;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('template_manager'),
+      $container->get('renderer')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param \Drupal\webprofiler\Profiler\TemplateManager $templateManager
+   * @param \Drupal\Core\Render\RendererInterface $renderer
+   */
+  public function __construct(Profiler $profiler, TemplateManager $templateManager, RendererInterface $renderer) {
+    $this->profiler = $profiler;
+    $this->templateManager = $templateManager;
+    $this->renderer = $renderer;
+  }
+
+  /**
+   * Generates the toolbar.
+   *
+   * @param Profile $profile
+   *
+   * @return array
+   */
+  public function toolbarAction(Profile $profile) {
+    $this->profiler->disable();
+
+    $templates = $this->templateManager->getTemplates($profile);
+
+    $rendered = '';
+    foreach ($templates as $name => $template) {
+      $rendered .= $template->renderBlock('toolbar', [
+        'collector' => $profile->getcollector($name),
+        'token' => $profile->getToken(),
+        'name' => $name
+      ]);
+    }
+
+    $toolbar = [
+      '#theme' => 'webprofiler_toolbar',
+      '#toolbar' => $rendered,
+      '#token' => $profile->getToken(),
+    ];
+
+    return new Response($this->renderer->render($toolbar));
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   * @param \Symfony\Component\HttpFoundation\Request $request
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   */
+  public function savePerformanceTimingAction(Profile $profile, Request $request) {
+    $this->profiler->disable();
+
+    $data = Json::decode($request->getContent());
+
+    /** @var  $collector */
+    $collector = $profile->getCollector('performance_timing');
+    $collector->setData($data);
+    $this->profiler->updateProfile($profile);
+
+    return new JsonResponse(['success' => TRUE]);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/AssetsDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/AssetsDataCollector.php
new file mode 100644
index 0000000..0d91645
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/AssetsDataCollector.php
@@ -0,0 +1,112 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\AssetsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Component\Utility\NestedArray;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about the used assets (CSS/JS).
+ */
+class AssetsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The app root.
+   *
+   * @var string
+   */
+  protected $root;
+
+  /**
+   * Constructs a AssetDataCollector object.
+   *
+   * @param string $root
+   *   The app root.
+   */
+  public function __construct($root) {
+    $this->root = $root;
+
+    $this->data['js'] = [];
+    $this->data['css'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['assets']['installation_path'] = $this->root . '/';
+  }
+
+  /**
+   * @param $jsAsset
+   */
+  public function addJsAsset($jsAsset) {
+    $this->data['js'] = NestedArray::mergeDeepArray([
+      $jsAsset,
+      $this->data['js']
+    ]);
+  }
+
+  /**
+   * @param $cssAsset
+   */
+  public function addCssAsset($cssAsset) {
+    $this->data['css'] = NestedArray::mergeDeepArray([
+      $cssAsset,
+      $this->data['css']
+    ]);
+  }
+
+  /**
+   * Twig callback to return the amount of CSS files.
+   */
+  public function getCssCount() {
+    return count($this->data['css']);
+  }
+
+  /**
+   * Twig callback to return the amount of JS files.
+   */
+  public function getJsCount() {
+    return count($this->data['js']) - 1;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'assets';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Assets');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => ($this->getCssCount() + $this->getJsCount())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQUE0NEI2NTlCQTkxMUUzQkFDRjg2NUVCQ0NFNTcwQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQUE0NEI2NjlCQTkxMUUzQkFDRjg2NUVCQ0NFNTcwQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFBQTQ0QjYzOUJBOTExRTNCQUNGODY1RUJDQ0U1NzBCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFBQTQ0QjY0OUJBOTExRTNCQUNGODY1RUJDQ0U1NzBCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+C1mVdgAAAktJREFUeNrUlk+I6VEUx48/4SVKpkgiCywkK8ksWVhYSFm9hYXFqxfbt2KnLJS9hbKQhZXtFMVmUrKYkZmslPxLSvnvYZx37+2NTDPP03ss5tTpcu/xued77rm/Hw4iwqWNC1cwzv8CPlJ6lUypfSf+k256Ad8R/0HlL4l/uWCSL5zfO/xTLTkczrvx9aDwU7QUX61Ww/Pz88WAdrv9Oplyzz0UPp8PIpEIzrnWJ6EUJBAI2DgYDOD+/h7EYjFwuadz4X80SUFCoRB6vR6Mx2Mwm82QTqfh4eEBNBoN3NzcgFQqhdVqBbvd7s+ZUlkUJpFIoN1uQyQSAYvFAqlUiq2Xy2VwuVwQCoXAZrNBMpmE6XTK4nk83lsqOX0ki0h2xUajgYFAAJVKJRoMBoxGo9hqtXA4HCKNq1ar+Pj4iMFgEFUqFer1egyHw9jv93GxWDCOyWTCA5RaLBZjd9jhcGCz2cRXKxQKqNVqcTQaHeZKpRLqdDoWf3d3h6QMB+hB/nK5BL/fD4lEAsiPmUSfzwf1eh1qtRoYjUaQy+WQz+eBbAoej4fVN5PJgNVqZfV9J586lUBtMplgLpdDEoyktuj1ejEej7M1p9OJbrcbi8UirtdrNjebzQ6MN/KPfT6f436/Z3XudDp4e3uLlUqFQej37XbL5B7DjqEfthQBAgGzfpTJZJDNZpn0zWbDRgI/eQlOdjGFU1coFIfHGu3Lv90qbrfbXRFpJ4POAVGjh/r09PRCP38l3r3Q62RA/NtV3qb8T/Nn4irQXwIMANMNuV/Q8qbhAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/BlocksDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/BlocksDataCollector.php
new file mode 100644
index 0000000..15c7998
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/BlocksDataCollector.php
@@ -0,0 +1,154 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\BlocksDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\block\Entity\Block;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Entity\EntityDecorator;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class BlocksDataCollector
+ */
+class BlocksDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+
+    $this->data['blocks']['loaded'] = [];
+    $this->data['blocks']['rendered'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $storage = $this->entityManager->getStorage('block');
+
+    $loaded = $this->entityManager->getLoaded('block');
+    $rendered = $this->entityManager->getRendered('block');
+
+    if ($loaded) {
+      $this->data['blocks']['loaded'] = $this->getBlocksData($loaded, $storage);
+
+    }
+
+    if ($rendered) {
+      $this->data['blocks']['rendered'] = $this->getBlocksData($rendered, $storage);
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public function getRenderedBlocks() {
+    return $this->data['blocks']['rendered'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getRenderedBlocksCount() {
+    return count($this->getRenderedBlocks());
+  }
+
+  /**
+   * @return array
+   */
+  public function getLoadedBlocks() {
+    return $this->data['blocks']['loaded'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getLoadedBlocksCount() {
+    return count($this->getLoadedBlocks());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'blocks';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Blocks');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Loaded: @loaded, rendered: @rendered', [
+      '@loaded' => $this->getLoadedBlocksCount(),
+      '@rendered' => $this->getRenderedBlocksCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNDgwMTE3NDA3MjA2ODExOEY2MkNCNjI0NDY3NzkwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQjg5OTA4OEYwQTgxMUUzQkJDRThFQjA5Q0E1REFCRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQjg5OTA4N0YwQTgxMUUzQkJDRThFQjA5Q0E1REFCRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTg3MUZDQ0I0RjY1RTlEM0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz68h+kGAAAAWElEQVR42mL8//8/A7UBEwMNwAg3lAVEODg4UCW2Dhw4wDgapgyMtEj8eCMKFPCkyI1GFCJMiUnQVDUUX0SNllK4wxRf+JAdUeQUfaMRRd+ib4SHKUCAAQAMcyf8vLAstgAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @param $decorator
+   * @param $storage
+   *
+   * @return array
+   */
+  private function getBlocksData(EntityDecorator $decorator, EntityStorageInterface $storage) {
+    $blocks = [];
+
+    /** @var \Drupal\block\BlockInterface $block */
+    foreach ($decorator->getEntities() as $block) {
+      /** @var Block $entity */
+      if ($entity = $storage->load($block->get('id'))) {
+
+        $route = '';
+        if ($entity->hasLinkTemplate('edit-form')) {
+          $route = $entity->urlInfo('edit-form')->toString();
+        }
+
+        $id = $block->get('id');
+        $blocks[$id] = [
+          'id' => $id,
+          'region' => $block->getRegion(),
+          'status' => $block->get('status'),
+          'theme' => $block->getTheme(),
+          'plugin' => $block->get('plugin'),
+          'settings' => $block->get('settings'),
+          'route' => $route,
+        ];
+      }
+    }
+
+    return $blocks;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/CacheDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/CacheDataCollector.php
new file mode 100644
index 0000000..70b63fe
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/CacheDataCollector.php
@@ -0,0 +1,177 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\CacheDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects the used cache bins and cache CIDs.
+ */
+class CacheDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  const WEBPROFILER_CACHE_HIT = 'bin_cids_hit';
+  const WEBPROFILER_CACHE_MISS = 'bin_cids_miss';
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_HIT] = 0;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_MISS] = 0;
+    $this->data['cache'] = [];
+  }
+
+  /**
+   * Registers a cache get on a specific cache bin.
+   *
+   * @param $cache
+   */
+  public function registerCacheHit($bin, $cache) {
+    $current = isset($this->data['cache'][$bin][$cache->cid]) ? $this->data['cache'][$bin][$cache->cid] : NULL;
+
+    if (!$current) {
+      $current = $cache;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT} = 0;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS} = 0;
+      $this->data['cache'][$bin][$cache->cid] = $current;
+    }
+
+    $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT}++;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_HIT]++;
+  }
+
+  /**
+   * Registers a cache get on a specific cache bin.
+   *
+   * @param $bin
+   * @param $cid
+   */
+  public function registerCacheMiss($bin, $cid) {
+    $current = isset($this->data['cache'][$bin][$cid]) ?
+      $this->data['cache'][$bin][$cid] : NULL;
+
+    if (!$current) {
+      $current = new \StdClass();
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT} = 0;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS} = 0;
+      $this->data['cache'][$bin][$cid] = $current;
+    }
+
+    $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS}++;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_MISS]++;
+  }
+
+  /**
+   * Callback to return the total amount of requested cache CIDS.
+   *
+   * @param string $type
+   *
+   * @return int
+   */
+  public function getCacheCidsCount($type) {
+    return $this->data['total'][$type];
+  }
+
+  /**
+   * Callback to return the total amount of hit cache CIDS.
+   *
+   * @return int
+   */
+  public function getCacheHitsCount() {
+    return $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_HIT);
+  }
+
+  /**
+   * Callback to return the total amount of miss cache CIDS.
+   *
+   * @return int
+   */
+  public function getCacheMissesCount() {
+    return $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_MISS);
+  }
+
+  /**
+   * Callback to return the total amount of hit cache CIDs keyed by bin.
+   *
+   * @param $type
+   *
+   * @return array
+   */
+  public function cacheCids($type) {
+    $hits = [];
+    foreach ($this->data['cache'] as $bin => $caches) {
+      $hits[$bin] = 0;
+      foreach ($caches as $cid => $cache) {
+        $hits[$bin] += $cache->{$type};
+      }
+    }
+
+    return $hits;
+  }
+
+  /**
+   * Callback to return hit cache CIDs keyed by bin.
+   *
+   * @return array
+   */
+  public function getCacheHits() {
+    return $this->cacheCids(CacheDataCollector::WEBPROFILER_CACHE_HIT);
+  }
+
+  /**
+   * Callback to return miss cache CIDs keyed by bin.
+   *
+   * @return array
+   */
+  public function getCacheMisses() {
+    return $this->cacheCids(CacheDataCollector::WEBPROFILER_CACHE_MISS);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'cache';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Cache');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Hit: @cache_hit, miss: @cache_miss', [
+      '@cache_hit' => $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_HIT),
+      '@cache_miss' => $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_MISS),
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVEQTkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVEQjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzYxOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzYyOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BsBwAAAAAJtJREFUeNpi/P//PwM1ARMDlcEIMdDBweEZjM0IihSgwEx8Gg4cOJCOrhGHOimqe5kF2QVYvDITl0vQvQwTo4oLkS1gQrPpPwiTEBkY6pnwKJ5JyOskJRvkcMUVxjgjhRhDsUUGSQZu3rwZb1j6+voyjhYOI9VAFmKTBTC3oMsTbyAx+RndAqxejo2NJdmL6HoYR6vRwWcgQIABAOn0PsqqgQzcAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/ConfigDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/ConfigDataCollector.php
new file mode 100644
index 0000000..3ff13a7
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/ConfigDataCollector.php
@@ -0,0 +1,73 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ConfigDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a datacollector to show all requested configs.
+ */
+class ConfigDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   * Registers a new requested config name.
+   *
+   * @param string $name
+   *   The name of the config.
+   */
+  public function addConfigName($name) {
+    $this->data['config_names'][$name] = isset($this->data['config_names'][$name]) ? $this->data['config_names'][$name] + 1 : 1;
+  }
+
+  /**
+   * Callback to display the config names.
+   */
+  public function getConfigNames() {
+    return $this->data['config_names'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Config');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => count($this->getConfigNames())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVFMjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVFMzkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY2NzdBNUUwOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY2NzdBNUUxOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+f0Re8gAAA3RJREFUeNrsVk9ME1kY/82fTqfQf5ROW2gpuKCioHbdEDeBxITdxE08eOHkiQOr8cZhNx7k4MGDmpAQxTtHPBgPXjCbeLDE/XtglSUGGyhxgBYLdNpSOu3MPN+MwUSQP1HUZONv8st7897M9833fb837zGEEHwusPiM+P86AxjmEqVKSfaBGuWvlHgf6cUUb9+65WhsbPzo706n0/j5wgWddgOUK1vSKEnSvjgyEQwGQW1xtBv+4jXjc7kcBgcH981gJpPZ3tmnjoa7NgOSXwYK2U+bRu76y73XLBaLIRQKvXe8paVlZ0c35L2ncWho6K3B/v5+JBIJOJ3Ot+PmfV9fnzWvcyJWpeNQ/O0oH7oILhK7Q4cnKR9RjlEWrCVtF0Xy/alTW5z19PRgbGwMo6OjlmHToekolUpheHgYhYL1Pso2F+a+OQd/cwTftdlRH9QhujPGconJx5/VyRMvpD+IWrxCa5bmeJ6/GolEtjibmppCuVyGz+dDd3e3ZTwajWJgYMAatyJiBcyGf0J7pwcdzQEcbktBnW8Fr3NMXcOSeLRpKSCw2cD0tNgEQ3+0q0DGx8ettre3FyMjI+/MrYhReKMcgpII1jePdZVBWQXcBxJYfOFGzsjjYGsyErYvdkLJnN1V+hMTE1Zrpm+jv4FVxoemhjISyWqsKi68JDWwcSUsPhWQSQBSdA4Lz+vh92j18rRyZs/rbLMjE0WaTSJlsab+h1LqNES7BqLpYB2vIPwYx/zjNqwlDsBR8VaRwlzzrs42FGlGtgWaBiVZjzLngVChNYQBGATas5OoKCvQSB6k4x64uXYGTwyW322dmao01WgqczNEujMRRYSjqhUOhwAbz4Klu4nB8yhyEtZyPEqh36BquSLYzpltBdLV1WWJwmzN6EzZb4aPUZCfVRHyeiA53Qi6XKhzuxGurUFD8Qz8Xga1BQ+y8SNLEKoe8jupcEOJ26HWSGN5VYYiJ3Ei9i14GpaNezOn8gIcjISn/3Sks8n2PyFqDzhd1y/XeL02URQ/4ExhwFOSMbtux0qxgoDHBb+7GiLPG9l8ce2vyYI8nQjHMXn/Fzy+uWzu1Ofpeze32/D29scVgLpjwMEfSrSVUe1PoUK/Yib+N/69+zuy8gJ9apGxzgcfCkLMmjspq3b4qZsH03XKPPP1kLofeC3AAMaxXzYck+ZeAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php
new file mode 100644
index 0000000..bdcf49c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php
@@ -0,0 +1,253 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Database\Connection;
+use Drupal\Core\Database\Database;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class DatabaseDataCollector
+ */
+class DatabaseDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Database\Connection
+   */
+  private $database;
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @param \Drupal\Core\Database\Connection $database
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   */
+  public function __construct(Connection $database, ConfigFactoryInterface $configFactory) {
+    $this->database = $database;
+    $this->configFactory = $configFactory;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $connections = [];
+    foreach (Database::getAllConnectionInfo() as $key => $info) {
+      $database = Database::getConnection('default', $key);
+      $connections[$key] = $database->getLogger()->get('webprofiler');
+    }
+
+    $this->data['connections'] = array_keys($connections);
+
+    $data = [];
+    foreach ($connections as $key => $queries) {
+      foreach ($queries as $query) {
+        // Remove caller args.
+        unset($query['caller']['args']);
+
+        // Remove query args element if empty.
+        if (empty($query['args'])) {
+          unset($query['args']);
+        }
+
+        // Save time in milliseconds.
+        $query['time'] = $query['time'] * 1000;
+        $query['database'] = $key;
+        $data[] = $query;
+      }
+    }
+
+    $querySort = $this->configFactory->get('webprofiler.config')
+      ->get('query_sort');
+    if ('duration' === $querySort) {
+      usort(
+        $data, [
+          "Drupal\\webprofiler\\DataCollector\\DatabaseDataCollector",
+          "orderQueryByTime",
+        ]
+      );
+    }
+
+    $this->data['queries'] = $data;
+
+    $options = $this->database->getConnectionOptions();
+
+    // Remove password for security.
+    unset($options['password']);
+
+    $this->data['database'] = $options;
+  }
+
+  /**
+   * @return array
+   */
+  public function getDatabase() {
+    return $this->data['database'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getQueryCount() {
+    return count($this->data['queries']);
+  }
+
+  /**
+   * @return array
+   */
+  public function getQueries() {
+    return $this->data['queries'];
+  }
+
+  /**
+   * Returns the total execution time.
+   *
+   * @return float
+   */
+  public function getTime() {
+    $time = 0;
+
+    foreach ($this->data['queries'] as $query) {
+      $time += $query['time'];
+    }
+
+    return $time;
+  }
+
+  /**
+   * Returns a color based on the number of executed queries.
+   *
+   * @return string
+   */
+  public function getColorCode() {
+    if ($this->getQueryCount() < 100) {
+      return 'green';
+    }
+    if ($this->getQueryCount() < 200) {
+      return 'yellow';
+    }
+
+    return 'red';
+  }
+
+  /**
+   * Returns the configured query highlight threshold.
+   *
+   * @return int
+   */
+  public function getQueryHighlightThreshold() {
+    // When a profile is loaded from storage this object is deserialized and
+    // no constructor is called so we cannot use dependency injection.
+    return \Drupal::config('webprofiler.config')->get('query_highlight');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'database';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Database');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Executed queries: @count', ['@count' => $this->getQueryCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQRJREFUeNpi/P//PwM1ARMDlcGogZQDlpMnT7pxc3NbA9nhQKxOpL5rQLwJiPeBsI6Ozl+YBOOOHTv+AOllQNwtLS39F2owKYZ/gRq8G4i3ggxEToggWzvc3d2Pk+1lNL4fFAs6ODi8JzdS7mMRVyDVoAMHDsANdAPiOCC+jCQvQKqBQB/BDbwBxK5AHA3E/kB8nKJkA8TMQBwLxaBIKQbi70AvTADSBiSadwFXpCikpKQU8PDwkGTaly9fHFigkaKIJid4584dkiMFFI6jkTJII0WVmpHCAixZQEXWYhDeuXMnyLsVlEQKI45qFBQZ8eRECi4DBaAlDqle/8A48ip6gAADANdQY88Uc0oGAAAAAElFTkSuQmCC';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [
+      'webprofiler/database',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $conn = Database::getConnection();
+    foreach ($data['queries'] as &$query) {
+      $explain = TRUE;
+      $type = 'select';
+
+      if (strpos($query['query'], 'INSERT') !== FALSE) {
+        $explain = FALSE;
+        $type = 'insert';
+      }
+
+      if (strpos($query['query'], 'UPDATE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'update';
+      }
+
+      if (strpos($query['query'], 'CREATE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'create';
+      }
+
+      if (strpos($query['query'], 'DELETE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'delete';
+      }
+
+      $query['explain'] = $explain;
+      $query['type'] = $type;
+
+      $quoted = [];
+      foreach ((array) $query['args'] as $key => $val) {
+        $quoted[$key] = is_null($val) ? 'NULL' : $conn->quote($val);
+      }
+
+      $query['query_args'] = strtr($query['query'], $quoted);
+    }
+
+    $data['query_highlight_threshold'] = $this->getQueryHighlightThreshold();
+
+    return $data;
+  }
+
+  /**
+   * @param $a
+   * @param $b
+   *
+   * @return int
+   */
+  private function orderQueryByTime($a, $b) {
+    $at = $a['time'];
+    $bt = $b['time'];
+
+    if ($at == $bt) {
+      return 0;
+    }
+    return ($at < $bt) ? 1 : -1;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/DevelDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/DevelDataCollector.php
new file mode 100644
index 0000000..ac150c9
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/DevelDataCollector.php
@@ -0,0 +1,110 @@
+<?php
+
+/**
+ * Contains \Drupal\webprofiler\DataCollector\DevelDataCollector;
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Menu\MenuLinkTreeInterface;
+use Drupal\Core\Menu\MenuTreeParameters;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class DevelDataCollector
+ */
+class DevelDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Menu\MenuLinkTreeInterface
+   */
+  private $menuLinkTree;
+
+  /**
+   * @param \Drupal\Core\Menu\MenuLinkTreeInterface $menuLinkTree
+   */
+  public function __construct(MenuLinkTreeInterface $menuLinkTree) {
+    $this->menuLinkTree = $menuLinkTree;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['links'] = $this->develMenuLinks();
+  }
+
+  /**
+   * @return string
+   */
+  public function getLinks() {
+    return $this->data['links'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'devel';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Development');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasPanel() {
+    return FALSE;
+  }
+
+  /**
+   * @return array
+   *    Array containing Devel Menu links
+   */
+  protected function develMenuLinks() {
+    $parameters = new MenuTreeParameters();
+    $parameters->setMaxDepth(1)->onlyEnabledLinks();
+    $tree = $this->menuLinkTree->load('devel', $parameters);
+
+    $manipulators = array(
+      array('callable' => 'menu.default_tree_manipulators:checkAccess'),
+      array('callable' => 'menu.default_tree_manipulators:generateIndexAndSort'),
+    );
+    $tree = $this->menuLinkTree->transform($tree, $manipulators);
+
+    $links = array();
+
+    foreach ($tree as $item) {
+      if ($item->access->isAllowed()) {
+        $links[] = array(
+          'title' => $item->link->getTitle(),
+          'description' => $item->link->getDescription(),
+          'url' => $item->link->getUrlObject()->toString(),
+        );
+      }
+    }
+
+    return $links;
+  }
+
+  /**
+   * Returns the collector icon in base64 format.
+   *
+   * @return string
+   *   The collector icon.
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABYAAAAcCAYAAABlL09dAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RTdCREU2NUVFQUUxMUU1QTc4Q0Q0OEU5RUY0N0YwMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RTdCREU2NkVFQUUxMUU1QTc4Q0Q0OEU5RUY0N0YwMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZFN0JERTYzRUVBRTExRTVBNzhDRDQ4RTlFRjQ3RjAzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZFN0JERTY0RUVBRTExRTVBNzhDRDQ4RTlFRjQ3RjAzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6sNOKAAAAPVJREFUeNpi/P//PwMtABMDjcCowbQ3mNHe3h6XnBUQTwJiTRzy14E4+8CBAyexSbLgsZQbiI2BOBCH/HqoGgZSDYaBDXjk/uMzuBaLzeVI7FV4DN7n4OAAojvRxL+CwvgnkMFG5bj7BUoVv4lUfBWIrxGp9jcoKM4DsQABhZ+A2BPqs61AzEVA/XuQwT1AzElA4Q8g/gJN951EBN13kMFLgJiHgMJvQCwNxOxAvJwIg7+wEBnGv4D4M1TtLyIMBocxMQUyKExnAzEzEHMQof4/C5GxDHJh4qAp3VhpYC4rKCieAbEQlQ1+yzhamY4aTD+DAQIMAFv+MFaJEyYhAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollector.php
new file mode 100644
index 0000000..10b8998
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollector.php
@@ -0,0 +1,131 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal;
+use Drupal\Core\Routing\RedirectDestinationInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+use Symfony\Component\Process\Exception\ProcessFailedException;
+use Symfony\Component\Process\Process;
+
+/**
+ * Class DrupalDataCollector
+ */
+class DrupalDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Routing\RedirectDestinationInterface
+   */
+  private $redirectDestination;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  private $urlGenerator;
+
+  /**
+   * @param \Drupal\Core\Routing\RedirectDestinationInterface $redirectDestination
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   */
+  public function __construct(RedirectDestinationInterface $redirectDestination, UrlGeneratorInterface $urlGenerator) {
+    $this->redirectDestination = $redirectDestination;
+    $this->urlGenerator = $urlGenerator;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['version'] = Drupal::VERSION;
+    $this->data['profile'] = drupal_get_profile();
+    $this->data['config_url'] = (new Drupal\Core\Url('webprofiler.settings', [], ['query' => $this->redirectDestination->getAsArray()]))->toString();
+
+    try {
+      $process = new Process("git log -1 --pretty=format:'%H - %s (%ci)' --abbrev-commit");
+      $process->setTimeout(3600);
+      $process->mustRun();
+      $this->data['git_commit'] = $process->getOutput();
+
+      $process = new Process("git log -1 --pretty=format:'%h' --abbrev-commit");
+      $process->setTimeout(3600);
+      $process->mustRun();
+      $this->data['abbr_git_commit'] = $process->getOutput();
+    } catch (ProcessFailedException $e) {
+      $this->data['git_commit'] = $this->data['git_commit_abbr'] = NULL;
+    }
+  }
+
+  /**
+   * @return string
+   */
+  public function getVersion() {
+    return $this->data['version'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getProfile() {
+    return $this->data['profile'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getConfigUrl() {
+    return $this->data['config_url'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getGitCommit() {
+    return $this->data['git_commit'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getAbbrGitCommit() {
+    return $this->data['abbr_git_commit'];
+  }
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string The collector name
+   *
+   * @api
+   */
+  public function getName() {
+    return 'drupal';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Drupal');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasPanel() {
+    return FALSE;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCRDU5MUVDNzVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCRDU5MUVDODVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJENTkxRUM1NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJENTkxRUM2NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iYsuIgAAAiNJREFUeNq8lj3KwkAQhhOxUPAnoIgWQiysbFLYG2/gEVJaegQ9QfQECh4g3kA9QbxBLMQ2KaxE2G/ffG5Yl/ytiguDJBn32Z15d2dUQojy0wGgDHQwGFjj8Vh7hxFyZIHNZtOt1+uuDPRtYK/Xs4rFIpyJDFQaiIm73a7NYMyq1arf7/dnWWApIN3VHBPzINHwHX5J4FxAKg6j0Wh4aSDREGb8TxqIXJVKJSIDY1Yul30RmgqE87swHkrDq2cCkYNareZ9AmPWarX2mUAk/hswZrgkUoGyIsm7y1ggDachnrNPrVKpEKSJBxZYnC+Xi/l4PL56T99uN/y8KDYCUpj2i2JRzONkWZYyGo0UXdeV4/GobDYb5Xw+J/obxv+mTqdT8rWTpND1ek3ihm3bRNO0F188O44T+UwmE+TQjBXNcDiciLD5fE7Shuu6xDTN0JdGgfi+//J9v98nA6EmqIoHYsJPxuFwIOKxiERDVxNQ4I4PNw1Ram6DIFAWiwUWG5uv+/2+E98V+IdOp7OiZzF6pitMhC2XyxDEfOKg1+t1ldnTtNtthxcB8sAGcgQRUbWGufM8LxQPfJBv3n+73Tq5qgVyibqWdYsASOUfLYyJJ679yKyHadDZbBYqkn8HMHaO3ydMl674rI8RayOACKUo/+l0SuAf12ZI9TRYLSZCJYk76GgbnyA9TxOlMpiqqrnuQhxk7igd8raJbKi/bvX/BBgANANSieJk+XMAAAAASUVORK5CYII=';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php b/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php
new file mode 100644
index 0000000..98a3faf
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php
@@ -0,0 +1,115 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+/**
+ * Class DrupalDataCollectorTrait
+ */
+trait DrupalDataCollectorTrait {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasPanel() {
+    return TRUE;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDrupalSettings() {
+    return [];
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getData() {
+    return $this->data;
+  }
+
+  /**
+   * @param $class
+   * @param $method
+   *
+   * @return array
+   *
+   * @throws \ReflectionException
+   */
+  public function getMethodData($class, $method) {
+    $class = is_object($class) ? get_class($class) : $class;
+    $data = [];
+
+    try {
+      $reflectedMethod = new \ReflectionMethod($class, $method);
+
+      $data = [
+        'class' => $class,
+        'method' => $method,
+        'file' => $reflectedMethod->getFilename(),
+        'line' => $reflectedMethod->getStartLine(),
+      ];
+    } catch (\ReflectionException $re) {
+      // TODO: handle the exception.
+    } finally {
+      return $data;
+    }
+  }
+
+  /**
+   * @param $value
+   *
+   * @return int|string
+   */
+  private function convertToBytes($value) {
+    if ('-1' === $value) {
+      return -1;
+    }
+
+    $value = strtolower($value);
+    $max = strtolower(ltrim($value, '+'));
+    if (0 === strpos($max, '0x')) {
+      $max = intval($max, 16);
+    }
+    elseif (0 === strpos($max, '0')) {
+      $max = intval($max, 8);
+    }
+    else {
+      $max = intval($max);
+    }
+
+    switch (substr($value, -1)) {
+      case 't':
+        $max *= 1024;
+        break;
+
+      case 'g':
+        $max *= 1024;
+        break;
+
+      case 'm':
+        $max *= 1024;
+        break;
+
+      case 'k':
+        $max *= 1024;
+        break;
+    }
+
+    return $max;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/EventsDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/EventsDataCollector.php
new file mode 100644
index 0000000..75d528f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/EventsDataCollector.php
@@ -0,0 +1,96 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\EventsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\EventDispatcher\EventDispatcherInterface;
+use Symfony\Component\HttpKernel\DataCollector\EventDataCollector as BaseEventDataCollector;
+
+/**
+ * Class EventsDataCollector
+ */
+class EventsDataCollector extends BaseEventDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @return int
+   */
+  public function getCalledListenersCount() {
+    return count($this->getCalledListeners());
+  }
+
+  /**
+   * @return int
+   */
+  public function getNotCalledListenersCount() {
+    return count($this->getNotCalledListeners());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setCalledListeners(array $listeners) {
+    $listeners = $this->computePriority($listeners);
+    $this->data['called_listeners'] = $listeners;
+  }
+
+  /**
+   * Adds the priority value to the $listeners array.
+   *
+   * @param array $listeners
+   * @return array
+   */
+  private function computePriority(array $listeners) {
+    foreach ($listeners as &$listener) {
+      foreach ($listener['class']::getSubscribedEvents() as $event => $methods) {
+
+        if (is_string($methods)) {
+          $methods = [[$methods], 0];
+        }
+        else {
+          if (is_string($methods[0])) {
+            $methods = [$methods];
+          }
+        }
+
+        foreach ($methods as $method) {
+          if ($listener['event'] === $event) {
+            if ($listener['method'] === $method[0]) {
+              $listener['priority'] = isset($method[1]) ? $method[1] : 0;
+            }
+          }
+        }
+      }
+    }
+
+    return $listeners;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Events');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Called listeners: @listeners', ['@listeners' => count($this->getCalledListeners())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABFJJREFUeNrkVVlIY2cY/RMTE81NMkkajUs1OBqkiVsjjAtStGrtSGyFjOjAQNVCKRb66ot9KrjgQx+FUgTBKkURbIfighWl4r6h44pajcZEo3ESTeKS9PzB2AyNZaD1qRcOem+S83/f+c53Lsvj8ZD/+mKTB7gehJTj+2d9fZ1MTk6S0NBQSW9vb97e3t7jmpqaXzIzM185HA7vd4KDg8nGxoaysbGxVCwWm/V6/aDL5TKlpKSQpKSkv5NyuVxyc3Mj7e7u/jw2NjYxJyfnMDIykmGz2UQgEBAWi0XcbjeRSqWhZWVl4v39fXVXV5cqNzf3exxmCNj+9fU1MzQ09JVWq32sUqmMu7u7QhwiDwoKIoeHh2R7e5twOByCwcrQhUShUJjz8vJkw8PDX5+fn8sDkvb3938YHR39rlAoNBoMBgGqtWxubnJRKbu9vZ20trZSQoJnvKioKMvZ2Rn/6urKmpqayvT19ekCks7NzaUnJyeboK0kPj7+cGZmJprH4zGnp6duEBFUTg4ODqjmIfPz87GQxoRnori4ODOKUPuTsnw+RRvPGIYJMZvNDNplYmJiLvPz839oamoSj4yMfAJNuRqN5mV9ff0fOPDF1NSUAt85lclkDkjnys7O/vGOlZLeQgjIgUggnmqHqmMqKip+z8jI8MAFnpKSkpXZ2dn38JkIUAFRQNjt/R2Xv09twBFwAGwClunp6efLy8tZdFgUW1tbiaOjo1/is9fUhcA+YL69fzvzSyQSEQZHfBJBT4J2Bf9qo9Rq9bxcLndeXl4STJrA8B4Mc/atN4pesAk5OTkh1PB0exYXF/kWi4UTFhZG+Hw+wZQJ5BDR7fEPIroYASu9uLggJpOJYO2I0+kkqI47Njb2MdzAKS4uXisvL5/FurIGBgaeYoDS1dVVsrKyQpaWlghsF7hS2IJERER4T4U/qckT4ccP6BYplco+rOcxqn0fZFqj0fgkLS3tV18m0EICktJV9F101xcWFj5Cu+HQ1YGNoeSXWGErpv8IwVOSlZXVh7xw0zy4V1MY3/uXWgetMzB8EZUHw7lKSEjgQ0MONLei2kcTExN5R0dHMehshw7x3umLRKI7YDhaDOSJ18hstq2qquobLMG30DKYkuzs7KggTa5Pf4p/rJReSCud1WplEBYuSMGrra39FG1ywsPDgwsLC+0YFoMAKi0qKupA5c57K0V1XjsdHx+/g6mXUksVFBS8wmF23FeMj48/w7PXiLsxePcG65qPDNCsra15XRCQFNP1AgRPMaA4aOvp6OjQ2O12cVtb20vE389YAHFLS0sO2vbYbLYQHKRHShEEy5ul+kIAe02Q5vy6urouTNyDV8VNT0/PBGzzxW1wRIHsM7T+W3V1tROvEE9lZeUCKlVgSfyD6S9SGsKdnZ1pOp3OkJ6efj04OPgTnmsAlv8PACXa/Q4L4UByuZqbm/UNDQ1vkLL+3+/9ByH9U4ABADscgvUMKuLiAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php
new file mode 100644
index 0000000..30087ff
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php
@@ -0,0 +1,161 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ExtensionDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Extension\ThemeHandlerInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Defines a data collector for the extension system.
+ */
+class ExtensionDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * The theme handler.
+   *
+   * @var \Drupal\Core\Extension\ThemeHandlerInterface
+   */
+  protected $themeHandler;
+
+  /**
+   * The app root.
+   *
+   * @var string
+   */
+  protected $root;
+
+  /**
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   * @param \Drupal\Core\Extension\ThemeHandlerInterface $theme_handler
+   *   The theme handler.
+   * @param string $root
+   *   The app root.
+   */
+  public function __construct(ModuleHandlerInterface $module_handler, ThemeHandlerInterface $theme_handler, $root) {
+    $this->moduleHandler = $module_handler;
+    $this->themeHandler = $theme_handler;
+    $this->root = $root;
+
+    $this->data['drupal_extension']['modules'] = [];
+    $this->data['drupal_extension']['themes'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $modules = $this->moduleHandler->getModuleList();
+    $themes = $this->themeHandler->listInfo();
+
+    $this->data['drupal_extension']['count'] = count($modules) + count($themes);
+    $this->data['drupal_extension']['modules'] = $modules;
+    $this->data['drupal_extension']['themes'] = $themes;
+    $this->data['drupal_extension']['installation_path'] = $this->root . '/';
+  }
+
+  /**
+   * Returns the total number of active extensions.
+   *
+   * @return int
+   */
+  public function getExtensionsCount() {
+    return isset($this->data['drupal_extension']['count']) ? $this->data['drupal_extension']['count'] : 0;
+  }
+
+  /**
+   * Returns the total number of active modules.
+   *
+   * @return int
+   */
+  public function getModulesCount() {
+    return count($this->data['drupal_extension']['modules']);
+  }
+
+  /**
+   * Returns the total number of active themes.
+   *
+   * @return int
+   */
+  public function getThemesCount() {
+    return count($this->data['drupal_extension']['themes']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'drupal_extension';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Extensions');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @extensions', ['@extensions' => $this->getExtensionsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RkE1QUM1RjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RkE1QUM2MDkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzVEOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzVFOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7LqYtwAAAUBJREFUeNpi/P//PwM1ARMDlcGogYPQQBYQ4eDgQIza/SClQNwIxA3okgcOHCDZhRVAfA6I64F4EjW8fBLqwn1AnAvE8aQaqAc1QAZJ7DMQRwPxayDuAGIBYgwUAeL1QHwWGm6XgLgUSf4FEPcAsQQQ+xBjICh8AmARBgSCQNwFxEFIatYCMagQcEHXzGhvb09s6bAdiL2gbHYg/oEm/x8Y00ykRAofEvsvzlgGmsoIpIWBWBaIlYD4Bg61B5DY/ED8HRrjIH2yINchh+E7IH4CxPeBuAAam8jgBBD3IfEtgZgTiPdC9T1BySloYCcQ20DTmTg0tuegWVICjZSNWLMeFgBKKsU45EDi9kA8H4ivEmsgNsAKxEXQBH0TiMtwFg5EgvnQXHIFmibfUGrgeaghTdBIxAoYR2u9EWAgQIABAKKeRzEX0gXIAAAAAElFTkSuQmCC';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    // Copy protected properties over public ones to
+    // let json_encode to find them.
+    $this->copyToPublic($data['drupal_extension']['modules']);
+    $this->copyToPublic($data['drupal_extension']['themes']);
+
+    return $data;
+  }
+
+  /**
+   * Copies protected properties to public ones.
+   *
+   * @param \Drupal\Core\Extension\Extension[] $extensions
+   */
+  private function copyToPublic($extensions) {
+    foreach ($extensions as &$extension) {
+      $extension->public_type = $extension->getType();
+      $extension->public_name = $extension->getName();
+      $extension->public_path = $extension->getPath();
+      $extension->public_pathname = $extension->getPathname();
+      $extension->public_filename = $extension->getFilename();
+      $extension->public_extension_pathname = $extension->getExtensionPathname();
+      $extension->public_extension_filename = $extension->getExtensionFilename();
+    }
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/FormsDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/FormsDataCollector.php
new file mode 100644
index 0000000..79f6332
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/FormsDataCollector.php
@@ -0,0 +1,81 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Form\FormBuilderWrapper;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class FormsDataCollector
+ */
+class FormsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\webprofiler\Form\FormBuilderWrapper
+   */
+  private $formBuilder;
+
+  /**
+   * @param \Drupal\webprofiler\Form\FormBuilderWrapper $formBuilder
+   */
+  public function __construct(FormBuilderWrapper $formBuilder) {
+    $this->formBuilder = $formBuilder;
+
+    $this->data['forms'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['forms'] = $this->formBuilder->getBuildForm();
+  }
+
+  /**
+   * @return array
+   */
+  public function getForms() {
+    return $this->data['forms'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getFormsCount() {
+    return count($this->getForms());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'forms';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Forms');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Rendered: @forms', ['@forms' => $this->getFormsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RkE1QUM1QjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RkE1QUM1QzkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzU5OTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzVBOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+I7130QAAAKRJREFUeNrsVVsKxCAMzIgH8897eDHxGP55LX+0RmjpYxHdyrLsNl9iknEyExA5Z5oZgibH9wPKVlJrnVNKRwZCkPceQ4AhhOpUjJFaeaXUBRjssrW2FvDZGINS2GV9AQb3rpvCvZWhc24rKpdDmp17P2MKjzIFEAD16vdDi73Xbx2/pelZItnz6oiusneB32b4is0Iw8eUfzBlOiCef/l2LAIMAGACWQCJ5bXFAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/HttpDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/HttpDataCollector.php
new file mode 100644
index 0000000..c82e209
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/HttpDataCollector.php
@@ -0,0 +1,175 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\HttpDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\Http\HttpClientMiddleware;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use GuzzleHttp\TransferStats;
+use Psr\Log\LogLevel;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about http calls during request.
+ */
+class HttpDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \GuzzleHttp\Client
+   */
+  private $middleware;
+
+  /**
+   * @param \Drupal\webprofiler\Http\HttpClientMiddleware $middleware
+   */
+  public function __construct(HttpClientMiddleware $middleware) {
+    $this->middleware = $middleware;
+
+    $this->data['completed'] = [];
+    $this->data['failed'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $completed = $this->middleware->getCompletedRequests();
+    $failed = $this->middleware->getFailedRequests();
+
+    foreach ($completed as $data) {
+      /** @var \GuzzleHttp\Psr7\Request $request */
+      $request = $data['request'];
+      /** @var \GuzzleHttp\Psr7\Response $response */
+      $response = $data['response'];
+      /** @var \GuzzleHttp\TransferStats $stats */
+      $stats = $request->stats;
+
+      $uri = $request->getUri();
+      $this->data['completed'][] = [
+        'request' => [
+          'method' => $request->getMethod(),
+          'uri' => [
+            'schema' => $uri->getScheme(),
+            'host' => $uri->getHost(),
+            'port' => $uri->getPort(),
+            'path' => $uri->getPath(),
+            'query' => $uri->getQuery(),
+            'fragment' => $uri->getFragment(),
+          ],
+          'headers' => $request->getHeaders(),
+          'protocol' => $request->getProtocolVersion(),
+          'request_target' => $request->getRequestTarget(),
+          'stats' => [
+            'transferTime' => $stats->getTransferTime(),
+            'handlerStats' => $stats->getHandlerStats()
+          ],
+        ],
+        'response' => [
+          'phrase' => $response->getReasonPhrase(),
+          'status' => $response->getStatusCode(),
+          'headers' => $response->getHeaders(),
+          'protocol' => $response->getProtocolVersion(),
+        ]
+      ];
+    }
+
+    foreach ($failed as $data) {
+      /** @var \GuzzleHttp\Psr7\Request $request */
+      $request = $data['request'];
+      /** @var \GuzzleHttp\Psr7\Response $response */
+      $response = $data['response'];
+
+      $uri = $request->getUri();
+      $this->data['failed'][] = [
+        'request' => [
+          'method' => $request->getMethod(),
+          'uri' => [
+            'schema' => $uri->getScheme(),
+            'host' => $uri->getHost(),
+            'port' => $uri->getPort(),
+            'path' => $uri->getPath(),
+            'query' => $uri->getQuery(),
+            'fragment' => $uri->getFragment(),
+          ],
+          'headers' => $request->getHeaders(),
+          'protocol' => $request->getProtocolVersion(),
+          'request_target' => $request->getRequestTarget(),
+        ],
+        'response' => [
+          'phrase' => $response->getReasonPhrase(),
+          'status' => $response->getStatusCode(),
+          'headers' => $response->getHeaders(),
+          'protocol' => $response->getProtocolVersion(),
+        ]
+      ];
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getCompletedRequestsCount() {
+    return count($this->getCompletedRequests());
+  }
+
+  /**
+   * @return array
+   */
+  public function getCompletedRequests() {
+    return $this->data['completed'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getFailedRequestsCount() {
+    return count($this->getFailedRequests());
+  }
+
+  /**
+   * @return array
+   */
+  public function getFailedRequests() {
+    return $this->data['failed'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'http';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Http');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Completed @completed, error @error', [
+      '@completed' => $this->getCompletedRequestsCount(),
+      '@error' => $this->getFailedRequestsCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATlJREFUeNrsleERgjAMha0TdISOwAZ2BEZghI7ABo7AOQFuwAjoBLgBblBbfb0LudByp/4jdw+PNnxtkqYq7/3h13Y8/MF26B9spfo6yAX1QSa6EY2Y0xLrzROgddAMOcgLmuFbhDqyG00W8Rm1JWgEWCG0oQBuJKjGigNUs/xWUJdJheZQJzhZFGkgKWkw1mM8bmTCvOPQcSVXrTA+Ydc0kujXJGg6p5VwrG5BJzb2CLriN9kT74afUylPloQ+kdDPELXpg1qGvwbtURwjFGkkC8RIZw6d2QeO7MII81wRbDm0Z068Zf0G1bxQl8z1UH1zoQwk9NRZdkPoHt+KbZoqa+HYZS4T3iimdEvRDrIF4KIRclBNjk+uSB2/eBJUvR9KSek26BZHOit2zl3oqkV91P6//3N7CTAAIIc/qj2gy4gAAAAASUVORK5CYII=';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/MailDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/MailDataCollector.php
new file mode 100644
index 0000000..7955150
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/MailDataCollector.php
@@ -0,0 +1,99 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Mail\MailInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class MailDataCollector
+ */
+class MailDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var
+   */
+  private $messages;
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->messages = [];
+  }
+
+  /**
+   * Collects data for the given Request and Response.
+   *
+   * @param Request $request A Request instance
+   * @param Response $response A Response instance
+   * @param \Exception $exception An Exception instance
+   *
+   * @api
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['mail'] = $this->messages;
+  }
+
+  /**
+   * @param $message
+   * @param \Drupal\Core\Mail\MailInterface $mail
+   */
+  public function addMessage($message, MailInterface $mail) {
+    $class = get_class($mail);
+    $method = $this->getMethodData($class, 'mail');
+
+    $this->messages[] = [
+      'message' => $message,
+      'method' => $method,
+    ];
+  }
+
+  /**
+   * @return int
+   */
+  public function getMailSent() {
+    return count($this->data['mail']);
+  }
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string The collector name
+   *
+   * @api
+   */
+  public function getName() {
+    return 'mail';
+  }
+
+  /**
+   * Returns the datacollector title.
+   *
+   * @return string
+   *   The datacollector title.
+   */
+  public function getTitle() {
+    return $this->t('Mail');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => $this->getMailSent()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABcAAAAcCAYAAACK7SRjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0NEOTU1MjM0OThFMTFFMDg3NzJBNTE2ODgwQzMxMzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0NEOTU1MjQ0OThFMTFFMDg3NzJBNTE2ODgwQzMxMzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMEQ5OTQ5QzQ5OEMxMUUwODc3MkE1MTY4ODBDMzEzNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3Q0Q5NTUyMjQ5OEUxMUUwODc3MkE1MTY4ODBDMzEzNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpkRnSAAAAJ0SURBVHjaYvz//z8DrQATAw3BqOFYAaO9vT1FBhw4cGCAXA5MipxBQUHT3r17l0AVAxkZ/wkLC89as2ZNIcjlYkALXKnlWqBZTH/+/PEDmQsynLW/v3+NoaHhN2oYDjJn8uTJK4BMNpDhPwsLCwOKiop2+fn5vafEYC8vrw8gc/Lz8wOB3B8gw/nev38vn5WV5eTg4LA/Ly/vESsrK2npmYmJITU19SnQ8L0gc4DxpwgyF2S4EEjB58+f+crLy31YWFjOt7S0XBYUFPxHjMEcHBz/6+rqboqJiZ0qKSnxBpkDlRICGc4MU/j792+2CRMm+L18+fLSxIkTDykoKPzBZ7CoqOi/np6eE8rKylvb29v9fvz4wYEkzYKRzjk5OX/LyMjcnDRpEkjjdisrK6wRraOj8wvokAMLFy788ejRoxcaGhrPCWai4ODgB8DUE3/mzBknYMToASNoMzAfvEVW4+Tk9LmhoWFbTU2NwunTpx2BjiiMjo6+hm4WCzJHUlLyz+vXrxkfP36sDOI/ffpUPikpibe7u3sLsJjQW7VqlSrQxe+Avjmanp7u9PbtWzGQOmCCkARmmu/m5uYfT548yY/V5UpKSl+2b9+uiiz26dMnIWBSDTp27NgdYGrYCIzwE7m5uR4wg2Hg/PnzSsDI/QlKOcjZ3wGUBLm5uf+DwLdv38gub4AG/xcSEvr35s0bZmCB5sgCE/z69SsjyDJKMtG/f/8YQQYD8wkoGf8H51AbG5sH1CpbQBnQ09PzBiiHgoIFFHlBQGwLxLxUMP8dqJgH4k3gIhfIkAKVYkDMTmmhCHIxEL8A4peMo02L4WU4QIABANxZAoDIQDv3AAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php
new file mode 100644
index 0000000..af3947c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php
@@ -0,0 +1,88 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\PerformanceTimingDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\Frontend\PerformanceTimingData;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about frontend performance.
+ */
+class PerformanceTimingDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+
+  }
+
+  /**
+   * @param $data
+   */
+  public function setData($data) {
+    $this->data['performance'] = $data;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'performance_timing';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Performance Timing');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    if (isset($this->data['performance'])) {
+      $performanceData = new PerformanceTimingData($this->data['performance']);
+      return $this->t('TTFB: @ttfb', ['@ttfb' => sprintf('%.0f ms', $performanceData->getTtfbTiming())]);
+    }
+
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpi/P//PwO1ARMDDcCooUPEUEYi1AgAcQIQ+0P5H4B4IxAvwKaYmCSqAMT7gbgBajhMrB8qLkCsoQFQQ0CuOw/EBjgsLIAajmEouvdBhukD8UQgdkASwwXuA7EhNEhwuvQ8iXHSj2Q53FBY7BtADVxIoqEfoQYnYJPEF3bEROZ6WDDBvO+ALcCxJCsBAmpA4SuA7P2PBDQUEOGTDTA1TNCYs6dCRgIlxQswQ0GMB0A8nwgv4gqa+VCXgpMWC1QiEerF9WgaDmJJp/OhkUNIHUHQgJ4ecQHkiMKXXALQIowqpdR8pJi/AA0qvC4lFsyHYqK8zzhaRQ8NQwECDABNaU12xhTp2QAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    if (isset($this->data['performance'])) {
+      $performanceData = new PerformanceTimingData($this->data['performance']);
+      $data['performance']['computed']['DNS lookup time'] = $performanceData->getDNSTiming();
+      $data['performance']['computed']['TCP handshake time'] = $performanceData->getTCPTiming();
+      $data['performance']['computed']['Time to first byte'] = $performanceData->getTtfbTiming();
+      $data['performance']['computed']['Data download time'] = $performanceData->getDataTiming();
+      $data['performance']['computed']['DOM building time'] = $performanceData->getDomTiming();
+    }
+
+    return $data;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php
new file mode 100644
index 0000000..d959a48
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php
@@ -0,0 +1,163 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Routing\LinkGeneratorTrait;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+
+/**
+ * Provides a data collector to collect all kind of php information.
+ */
+class PhpConfigDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait, LinkGeneratorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data = [
+      'token' => $response->headers->get('X-Debug-Token'),
+      'php_version' => PHP_VERSION,
+      'xdebug_enabled' => extension_loaded('xdebug'),
+      'xhprof_enabled' => extension_loaded('xhprof'),
+      'eaccel_enabled' => extension_loaded('eaccelerator') && ini_get('eaccelerator.enable'),
+      'apc_enabled' => extension_loaded('apc') && ini_get('apc.enabled'),
+      'xcache_enabled' => extension_loaded('xcache') && ini_get('xcache.cacher'),
+      'wincache_enabled' => extension_loaded('wincache') && ini_get('wincache.ocenabled'),
+      'zend_opcache_enabled' => extension_loaded('Zend OPcache') && ini_get('opcache.enable'),
+      'sapi_name' => php_sapi_name()
+    ];
+  }
+
+  /**
+   * Gets the token.
+   *
+   * @return string The token
+   */
+  public function getToken() {
+    return $this->data['token'];
+  }
+
+  /**
+   * Gets the PHP version.
+   *
+   * @return string The PHP version
+   */
+  public function getPhpVersion() {
+    return $this->data['php_version'];
+  }
+
+  /**
+   * Returns true if the XDebug is enabled.
+   *
+   * @return Boolean true if XDebug is enabled, false otherwise
+   */
+  public function hasXDebug() {
+    return $this->data['xdebug_enabled'];
+  }
+
+  /**
+   * Returns true if the XHProf is enabled.
+   *
+   * @return Boolean true if XHProf is enabled, false otherwise
+   */
+  public function hasXHProf() {
+    return $this->data['xhprof_enabled'];
+  }
+
+  /**
+   * Returns true if EAccelerator is enabled.
+   *
+   * @return Boolean true if EAccelerator is enabled, false otherwise
+   */
+  public function hasEAccelerator() {
+    return $this->data['eaccel_enabled'];
+  }
+
+  /**
+   * Returns true if APC is enabled.
+   *
+   * @return Boolean true if APC is enabled, false otherwise
+   */
+  public function hasApc() {
+    return $this->data['apc_enabled'];
+  }
+
+  /**
+   * Returns true if Zend OPcache is enabled
+   *
+   * @return Boolean true if Zend OPcache is enabled, false otherwise
+   */
+  public function hasZendOpcache() {
+    return $this->data['zend_opcache_enabled'];
+  }
+
+  /**
+   * Returns true if XCache is enabled.
+   *
+   * @return Boolean true if XCache is enabled, false otherwise
+   */
+  public function hasXCache() {
+    return $this->data['xcache_enabled'];
+  }
+
+  /**
+   * Returns true if WinCache is enabled.
+   *
+   * @return Boolean true if WinCache is enabled, false otherwise
+   */
+  public function hasWinCache() {
+    return $this->data['wincache_enabled'];
+  }
+
+  /**
+   * Returns true if any accelerator is enabled.
+   *
+   * @return Boolean true if any accelerator is enabled, false otherwise
+   */
+  public function hasAccelerator() {
+    return $this->hasApc() || $this->hasZendOpcache() || $this->hasEAccelerator() || $this->hasXCache() || $this->hasWinCache();
+  }
+
+  /**
+   * Gets the PHP SAPI name.
+   *
+   * @return string The environment
+   */
+  public function getSapiName() {
+    return $this->data['sapi_name'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('PHP Config');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('PHP: @version', ['@version' => $this->getPhpVersion()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'php_config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAMAAAC5xgRsAAAAZlBMVEX///////////////////////////////////////////////////////////////////////////////////////////+ZmZmZmZlISEhJSUmdnZ1HR0fR0dFZWVlpaWlfX18/Pz+puygPAAAAIXRSTlMACwwlJygpLzIzNjs8QEtMUmd6e32AucDBw8fIydTm6u5l8MjvAAAAo0lEQVR42r2P2Q6CMBBFL6XsZRGRfZv//0nbDBNEE19MnJeTc5ILKf58ahiUwzy/AJpIWwREwQnEXRdbGCLjrO+djWRvVMiJcigxB7viGogxDdJpSmHEmCVPS7YczJvgUu+CS30IvtbNYZMvsGVo2mVpG/kbm4auiCpdcC3YPCAhSpAdUzaAn6qPKZtUT6ZSzb4bi2hdo9MQ1nX4ASjfV+/4/Z40pyCHrNTbIgAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/RequestDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/RequestDataCollector.php
new file mode 100644
index 0000000..e0e8576
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/RequestDataCollector.php
@@ -0,0 +1,88 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\RequestDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Controller\ControllerResolverInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\RequestDataCollector as BaseRequestDataCollector;
+
+/**
+ * Integrate _content into the RequestDataCollector
+ */
+class RequestDataCollector extends BaseRequestDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Controller\ControllerResolverInterface
+   */
+  private $controllerResolver;
+
+  /**
+   * @var array
+   */
+  private $accessCheck;
+
+  /**
+   * @param \Drupal\Core\Controller\ControllerResolverInterface $controllerResolver
+   */
+  public function __construct(ControllerResolverInterface $controllerResolver) {
+    parent::__construct();
+
+    $this->controllerResolver = $controllerResolver;
+    $this->accessCheck = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    parent::collect($request, $response, $exception);
+
+    $controller = $this->controllerResolver->getController($request);
+
+    $this->data['controller'] = $this->getMethodData($controller[0], $controller[1]);
+    $this->data['access_check'] = $this->accessCheck;
+  }
+
+  /**
+   * @param $service_id
+   * @param $callable
+   * @param $request
+   */
+  public function addAccessCheck($service_id, $callable, Request $request) {
+    $this->accessCheck[$request->getPathInfo()][] = [
+      'service_id' => $service_id,
+      'callable' => $this->getMethodData($callable[0], $callable[1]),
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Request');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->data['status_code'].' '.$this->data['status_text'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAACvElEQVR42tVTbUhTYRTerDCnKVoUUr/KCZmypA9Koet0bXNLJ5XazDJ/WFaCUY0pExRZXxYiJgsxWWjkaL+yK+po1gjyR2QfmqWxtBmaBtqWGnabT++c11Fu4l/P4VzOPc95zoHznsNZodIbLDdRcKnc1Bu8DAK45ZsOnykQNMopsNooLxCknb0cDq5vml9FtHiIgpBR0R6iihYyFMTDt2Lg56ObPkI6TMGXSof1EV67IqCwisJSWliFAG/E0CfFIiebdNypcxi/1zgyFiIiZ3sJQr0RQx5frLa6k7SOKRo3oMFNR5t62h2rttKXEOKFqDCxtXNmmBokO2KKTlp3IdWuT2dYRNGKwEXEBCcL172G5FG0aIxC0kR9PBTVH1kkwQn+IqJnCE33EalVzT9GJQS1tAdD3CKicJYFrxqx7W2ejCEdZy1FiC5tZxHhLJKOZaRdQJAyV/YAvDliySALHxmxR4Hqe2iwvaOR/CEuZYJFSgYhVbZRkA8KGdEktrqnqra90NndCdkt77fjIHIhexOrfO6O3bbbOj/rqu5IptgyR3sU93QbOYhquZK4MCDp0Ina/PLsu5JvbCTRaapUdUmIV/RzoMdsk/0hWRNdAvKOmvqlN0drsJbJf1P4YsQ5lGrJeuosiOUgbOC8cto3LfOXTdVd7BqZsQKbse+0jUL6WPcesqs4MNSUTQAxGjwFiC8m3yzmqwHJBWYKBJ9WNqW/dHkpU/osch1Yj5RJfXPfSEe/2UPsN490NPfZG5CKyJmcV5ayHyzy7BMqsXfuHhGK/cjAIeSpR92gehR55D8TcQhDEKJwytBJ4fr4NULvrEM8NszfJPyxDoHYAQ1oPCWmIX4gifmDS/DV2DKeb25FHWr76yEG7/9L4YFPeiQQ4/8LkgJ8Et+NncTCsYqzXAEXa7CWdPZzGWdlyV+vST0JanfPvwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/RoutingDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/RoutingDataCollector.php
new file mode 100644
index 0000000..23cbd2f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/RoutingDataCollector.php
@@ -0,0 +1,96 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\RoutingDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\Routing\RouteProviderInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a data collector which shows all available routes.
+ */
+class RoutingDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The route profiler.
+   *
+   * @var \Drupal\Core\Routing\RouteProviderInterface
+   */
+  protected $routeProvider;
+
+  /**
+   * Constructs a new RoutingDataCollector.
+   *
+   * @param \Drupal\Core\Routing\RouteProviderInterface $routeProvider
+   *   The route provider.
+   */
+  public function __construct(RouteProviderInterface $routeProvider) {
+    $this->routeProvider = $routeProvider;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['routing'] = [];
+    foreach ($this->routeProvider->getAllRoutes() as $route_name => $route) {
+      // @TODO Find a better visual representation.
+      $this->data['routing'][] = [
+        'name' => $route_name,
+        'path' => $route->getPath(),
+      ];
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getRoutesCount() {
+    return count($this->routing());
+  }
+
+  /**
+   * Twig callback for displaying the routes.
+   */
+  public function routing() {
+    return $this->data['routing'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Routing');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'routing';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Defined routes: @route', ['@route' => $this->getRoutesCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPxJREFUeNrkVsERREAQ7D0koXwlIAISkIGXvwAkoJSfHITg5SMUVR4eMuCxZ1xxV+5uuTL30lV8bPX09PSuFVJKcOOGP+DipLrrusoFdV1Lz/NgmiaKosC0XrAopYT0fc/f/jAMa41Pj23bkrpi9bRpGmRZ9lRKFSzLkl9UHMI4jijLcuaaSZMkQdd1fNMn5r0EHIFhGEjTlDenYRjCcZyHUnqRwXEcz77sYepM+Z1yTOEXZEFVVYcUba2iItsNcbr9IAiw5HMd1CJZtU1VpG3bIooi3gPF933keY43pb9gb1Bskdrap58luMjvRNO04wcK18RfIa59mbgLMAASuWsKAyoEhgAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/ServicesDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/ServicesDataCollector.php
new file mode 100644
index 0000000..26f1196
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/ServicesDataCollector.php
@@ -0,0 +1,166 @@
+<?php
+
+/**
+ * @file
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DependencyInjection\TraceableContainer;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\DependencyInjection\IntrospectableContainerInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class ServicesDataCollector
+ */
+class ServicesDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Symfony\Component\DependencyInjection\IntrospectableContainerInterface
+   *   $container
+   */
+  private $container;
+
+  /**
+   * @param IntrospectableContainerInterface $container
+   */
+  public function __construct(IntrospectableContainerInterface $container) {
+    $this->container = $container;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    if ($this->getServicesCount()) {
+
+      $tracedData = [];
+      if ($this->container instanceof TraceableContainer) {
+        $tracedData = $this->container->getTracedData();
+      }
+
+      foreach (array_keys($this->getServices()) as $id) {
+        $this->data['services'][$id]['initialized'] = ($this->container->initialized($id)) ? TRUE : FALSE;
+        $this->data['services'][$id]['time'] = isset($tracedData[$id]) ? $tracedData[$id] : NULL;
+      }
+    }
+  }
+
+  /**
+   * @param $services
+   */
+  public function setServices($services) {
+    $this->data['services'] = $services;
+  }
+
+  /**
+   * @return array
+   */
+  public function getServices() {
+    return $this->data['services'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getServicesCount() {
+    return count($this->getServices());
+  }
+
+  /**
+   * @return array
+   */
+  public function getInitializedServices() {
+    return array_filter($this->getServices(), function($item) {
+      return $item['initialized'];
+    });
+  }
+
+  /**
+   * @return int
+   */
+  public function getInitializedServicesCount() {
+    return count($this->getInitializedServices());
+  }
+
+  /**
+   * @return array
+   */
+  public function getInitializedServicesWithoutWebprofiler() {
+    return array_filter($this->getInitializedServices(), function($item) {
+      return strpos($item['value']['id'], 'webprofiler') !== 0;
+    });
+  }
+
+  /**
+   * @return int
+   */
+  public function getInitializedServicesWithoutWebprofilerCount() {
+    return count($this->getInitializedServicesWithoutWebprofiler());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'services';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Services');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Initialized: @count', [
+      '@count' => $this->getInitializedServicesCount(),
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQVJREFUeNrkVe0NgjAQBeMAdYO6AWxQNtANGEFHcALZANyADegGsIFsIBvgu6Q/LtWmxdTEjyYvd6Hw8t5de6TzPCex1yp5w/pz0rVrQymVIXSAACqt9TGG0p0hpHWIZb9lebWENOXn1FgWbL8GJHACNHs+ohyjlxSEZPEcKGYC6SbEvljgUHzEOR3IXiiB6YOTlLqdo1Y54tZHDLIauCHtETtn962P6EUVqhhi0gelIJEEk1MjMg9Py9xol/0SuBqFva/DULY3ZSqQF767v8TyZKv83tFXWVaEufsUG+DCr2nwQLGOlGQNizZPy3fMU16K5uV5+qQEpFTC+hCN9Pd/0XcBBgBxwVqjDkAznAAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $http_middleware = array_filter($data['services'], function($service) {
+      return isset($service['value']['tags']['http_middleware']);
+    });
+
+    foreach ($http_middleware as &$service) {
+      $service['value']['handle_method'] = $this->getMethodData($service['value']['class'], 'handle');
+    }
+
+    uasort($http_middleware, function ($a, $b) {
+      $va = $a['value']['tags']['http_middleware'][0]['priority'];
+      $vb = $b['value']['tags']['http_middleware'][0]['priority'];
+
+      if ($va == $vb) {
+        return 0;
+      }
+      return ($va > $vb) ? -1 : 1;
+    });
+
+    $data['http_middleware'] = $http_middleware;
+
+    return $data;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/StateDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/StateDataCollector.php
new file mode 100644
index 0000000..cc3e5da
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/StateDataCollector.php
@@ -0,0 +1,70 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\StateDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a data collector to get all requested state values.
+ */
+class StateDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   * @param $key
+   */
+  public function addState($key) {
+    $this->data['state_get'][$key] = isset($this->data['state_get'][$key]) ? $this->data['state_get'][$key] + 1 : 1;
+  }
+
+  /**
+   * Twig callback to show all requested state keys.
+   */
+  public function getStateKeysCount() {
+    return count($this->data['state_get']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('State');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'state';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @variables', ['@variables' => $this->getStateKeysCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVERTkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVERjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY2NzdBNURDOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY2NzdBNUREOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tji6wwAAAUFJREFUeNpi/P//PwO1ARMDDcDQMZSBgZExE4h/AvF/KuA/QFzKCCS+TZ40iVNeXp5i9718+ZIhNS3tL5OoqChVDAQBcXFxBqBZzDQJU0Z2Do7/FubmVDPwzNmzwymdhoSEgDEM8PDwgPkJCQk49bDgMxCkEWQAyKAXL14wXLhwgWHChAlguTVr1pBnKMiwgoICsEEgC+7cuQPGHR0deH3HzMLC0iAjI4NV8tSpUwzv3r1jYGNjY3BycoJbgg88e/6cuIg6cuQImAZ5n2qx7+HhAaZtbGzArqXYUJCBIAwKR1jMq6ioMBgYGJAeURUVFWCNsHAERRAsKYFofJGF01CQIaBktGPHDjANAjU1NWBXg8IWX/gOobz/8+fP7x8/fqSKYV++fGH4+vXrX1B1EgXET6hUnTwH4jTG0Xqf6gAgwABnDJn0eW/JMwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/ThemeDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/ThemeDataCollector.php
new file mode 100644
index 0000000..8dd4dd0
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/ThemeDataCollector.php
@@ -0,0 +1,262 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ThemeDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Theme\ThemeManagerInterface;
+use Drupal\Core\Theme\ThemeNegotiatorInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\Theme\ThemeNegotiatorWrapper;
+use Drupal\webprofiler\Twig\Dumper\HtmlDumper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+use Symfony\Component\HttpKernel\DataCollector\LateDataCollectorInterface;
+
+/**
+ * Class ThemeDataCollector
+ */
+class ThemeDataCollector extends DataCollector implements DrupalDataCollectorInterface, LateDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeManagerInterface
+   */
+  private $themeManager;
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  private $themeNegotiator;
+
+  /**
+   * @var \Twig_Profiler_Profile
+   */
+  private $profile;
+
+  /**
+   * @var
+   */
+  private $computed;
+
+  /**
+   * @param \Drupal\Core\Theme\ThemeManagerInterface $themeManager
+   * @param \Drupal\Core\Theme\ThemeNegotiatorInterface $themeNegotiator
+   * @param \Twig_Profiler_Profile $profile
+   */
+  public function __construct(ThemeManagerInterface $themeManager, ThemeNegotiatorInterface $themeNegotiator, \Twig_Profiler_Profile $profile) {
+    $this->themeManager = $themeManager;
+    $this->themeNegotiator = $themeNegotiator;
+    $this->profile = $profile;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $activeTheme = $this->themeManager->getActiveTheme();
+
+    $this->data['activeTheme'] = [
+      'name' => $activeTheme->getName(),
+      'path' => $activeTheme->getPath(),
+      'engine' => $activeTheme->getEngine(),
+      'owner' => $activeTheme->getOwner(),
+      'baseThemes' => $activeTheme->getBaseThemes(),
+      'extension' => $activeTheme->getExtension(),
+      'styleSheetsRemove' => $activeTheme->getStyleSheetsRemove(),
+      'libraries' => $activeTheme->getLibraries(),
+      'regions' => $activeTheme->getRegions(),
+    ];
+
+    if ($this->themeNegotiator instanceof ThemeNegotiatorWrapper) {
+      $this->data['negotiator'] = [
+        'class' => $this->getMethodData($this->themeNegotiator->getNegotiator(), 'determineActiveTheme'),
+        'id' => $this->themeNegotiator->getNegotiator()->_serviceId,
+      ];
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function lateCollect() {
+    $this->data['twig'] = serialize($this->profile);
+  }
+
+  /**
+   * @return string
+   */
+  public function getActiveTheme() {
+    return $this->data['activeTheme'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getThemeNegotiator() {
+    return $this->data['negotiator'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getTime() {
+    return $this->getProfile()->getDuration() * 1000;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTemplateCount() {
+    return $this->getComputedData('template_count');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTemplates() {
+    return $this->getComputedData('templates');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getBlockCount() {
+    return $this->getComputedData('block_count');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getMacroCount() {
+    return $this->getComputedData('macro_count');
+  }
+
+  /**
+   * @return \Twig_Markup
+   */
+  public function getHtmlCallGraph() {
+    $dumper = new HtmlDumper();
+
+    return new \Twig_Markup($dumper->dump($this->getProfile()), 'UTF-8');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'theme';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Theme');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Name: @name', ['@name' => $this->getActiveTheme()['name']]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlVJREFUeNrMlk1IVFEUx53K6AOjUBQri6SihQiRziaRQegDlKJFBCpSiZtoE4hWtFFRwcCVBqEWfaAE7SoXajXLQoRcFAUSaBgUJQxKYUrT78D/wevx3psaE7rw49x377ln7vl4500kmUxm/OuxJmMVxrqwzVgsth5xHKogCnthCd7BU7gdj8envOciQe5j8CyiFQq0tAgDsA+OaG0eLmF4INQoxrYg+iEXhqEGiqGBw/3SGUeU6MgC61mBMUU5GzEKJ6ES5S5knbbXui/jmv8MjCkGMxEPFbsFyAeL1y6pXEenSO4fctlIhCXqqtmGj5ADcblZoX1z8aLn/Es475soDhcyfwt3LPDK8jPYFlIcZrCCEH0LqlP7NXN/CCUL/CvmkynKcczPoNv9Y5LXuHVC2Y6mMFoetOG4/0kl9LfDquMyN076ue/I11ANHSqVH0pgLUz7GK2HjUHuf1DGm/jVYZVYJeILz5163oy46Tn/GL5r396yc+hXOzcckiyVQp7CsVNvmI2DHoODcMFcR6eZ+RO4747pJuYjcFilssMM6vB7+Or8IGMWWjDWx7ntzHvglCWZtfbf3n0UtiJ6FVO/8QbuQh+H59C37nUD9sAj1k6ENZQylctuJWsGJswDDibY32C3gitKsCUwyt7nlK0vpMc2Wh/Q4zIcxeDztDu/QjSoPmujzWswZef3GLRXuV2xPa3u/yDwjfoDgxE1nP1aquOG91b64StWlp0xtaKvKbfMUS1maukWvEj7a6pxBg6oL1iddnsbSFox/S/+TKyK0V8CDABrCdI/1oTqiQAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $data['twig'] = [
+      'callgraph' => (string) $this->getHtmlCallGraph(),
+      'render_time' => $this->getTime(),
+      'template_count' => $this->getTemplateCount(),
+      'templates' => $this->getTemplates(),
+      'block_count' => $this->getBlockCount(),
+      'macro_count' => $this->getMacroCount(),
+    ];
+
+    return $data;
+  }
+
+  /**
+   * @return mixed|\Twig_Profiler_Profile
+   */
+  private function getProfile() {
+    if (NULL === $this->profile) {
+      $this->profile = unserialize($this->data['twig']);
+    }
+
+    return $this->profile;
+  }
+
+  /**
+   * @param $index
+   *
+   * @return mixed
+   */
+  private function getComputedData($index) {
+    if (NULL === $this->computed) {
+      $this->computed = $this->computeData($this->getProfile());
+    }
+
+    return $this->computed[$index];
+  }
+
+  /**
+   * @param \Twig_Profiler_Profile $profile
+   *
+   * @return array
+   */
+  private function computeData(\Twig_Profiler_Profile $profile) {
+    $data = [
+      'template_count' => 0,
+      'block_count' => 0,
+      'macro_count' => 0,
+    ];
+
+    $templates = [];
+    foreach ($profile as $p) {
+      $d = $this->computeData($p);
+
+      $data['template_count'] += ($p->isTemplate() ? 1 : 0) + $d['template_count'];
+      $data['block_count'] += ($p->isBlock() ? 1 : 0) + $d['block_count'];
+      $data['macro_count'] += ($p->isMacro() ? 1 : 0) + $d['macro_count'];
+
+      if ($p->isTemplate()) {
+        if (!isset($templates[$p->getTemplate()])) {
+          $templates[$p->getTemplate()] = 1;
+        }
+        else {
+          $templates[$p->getTemplate()]++;
+        }
+      }
+
+      foreach ($d['templates'] as $template => $count) {
+        if (!isset($templates[$template])) {
+          $templates[$template] = $count;
+        }
+        else {
+          $templates[$template] += $count;
+        }
+      }
+    }
+    $data['templates'] = $templates;
+
+    return $data;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/TimeDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/TimeDataCollector.php
new file mode 100644
index 0000000..fb93b4f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/TimeDataCollector.php
@@ -0,0 +1,163 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\TimeDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\field\Tests\reEnableModuleFieldTest;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\TimeDataCollector as BaseTimeDataCollector;
+use Symfony\Component\HttpKernel\KernelInterface;
+use Symfony\Component\Stopwatch\StopwatchEvent;
+
+/**
+ * Class TimeDataCollector.
+ */
+class TimeDataCollector extends BaseTimeDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @param \Symfony\Component\HttpKernel\KernelInterface $kernel
+   * @param $stopwatch
+   */
+  public function __construct(KernelInterface $kernel = NULL, $stopwatch = NULL) {
+    parent::__construct($kernel, $stopwatch);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    parent::collect($request, $response, $exception);
+
+    $this->data['memory_limit'] = $this->convertToBytes(ini_get('memory_limit'));
+    $this->updateMemoryUsage();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function lateCollect() {
+    parent::lateCollect();
+
+    $this->updateMemoryUsage();
+  }
+
+  /**
+   * Gets the memory.
+   *
+   * @return int
+   *   The memory
+   */
+  public function getMemory() {
+    return $this->data['memory'];
+  }
+
+  /**
+   * Gets the PHP memory limit.
+   *
+   * @return int
+   *   The memory limit
+   */
+  public function getMemoryLimit() {
+    return $this->data['memory_limit'];
+  }
+
+  /**
+   * Updates the memory usage data.
+   */
+  public function updateMemoryUsage() {
+    $this->data['memory'] = memory_get_peak_usage(TRUE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Timeline');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Duration: @duration', ['@duration' => sprintf('%.0f ms', $this->getDuration())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAcCAYAAABoMT8aAAABqUlEQVR42t2Vv0sCYRyHX9OmEhsMx/YKGlwLQ69DTEUSBJEQEy5J3FRc/BsuiFqEIIcQIRo6ysUhoaBBWhoaGoJwiMJLglRKrs8bXgienmkQdPDAwX2f57j3fhFJkkbiPwTK5bIiFoul3kmPud8MqKMewDXpwuGww+12n9hsNhFnlijYf/Z4PDmO45Yxo+10ZFGTyWRMEItU6AdCx7lczkgd6n7J2Wx2xm63P6jJMk6n80YQBBN1aUDv9XqvlAbbm2LE7/cLODRB0un0VveAeoDC8/waCQQC18MGQqHQOcEKvw8bcLlcL6TfYnVtCrGRAlartUUYhmn1jKg/E3USjUYfhw3E4/F7ks/nz4YNFIvFQ/ogbUYikdefyqlU6gnuOg2YK5XKvs/n+xhUDgaDTVEUt+HO04ABOBA5isViDTU5kUi81Wq1AzhWMEkDGmAEq2C3UCjcYXGauDvfEsuyUjKZbJRKpVvM8IABU9SVX+cxYABmwIE9cFqtVi9xtgvsC2AHbIAFoKey0gdlHEyDObAEWLACFsEsMALdIJ80+dK0bTS95v7+v/AJnis0eO906QwAAAAASUVORK5CYII=';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [
+      'webprofiler/timeline',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDrupalSettings() {
+    /** @var StopwatchEvent[] $collectedEvents */
+    $collectedEvents = $this->getEvents();
+
+    if (!empty($collectedEvents)) {
+      $sectionPeriods = $collectedEvents['__section__']->getPeriods();
+      $endTime = end($sectionPeriods)->getEndTime();
+      $events = [];
+
+      foreach ($collectedEvents as $key => $collectedEvent) {
+        if ('__section__' != $key) {
+          $periods = [];
+          foreach ($collectedEvent->getPeriods() as $period) {
+            $periods[] = [
+              'start' => sprintf("%F", $period->getStartTime()),
+              'end' => sprintf("%F", $period->getEndTime()),
+            ];
+          }
+
+          $events[] = [
+            "name" => $key,
+            "category" => $collectedEvent->getCategory(),
+            "origin" => sprintf("%F", $collectedEvent->getOrigin()),
+            "starttime" => sprintf("%F", $collectedEvent->getStartTime()),
+            "endtime" => sprintf("%F", $collectedEvent->getEndTime()),
+            "duration" => sprintf("%F", $collectedEvent->getDuration()),
+            "memory" => sprintf("%.1F", $collectedEvent->getMemory() / 1024 / 1024),
+            "periods" => $periods,
+          ];
+        }
+      }
+
+      return ['time' => ['events' => $events, 'endtime' => $endTime]];
+    }
+    else {
+      return ['time' => ['events' => [], 'endtime' => 0]];
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $data['duration'] = $this->getDuration();
+    $data['initTime'] = $this->getInitTime();
+
+    return $data;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php
new file mode 100644
index 0000000..0918aaf
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php
@@ -0,0 +1,99 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\StringTranslation\TranslationInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\StringTranslation\TranslationManagerWrapper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class TranslationsDataCollector
+ */
+class TranslationsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\StringTranslation\TranslationInterface
+   */
+  private $translation;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  private $urlGenerator;
+
+  /**
+   * @param \Drupal\Core\StringTranslation\TranslationInterface $translation
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   */
+  public function __construct(TranslationInterface $translation, UrlGeneratorInterface $urlGenerator) {
+    $this->translation = $translation;
+    $this->urlGenerator = $urlGenerator;
+
+    $this->data['translations']['translated'] = [];
+    $this->data['translations']['untranslated'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    if($this->translation instanceof TranslationManagerWrapper) {
+      /** \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper $this->translation */
+      $this->data['translations']['translated'] = $this->translation->getTranslated();
+      $this->data['translations']['untranslated'] = $this->translation->getUntranslated();
+    }
+    $data['user_interface_translations_path'] = $this->urlGenerator->generateFromRoute('locale.translate_page');
+  }
+
+  /**
+   * @return int
+   */
+  public function getTranslatedCount() {
+    return count($this->data['translations']['translated']);
+  }
+
+  /**
+   * @return int
+   */
+  public function getUntranslatedCount() {
+    return count($this->data['translations']['untranslated']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'translations';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Translations');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Translated: @translated, untranslated: @untranslated', [
+      '@translated' => $this->getTranslatedCount(),
+      '@untranslated' => $this->getUntranslatedCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgpJREFUeNrUVrFuwjAQPUcZiAQDQ6WEbgwwMCJVqhjgBxhYGSvEDzBkZYSBH+ADoFJHlg4MdIMKxiLBXKAbUmEm9bPiyAREEgRDTzqZ2Mfzu7tnJ8xxHLq1aXQHuwsos2078p9arVYg0yL3CXcnwCdubKDp3F+5myFin9xYK0xNzQiZm1c3KpVKUb1ep2QyebvuFwoFSqfTlM/nbweay+VoOBxeDar7JwC03W49UO5fs9nsZTwef8qYUqkUjSmAYrGYqKlhGFSpVH45oBFFdkdM0RjUst1uC7Z45ofjWdO0t8Ph8CDjyuUyZTIZ6na7tNvtTmSn+2s5n88FIMwdPzhgUWYBA2A2mxVjIpEQarEsiwaDAS2XSxPH9OI1xVNnbmo0Go28eTDkAOL3YrGg/X4v1tfr9WmjLplsULVaFawbjYbHkjfzqPsr7o9RwJE2HOkifbAGS1ljdL/G/ScsWK/XE+NmsxGMkW6/3xfgWMMIpu9hLgkEN5tNDwClgAoADjAYRszr8m7kD2gGU5uh1hEjmoGUUU/oGLVEXaVhA2yoKYAwRwFx/Ezj8bjHEIYaSgVgDptNp1NiePG5QCfS4qyZXANop9MR7JANWAFA6hWgWEcmqqTYOWBVl0jZf0ViU+hUNk0AyVf0ObYK0+8IslupF8qlkxVWdoipsaCPiaBr7uwr+t98ofwJMADuIP9IDjFbLwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/UserDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/UserDataCollector.php
new file mode 100644
index 0000000..e2b7a10
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/UserDataCollector.php
@@ -0,0 +1,141 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Authentication\AuthenticationCollectorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class UserDataCollector
+ */
+class UserDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  private $currentUser;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @var \Drupal\Core\Authentication\AuthenticationCollectorInterface
+   */
+  private $providerCollector;
+
+  /**
+   * @param \Drupal\Core\Session\AccountInterface $currentUser
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param \Drupal\Core\Authentication\AuthenticationCollectorInterface $providerCollector
+   */
+  public function __construct(AccountInterface $currentUser, EntityManagerInterface $entityManager, ConfigFactoryInterface $configFactory, AuthenticationCollectorInterface $providerCollector) {
+    $this->currentUser = $currentUser;
+    $this->entityManager = $entityManager;
+    $this->configFactory = $configFactory;
+    $this->providerCollector = $providerCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['name'] = $this->currentUser->getDisplayName();
+    $this->data['authenticated'] = $this->currentUser->isAuthenticated();
+
+    $this->data['roles'] = [];
+    $storage = $this->entityManager->getStorage('user_role');
+    foreach ($this->currentUser->getRoles() as $role) {
+      $entity = $storage->load($role);
+      $this->data['roles'][] = $entity->label();
+    }
+
+    foreach ($this->providerCollector->getSortedProviders() as $provider_id => $provider) {
+      if ($provider->applies($request)) {
+        $this->data['provider'] = $provider_id;
+      }
+    }
+
+    $this->data['anonymous'] = $this->configFactory->get('user.settings')
+      ->get('anonymous');
+  }
+
+  /**
+   * @return \Drupal\Core\Session\AccountInterface
+   */
+  public function getUserName() {
+    return $this->data['name'];
+  }
+
+  /**
+   * @return bool
+   */
+  public function getAuthenticated() {
+    return $this->data['authenticated'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getRoles() {
+    return $this->data['roles'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getProvider() {
+    return $this->data['provider'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getAnonymous() {
+    return $this->data['anonymous'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'user';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('User');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->getUserName();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAC70lEQVR42u2V3UtTYRzHu+mFwCwK+gO6CEryPlg7yiYx50vDqUwjFIZDSYUk2ZTmCysHvg9ZVggOQZiRScsR4VwXTjEwdKZWk8o6gd5UOt0mbev7g/PAkLONIOkiBx+25/v89vuc85zn2Q5Fo9F95UDwnwhS5HK5TyqVRv8m1JN6k+AiC+fn54cwbgFNIrTQ/J9IqDcJJDGBHsgDgYBSq9W6ysvLPf39/SSUUU7zsQ1yc3MjmN90OBzfRkZG1umzQqGIxPSTkIBjgdDkaGNjoza2kcFgUCE/QvMsq6io2PV6vQu1tbV8Xl7etkql2qqvr/+MbDE/Pz8s9OP2Cjhwwmw29+4R3Kec1WZnZ4fn5uamc3Jyttra2qbH8ero6JgdHh5+CvFHq9X6JZHgzODgoCVW0NPTY0N+ltU2Nzdv4GqXsYSrPp+vDw80aLFYxru6uhyQ/rDb7a8TCVJDodB1jUazTVlxcXGQ5/mbyE+z2u7u7veY38BVT3Z2djopm5qa6isrK/tQWVn5qb29fSGR4DC4PDAwMEsZHuArjGnyGKutq6v7ajQaF6urq9/MzMz0QuSemJiwQDwGkR0POhhXgILjNTU1TaWlpTxlOp1uyWQyaUjMajMzM8Nut/tJQUHBOpZppbCwkM/KytrBznuL9xDVxBMo8KXHYnu6qKjIivmrbIy67x6Px4Yd58W672ApfzY0NCyNjo7OZmRkiAv8fr+O47iwmABXtoXaG3uykF6vX7bZbF6cgZWqqiqezYkKcNtmjO+CF2AyhufgjsvlMiU7vXEF+4C4ALf9CwdrlVAqlcFkTdRqdQSHLUDgBEeSCrArAsiGwENs0XfJBE6ncxm1D8Aj/B6tigkkJSUlmxSwLYhMDeRsyyUCd+lHrWxtbe2aTCbbZTn1ZD92F0Cr8GBfgnsgDZwDt8EzMBmHMXBLqD0PDMAh9Gql3iRIESQSIAXp4CRIBZeEjIvDFZAm1J4C6UK9ROiZcvCn/+8FvwHtDdJEaRY+oQAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DataCollector/ViewsDataCollector.php b/modules/contrib/devel/webprofiler/src/DataCollector/ViewsDataCollector.php
new file mode 100644
index 0000000..bdb25a6
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DataCollector/ViewsDataCollector.php
@@ -0,0 +1,123 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ViewsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Views\TraceableViewExecutable;
+use Drupal\webprofiler\Views\ViewExecutableFactoryWrapper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about rendered views.
+ */
+class ViewsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\webprofiler\Views\ViewExecutableFactoryWrapper
+   */
+  private $view_executable_factory;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @param ViewExecutableFactoryWrapper $view_executable_factory
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(ViewExecutableFactoryWrapper $view_executable_factory, EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+    $this->view_executable_factory = $view_executable_factory;
+
+    $this->data['views'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $views = $this->view_executable_factory->getViews();
+    $storage = $this->entityManager->getStorage('view');
+
+    /** @var TraceableViewExecutable $view */
+    foreach ($views as $view) {
+      if ($view->executed) {
+        $data = [
+          'id' => $view->storage->id(),
+          'current_display' => $view->current_display,
+          'build_time' => $view->getBuildTime(),
+          'execute_time' => $view->getExecuteTime(),
+          'render_time' => $view->getRenderTime(),
+        ];
+
+        $entity = $storage->load($view->storage->id());
+        if ($entity->hasLinkTemplate('edit-display-form')) {
+          $route = $entity->urlInfo('edit-display-form');
+          $route->setRouteParameter('display_id', $view->current_display);
+          $data['route'] = $route->toString();
+        }
+
+        $this->data['views'][] = $data;
+      }
+    }
+
+//    TODO: also use those data.
+//    $loaded = $this->entityManager->getLoaded('view');
+//
+//    if ($loaded) {
+//      /** @var \Drupal\webprofiler\Entity\EntityStorageDecorator $views */
+//      foreach ($loaded->getEntities() as $views) {
+//        $this->data['views'][] = array(
+//          'id' => $views->get('id'),
+//        );
+//      }
+//    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getViewsCount() {
+    return count($this->data['views']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'views';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Views');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => $this->getViewsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNDgwMTE3NDA3MjA2ODExOEY2MkNCNjI0NDY3NzkwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNEVFREM2NkQ4MUMxMUUzQkMwRUNBMkQwMzE4QjVBMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNEVFREM2NUQ4MUMxMUUzQkMwRUNBMkQwMzE4QjVBMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6vqYfFAAAAXUlEQVR42mL8//8/A7UBEwMNwKih1AcsIGLz5s1USwK+vr6MLMgcSg2EOW6IhSkycHR0BHth//79jMh8fACmlr4uRbcVnT8apqNhOhqmAxZR1CyoGUfrfaoDgAADAA4QNs9x67RnAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Decorator.php b/modules/contrib/devel/webprofiler/src/Decorator.php
new file mode 100644
index 0000000..f00d9ca
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Decorator.php
@@ -0,0 +1,99 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Decorator.
+ */
+
+namespace Drupal\webprofiler;
+
+/**
+ * Generic class Decorator.
+ */
+class Decorator {
+
+  /**
+   * @var
+   */
+  protected $object;
+
+  /**
+   * Class constructor.
+   *
+   * @param object $object
+   *   The object to decorate.
+   */
+  public function __construct($object) {
+    $this->object = $object;
+  }
+
+  /**
+   * Return the original (i.e. non decorated) object.
+   *
+   * @return mixed
+   *   The original object.
+   */
+  public function getOriginalObject() {
+    $object = $this->object;
+    while ($object instanceof Decorator) {
+      $object = $object->getOriginalObject();
+    }
+    return $object;
+  }
+
+  /**
+   * Returns true if $method is a PHP callable.
+   *
+   * @param string $method
+   *   The method name.
+   * @param bool $checkSelf
+   *
+   * @return bool|mixed
+   */
+  public function isCallable($method, $checkSelf = FALSE) {
+    //Check the original object
+    $object = $this->getOriginalObject();
+    if (is_callable([$object, $method])) {
+      return $object;
+    }
+    // Check Decorators.
+    $object = $checkSelf ? $this : $this->object;
+    while ($object instanceof Decorator) {
+      if (is_callable([$object, $method])) {
+        return $object;
+      }
+      $object = $this->object;
+    }
+    return FALSE;
+  }
+
+  /**
+   * @param $method
+   * @param $args
+   *
+   * @return mixed
+   *
+   * @throws \Exception
+   */
+  public function __call($method, $args) {
+    if ($object = $this->isCallable($method)) {
+      return call_user_func_array([$object, $method], $args);
+    }
+    throw new \Exception(
+      'Undefined method - ' . get_class($this->getOriginalObject()) . '::' . $method
+    );
+  }
+
+  /**
+   * @param $property
+   *
+   * @return null
+   */
+  public function __get($property) {
+    $object = $this->getOriginalObject();
+    if (property_exists($object, $property)) {
+      return $object->$property;
+    }
+    return NULL;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DependencyInjection/TraceableContainer.php b/modules/contrib/devel/webprofiler/src/DependencyInjection/TraceableContainer.php
new file mode 100644
index 0000000..a0140e3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DependencyInjection/TraceableContainer.php
@@ -0,0 +1,71 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DependencyInjection\TraceableContainer.
+ */
+
+namespace Drupal\webprofiler\DependencyInjection;
+
+use Drupal\Component\Utility\Timer;
+use Drupal\Core\DependencyInjection\Container;
+
+/**
+ * Extends the Drupal container class to trace service instantiations.
+ */
+class TraceableContainer extends Container {
+
+  /**
+   * @var array
+   */
+  protected $tracedData;
+
+  /**
+   * @var \Symfony\Component\Stopwatch\Stopwatch
+   */
+  private $stopwatch = NULL;
+
+  /**
+   * @var bool
+   */
+  private $hasStopwatch = FALSE;
+
+  /**
+   * @param string $id
+   * @param int $invalidBehavior
+   *
+   * @return object
+   */
+  public function get($id, $invalidBehavior = self::EXCEPTION_ON_INVALID_REFERENCE) {
+    if (!$this->stopwatch && $this->has('stopwatch')) {
+      $this->stopwatch = $this->createService(unserialize($this->serviceDefinitions['stopwatch']), 'stopwatch');
+      $this->stopwatch->openSection();
+      $this->hasStopwatch = TRUE;
+    }
+
+    if ('stopwatch' === $id) {
+      return $this->stopwatch;
+    }
+
+    Timer::start($id);
+    if ($this->hasStopwatch) {
+      $e = $this->stopwatch->start($id, 'service');
+    }
+
+    $service = parent::get($id, $invalidBehavior);
+
+    $this->tracedData[$id] = Timer::stop($id);
+    if ($this->hasStopwatch && $e->isStarted()) {
+      $e->stop();
+    }
+
+    return $service;
+  }
+
+  /**
+   * @return array
+   */
+  public function getTracedData() {
+    return $this->tracedData;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/DrupalDataCollectorInterface.php b/modules/contrib/devel/webprofiler/src/DrupalDataCollectorInterface.php
new file mode 100644
index 0000000..108de62
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/DrupalDataCollectorInterface.php
@@ -0,0 +1,72 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DrupalDataCollectorInterface.
+ */
+
+namespace Drupal\webprofiler;
+
+/**
+ * Interface DrupalDataCollectorInterface.
+ */
+interface DrupalDataCollectorInterface {
+
+  /**
+   * Returns the datacollector title.
+   *
+   * @return string
+   *   The datacollector title.
+   */
+  public function getTitle();
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string
+   *   The collector name.
+   */
+  public function getName();
+
+  /**
+   * Returns the string used in vertical tab summary.
+   *
+   * @return string
+   *   The panel summary.
+   */
+  public function getPanelSummary();
+
+  /**
+   * Returns the collector icon in base64 format.
+   *
+   * @return string
+   *   The collector icon.
+   */
+  public function getIcon();
+
+  /**
+   * Returns true if this datacollector has a detail panel.
+   *
+   * @return bool
+   *   True if datacollector has a detail panel, false otherwise.
+   */
+  public function hasPanel();
+
+  /**
+   * Returns the libraries needed in detail panel.
+   *
+   * @return array
+   *   The render array for detail panel.
+   */
+  public function getLibraries();
+
+  /**
+   * @return array
+   */
+  public function getDrupalSettings();
+
+  /**
+   * @return mixed
+   */
+  public function getData();
+}
diff --git a/modules/contrib/devel/webprofiler/src/Entity/EntityDecorator.php b/modules/contrib/devel/webprofiler/src/Entity/EntityDecorator.php
new file mode 100644
index 0000000..036b444
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Entity/EntityDecorator.php
@@ -0,0 +1,28 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\webprofiler\Decorator;
+
+/**
+ * Class EntityDecorator
+ */
+class EntityDecorator extends Decorator {
+
+  /**
+   * @var array
+   */
+  protected $entities;
+
+  /**
+   * @return mixed
+   */
+  public function getEntities() {
+    return $this->entities;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Entity/EntityManagerWrapper.php b/modules/contrib/devel/webprofiler/src/Entity/EntityManagerWrapper.php
new file mode 100644
index 0000000..3c40d9b
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Entity/EntityManagerWrapper.php
@@ -0,0 +1,551 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityManagerWrapper.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Config\Entity\ConfigEntityStorageInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Entity\EntityTypeInterface;
+use Drupal\Core\Entity\EntityViewBuilderInterface;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Symfony\Component\DependencyInjection\ContainerAwareInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class EntityManagerWrapper
+ */
+class EntityManagerWrapper extends DefaultPluginManager implements EntityManagerInterface, ContainerAwareInterface {
+
+  /**
+   * @var array
+   */
+  private $loaded;
+
+  /**
+   * @var array
+   */
+  private $rendered;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * Config entities that don't support the EntityStorageDecorator.
+   *
+   * @var array
+   */
+  private $disallowedEntities;
+
+  /**
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+
+    $this->disallowedEntities = ['user_role', 'shortcut_set', 'taxonomy_vocabulary'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getStorage($entity_type) {
+    /** @var ConfigEntityStorageInterface $handler */
+    $handler = $this->getHandler($entity_type, 'storage');
+
+    if ($this->allowedType(
+        $entity_type
+      ) && $handler instanceof ConfigEntityStorageInterface
+    ) {
+      if (!isset($this->loaded[$entity_type])) {
+        $handler = new EntityStorageDecorator($handler);
+        $this->loaded[$entity_type] = $handler;
+      }
+      else {
+        $handler = $this->loaded[$entity_type];
+      }
+    }
+
+    return $handler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewBuilder($entity_type) {
+    /** @var EntityViewBuilderInterface $handler */
+    $handler = $this->getHandler($entity_type, 'view_builder');
+
+    if ($handler instanceof EntityViewBuilderInterface) {
+      if (!isset($this->rendered[$entity_type])) {
+        $handler = new EntityViewBuilderDecorator($handler);
+        $this->rendered[$entity_type] = $handler;
+      }
+      else {
+        $handler = $this->rendered[$entity_type];
+      }
+    }
+
+    return $handler;
+  }
+
+  /**
+   * Returns TRUE if we can provide a decorator for this entity type.
+   *
+   * @param string $entity_type
+   *
+   * @return bool
+   */
+  private function allowedType($entity_type) {
+    return !in_array($entity_type, $this->disallowedEntities);
+  }
+
+  /**
+   * @param $type
+   *
+   * @return array
+   */
+  public function getLoaded($type) {
+    return isset($this->loaded[$type]) ? $this->loaded[$type] : NULL;
+  }
+
+  /**
+   * @param $type
+   *
+   * @return array
+   */
+  public function getRendered($type) {
+    return isset($this->rendered[$type]) ? $this->rendered[$type] : NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function useCaches($use_caches = FALSE) {
+    $this->entityManager->useCaches($use_caches = FALSE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasDefinition($plugin_id) {
+    return $this->entityManager->hasDefinition($plugin_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onBundleCreate($bundle, $entity_type_id) {
+    $this->entityManager->onBundleCreate($bundle, $entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onBundleDelete($bundle, $entity_type_id) {
+    $this->entityManager->onBundleDelete($bundle, $entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeLabels($group = FALSE) {
+    return $this->entityManager->getEntityTypeLabels($group = FALSE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getBaseFieldDefinitions($entity_type_id) {
+    return $this->entityManager->getBaseFieldDefinitions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldDefinitions($entity_type_id, $bundle) {
+    return $this->entityManager->getFieldDefinitions($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldStorageDefinitions($entity_type_id) {
+    return $this->entityManager->getFieldStorageDefinitions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLastInstalledFieldStorageDefinitions($entity_type_id) {
+    return $this->entityManager->getLastInstalledFieldStorageDefinitions(
+      $entity_type_id
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldMap() {
+    return $this->entityManager->getFieldMap();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldMapByFieldType($field_type) {
+    return $this->entityManager->getFieldMapByFieldType($field_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAccessControlHandler($entity_type) {
+    return $this->entityManager->getAccessControlHandler($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllBundleInfo() {
+    return $this->entityManager->getAllBundleInfo();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedDefinitions() {
+    $this->entityManager->clearCachedDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedFieldDefinitions() {
+    $this->entityManager->clearCachedFieldDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedBundles() {
+    $this->entityManager->clearCachedBundles();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getListBuilder($entity_type) {
+    return $this->entityManager->getListBuilder($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormObject($entity_type, $operation) {
+    return $this->entityManager->getFormObject($entity_type, $operation);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getRouteProviders($entity_type) {
+    return $this->entityManager->getRouteProviders($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasHandler($entity_type, $handler_type) {
+    return $this->entityManager->hasHandler($entity_type, $handler_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getHandler($entity_type, $handler_type) {
+    return $this->entityManager->getHandler($entity_type, $handler_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createHandlerInstance(
+    $class,
+    EntityTypeInterface $definition = NULL
+  ) {
+    return $this->entityManager->createHandlerInstance($class, $definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getBundleInfo($entity_type) {
+    return $this->entityManager->getBundleInfo($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getExtraFields($entity_type_id, $bundle) {
+    return $this->entityManager->getExtraFields($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTranslationFromContext(
+    EntityInterface $entity,
+    $langcode = NULL,
+    $context = []
+  ) {
+    return $this->entityManager->getTranslationFromContext(
+      $entity,
+      $langcode,
+      $context
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefinition($entity_type_id, $exception_on_invalid = TRUE) {
+    return $this->entityManager->getDefinition(
+      $entity_type_id,
+      $exception_on_invalid
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLastInstalledDefinition($entity_type_id) {
+    return $this->entityManager->getLastInstalledDefinition($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefinitions() {
+    return $this->entityManager->getDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllViewModes() {
+    return $this->entityManager->getAllViewModes();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModes($entity_type_id) {
+    return $this->entityManager->getViewModes($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllFormModes() {
+    return $this->entityManager->getAllFormModes();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModes($entity_type_id) {
+    return $this->entityManager->getFormModes($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModeOptions(
+    $entity_type_id,
+    $include_disabled = FALSE
+  ) {
+    return $this->entityManager->getViewModeOptions(
+      $entity_type_id,
+      $include_disabled
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModeOptions($entity_type_id) {
+    return $this->entityManager->getFormModeOptions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModeOptionsByBundle($entity_type_id, $bundle) {
+    return $this->entityManager->getViewModeOptionsByBundle(
+      $entity_type_id,
+      $bundle
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModeOptionsByBundle($entity_type_id, $bundle) {
+    return $this->entityManager->getFormModeOptionsByBundle(
+      $entity_type_id,
+      $bundle
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadEntityByUuid($entity_type_id, $uuid) {
+    return $this->entityManager->loadEntityByUuid($entity_type_id, $uuid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadEntityByConfigTarget($entity_type_id, $target) {
+    return $this->entityManager->loadEntityByConfigTarget(
+      $entity_type_id,
+      $target
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeFromClass($class_name) {
+    return $this->entityManager->getEntityTypeFromClass($class_name);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeCreate(EntityTypeInterface $entity_type) {
+    $this->entityManager->onEntityTypeCreate($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeUpdate(
+    EntityTypeInterface $entity_type,
+    EntityTypeInterface $original
+  ) {
+    $this->entityManager->onEntityTypeUpdate($entity_type, $original);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeDelete(EntityTypeInterface $entity_type) {
+    $this->entityManager->onEntityTypeDelete($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createInstance($plugin_id, array $configuration = []) {
+    return $this->entityManager->createInstance($plugin_id, $configuration);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionCreate(
+    FieldDefinitionInterface $field_definition
+  ) {
+    $this->entityManager->onFieldDefinitionCreate($field_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionUpdate(
+    FieldDefinitionInterface $field_definition,
+    FieldDefinitionInterface $original
+  ) {
+    $this->entityManager->onFieldDefinitionUpdate($field_definition, $original);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionDelete(
+    FieldDefinitionInterface $field_definition
+  ) {
+    $this->entityManager->onFieldDefinitionDelete($field_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionCreate(
+    FieldStorageDefinitionInterface $storage_definition
+  ) {
+    $this->entityManager->onFieldStorageDefinitionCreate($storage_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionUpdate(
+    FieldStorageDefinitionInterface $storage_definition,
+    FieldStorageDefinitionInterface $original
+  ) {
+    $this->entityManager->onFieldStorageDefinitionUpdate(
+      $storage_definition,
+      $original
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionDelete(
+    FieldStorageDefinitionInterface $storage_definition
+  ) {
+    $this->entityManager->onFieldStorageDefinitionDelete($storage_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getInstance(array $options) {
+    return $this->entityManager->getInstance($options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setContainer(ContainerInterface $container = NULL) {
+    $this->entityManager->setContainer($container = NULL);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearDisplayModeInfo() {
+    return $this->entityManager->clearDisplayModeInfo();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setFieldMap(array $field_map) {
+    return $this->entityManager->setFieldMap($field_map);
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Entity/EntityStorageDecorator.php b/modules/contrib/devel/webprofiler/src/Entity/EntityStorageDecorator.php
new file mode 100644
index 0000000..11d0189
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Entity/EntityStorageDecorator.php
@@ -0,0 +1,218 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityStorageDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Config\Config;
+use Drupal\Core\Config\Entity\ConfigEntityInterface;
+use Drupal\Core\Config\Entity\ConfigEntityStorageInterface;
+use Drupal\Core\Config\Entity\ImportableEntityStorageInterface;
+use Drupal\Core\Entity\EntityHandlerInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Entity\EntityTypeInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class EntityStorageDecorator
+ */
+class EntityStorageDecorator extends EntityDecorator implements ConfigEntityStorageInterface, ImportableEntityStorageInterface, EntityHandlerInterface {
+
+  /**
+   * @param ConfigEntityStorageInterface $controller
+   */
+  public function __construct(ConfigEntityStorageInterface $controller) {
+    parent::__construct($controller);
+
+    $this->entities = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache(array $ids = NULL) {
+    $this->getOriginalObject()->resetCache($ids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultiple(array $ids = NULL) {
+    $entities = $this->getOriginalObject()->loadMultiple($ids);
+
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $entities;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function load($id) {
+    $entity = $this->getOriginalObject()->load($id);
+
+    $this->entities[$id] = $entity;
+
+    return $entity;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadUnchanged($id) {
+    return $this->getOriginalObject()->loadUnchanged($id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadRevision($revision_id) {
+    return $this->getOriginalObject()->loadRevision($revision_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteRevision($revision_id) {
+    $this->getOriginalObject()->deleteRevision($revision_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadByProperties(array $values = []) {
+    $entities = $this->getOriginalObject()->loadByProperties($values);
+
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $entities;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function create(array $values = []) {
+    return $this->getOriginalObject()->create($values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete(array $entities) {
+    $this->getOriginalObject()->delete($entities);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function save(EntityInterface $entity) {
+    return $this->getOriginalObject()->save($entity);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getQuery($conjunction = 'AND') {
+    return $this->getOriginalObject()->getQuery($conjunction);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeId() {
+    return $this->getOriginalObject()->getEntityTypeId();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityType() {
+    return $this->getOriginalObject()->getEntityType();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function getIDFromConfigName($config_name, $config_prefix) {
+    return substr($config_name, strlen($config_prefix . '.'));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createFromStorageRecord(array $values) {
+    return $this->getOriginalObject()->createFromStorageRecord($values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function updateFromStorageRecord(ConfigEntityInterface $entity, array $values) {
+    return $this->getOriginalObject()
+      ->updateFromStorageRecord($entity, $values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAggregateQuery($conjunction = 'AND') {
+    return $this->getOriginalObject()->getAggregateQuery($conjunction);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadOverrideFree($id) {
+    return $this->getOriginalObject()->loadOverrideFree($id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultipleOverrideFree(array $ids = NULL) {
+    return $this->getOriginalObject()->loadMultipleOverrideFree($ids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function importCreate($name, Config $new_config, Config $old_config) {
+    $this->getOriginalObject()->importCreate($name, $new_config, $old_config);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function importUpdate($name, Config $new_config, Config $old_config) {
+    $this->getOriginalObject()->importUpdate($name, $new_config, $old_config);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function importDelete($name, Config $new_config, Config $old_config) {
+    $this->getOriginalObject()->importDelete($name, $new_config, $old_config);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function importRename($old_name, Config $new_config, Config $old_config) {
+    $this->getOriginalObject()->importRename($old_name, $new_config, $old_config);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function createInstance(ContainerInterface $container, EntityTypeInterface $entity_type) {
+    return new static(
+      $entity_type,
+      $container->get('config.factory'),
+      $container->get('uuid'),
+      $container->get('language_manager')
+    );
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php b/modules/contrib/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php
new file mode 100644
index 0000000..946349c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php
@@ -0,0 +1,97 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityViewBuilderDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Entity\EntityHandlerInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Entity\EntityTypeInterface;
+use Drupal\Core\Entity\EntityViewBuilderInterface;
+use Drupal\Core\Field\FieldItemInterface;
+use Drupal\Core\Field\FieldItemListInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class EntityViewBuilderDecorator
+ */
+class EntityViewBuilderDecorator extends EntityDecorator implements EntityHandlerInterface, EntityViewBuilderInterface {
+
+  /**
+   * @param EntityViewBuilderInterface $controller
+   */
+  public function __construct(EntityViewBuilderInterface $controller) {
+    parent::__construct($controller);
+
+    $this->entities = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildComponents(array &$build, array $entities, array $displays, $view_mode, $langcode = NULL) {
+    $this->getOriginalObject()
+      ->buildComponents($build, $entities, $displays, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function view(EntityInterface $entity, $view_mode = 'full', $langcode = NULL) {
+    $this->entities[] = $entity;
+
+    return $this->getOriginalObject()->view($entity, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewMultiple(array $entities = [], $view_mode = 'full', $langcode = NULL) {
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $this->getOriginalObject()
+      ->viewMultiple($entities, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache(array $entities = NULL) {
+    $this->getOriginalObject()->resetCache($entities);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewField(FieldItemListInterface $items, $display_options = []) {
+    return $this->getOriginalObject()->viewField($items, $display_options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewFieldItem(FieldItemInterface $item, $display_options = []) {
+    return $this->getOriginalObject()->viewFieldItem($item, $display_options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCacheTags() {
+    return $this->getOriginalObject()->getCacheTag();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function createInstance(ContainerInterface $container, EntityTypeInterface $entity_type) {
+    return new static(
+      $entity_type,
+      $container->get('entity.manager'),
+      $container->get('language_manager')
+    );
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php b/modules/contrib/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php
new file mode 100644
index 0000000..46a42a1
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php
@@ -0,0 +1,97 @@
+<?php
+
+namespace Drupal\webprofiler\EventSubscriber;
+
+use Drupal\Core\Render\RendererInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Symfony\Component\EventDispatcher\EventSubscriberInterface;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
+use Symfony\Component\HttpKernel\KernelEvents;
+
+/**
+ * Class WebprofilerEventSubscriber
+ */
+class WebprofilerEventSubscriber implements EventSubscriberInterface {
+
+  /**
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  private $currentUser;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * @var \Drupal\Core\Render\RendererInterface
+   */
+  protected $renderer;
+
+  /**
+   * @param \Drupal\Core\Session\AccountInterface $currentUser
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   * @param \Drupal\Core\Render\RendererInterface $renderer
+   */
+  public function __construct(AccountInterface $currentUser, UrlGeneratorInterface $urlGenerator, RendererInterface $renderer) {
+    $this->currentUser = $currentUser;
+    $this->urlGenerator = $urlGenerator;
+    $this->renderer = $renderer;
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   */
+  public function onKernelResponse(FilterResponseEvent $event) {
+    $response = $event->getResponse();
+    $request = $event->getRequest();
+
+    if ($response->headers->has('X-Debug-Token') && NULL !== $this->urlGenerator) {
+      $response->headers->set(
+        'X-Debug-Token-Link',
+        $this->urlGenerator->generate('webprofiler.dashboard', ['profile' => $response->headers->get('X-Debug-Token')])
+      );
+    }
+
+    // do not capture redirects or modify XML HTTP Requests
+    if ($request->isXmlHttpRequest()) {
+      return;
+    }
+
+    if ($this->currentUser->hasPermission('view webprofiler toolbar')) {
+      $this->injectToolbar($response);
+    }
+  }
+
+  /**
+   * @param \Symfony\Component\HttpFoundation\Response $response
+   */
+  protected function injectToolbar(Response $response) {
+    $content = $response->getContent();
+    $pos = mb_strripos($content, '</body>');
+
+    if (FALSE !== $pos) {
+      if ($token = $response->headers->get('X-Debug-Token')) {
+        $loader = [
+          '#theme' => 'webprofiler_loader',
+          '#token' => $token,
+          '#profiler_url' => $this->urlGenerator->generate('webprofiler.toolbar', ['profile' => $token]),
+        ];
+
+        $content = mb_substr($content, 0, $pos) . $this->renderer->renderRoot($loader) . mb_substr($content, $pos);
+        $response->setContent($content);
+      }
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public static function getSubscribedEvents() {
+    return [
+      KernelEvents::RESPONSE => ['onKernelResponse', -128],
+    ];
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Form/ConfigForm.php b/modules/contrib/devel/webprofiler/src/Form/ConfigForm.php
new file mode 100644
index 0000000..01d8436
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Form/ConfigForm.php
@@ -0,0 +1,242 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Form\ConfigForm.
+ */
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Form\ConfigFormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\webprofiler\Profiler\ProfilerStorageManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpKernel\Profiler\Profiler;
+
+/**
+ * Class ConfigForm
+ */
+class ConfigForm extends ConfigFormBase {
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var array
+   */
+  private $templates;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\ProfilerStorageManager
+   */
+  private $storageManager;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('config.factory'),
+      $container->get('profiler'),
+      $container->get('profiler.storage_manager'),
+      $container->getParameter('data_collector.templates')
+    );
+  }
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param Profiler $profiler
+   * @param \Drupal\webprofiler\Profiler\ProfilerStorageManager $storageManager
+   * @param array $templates
+   */
+  public function __construct(ConfigFactoryInterface $config_factory, Profiler $profiler, ProfilerStorageManager $storageManager, $templates) {
+    parent::__construct($config_factory);
+
+    $this->profiler = $profiler;
+    $this->templates = $templates;
+    $this->storageManager = $storageManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'webprofiler_config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $config = $this->config('webprofiler.config');
+
+    $form['purge_on_cache_clear'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Purge on cache clear'),
+      '#description' => $this->t('Deletes all profiler files during cache clear.'),
+      '#default_value' => $config->get('purge_on_cache_clear'),
+    ];
+
+    $storages = $this->storageManager->getStorages();
+
+    $form['storage'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Storage backend'),
+      '#description' => $this->t('Choose were to store profiler data.'),
+      '#options' => $storages,
+      '#default_value' => $config->get('storage'),
+    ];
+
+    $form['exclude'] = [
+      '#type' => 'textarea',
+      '#title' => $this->t('Exclude'),
+      '#default_value' => $config->get('exclude'),
+      '#description' => $this->t('Paths to exclude for profiling. One path per line.'),
+    ];
+
+    $form['active_toolbar_items'] = [
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Active toolbar items'),
+      '#options' => $this->getCollectors(),
+      '#description' => $this->t('Choose which items to show into the toolbar.'),
+      '#default_value' => $config->get('active_toolbar_items'),
+    ];
+
+    $form['ide_settings'] = [
+      '#type' => 'details',
+      '#title' => $this->t('IDE settings'),
+      '#open' => FALSE,
+    ];
+
+    $form['ide_settings']['ide_link'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IDE link'),
+      '#description' => $this->t('IDE link for open files.'),
+      '#default_value' => $config->get('ide_link'),
+    ];
+
+    $form['ide_settings']['ide_link_remote'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IDE link remote path'),
+      '#description' => $this->t('The path of the remote docroot. Leave blank if the docroot is on the same machine of the IDE. No trailing slash.'),
+      '#default_value' => $config->get('ide_link_remote'),
+    ];
+
+    $form['ide_settings']['ide_link_local'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IDE link local path'),
+      '#description' => $this->t('The path of the local docroot. Leave blank if the docroot is on the same machine of IDE. No trailing slash.'),
+      '#default_value' => $config->get('ide_link_local'),
+    ];
+
+    $form['database'] = [
+      '#type' => 'details',
+      '#title' => $this->t('Database settings'),
+      '#open' => FALSE,
+      '#states' => array(
+        'visible' => array(
+          array(
+            ':input[name="active_toolbar_items[database]' => array('checked' => TRUE),
+          ),
+        ),
+      ),
+    ];
+
+    $form['database']['query_sort'] = [
+      '#type' => 'radios',
+      '#title' => $this->t('Sort query log'),
+      '#options' => ['source' => 'by source', 'duration' => 'by duration'],
+      '#description' => $this->t('The query table can be sorted in the order that the queries were executed or by descending duration.'),
+      '#default_value' => $config->get('query_sort'),
+    ];
+
+    $form['database']['query_highlight'] = [
+      '#type' => 'number',
+      '#title' => $this->t('Slow query highlighting'),
+      '#description' => $this->t('Enter an integer in milliseconds. Any query which takes longer than this many milliseconds will be highlighted in the query log. This indicates a possibly inefficient query, or a candidate for caching.'),
+      '#default_value' => $config->get('query_highlight'),
+      '#min' => 0,
+    ];
+
+    $storageId = $this->config('webprofiler.config')->get('storage');
+    $storage = $this->storageManager->getStorage($storageId);
+
+    $form['purge'] = [
+      '#type' => 'details',
+      '#title' => $this->t('Purge profiles'),
+      '#open' => FALSE,
+    ];
+
+    $form['purge']['purge'] = [
+      '#type' => 'submit',
+      '#value' => $this->t('Purge'),
+      '#submit' => [[$this, 'purge']],
+    ];
+
+    $form['purge']['purge-help'] = [
+      '#type' => 'inline_template',
+      '#template' => '<div class="form-item">{{ message }}</div>',
+      '#context' => [
+        'message' => $this->t('Purge %storage profiles.', ['%storage' => $storage['title']]),
+      ],
+    ];
+
+    return parent::buildForm($form, $form_state);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $this->config('webprofiler.config')
+      ->set('purge_on_cache_clear', $form_state->getValue('purge_on_cache_clear'))
+      ->set('storage', $form_state->getValue('storage'))
+      ->set('exclude', $form_state->getValue('exclude'))
+      ->set('active_toolbar_items', $form_state->getValue('active_toolbar_items'))
+      ->set('ide_link', $form_state->getValue('ide_link'))
+      ->set('ide_link_remote', $form_state->getValue('ide_link_remote'))
+      ->set('ide_link_local', $form_state->getValue('ide_link_local'))
+      ->set('query_sort', $form_state->getValue('query_sort'))
+      ->set('query_highlight', $form_state->getValue('query_highlight'))
+      ->save();
+
+    parent::submitForm($form, $form_state);
+  }
+
+  /**
+   * Purges profiles.
+   */
+  public function purge(array &$form, FormStateInterface $form_state) {
+    $this->profiler->purge();
+    drupal_set_message($this->t('Profiles purged'));
+  }
+
+  /**
+   * @return array
+   */
+  private function getCollectors() {
+    $options = [];
+    foreach ($this->templates as $template) {
+      // drupal collector should not be disabled
+      if ($template[0] != 'drupal') {
+        $options[$template[0]] = $template[2];
+      }
+    }
+
+    asort($options);
+
+    return $options;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEditableConfigNames() {
+    return [
+      'webprofiler.config',
+    ];
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Form/FormBuilderWrapper.php b/modules/contrib/devel/webprofiler/src/Form/FormBuilderWrapper.php
new file mode 100644
index 0000000..48064b8
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Form/FormBuilderWrapper.php
@@ -0,0 +1,61 @@
+<?php
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Form\FormBuilder;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Class FormBuilderWrapper
+ */
+class FormBuilderWrapper extends FormBuilder {
+
+  /**
+   * @var array
+   */
+  private $buildForms;
+
+  /**
+   * @return array
+   */
+  public function getBuildForm() {
+    return $this->buildForms;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function prepareForm($form_id, &$form, FormStateInterface &$form_state) {
+    parent::prepareForm($form_id, $form, $form_state);
+
+    if (!$this->buildForms) {
+      $this->buildForms = [];
+    }
+
+    $elements = [];
+    foreach ($form as $key => $value) {
+      if (strpos($key, '#') !== 0) {
+        $elements[$key]['#title'] = isset($value['#title']) ? $value['#title'] : NULL;
+        $elements[$key]['#access'] = isset($value['#access']) ? $value['#access'] : NULL;
+        $elements[$key]['#type'] = isset($value['#type']) ? $value['#type'] : NULL;
+      }
+    }
+
+    $buildInfo = $form_state->getBuildInfo();
+
+    $class = get_class($buildInfo['callback_object']);
+    $method = new \ReflectionMethod($class, 'buildForm');
+
+    $this->buildForms[$buildInfo['form_id']] = [
+      'class' => [
+        'class' => $class,
+        'method' => 'buildForm',
+        'file' => $method->getFilename(),
+        'line' => $method->getStartLine(),
+      ],
+      'form' => $elements,
+    ];
+
+    return $form;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Form/ProfilesFilterForm.php b/modules/contrib/devel/webprofiler/src/Form/ProfilesFilterForm.php
new file mode 100644
index 0000000..87e04dc
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Form/ProfilesFilterForm.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Form\PurgeForm.
+ */
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Class ProfilesFilterForm
+ */
+class ProfilesFilterForm extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'webprofiler_profiles_filter';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form['ip'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IP'),
+      '#size' => 30,
+      '#default_value' => $this->getRequest()->query->get('ip'),
+      '#prefix' => '<div class="form--inline clearfix">',
+    ];
+
+    $form['url'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('Url'),
+      '#size' => 30,
+      '#default_value' => $this->getRequest()->query->get('url'),
+    ];
+
+    $form['method'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Method'),
+      '#options' => ['GET' => 'GET', 'POST' => 'POST'],
+      '#default_value' => $this->getRequest()->query->get('method'),
+    ];
+
+    $limits = [10, 50, 100];
+    $form['limit'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Limit'),
+      '#options' => array_combine($limits, $limits),
+      '#default_value' => $this->getRequest()->query->get('limit'),
+    ];
+
+    $form['actions'] = ['#type' => 'actions'];
+    $form['actions']['filter'] = [
+      '#type' => 'submit',
+      '#value' => t('Filter'),
+      '#attributes' => ['class' => ['button--primary']],
+      '#suffix' => '</div>',
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $ip = $form_state->getValue('ip');// ['values']['ip'];
+    $url = $form_state->getValue('url');
+    $method = $form_state->getValue('method');
+    $limit = $form_state->getValue('limit');
+
+    $url = new Url('webprofiler.admin_list', [], [
+      'query' => [
+        'ip' => $ip,
+        'url' => $url,
+        'method' => $method,
+        'limit' => $limit,
+      ]
+    ]);
+
+    $form_state->setRedirectUrl($url);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Frontend/PerformanceTimingData.php b/modules/contrib/devel/webprofiler/src/Frontend/PerformanceTimingData.php
new file mode 100644
index 0000000..da5565c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Frontend/PerformanceTimingData.php
@@ -0,0 +1,81 @@
+<?php
+
+namespace Drupal\webprofiler\Frontend;
+
+/**
+ * Class PerformanceTimingData
+ */
+class PerformanceTimingData {
+
+  /**
+   * @var array
+   */
+  private $data;
+
+  /**
+   * @param array $data
+   */
+  public function __construct($data) {
+    $this->data = $data;
+  }
+
+  /**
+   * @return int
+   */
+  public function getDNSTiming() {
+    if (isset($this->data['domainLookupEnd']) && isset($this->data['domainLookupStart'])) {
+      return $this->data['domainLookupEnd'] - $this->data['domainLookupStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getTCPTiming() {
+    if (isset($this->data['connectEnd']) && isset($this->data['connectStart'])) {
+      return $this->data['connectEnd'] - $this->data['connectStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getTtfbTiming() {
+    if (isset($this->data['responseStart']) && isset($this->data['connectEnd'])) {
+      return $this->data['responseStart'] - $this->data['connectEnd'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getDataTiming() {
+    if (isset($this->data['responseEnd']) && isset($this->data['responseStart'])) {
+      return $this->data['responseEnd'] - $this->data['responseStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getDomTiming() {
+    if (isset($this->data['loadEventStart']) && isset($this->data['responseEnd'])) {
+      return $this->data['loadEventStart'] - $this->data['responseEnd'];
+    }
+    else {
+      return 0;
+    }
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Helper/ClassShortener.php b/modules/contrib/devel/webprofiler/src/Helper/ClassShortener.php
new file mode 100644
index 0000000..204de32
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Helper/ClassShortener.php
@@ -0,0 +1,34 @@
+<?php
+
+namespace Drupal\webprofiler\Helper;
+
+use Drupal\Component\Render\FormattableMarkup;
+
+/**
+ * Class ClassShortener
+ */
+class ClassShortener implements ClassShortenerInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function shortenClass($class) {
+    $parts = explode('\\', $class);
+    $result = [];
+    $size = count($parts) - 1;
+
+    foreach ($parts as $key => $part) {
+      if ($key < $size) {
+        $result[] = substr($part, 0, 1);
+      }
+      else {
+        $result[] = $part;
+      }
+    }
+
+    return new FormattableMarkup("<abbr title=\"@class\">@short</abbr>", [
+      '@class' => $class,
+      '@short' => implode('\\', $result)
+    ]);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Helper/ClassShortenerInterface.php b/modules/contrib/devel/webprofiler/src/Helper/ClassShortenerInterface.php
new file mode 100644
index 0000000..e1b2af5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Helper/ClassShortenerInterface.php
@@ -0,0 +1,17 @@
+<?php
+
+namespace Drupal\webprofiler\Helper;
+
+/**
+ * Interface ClassShortenerInterface
+ */
+interface ClassShortenerInterface {
+
+  /**
+   * @param string $class
+   *
+   * @return string
+   */
+  public function shortenClass($class);
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGenerator.php b/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGenerator.php
new file mode 100644
index 0000000..2c785f5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGenerator.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\IdeLinkGenerator.
+ */
+
+namespace Drupal\webprofiler\Helper;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Component\Render\FormattableMarkup;
+
+/**
+ * Class IdeLinkGenerator.
+ */
+class IdeLinkGenerator implements IdeLinkGeneratorInterface {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $config_factory;
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   */
+  public function __construct(ConfigFactoryInterface $config_factory) {
+    $this->config_factory = $config_factory;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateLink($file, $line) {
+    $ide_link = $this->config_factory->get('webprofiler.config')
+      ->get('ide_link');
+    $ide_link_remote = $this->config_factory->get('webprofiler.config')
+      ->get('ide_link_remote');
+    $ide_link_local = $this->config_factory->get('webprofiler.config')
+      ->get('ide_link_local');
+
+    $file = str_replace($ide_link_remote, $ide_link_local, $file);
+
+    return new FormattableMarkup($ide_link, ['@file' => $file, '@line' => $line]);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php b/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php
new file mode 100644
index 0000000..22babdc
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php
@@ -0,0 +1,22 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\IdeLinkGeneratorInterface.
+ */
+
+namespace Drupal\webprofiler\Helper;
+
+/**
+ * Interface IdeLinkGeneratorInterface.
+ */
+interface IdeLinkGeneratorInterface {
+
+  /**
+   * @param $file
+   * @param $line
+   *
+   * @return string
+   */
+  public function generateLink($file, $line);
+}
diff --git a/modules/contrib/devel/webprofiler/src/Http/HttpClientMiddleware.php b/modules/contrib/devel/webprofiler/src/Http/HttpClientMiddleware.php
new file mode 100644
index 0000000..b64a2a6
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Http/HttpClientMiddleware.php
@@ -0,0 +1,84 @@
+<?php
+
+namespace Drupal\webprofiler\Http;
+
+use GuzzleHttp\Exception\RequestException;
+use GuzzleHttp\TransferStats;
+use Psr\Http\Message\RequestInterface;
+
+/**
+ * Class HttpClientMiddleware
+ */
+class HttpClientMiddleware {
+
+  /**
+   * @var array
+   */
+  private $completedRequests;
+
+  /**
+   * @var array
+   */
+  private $failedRequests;
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->completedRequests = [];
+    $this->failedRequests = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __invoke() {
+    return function ($handler) {
+      return function (RequestInterface $request, array $options) use ($handler) {
+
+        $options['on_stats'] = function (TransferStats $stats) use ($request) {
+          $request->stats = $stats;
+        };
+
+        return $handler($request, $options)->then(
+          function ($response) use ($request) {
+
+            $this->completedRequests[] = [
+              'request' => $request,
+              'response' => $response,
+            ];
+
+            return $response;
+          },
+          function ($reason) use ($request) {
+            $response = $reason instanceof RequestException
+              ? $reason->getResponse()
+              : null;
+
+            $this->failedRequests[] = [
+              'request' => $request,
+              'response' => $response,
+              'message' => $reason->getMessage(),
+            ];
+
+            return \GuzzleHttp\Promise\rejection_for($reason);
+          }
+        );
+      };
+    };
+  }
+
+  /**
+   * @return array
+   */
+  public function getCompletedRequests() {
+    return $this->completedRequests;
+  }
+
+  /**
+   * @return array
+   */
+  public function getFailedRequests() {
+    return $this->failedRequests;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Mail/MailManagerWrapper.php b/modules/contrib/devel/webprofiler/src/Mail/MailManagerWrapper.php
new file mode 100644
index 0000000..58ecddc
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Mail/MailManagerWrapper.php
@@ -0,0 +1,94 @@
+<?php
+
+namespace Drupal\webprofiler\Mail;
+
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Logger\LoggerChannelFactoryInterface;
+use Drupal\Core\Mail\MailManagerInterface;
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\StringTranslation\TranslationInterface;
+use Drupal\webprofiler\DataCollector\MailDataCollector;
+
+/**
+ * Class MailManagerWrapper
+ */
+class MailManagerWrapper extends DefaultPluginManager implements MailManagerInterface {
+
+  use StringTranslationTrait;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\MailDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @var \Drupal\Core\Mail\MailManagerInterface
+   */
+  private $mailManager;
+
+  /**
+   * The config factory.
+   *
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  protected $configFactory;
+
+  /**
+   * The logger factory.
+   *
+   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
+   */
+  protected $loggerFactory;
+
+  /**
+   * List of already instantiated mail plugins.
+   *
+   * @var array
+   */
+  protected $instances = array();
+
+  /**
+   * Constructs the MailManager object.
+   *
+   * @param \Traversable $namespaces
+   *   An object that implements \Traversable which contains the root paths
+   *   keyed by the corresponding namespace to look for plugin implementations.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   *   Cache backend instance to use.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler to invoke the alter hook with.
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   *   The configuration factory.
+   * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $logger_factory
+   *   The logger channel factory.
+   * @param \Drupal\Core\StringTranslation\TranslationInterface $string_translation
+   *   The string translation service.
+   * @param \Drupal\Core\Mail\MailManagerInterface $mailManager
+   * @param \Drupal\webprofiler\DataCollector\MailDataCollector $dataCollector
+   */
+  public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler, ConfigFactoryInterface $config_factory, LoggerChannelFactoryInterface $logger_factory, TranslationInterface $string_translation, MailManagerInterface $mailManager, MailDataCollector $dataCollector) {
+    parent::__construct('Plugin/Mail', $namespaces, $module_handler, 'Drupal\Core\Mail\MailInterface', 'Drupal\Core\Annotation\Mail');
+    $this->alterInfo('mail_backend_info');
+    $this->setCacheBackend($cache_backend, 'mail_backend_plugins');
+    $this->configFactory = $config_factory;
+    $this->loggerFactory = $logger_factory;
+    $this->stringTranslation = $string_translation;
+    $this->dataCollector = $dataCollector;
+    $this->mailManager = $mailManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function mail($module, $key, $to, $langcode, $params = array(), $reply = NULL, $send = TRUE) {
+    $message = $this->mailManager->mail($module, $key, $to, $langcode, $params, $reply, $send);
+
+    $instance = $this->mailManager->getInstance(['module' => $module, 'key' => $key]);
+    $this->dataCollector->addMessage($message, $instance);
+
+    return $message;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php b/modules/contrib/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php
new file mode 100644
index 0000000..2eb9a17
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php
@@ -0,0 +1,163 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Profiler\DatabaseProfilerStorage.
+ */
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Database\Connection;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Implements a profiler storage using the DBTNG query api.
+ */
+class DatabaseProfilerStorage implements ProfilerStorageInterface {
+
+  /**
+   * The database connection.
+   *
+   * @var \Drupal\Core\Database\Connection
+   */
+  protected $database;
+
+  /**
+   * Constructs a new DatabaseProfilerStorage instance.
+   *
+   * @param \Drupal\Core\Database\Connection $database
+   *   The database connection.
+   */
+  function __construct(Connection $database) {
+    $this->database = $database;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function find($ip, $url, $limit, $method, $start = NULL, $end = NULL) {
+    $select = $this->database->select('webprofiler', 'wp', ['fetch' => \PDO::FETCH_ASSOC]);
+
+    if (NULL === $start) {
+      $start = 0;
+    }
+
+    if (NULL === $end) {
+      $end = time();
+    }
+
+    if ($ip = preg_replace('/[^\d\.]/', '', $ip)) {
+      $select->condition('ip', '%' . $this->database->escapeLike($ip) . '%', 'LIKE');
+    }
+
+    if ($url) {
+      $select->condition('url', '%' . $this->database->escapeLike(addcslashes($url, '%_\\')) . '%', 'LIKE');
+    }
+
+    if ($method) {
+      $select->condition('method', $method);
+    }
+
+    if (!empty($start)) {
+      $select->condition('time', $start, '>=');
+    }
+
+    if (!empty($end)) {
+      $select->condition('time', $end, '<=');
+    }
+
+    $select->fields('wp', [
+      'token',
+      'ip',
+      'method',
+      'url',
+      'time',
+      'parent',
+      'status_code'
+    ]);
+    $select->orderBy('time', 'DESC');
+    $select->range(0, $limit);
+    return $select->execute()
+      ->fetchAllAssoc('token');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function read($token) {
+    $record = $this->database->select('webprofiler', 'w')
+      ->fields('w')
+      ->condition('token', $token)
+      ->execute()
+      ->fetch();
+    if (isset($record->data)) {
+      return $this->createProfileFromData($token, $record);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function write(Profile $profile) {
+    $args = [
+      'token' => $profile->getToken(),
+      'parent' => $profile->getParentToken(),
+      'data' => base64_encode(serialize($profile->getCollectors())),
+      'ip' => $profile->getIp(),
+      'method' => $profile->getMethod(),
+      'url' => $profile->getUrl(),
+      'time' => $profile->getTime(),
+      'created_at' => time(),
+      'status_code' => $profile->getStatusCode(),
+    ];
+
+    try {
+      $query = $this->database->select('webprofiler', 'w')
+        ->fields('w', ['token']);
+      $query->condition('token', $profile->getToken());
+      $count = $query->countQuery()->execute()->fetchAssoc();
+
+      if ($count['expression']) {
+        $this->database->update('webprofiler')
+          ->fields($args)
+          ->condition('token', $profile->getToken())
+          ->execute();
+      }
+      else {
+        $this->database->insert('webprofiler')->fields($args)->execute();
+      }
+
+      $status = TRUE;
+    } catch (\Exception $e) {
+      $status = FALSE;
+    }
+
+    return $status;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function purge() {
+    $this->database->truncate('webprofiler')->execute();
+  }
+
+  /**
+   * @param string $token
+   * @param $data
+   *
+   * @return Profile
+   */
+  private function createProfileFromData($token, $data) {
+    $profile = new Profile($token);
+    $profile->setIp($data->ip);
+    $profile->setMethod($data->method);
+    $profile->setUrl($data->url);
+    $profile->setTime($data->time);
+    $profile->setCollectors(unserialize(base64_decode($data->data)));
+    $profile->setStatusCode($data->status_code);
+
+    return $profile;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/FileProfilerStorage.php b/modules/contrib/devel/webprofiler/src/Profiler/FileProfilerStorage.php
new file mode 100644
index 0000000..7eb63ac
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/FileProfilerStorage.php
@@ -0,0 +1,24 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Symfony\Component\HttpKernel\Profiler\FileProfilerStorage as SymfonyFileProfilerStorage;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+
+class FileProfilerStorage extends SymfonyFileProfilerStorage {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function createProfileFromData($token, $data, $parent = NULL) {
+    $profile = new Profile($token);
+    $profile->setIp($data['ip']);
+    $profile->setMethod($data['method']);
+    $profile->setUrl($data['url']);
+    $profile->setTime($data['time']);
+    $profile->setCollectors($data['data']);
+    $profile->setStatusCode($data['status_code']);
+
+    return $profile;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/Profiler.php b/modules/contrib/devel/webprofiler/src/Profiler/Profiler.php
new file mode 100644
index 0000000..438dcb4
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/Profiler.php
@@ -0,0 +1,77 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Psr\Log\LoggerInterface;
+use Symfony\Component\HttpKernel\DataCollector\DataCollectorInterface;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\Profiler as SymfonyProfiler;
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Class Profiler
+ */
+class Profiler extends SymfonyProfiler {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface $config
+   */
+  private $config;
+
+  /**
+   * @var array
+   */
+  private $activeToolbarItems;
+
+  private $localStorage;
+  private $localLogger;
+
+  /**
+   * Constructor.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage
+   *   A ProfilerStorageInterface instance
+   * @param \Psr\Log\LoggerInterface $logger
+   *   A LoggerInterface instance
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config
+   */
+  public function __construct(ProfilerStorageInterface $storage, LoggerInterface $logger = NULL, ConfigFactoryInterface $config) {
+    parent::__construct($storage, $logger);
+
+    $this->localStorage = $storage;
+    $this->localLogger = $logger;
+
+    $this->config = $config;
+    $this->activeToolbarItems = $this->config->get('webprofiler.config')
+      ->get('active_toolbar_items');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function add(DataCollectorInterface $collector) {
+    // drupal collector should not be disabled
+    if ($collector->getName() == 'drupal') {
+      parent::add($collector);
+    }
+    else {
+      if ($this->activeToolbarItems && array_key_exists($collector->getName(), $this->activeToolbarItems) && $this->activeToolbarItems[$collector->getName()] !== '0') {
+        parent::add($collector);
+      }
+    }
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return bool
+   */
+  public function updateProfile(Profile $profile) {
+    if (!($ret = $this->localStorage->write($profile)) && NULL !== $this->localLogger) {
+      $this->localLogger->warning('Unable to store the profiler information.');
+    }
+
+    return $ret;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php b/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php
new file mode 100644
index 0000000..5ba1545
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php
@@ -0,0 +1,26 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class ProfilerStorageFactory
+ */
+class ProfilerStorageFactory {
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config
+   * @param \Symfony\Component\DependencyInjection\ContainerInterface $container
+   *
+   * @return \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface
+   */
+  final public static function getProfilerStorage(ConfigFactoryInterface $config, ContainerInterface $container) {
+    $storage = $config->get('webprofiler.config')
+      ->get('storage') ?: 'profiler.database_storage';
+
+    return $container->get($storage);
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageManager.php b/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageManager.php
new file mode 100644
index 0000000..fcd3683
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/ProfilerStorageManager.php
@@ -0,0 +1,52 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Class ProfilerStorageManager
+ */
+class ProfilerStorageManager {
+
+  /**
+   * @var array
+   */
+  private $storages;
+
+  /**
+   * @return array
+   */
+  public function getStorages() {
+    $output = [];
+
+    /** @var \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage */
+    foreach ($this->storages as $id => $storage) {
+      $output[$id] = $storage['title'];
+    }
+
+    return $output;
+  }
+
+  /**
+   * @param $id
+   *
+   * @return array
+   */
+  public function getStorage($id) {
+    return $this->storages[$id];
+  }
+
+  /**
+   * @param $id
+   * @param $title
+   * @param \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage
+   */
+  public function addStorage($id, $title, ProfilerStorageInterface $storage) {
+    $this->storages[$id] = [
+      'title' => $title,
+      'class' => $storage,
+    ];
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Profiler/TemplateManager.php b/modules/contrib/devel/webprofiler/src/Profiler/TemplateManager.php
new file mode 100644
index 0000000..87aa685
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Profiler/TemplateManager.php
@@ -0,0 +1,130 @@
+<?php
+
+/*
+ * This file is part of the Symfony package.
+ *
+ * (c) Fabien Potencier <fabien@symfony.com>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+
+namespace Drupal\webprofiler\Profiler;
+
+use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
+use Symfony\Component\HttpKernel\Profiler\Profiler as SymfonyProfiler;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+
+/**
+ * Profiler Templates Manager
+ */
+class TemplateManager {
+
+  /**
+   * @var \Twig_Environment
+   */
+  protected $twig;
+
+  /**
+   * @var \Twig_Loader_Chain
+   */
+  protected $twigLoader;
+
+  /**
+   * @var array
+   */
+  protected $templates;
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  protected $profiler;
+
+  /**
+   * Constructor.
+   *
+   * @param SymfonyProfiler $profiler
+   * @param \Twig_Environment $twig
+   * @param \Twig_Loader_Chain $twigLoader
+   * @param array $templates
+   */
+  public function __construct(SymfonyProfiler $profiler, \Twig_Environment $twig, \Twig_Loader_Chain $twigLoader, array $templates) {
+    $this->profiler = $profiler;
+    $this->twig = $twig;
+    $this->twigLoader = $twigLoader;
+    $this->templates = $templates;
+  }
+
+  /**
+   * Gets the template name for a given panel.
+   *
+   * @param Profile $profile
+   * @param string $panel
+   *
+   * @return mixed
+   *
+   * @throws \Symfony\Component\HttpKernel\Exception\NotFoundHttpException
+   */
+  public function getName(Profile $profile, $panel) {
+    $templates = $this->getNames($profile);
+
+    if (!isset($templates[$panel])) {
+      throw new NotFoundHttpException(sprintf('Panel "%s" is not registered in profiler or is not present in viewed profile.', $panel));
+    }
+
+    return $templates[$panel];
+  }
+
+  /**
+   * Gets the templates for a given profile.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return array
+   */
+  public function getTemplates(Profile $profile) {
+    $templates = $this->getNames($profile);
+    foreach ($templates as $name => $template) {
+      $templates[$name] = $this->twig->loadTemplate($template);
+    }
+
+    return $templates;
+  }
+
+  /**
+   * Gets template names of templates that are present in the viewed profile.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return array
+   *
+   * @throws \UnexpectedValueException
+   */
+  protected function getNames(Profile $profile) {
+    $templates = [];
+
+    foreach ($this->templates as $arguments) {
+      if (NULL === $arguments) {
+        continue;
+      }
+
+      list($name, $template) = $arguments;
+
+      if (!$this->profiler->has($name) || !$profile->hasCollector($name)) {
+        continue;
+      }
+
+      if ('.html.twig' === substr($template, -10)) {
+        $template = substr($template, 0, -10);
+      }
+
+      if (!$this->twigLoader->exists($template . '.html.twig')) {
+        throw new \UnexpectedValueException(sprintf('The profiler template "%s.html.twig" for data collector "%s" does not exist.', $template, $name));
+      }
+
+      $templates[$name] = $template . '.html.twig';
+    }
+
+    return $templates;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php b/modules/contrib/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php
new file mode 100644
index 0000000..4e1b41d
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php
@@ -0,0 +1,47 @@
+<?php
+
+namespace Drupal\webprofiler\RequestMatcher;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Path\PathMatcherInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\RequestMatcherInterface;
+
+/**
+ * Class WebprofilerRequestMatcher
+ */
+class WebprofilerRequestMatcher implements RequestMatcherInterface {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @var \Drupal\Core\Path\PathMatcherInterface
+   */
+  private $pathMatcher;
+
+  /**
+   * @param ConfigFactoryInterface $configFactory
+   * @param \Drupal\Core\Path\PathMatcherInterface $pathMatcher
+   */
+  public function __construct(ConfigFactoryInterface $configFactory, PathMatcherInterface $pathMatcher) {
+    $this->configFactory = $configFactory;
+    $this->pathMatcher = $pathMatcher;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function matches(Request $request) {
+    $path = $request->getPathInfo();
+
+    $patterns = $this->configFactory->get('webprofiler.config')->get('exclude');
+
+    // never add Webprofiler to phpinfo page.
+    $patterns .= "\r\n/admin/reports/status/php";
+
+    return !$this->pathMatcher->matchPath($path, $patterns);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Routing/TokenConverter.php b/modules/contrib/devel/webprofiler/src/Routing/TokenConverter.php
new file mode 100644
index 0000000..ea168cd
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Routing/TokenConverter.php
@@ -0,0 +1,54 @@
+<?php
+
+namespace Drupal\webprofiler\Routing;
+
+use Drupal\Core\ParamConverter\ParamConverterInterface;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\Routing\Route;
+
+/**
+ * Class TokenConverter
+ */
+class TokenConverter implements ParamConverterInterface {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   */
+  public function __construct(Profiler $profiler) {
+    $this->profiler = $profiler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function convert($value, $definition, $name, array $defaults) {
+    if (NULL === $this->profiler) {
+      return NULL;
+    }
+
+    $profile = $this->profiler->loadProfile($value);
+
+    if (NULL === $profile) {
+      return NULL;
+    }
+
+    return $profile;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function applies($definition, $name, Route $route) {
+    if (!empty($definition['type']) && $definition['type'] === 'webprofiler:token') {
+      return TRUE;
+    }
+    return FALSE;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php b/modules/contrib/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php
new file mode 100644
index 0000000..cfe7c4a
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\StackMiddleware\WebprofilerMiddleware.
+ */
+
+namespace Drupal\webprofiler\StackMiddleware;
+
+use Drupal\Core\Database\Database;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpKernel\HttpKernelInterface;
+
+/**
+ * Class WebprofilerMiddleware
+ */
+class WebprofilerMiddleware implements HttpKernelInterface {
+
+  /**
+   * The decorated kernel.
+   *
+   * @var \Symfony\Component\HttpKernel\HttpKernelInterface
+   */
+  protected $httpKernel;
+
+  /**
+   * Constructs a WebprofilerMiddleware object.
+   *
+   * @param \Symfony\Component\HttpKernel\HttpKernelInterface $http_kernel
+   *   The decorated kernel.
+   */
+  public function __construct(HttpKernelInterface $http_kernel) {
+    $this->httpKernel = $http_kernel;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function handle(Request $request, $type = self::MASTER_REQUEST, $catch = TRUE) {
+    foreach (Database::getAllConnectionInfo() as $key => $info) {
+      Database::startLog('webprofiler', $key);
+    }
+    return $this->httpKernel->handle($request, $type, $catch);
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/State/StateWrapper.php b/modules/contrib/devel/webprofiler/src/State/StateWrapper.php
new file mode 100644
index 0000000..adc03e9
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/State/StateWrapper.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\State\StateWrapper.
+ */
+
+namespace Drupal\webprofiler\State;
+
+use Drupal\Core\State\StateInterface;
+use Drupal\webprofiler\DataCollector\StateDataCollector;
+
+/**
+ * Class StateWrapper
+ */
+class StateWrapper implements StateInterface {
+
+  /**
+   * @var \Drupal\Core\State\StateInterface
+   */
+  private $state;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\StateDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\State\StateInterface $state
+   * @param \Drupal\webprofiler\DataCollector\StateDataCollector $dataCollector
+   */
+  public function __construct(StateInterface $state, StateDataCollector $dataCollector) {
+    $this->state = $state;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($key, $default = NULL) {
+    $this->dataCollector->addState($key);
+
+    return $this->state->get($key, $default);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getMultiple(array $keys) {
+    foreach ($keys as $key) {
+      $this->dataCollector->addState($key);
+    }
+
+    return $this->state->getMultiple($keys);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function set($key, $value) {
+    $this->state->set($key, $value);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setMultiple(array $data) {
+    $this->state->setMultiple($data);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete($key) {
+    $this->state->delete($key);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteMultiple(array $keys) {
+    $this->state->deleteMultiple($keys);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache() {
+    $this->state->resetCache();
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Stopwatch.php b/modules/contrib/devel/webprofiler/src/Stopwatch.php
new file mode 100644
index 0000000..520fa3a
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Stopwatch.php
@@ -0,0 +1,548 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Stopwatch.
+ */
+
+namespace Drupal\webprofiler {
+
+  /**
+   * Class Stopwatch
+   */
+  class Stopwatch extends \Symfony\Component\Stopwatch\Stopwatch {
+
+  }
+
+}
+
+namespace Symfony\Component\Stopwatch {
+
+  /**
+   * Class Stopwatch
+   */
+  class Stopwatch {
+    /**
+     * @var Section[]
+     */
+    private $sections;
+
+    /**
+     * @var array
+     */
+    private $activeSections;
+
+    /**
+     *
+     */
+    public function __construct() {
+      $this->sections = $this->activeSections = ['__root__' => new Section('__root__')];
+    }
+
+    /**
+     * Creates a new section or re-opens an existing section.
+     *
+     * @param string|null $id The id of the session to re-open, null to create a new one
+     *
+     * @throws \LogicException When the section to re-open is not reachable
+     */
+    public function openSection($id = NULL) {
+      $current = end($this->activeSections);
+
+      if (NULL !== $id && NULL === $current->get($id)) {
+        throw new \LogicException(sprintf('The section "%s" has been started at an other level and can not be opened.', $id));
+      }
+
+      $this->start('__section__.child', 'section');
+      $this->activeSections[] = $current->open($id);
+      $this->start('__section__');
+    }
+
+    /**
+     * Stops the last started section.
+     *
+     * The id parameter is used to retrieve the events from this section.
+     *
+     * @see getSectionEvents
+     *
+     * @param string $id The identifier of the section
+     *
+     * @throws \LogicException When there's no started section to be stopped
+     */
+    public function stopSection($id) {
+      $this->stop('__section__');
+
+      if (1 == count($this->activeSections)) {
+        throw new \LogicException('There is no started section to stop.');
+      }
+
+      $this->sections[$id] = array_pop($this->activeSections)->setId($id);
+      $this->stop('__section__.child');
+    }
+
+    /**
+     * Starts an event.
+     *
+     * @param string $name The event name
+     * @param string $category The event category
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function start($name, $category = NULL) {
+      return end($this->activeSections)->startEvent($name, $category);
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @param string $name The event name
+     *
+     * @return bool
+     */
+    public function isStarted($name) {
+      return end($this->activeSections)->isEventStarted($name);
+    }
+
+    /**
+     * Stops an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function stop($name) {
+      return end($this->activeSections)->stopEvent($name);
+    }
+
+    /**
+     * Stops then restarts an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function lap($name) {
+      return end($this->activeSections)->stopEvent($name)->start();
+    }
+
+    /**
+     * Gets all events for a given section.
+     *
+     * @param string $id A section identifier
+     *
+     * @return StopwatchEvent[] An array of StopwatchEvent instances
+     */
+    public function getSectionEvents($id) {
+      return isset($this->sections[$id]) ? $this->sections[$id]->getEvents() : [];
+    }
+  }
+
+
+  /**
+   * @internal This class is for internal usage only
+   *
+   * @author Fabien Potencier <fabien@symfony.com>
+   */
+  class Section {
+    /**
+     * @var StopwatchEvent[]
+     */
+    private $events = [];
+
+    /**
+     * @var null|float
+     */
+    private $origin;
+
+    /**
+     * @var string
+     */
+    private $id;
+
+    /**
+     * @var Section[]
+     */
+    private $children = [];
+
+    /**
+     * Constructor.
+     *
+     * @param float|null $origin Set the origin of the events in this section, use null to set their origin to their start time
+     */
+    public function __construct($origin = NULL) {
+      $this->origin = is_numeric($origin) ? $origin : NULL;
+    }
+
+    /**
+     * Returns the child section.
+     *
+     * @param string $id The child section identifier
+     *
+     * @return Section|null The child section or null when none found
+     */
+    public function get($id) {
+      foreach ($this->children as $child) {
+        if ($id === $child->getId()) {
+          return $child;
+        }
+      }
+
+      return NULL;
+    }
+
+    /**
+     * Creates or re-opens a child section.
+     *
+     * @param string|null $id null to create a new section, the identifier to re-open an existing one.
+     *
+     * @return Section A child section
+     */
+    public function open($id) {
+      if (NULL === $session = $this->get($id)) {
+        $session = $this->children[] = new self(microtime(TRUE) * 1000);
+      }
+
+      return $session;
+    }
+
+    /**
+     * @return string The identifier of the section
+     */
+    public function getId() {
+      return $this->id;
+    }
+
+    /**
+     * Sets the session identifier.
+     *
+     * @param string $id The session identifier
+     *
+     * @return Section The current section
+     */
+    public function setId($id) {
+      $this->id = $id;
+
+      return $this;
+    }
+
+    /**
+     * Starts an event.
+     *
+     * @param string $name The event name
+     * @param string $category The event category
+     *
+     * @return StopwatchEvent The event
+     */
+    public function startEvent($name, $category) {
+      if (!isset($this->events[$name])) {
+        $this->events[$name] = new StopwatchEvent($this->origin ?: microtime(TRUE) * 1000, $category);
+      }
+
+      return $this->events[$name]->start();
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @param string $name The event name
+     *
+     * @return bool
+     */
+    public function isEventStarted($name) {
+      return isset($this->events[$name]) && $this->events[$name]->isStarted();
+    }
+
+    /**
+     * Stops an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When the event has not been started
+     */
+    public function stopEvent($name) {
+      if (!isset($this->events[$name])) {
+        throw new \LogicException(sprintf('Event "%s" is not started.', $name));
+      }
+
+      return $this->events[$name]->stop();
+    }
+
+    /**
+     * Stops then restarts an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When the event has not been started
+     */
+    public function lap($name) {
+      return $this->stopEvent($name)->start();
+    }
+
+    /**
+     * Returns the events from this section.
+     *
+     * @return StopwatchEvent[] An array of StopwatchEvent instances
+     */
+    public function getEvents() {
+      return $this->events;
+    }
+  }
+
+  /**
+   * Class StopwatchEvent
+   */
+  class StopwatchEvent {
+    /**
+     * @var StopwatchPeriod[]
+     */
+    private $periods = [];
+
+    /**
+     * @var float
+     */
+    private $origin;
+
+    /**
+     * @var string
+     */
+    private $category;
+
+    /**
+     * @var float[]
+     */
+    private $started = [];
+
+    /**
+     * Constructor.
+     *
+     * @param float $origin The origin time in milliseconds
+     * @param string|null $category The event category or null to use the default
+     *
+     * @throws \InvalidArgumentException When the raw time is not valid
+     */
+    public function __construct($origin, $category = NULL) {
+      $this->origin = $this->formatTime($origin);
+      $this->category = is_string($category) ? $category : 'default';
+    }
+
+    /**
+     * Gets the category.
+     *
+     * @return string The category
+     */
+    public function getCategory() {
+      return $this->category;
+    }
+
+    /**
+     * Gets the origin.
+     *
+     * @return float The origin in milliseconds
+     */
+    public function getOrigin() {
+      return $this->origin;
+    }
+
+    /**
+     * Starts a new event period.
+     *
+     * @return StopwatchEvent The event
+     */
+    public function start() {
+      $this->started[] = $this->getNow();
+
+      return $this;
+    }
+
+    /**
+     * Stops the last started event period.
+     *
+     * @throws \LogicException When start wasn't called before stopping
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When stop() is called without a matching call to start()
+     */
+    public function stop() {
+      if (!count($this->started)) {
+        throw new \LogicException('stop() called but start() has not been called before.');
+      }
+
+      $this->periods[] = new StopwatchPeriod(array_pop($this->started), $this->getNow());
+
+      return $this;
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @return bool
+     */
+    public function isStarted() {
+      return !empty($this->started);
+    }
+
+    /**
+     * Stops the current period and then starts a new one.
+     *
+     * @return StopwatchEvent The event
+     */
+    public function lap() {
+      return $this->stop()->start();
+    }
+
+    /**
+     * Stops all non already stopped periods.
+     */
+    public function ensureStopped() {
+      while (count($this->started)) {
+        $this->stop();
+      }
+    }
+
+    /**
+     * Gets all event periods.
+     *
+     * @return StopwatchPeriod[] An array of StopwatchPeriod instances
+     */
+    public function getPeriods() {
+      return $this->periods;
+    }
+
+    /**
+     * Gets the relative time of the start of the first period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getStartTime() {
+      return isset($this->periods[0]) ? $this->periods[0]->getStartTime() : 0;
+    }
+
+    /**
+     * Gets the relative time of the end of the last period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getEndTime() {
+      return ($count = count($this->periods)) ? $this->periods[$count - 1]->getEndTime() : 0;
+    }
+
+    /**
+     * Gets the duration of the events (including all periods).
+     *
+     * @return integer The duration (in milliseconds)
+     */
+    public function getDuration() {
+      $total = 0;
+      foreach ($this->periods as $period) {
+        $total += $period->getDuration();
+      }
+
+      return $total;
+    }
+
+    /**
+     * Gets the max memory usage of all periods.
+     *
+     * @return integer The memory usage (in bytes)
+     */
+    public function getMemory() {
+      $memory = 0;
+      foreach ($this->periods as $period) {
+        if ($period->getMemory() > $memory) {
+          $memory = $period->getMemory();
+        }
+      }
+
+      return $memory;
+    }
+
+    /**
+     * Return the current time relative to origin.
+     *
+     * @return float Time in ms
+     */
+    protected function getNow() {
+      return $this->formatTime(microtime(TRUE) * 1000 - $this->origin);
+    }
+
+    /**
+     * Formats a time.
+     *
+     * @param integer|float $time A raw time
+     *
+     * @return float The formatted time
+     *
+     * @throws \InvalidArgumentException When the raw time is not valid
+     */
+    private function formatTime($time) {
+      if (!is_numeric($time)) {
+        throw new \InvalidArgumentException('The time must be a numerical value');
+      }
+
+      return round($time, 1);
+    }
+  }
+
+  /**
+   * Class StopwatchPeriod
+   */
+  class StopwatchPeriod {
+    private $start;
+    private $end;
+    private $memory;
+
+    /**
+     * Constructor.
+     *
+     * @param integer $start The relative time of the start of the period (in milliseconds)
+     * @param integer $end The relative time of the end of the period (in milliseconds)
+     */
+    public function __construct($start, $end) {
+      $this->start = (integer) $start;
+      $this->end = (integer) $end;
+      $this->memory = memory_get_usage(TRUE);
+    }
+
+    /**
+     * Gets the relative time of the start of the period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getStartTime() {
+      return $this->start;
+    }
+
+    /**
+     * Gets the relative time of the end of the period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getEndTime() {
+      return $this->end;
+    }
+
+    /**
+     * Gets the time spent in this period.
+     *
+     * @return integer The period duration (in milliseconds)
+     */
+    public function getDuration() {
+      return $this->end - $this->start;
+    }
+
+    /**
+     * Gets the memory usage.
+     *
+     * @return integer The memory usage (in bytes)
+     */
+    public function getMemory() {
+      return $this->memory;
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php b/modules/contrib/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php
new file mode 100644
index 0000000..7967646
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php
@@ -0,0 +1,69 @@
+<?php
+
+namespace Drupal\webprofiler\StringTranslation;
+
+use Drupal\Core\StringTranslation\TranslationManager;
+
+/**
+ * Class TranslationManagerWrapper
+ */
+class TranslationManagerWrapper extends TranslationManager {
+
+  /**
+   * @var \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper
+   */
+  private $translationManager;
+
+  /**
+   * @var array
+   */
+  private $translated;
+
+  /**
+   * @var array
+   */
+  private $untranslated;
+
+  /**
+   * @param \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper $translationManager
+   */
+  public function setDataCollector(TranslationManagerWrapper $translationManager) {
+    $this->translationManager = $translationManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function doTranslate($string, array $options = array()) {
+    // Merge in defaults.
+    if (empty($options['langcode'])) {
+      $options['langcode'] = $this->defaultLangcode;
+    }
+    if (empty($options['context'])) {
+      $options['context'] = '';
+    }
+    $translation = $this->getStringTranslation($options['langcode'], $string, $options['context']);
+
+    if($translation) {
+      $this->translated[$string] = $translation;
+    } else {
+      $this->untranslated[$string] = $string;
+    }
+
+    return $translation === FALSE ? $string : $translation;
+  }
+
+  /**
+   * @return array
+   */
+  public function getTranslated() {
+    return $this->translated;
+  }
+
+  /**
+   * @return array
+   */
+  public function getUntranslated() {
+    return $this->untranslated;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php b/modules/contrib/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php
new file mode 100644
index 0000000..512df39
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php
@@ -0,0 +1,44 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Theme\ThemeNegotiatorWrapper.
+ */
+
+namespace Drupal\webprofiler\Theme;
+
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Theme\ThemeNegotiator;
+
+/**
+ * Class ThemeNegotiatorWrapper
+ */
+class ThemeNegotiatorWrapper extends ThemeNegotiator {
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  private $negotiator;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function determineActiveTheme(RouteMatchInterface $route_match) {
+    foreach ($this->getSortedNegotiators() as $negotiator) {
+      if ($negotiator->applies($route_match)) {
+        $theme = $negotiator->determineActiveTheme($route_match);
+        if ($theme !== NULL && $this->themeAccess->checkAccess($theme)) {
+          $this->negotiator = $negotiator;
+          return $theme;
+        }
+      }
+    }
+  }
+
+  /**
+   * @return \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  public function getNegotiator() {
+    return $this->negotiator;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/TraceableEventDispatcher.php b/modules/contrib/devel/webprofiler/src/TraceableEventDispatcher.php
new file mode 100644
index 0000000..44c5cf3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/TraceableEventDispatcher.php
@@ -0,0 +1,70 @@
+<?php
+
+namespace Drupal\webprofiler;
+
+use Symfony\Component\EventDispatcher\Debug\TraceableEventDispatcher as BaseTraceableEventDispatcher;
+use Symfony\Component\HttpKernel\KernelEvents;
+use Symfony\Component\EventDispatcher\Event;
+
+/**
+ * Class TraceableEventDispatcher
+ */
+class TraceableEventDispatcher extends BaseTraceableEventDispatcher {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function preDispatch($eventName, Event $event) {
+    switch ($eventName) {
+      case KernelEvents::VIEW:
+      case KernelEvents::RESPONSE:
+        // stop only if a controller has been executed
+        if ($this->stopwatch->isStarted('controller')) {
+          $this->stopwatch->stop('controller');
+        }
+        break;
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function postDispatch($eventName, Event $event) {
+    switch ($eventName) {
+      case KernelEvents::CONTROLLER:
+        $this->stopwatch->start('controller', 'section');
+        break;
+      case KernelEvents::RESPONSE:
+        $token = $event->getResponse()->headers->get('X-Debug-Token');
+        try {
+          $this->stopwatch->stopSection($token);
+        } catch (\LogicException $e) {
+        }
+        break;
+      case KernelEvents::TERMINATE:
+        // In the special case described in the `preDispatch` method above, the `$token` section
+        // does not exist, then closing it throws an exception which must be caught.
+        $token = $event->getResponse()->headers->get('X-Debug-Token');
+        try {
+          $this->stopwatch->stopSection($token);
+        } catch (\LogicException $e) {
+        }
+        break;
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getListenerPriority($eventName, $listener) {
+    if (!isset($this->listeners[$eventName])) {
+      return;
+    }
+    foreach ($this->listeners[$eventName] as $priority => $listeners) {
+      if (FALSE !== ($key = array_search($listener, $listeners, TRUE))) {
+        return $priority;
+      }
+    }
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php b/modules/contrib/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php
new file mode 100644
index 0000000..7b3ac02
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php
@@ -0,0 +1,35 @@
+<?php
+
+namespace Drupal\webprofiler\Twig\Dumper;
+
+/**
+ * Class HtmlDumper
+ */
+class HtmlDumper extends \Twig_Profiler_Dumper_Text {
+
+  private static $colors = array(
+    'block' => '#dfd',
+    'macro' => '#ddf',
+    'template' => '#ffd',
+    'big' => '#d44',
+  );
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump(\Twig_Profiler_Profile $profile) {
+    return '<pre class="h--word-intact"><code class="code--json">' . parent::dump($profile) . '</code></pre>';
+  }
+
+  protected function formatTemplate(\Twig_Profiler_Profile $profile, $prefix) {
+    return sprintf('%s└ <span style="background-color: %s">%s</span>', $prefix, self::$colors['template'], $profile->getTemplate());
+  }
+
+  protected function formatNonTemplate(\Twig_Profiler_Profile $profile, $prefix) {
+    return sprintf('%s└ %s::%s(<span style="background-color: %s">%s</span>)', $prefix, $profile->getTemplate(), $profile->getType(), isset(self::$colors[$profile->getType()]) ? self::$colors[$profile->getType()] : 'auto', $profile->getName());
+  }
+
+  protected function formatTime(\Twig_Profiler_Profile $profile, $percent) {
+    return sprintf('<span style="color: %s">%.2fms/%.0f%%</span>', $percent > 20 ? self::$colors['big'] : 'auto', $profile->getDuration() * 1000, $percent);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php b/modules/contrib/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php
new file mode 100644
index 0000000..ed598e4
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php
@@ -0,0 +1,93 @@
+<?php
+
+namespace Drupal\webprofiler\Twig\Extension;
+
+use Drupal\webprofiler\Helper\ClassShortenerInterface;
+use Drupal\webprofiler\Helper\IdeLinkGeneratorInterface;
+use Symfony\Component\Stopwatch\Stopwatch;
+
+/**
+ * Class ProfilerExtension
+ */
+class ProfilerExtension extends \Twig_Extension_Profiler {
+
+  /**
+   * @var \Symfony\Component\Stopwatch\Stopwatch
+   */
+  private $stopwatch;
+  private $events;
+  private $ideLink;
+  private $classShortener;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __construct(\Twig_Profiler_Profile $profile, Stopwatch $stopwatch = NULL, IdeLinkGeneratorInterface $ideLink, ClassShortenerInterface $classShortener) {
+    parent::__construct($profile);
+
+    $this->ideLink = $ideLink;
+    $this->classShortener = $classShortener;
+
+    $this->stopwatch = $stopwatch;
+    $this->events = new \SplObjectStorage();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function enter(\Twig_Profiler_Profile $profile) {
+    if ($this->stopwatch && $profile->isTemplate()) {
+      $this->events[$profile] = $this->stopwatch->start($profile->getName(), 'template');
+    }
+
+    parent::enter($profile);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function leave(\Twig_Profiler_Profile $profile) {
+    parent::leave($profile);
+
+    if ($this->stopwatch && $profile->isTemplate()) {
+      $this->events[$profile]->stop();
+      unset($this->events[$profile]);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFunctions() {
+    return [
+      new \Twig_SimpleFunction('abbr', [$this, 'getAbbr']),
+      new \Twig_SimpleFunction('idelink', [$this, 'getIdeLink']),
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'native_profiler';
+  }
+
+  /**
+   * @param $class
+   *
+   * @return string
+   */
+  public function getAbbr($class) {
+    return $this->classShortener->shortenClass($class);
+  }
+
+  /**
+   * @param $file
+   * @param $line
+   *
+   * @return string
+   */
+  public function getIdeLink($file, $line) {
+    return $this->ideLink->generateLink($file, $line);
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Views/TraceableViewExecutable.php b/modules/contrib/devel/webprofiler/src/Views/TraceableViewExecutable.php
new file mode 100644
index 0000000..3f41dc5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Views/TraceableViewExecutable.php
@@ -0,0 +1,156 @@
+<?php
+
+namespace Drupal\webprofiler\Views;
+
+use Drupal\views\ViewExecutable;
+use Symfony\Component\HttpFoundation\Response;
+
+/**
+ * Class TraceableViewExecutable
+ */
+class TraceableViewExecutable extends ViewExecutable {
+
+  /**
+   * @var float
+   */
+  protected $render_time;
+
+  /**
+   * Gets the build time.
+   *
+   * @return float
+   */
+  public function getBuildTime() {
+    return $this->build_time;
+  }
+
+  /**
+   * Gets the execute time.
+   *
+   * @return float
+   */
+  public function getExecuteTime() {
+    return $this->execute_time;
+  }
+
+  /**
+   * Gets the render time.
+   *
+   * @return float
+   */
+  public function getRenderTime() {
+    return $this->render_time;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render($display_id = NULL) {
+    $start = microtime(TRUE);
+
+    $this->execute($display_id);
+
+    // Check to see if the build failed.
+    if (!empty($this->build_info['fail'])) {
+      return;
+    }
+    if (!empty($this->build_info['denied'])) {
+      return;
+    }
+
+    $exposed_form = $this->display_handler->getPlugin('exposed_form');
+    $exposed_form->preRender($this->result);
+
+    $module_handler = \Drupal::moduleHandler();
+
+    // @TODO In the longrun, it would be great to execute a view without
+    //   the theme system at all. See https://www.drupal.org/node/2322623.
+    $active_theme = \Drupal::theme()->getActiveTheme();
+    $themes = array_keys($active_theme->getBaseThemes());
+    $themes[] = $active_theme->getName();
+
+    // Check for already-cached output.
+    if (!empty($this->live_preview)) {
+      $cache = FALSE;
+    }
+    else {
+      /** @var \Drupal\views\Plugin\views\cache\CachePluginBase $cache */
+      $cache = $this->display_handler->getPlugin('cache');
+    }
+
+    // Run preRender for the pager as it might change the result.
+    if (!empty($this->pager)) {
+      $this->pager->preRender($this->result);
+    }
+
+    // Initialize the style plugin.
+    $this->initStyle();
+
+    if (!isset($this->response)) {
+      // Set the response so other parts can alter it.
+      $this->response = new Response('', 200);
+    }
+
+    // Give field handlers the opportunity to perform additional queries
+    // using the entire resultset prior to rendering.
+    if ($this->style_plugin->usesFields()) {
+      foreach ($this->field as $id => $handler) {
+        if (!empty($this->field[$id])) {
+          $this->field[$id]->preRender($this->result);
+        }
+      }
+    }
+
+    $this->style_plugin->preRender($this->result);
+
+    // Let each area handler have access to the result set.
+    $areas = ['header', 'footer'];
+    // Only call preRender() on the empty handlers if the result is empty.
+    if (empty($this->result)) {
+      $areas[] = 'empty';
+    }
+    foreach ($areas as $area) {
+      foreach ($this->{$area} as $handler) {
+        $handler->preRender($this->result);
+      }
+    }
+
+    // Let modules modify the view just prior to rendering it.
+    $module_handler->invokeAll('views_pre_render', [$this]);
+
+    // Let the themes play too, because pre render is a very themey thing.
+    foreach ($themes as $theme_name) {
+      $function = $theme_name . '_views_pre_render';
+      if (function_exists($function)) {
+        $function($this);
+      }
+    }
+
+    $this->display_handler->output = $this->display_handler->render();
+
+    $exposed_form->postRender($this->display_handler->output);
+
+    if ($cache) {
+      $cache->postRender($this->display_handler->output);
+    }
+
+    // Let modules modify the view output after it is rendered.
+    $module_handler->invokeAll('views_post_render', [
+      $this,
+      &$this->display_handler->output,
+      $cache
+    ]);
+
+    // Let the themes play too, because post render is a very themey thing.
+    foreach ($themes as $theme_name) {
+      $function = $theme_name . '_views_post_render';
+      if (function_exists($function)) {
+        $function($this);
+      }
+    }
+
+    $this->render_time = microtime(TRUE) - $start;
+
+    return $this->display_handler->output;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php b/modules/contrib/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php
new file mode 100644
index 0000000..6aa363f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php
@@ -0,0 +1,47 @@
+<?php
+
+namespace Drupal\webprofiler\Views;
+
+use Drupal\Core\Routing\RouteProviderInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\views\ViewEntityInterface;
+use Drupal\views\ViewExecutable;
+use Drupal\views\ViewExecutableFactory;
+use Drupal\views\ViewsData;
+use Symfony\Component\HttpFoundation\RequestStack;
+
+/**
+ * Class ViewExecutableFactoryWrapper
+ */
+class ViewExecutableFactoryWrapper extends ViewExecutableFactory {
+
+  /** @var ViewExecutable $view_executable */
+  private $views;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __construct(AccountInterface $user, RequestStack $request_stack, ViewsData $views_data, RouteProviderInterface $route_provider) {
+    parent::__construct($user, $request_stack, $views_data, $route_provider);
+
+    $this->views = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get(ViewEntityInterface $view) {
+    $view_executable = new TraceableViewExecutable($view, $this->user, $this->viewsData, $this->routeProvider);
+    $view_executable->setRequest($this->requestStack->getCurrentRequest());
+    $this->views[] = $view_executable;
+
+    return $view_executable;
+  }
+
+  /**
+   * @return TraceableViewExecutable
+   */
+  public function getViews() {
+    return $this->views;
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/src/WebprofilerServiceProvider.php b/modules/contrib/devel/webprofiler/src/WebprofilerServiceProvider.php
new file mode 100644
index 0000000..6542ef3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/src/WebprofilerServiceProvider.php
@@ -0,0 +1,115 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\WebprofilerServiceProvider.
+ */
+
+namespace Drupal\webprofiler;
+
+use Drupal\Core\DependencyInjection\ContainerBuilder;
+use Drupal\Core\DependencyInjection\ServiceProviderBase;
+use Drupal\webprofiler\Compiler\DecoratorPass;
+use Drupal\webprofiler\Compiler\EventPass;
+use Drupal\webprofiler\Compiler\ProfilerPass;
+use Drupal\webprofiler\Compiler\ServicePass;
+use Drupal\webprofiler\Compiler\StoragePass;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\DependencyInjection\Compiler\PassConfig;
+use Symfony\Component\DependencyInjection\Reference;
+
+/**
+ * Defines a service profiler for the webprofiler module.
+ */
+class WebprofilerServiceProvider extends ServiceProviderBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function register(ContainerBuilder $container) {
+    // Add a compiler pass to discover all data collector services.
+    $container->addCompilerPass(new ProfilerPass());
+
+    // Add a compiler pass to discover all available storage backend.
+    $container->addCompilerPass(new StoragePass());
+
+    $container->addCompilerPass(new ServicePass(), PassConfig::TYPE_AFTER_REMOVING);
+    $container->addCompilerPass(new EventPass(), PassConfig::TYPE_AFTER_REMOVING);
+    $container->addCompilerPass(new DecoratorPass(), PassConfig::TYPE_AFTER_REMOVING);
+
+    $modules = $container->getParameter('container.modules');
+
+    // Add ViewsDataCollector only if Views module is enabled.
+    if (isset($modules['views'])) {
+      $container->register('webprofiler.views', 'Drupal\webprofiler\DataCollector\ViewsDataCollector')
+        ->addArgument(new Reference(('views.executable')))
+        ->addArgument(new Reference(('entity.manager')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/views.html.twig',
+          'id' => 'views',
+          'title' => 'Views',
+          'priority' => 75,
+        ]);
+    }
+
+    // Add BlockDataCollector only if Block module is enabled.
+    if (isset($modules['block'])) {
+      $container->register('webprofiler.blocks', 'Drupal\webprofiler\DataCollector\BlocksDataCollector')
+        ->addArgument(new Reference(('entity.manager')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/blocks.html.twig',
+          'id' => 'blocks',
+          'title' => 'Blocks',
+          'priority' => 78,
+        ]);
+    }
+    
+    // Add TranslationsDataCollector only if Locale module is enabled.
+    if (isset($modules['locale'])) {
+      $container->register('webprofiler.translations', 'Drupal\webprofiler\DataCollector\TranslationsDataCollector')
+        ->addArgument(new Reference(('string_translation')))
+        ->addArgument(new Reference(('url_generator')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/translations.html.twig',
+          'id' => 'translations',
+          'title' => 'Translations',
+          'priority' => 210,
+        ]);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function alter(ContainerBuilder $container) {
+    $modules = $container->getParameter('container.modules');
+
+    // Alter the views.executable service only if Views module is enabled.
+    if (isset($modules['views'])) {
+      $container->getDefinition('views.executable')
+        ->setClass('Drupal\webprofiler\Views\ViewExecutableFactoryWrapper');
+    }
+
+    // Replace the regular form_builder service with a traceable one.
+    $container->getDefinition('form_builder')
+      ->setClass('Drupal\webprofiler\Form\FormBuilderWrapper');
+
+    // Replace the regular access_manager service with a traceable one.
+    $container->getDefinition('access_manager')
+      ->setClass('Drupal\webprofiler\Access\AccessManagerWrapper')
+      ->addMethodCall('setDataCollector', [new Reference('webprofiler.request')]);
+
+    // Replace the regular theme.negotiator service with a traceable one.
+    $container->getDefinition('theme.negotiator')
+      ->setClass('Drupal\webprofiler\Theme\ThemeNegotiatorWrapper');
+
+    // Replace the regular config.factory service with a traceable one.
+    $container->getDefinition('config.factory')
+      ->setClass('Drupal\webprofiler\Config\ConfigFactoryWrapper')
+      ->addMethodCall('setDataCollector', [new Reference('webprofiler.config')]);
+
+    // Replace the regular string_translation service with a traceable one.
+    $container->getDefinition('string_translation')
+      ->setClass('Drupal\webprofiler\StringTranslation\TranslationManagerWrapper');
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/assets.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/assets.html.twig
new file mode 100644
index 0000000..d537541
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/assets.html.twig
@@ -0,0 +1,133 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'assets'}) }}" title="{{ 'Assets'|t }}">
+        <img width="20" height="28" alt="{{ 'Assets'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getcsscount + collector.getjscount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>CSS</b>
+        <span>{{ collector.getcsscount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>JS</b>
+        <span>{{ collector.getjscount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="assets" type="text/template">
+        <h2 class="panel__title">{{ 'Assets'|t }}</h2>
+        <div class="tabs">
+            <% if( data.js.length != 0){ %>
+            <input class="tabs__radio" type="radio" id="js" name="tabs" checked/>
+            <% } %>
+            <% if( data.js.length != 0){ %>
+            <input class="tabs__radio" type="radio" id="css" name="tabs"/>
+            <% } %>
+            <ul class="tabs__tabs list--inline">
+                <% if( data.js.length != 0){ %>
+                <li><label class="tabs__label" for="js">JS</label></li>
+                <% } %>
+                <% if( data.js.length != 0){ %>
+                <li><label class="tabs__label" for="css">CSS</label></li>
+                <% } %>
+            </ul>
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <% if( data.js.length != 0){ %>
+                    <% _.each( data.js, function( item, key ){ %>
+                    <% if( key === 'drupalSettings' ){ %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%- key %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <% if(item.data && item.data.length != 0){ %>
+                        <pre>
+                            <code class="code--json "><%= JSON.stringify(item.data, null, 4) %></code>
+                        </pre>
+                            <% } %>
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <% if(key != 'data'){ %>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                    <% } %>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% } else { %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%= Drupal.webprofiler.helpers.classLink({"file":
+                                    data.assets.installation_path + key, "class": key, "line": 0}) %>
+                                </li>
+                                <li><b>version</b> <%- item.version %></li>
+                                <li><b>scope</b> <%- item.scope %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% } %>
+                    <% }); %>
+                    <% } %>
+                </div>
+                <div class="tabs__panel">
+                    <% if( data.css.length != 0){ %>
+                    <% _.each( data.css, function( item, key ){ %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%= Drupal.webprofiler.helpers.classLink({"file":
+                                    data.assets.installation_path + key, "class": key, "line": 0}) %>
+                                </li>
+                                <li><b>version</b> <%- item.version %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% }); %>
+                </div>
+            </div>
+        </div>
+
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/blocks.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/blocks.html.twig
new file mode 100644
index 0000000..4146f27
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/blocks.html.twig
@@ -0,0 +1,113 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'blocks'}) }}" title="{{ 'Blocks'|t }}">
+        <img width="20" height="28" alt="{{ 'Blocks'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.renderedBlocksCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Loaded'|t }}</b>
+        <span>{{ collector.loadedBlocksCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Rendered'|t }}</b>
+        <span>{{ collector.renderedBlocksCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="blocks" type="text/template">
+        <h2 class="panel__title">{{ 'Blocks'|t }}</h2>
+
+        <form class="panel__toolbar">
+            <div class="panel__filter--text">
+                <input id="edit-sid" class="js--live-filter" placeholder="{{ 'ID'|t }}" type="text"/>
+                <label for="edit-sid" class="panel__filter-label">{{ 'ID'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-label" class="js--live-filter" placeholder="{{ 'Label'|t }}" type="text"/>
+                <label for="edit-label" class="panel__filter-label">{{ 'Label'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-region" class="js--live-filter" placeholder="{{ 'Region'|t }}" type="text"/>
+                <label for="edit-region" class="panel__filter-label">{{ 'Region'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-provider" class="js--live-filter" placeholder="{{ 'Provider'|t }}" type="text"/>
+                <label for="edit-provider" class="panel__filter-label">{{ 'Provider'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-rendered" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="1">{{ 'Yes'|t }}</option>
+                    <option value="0">{{ 'No'|t }}</option>
+                </select>
+                <label for="edit-rendered" class="panel__filter-label">{{ 'Rendered'|t }}</label>
+            </div>
+        </form>
+
+        <% _.each( data.blocks.loaded, function( item ){ %>
+
+        <div class="panel__container"
+             data-wp-sid="<%- item.id %>"
+             data-wp-label="<%= item.settings.label %>"
+             data-wp-region="<%= item.region %>"
+             data-wp-provider="<%= item.settings.provider %>"
+             data-wp-rendered="<%- (data.blocks.rendered[item.id]) ? '1' : '0' %>">
+
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'ID'|t }}</b> <%- item.id %>
+                    </li>
+                    <li>
+                        <b>{{ 'Label'|t }}</b> <%= item.settings.label %>
+                    </li>
+                    <li>
+                        <b>{{ 'Region'|t }}</b> <%= (item.region == -1) ? '{{ 'No region'|t }}' : item.region %>
+                    </li>
+                    <li>
+                        <b><%- (data.blocks.rendered[item.id]) ? '' : '{{ 'Not rendered'|t }}' %></b>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                <a class="button--flat l-right " href="<%- item.route %>">{{ 'Edit'|t }}</a>
+
+            </div>
+
+            <div class="panel__expand-content">
+                <div class="wp-query-arguments">
+                    <table class="table--duo">
+                        <tr>
+                            <th>{{ 'Provider'|t }}</th>
+                            <td><%- item.settings.provider %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Theme'|t }}</th>
+                            <td><%- item.theme %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Status'|t }}</th>
+                            <td><%- (item.status) ? '{{ 'Enabled'|t }}' : '{{ 'Disabled'|t }}' %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Plugin'|t }}</th>
+                            <td><%- item.plugin %></td>
+                        </tr>
+                    </table>
+                </div>
+            </div>
+        </div>
+        <% }); %>
+
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/cache.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/cache.html.twig
new file mode 100644
index 0000000..61539b6
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/cache.html.twig
@@ -0,0 +1,63 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'cache'}) }}" title="{{ 'Cache'|t }}">
+        <img width="20" height="28" alt="{{ 'Cache'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getCacheHitsCount }}
+            / {{ collector.getCacheMissesCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    {% for bin, cids in collector.getCacheHits %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ bin }}</b>
+            <span>{{ cids }}</span>
+        </div>
+    {% endfor %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="cache" type="text/template">
+        <h2 class="panel__title">{{ 'Cache'|t }}</h2>
+        <% if( data.cache.length != 0){ %>
+        <% _.each( data.cache, function( item, key ){ %>
+        <div class="panel__container">
+
+            <ul class="list--inline">
+                <li><b>Bin</b> <%= key %></li>
+            </ul>
+
+            <table class="table--trio">
+                <thead>
+                <tr>
+                    <th>{{ 'ID'|t }}</th>
+                    <th>{{ 'hit'|t }}</th>
+                    <th>{{ 'miss'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( item, function( value, key ){ %>
+                <tr>
+                    <td><%= key %></td>
+                    <td><%= value['bin_cids_hit'] %></td>
+                    <td><%= value['bin_cids_miss'] %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No results'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/config.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/config.html.twig
new file mode 100644
index 0000000..954ea5f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/config.html.twig
@@ -0,0 +1,37 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "config"}) }}" title="{{ 'Config'|t }}">
+        <img width="20" height="28" alt="{{ 'Config'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getConfigNames|length }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Config get'|t }}</b>
+        <span>{{ collector.getConfigNames|length }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="config" type="text/template">
+        <h2 class="panel__title">{{ 'Configuration'|t }}</h2>
+        <div class="panel__container">
+            <table>
+                <% _.each( data.config_names, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/database.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/database.html.twig
new file mode 100644
index 0000000..cbe1551
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/database.html.twig
@@ -0,0 +1,168 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'database'}) }}" title="{{ 'Database'|t }}">
+        <img width="20" height="28" alt="{{ 'Database'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status sf-toolbar-status-{{ collector.colorCode }}">{{ collector.querycount }}</span>
+        {% if collector.querycount > 0 %}
+            <span class="sf-toolbar-info-piece-additional-detail">in {{ '%0.2f ms'|format(collector.time) }}</span>
+        {% endif %}
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DB Queries'|t }}</b>
+        <span>{{ collector.querycount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Query time'|t }}</b>
+        <span>{{ '%0.2f ms'|format(collector.time) }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Default database'|t }}</b>
+        <span>{{ collector.database.driver }}://{{ collector.database.host }}:{{ collector.database.port }}
+            /{{ collector.database.database }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="database" type="text/template">
+        <h2 class="panel__title">{{ 'Database'|t }}</h2>
+
+        <form class="panel__toolbar">
+            <div class="panel__filter--text">
+                <input id="edit-caller" class="js--live-filter" placeholder="{{ 'Caller'|t }}" type="text"/>
+                <label for="edit-caller" class="panel__filter-label">{{ 'Caller'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-type" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="select">Select</option>
+                    <option value="insert">Insert</option>
+                    <option value="update">Update</option>
+                    <option value="create">Create</option>
+                    <option value="delete">Delete</option>
+                </select>
+                <label for="edit-type" class="panel__filter-label">{{ 'Query type'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-hightlighted" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="1">{{ 'Yes'|t }}</option>
+                    <option value="0">{{ 'No'|t }}</option>
+                </select>
+                <label for="edit-type" class="panel__filter-label">{{ 'Slow queryes'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-database" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <% _.each(data.connections, function( item ){ %>
+                        <option value="<%- item %>"><%- item %></option>
+                    <% }) %>
+                </select>
+                <label for="edit-database" class="panel__filter-label">{{ 'Database'|t }}</label>
+            </div>
+
+            <div class="button--flat l-right js--code-toggle--global js--placeholder-visible">{{ 'Swap Placeholders'|t }}</div>
+
+        </form>
+
+        <% _.each( data.queries, function( item, key ){ %>
+        <div class="panel__container<% if (item.time > data.query_highlight_threshold) { %> is--hightlighted <% } %>"
+             data-wp-caller="<%- item.caller.class != null ? item.caller.class.toLowerCase() : '' %>"
+             data-wp-database="<%- item.database %>"
+             data-wp-type="<%- item.type %>"
+             data-wp-hightlighted="<%- (item.time > data.query_highlight_threshold) ? '1' : '0' %>">
+            <div class="panel__expand-header ">
+                    <pre <% if( item.query_args) { %> class="js--code-target"<% } %> >
+                        <code class="sql js--placeholder-query">
+                            <%- item.query %>
+                        </code>
+                        <% if( item.query_args) { %>
+                        <code class="sql js--clipboard-target is--hidden js--original-query">
+                            <%- item.query_args %>
+                        </code>
+                        <% } %>
+                    </pre>
+                <ul class="list--inline">
+                    <li><b>{{ 'Time'|t }}</b>: <%- Drupal.webprofiler.helpers.printTime(item.time) %></li>
+                    <li><b>{{ 'Caller'|t }}</b>: <%= Drupal.webprofiler.helpers.classLink({"file" : item.caller.file,
+                        "class" : item.caller.class, "line" : item.caller.line, "method" : item.caller.function}) %>
+                    </li>
+                    <li><b>{{ 'Database'|t }}</b>: <%- item.database %></li>
+                    <li><b>{{ 'Target'|t }}</b>: <%- item.target %></li>
+                </ul>
+
+                <% if(item.query_args){ %>
+                <div class="button--flat l-right js--code-toggle">{{ 'Swap Placeholders'|t }}</div>
+                <% } %>
+                <% if(item.args){ %>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                <% } %>
+                <!--div class="button--flat l-right js--clipboard-trigger">{{ 'Copy Query'|t }}</div-->
+                <% if(item.explain){ %>
+                <div class="button--flat l-right js--explain-trigger"
+                     data-wp-queryPosition="<%- key %>"
+                        >{{ 'Explain'|t }}</div>
+                <% } %>
+            </div>
+
+            <% if(item.explain){ %>
+            <div class="loader--linear js--loader" style="display: none">
+                <div class="loader__bar"></div>
+                <div class="loader__bar"></div>
+                <div class="loader__bar"></div>
+            </div>
+            <div class="panel__expand-content js--explain-target"></div>
+            <% } %>
+
+            <% if(item.args){ %>
+            <div class="panel__expand-content">
+                <div class="wp-query-arguments">
+                    <table class="table--duo">
+                        <thead>
+                        <tr>
+                            <th>{{ 'placeholder'|t }}</th>
+                            <th>{{ 'value'|t }}</th>
+                        </tr>
+                        </thead>
+                        <tbody>
+                        <% _.each( item.args, function( item, key ){ %>
+                        <tr>
+                            <td><%- key %></td>
+                            <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                        </tr>
+                        <% }); %>
+                        </tbody>
+                    </table>
+                </div>
+            </div>
+            <% } %>
+        </div>
+        <% }); %>
+    </script>
+    <script id="wp-query-explain-template" type="text/template">
+        <table class="table--compact">
+            <thead>
+            <tr>
+                <% _.each(rc.data[1], function(value, key, list) { %>
+                <th><%= key %></th>
+                <% }); %>
+            </tr>
+            </thead>
+            <% _.each(rc.data, function(value) { %>
+            <tr>
+                <% _.each(value, function(value2, key, list) { %>
+                <td><%= value2 %></td>
+                <% }); %>
+            </tr>
+            <% }); %>
+        </table>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/devel.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/devel.html.twig
new file mode 100644
index 0000000..2c2e8c5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/devel.html.twig
@@ -0,0 +1,24 @@
+{% block toolbar %}
+    {% set icon %}
+        <a href="{{ url("devel.admin_settings") }}" title="{{ 'Devel menu'|t }}">
+            <img width="26" height="28" alt="{{ collector.title }}"
+                 src="data:image/png;base64,{{ collector.icon }}"/>
+        </a>
+    {% endset %}
+
+    {% set text %}
+    {% spaceless %}
+        {% for item in collector.links %}
+            <div class="sf-toolbar-info-piece">
+                <span><a href="{{ item.url }}" title="{{ item.description|default(item.title) }}">{{ item.title }}</a></span>
+            </div>
+        {% endfor %}
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/drupal.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/drupal.html.twig
new file mode 100644
index 0000000..1c1dc48
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/drupal.html.twig
@@ -0,0 +1,66 @@
+{% block toolbar %}
+    {% set icon %}
+    <span>
+        <img width="13" height="28" alt="Drupal"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <a href="https://www.drupal.org">
+            <span>{{ collector.version }}</span>
+        </a>
+        </span>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Drupal version'|t }}</b>
+            <span>{{ collector.version }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Installed profile'|t }}</b>
+            <span>{{ collector.profile }}</span>
+        </div>
+
+        {% if collector.getGitCommit %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Git commit'|t }}</b>
+            <span><abbr title="{{ collector.getGitCommit }}">{{ collector.getAbbrGitCommit }}</abbr></span>
+        </div>
+        {% endif %}
+
+        <div class="sf-toolbar-info-piece">
+            <span><a href="{{ collector.getConfigUrl }}"
+                     title="{{ 'Configure Webprofiler'|t }}">{{ 'Configure Webprofiler'|t }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="{{ url("webprofiler.admin_list") }}"
+                     title="{{ 'View latest reports'|t }}">{{ 'View latest reports'|t }}</a></span>
+        </div>
+        <hr/>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="https://www.drupal.org/documentation">{{ 'Drupal Documentation'|t }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="https://www.drupal.org/contribute">{{ 'Get involved!'|t }}</a></span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    {% if link %}
+        {% set icon %}
+        <a href="#">{{ icon }}</a>
+        {% endset %}
+    {% endif %}
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="drupal" type="text/template">
+        <h2 class="panel__title">{{ 'Drupal'|t }}</h2>
+        <div class="panel__container">
+
+        </div>
+    </script>
+{% endblock %}
+
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/events.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/events.html.twig
new file mode 100644
index 0000000..9167413
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/events.html.twig
@@ -0,0 +1,79 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'events'}) }}" title="{{ 'Events'|t }}">
+        <img width="20" height="28" alt="{{ 'Events'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getCalledListenersCount }}</span>
+    </a>
+    {% endset %}
+
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Triggered'|t }}</b>
+        <span>{{ collector.getCalledListenersCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Not triggered'|t }}</b>
+        <span>{{ collector.getNotCalledListenersCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="events" type="text/template">
+
+        <h2 class="panel__title">{{ 'Events'|t }}</h2>
+        <div class="panel__container">
+
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Called listeners'|t }}</th>
+                <th>{{ 'Class'|t }}</th>
+                <th>{{ 'Priority'|t }}</th>
+                </thead>
+                <tbody> <% _.each( data.called_listeners, function( item ){ %>
+                <tr>
+                    <td><%= item.event %></td>
+                    <% if(item.type == 'Method') { %>
+                    <td>
+                        <%= Drupal.webprofiler.helpers.classLink(item) %>
+                    </td>
+                    <% } else { %>
+                    <td>{{ 'Closure'|t }}</td>
+                    <% } %>
+                    <td><%= item.priority %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <div class="panel__container">
+
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Non called listeners'|t }}</th>
+                <th>{{ 'Class'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.not_called_listeners, function( item ){ %>
+                <tr>
+                    <td><%= item.event %></td>
+                    <% if(item.type == 'Method') { %>
+                    <td>
+                        <%= Drupal.webprofiler.helpers.classLink(item) %>
+                    </td>
+                    <% } else { %>
+                    <td>{{ 'Closure'|t }}</td>
+                    <% } %>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/extensions.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/extensions.html.twig
new file mode 100644
index 0000000..987a9fe
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/extensions.html.twig
@@ -0,0 +1,95 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'drupal_extension'}) }}"
+       title="{{ 'Extensions'|t }}">
+        <img width="20" height="28" alt="{{ 'Extensions'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status{% if 150 < collector.countExtensions %} sf-toolbar-status-yellow{% endif %}">{{ collector.getExtensionsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Active Modules'|t }}</b>
+        <span>{{ collector.getModulesCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Active Themes'|t }}</b>
+        <span>{{ collector.getThemesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="drupal_extension" type="text/template">
+        <h2 class="panel__title">{{ 'Extensions'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="modules" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="themes" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="modules">{{ 'Modules'|t }}</label></li>
+                <li><label class="tabs__label" for="themes">{{ 'Themes'|t }}</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--compact">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Name'|t }}</th>
+                                <th>{{ 'Path'|t }}</th>
+                                <th>{{ 'Info file'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.drupal_extension.modules, function( value, key ){ %>
+                            <% if(value.public_type == 'module') { %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%- value.public_path %></td>
+                                <td><%= Drupal.webprofiler.helpers.classLink({"file" :
+                                    data.drupal_extension.installation_path + value.public_pathname, "class":
+                                    value.public_pathname, "line": 0}) %>
+                                </td>
+                            </tr>
+                            <% } %>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--compact">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Name'|t }}</th>
+                                <th>{{ 'Path'|t }}</th>
+                                <th>{{ 'Info file'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.drupal_extension.themes, function( value, key ){ %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%- value.public_path %></td>
+                                <td><%= Drupal.webprofiler.helpers.classLink({"file" :
+                                    data.drupal_extension.installation_path + value.public_pathname, "class":
+                                    value.public_pathname, "line": 0}) %>
+                                </td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/forms.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/forms.html.twig
new file mode 100644
index 0000000..a602f45
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/forms.html.twig
@@ -0,0 +1,67 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'forms'}) }}" title="{{ 'Forms'|t }}">
+        <img width="21" height="28" alt="{{ 'Forms'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getFormsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            {% for keys, form in collector.getForms %}
+                <b>{{ keys }}</b>
+                <div><a href="{{ idelink(form.class.file, form.class.line)|raw }}">{{ abbr(form.class.class)|raw }}
+                        ::{{ form.class.method }}</a></div>
+            {% endfor %}
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="forms" type="text/template">
+        <h2 class="panel__title">{{ 'Forms'|t }}</h2>
+        <% if( data.forms && data.forms.length != 0){ %>
+            <% _.each( data.forms, function( item, key ){ %>
+                <div class="panel__container">
+
+                    <ul class="list--inline">
+                        <li><b>ID</b> <%= key %></li>
+                        <li><b>class</b> <%= Drupal.webprofiler.helpers.classLink(item.class) %></li>
+                    </ul>
+
+                    <table class="table--compact">
+                        <thead>
+                        <tr>
+                            <th>{{ 'form'|t }}</th>
+                            <th>{{ 'title'|t }}</th>
+                            <th>{{ 'access'|t }}</th>
+                            <th>{{ 'type'|t }}</th>
+                        </tr>
+                        </thead>
+                        <tbody>
+                        <% _.each( item.form, function( value , key ){ %>
+                        <tr>
+                            <td><%= key %></td>
+                            <td><% if(value['#title'] == null ){ %> {{ '-' }} <% } else { %> <%= value['#title'] %><% } %></td>
+                            <td><% if(value['#access'] == null ){ %> {{ 'null' }} <% } else { %> <%= value['#access'] %><% } %></td>
+                            <td><% if(value['#type'] == null ){ %> {{ 'null' }} <% } else { %> <%= value['#type'] %><% } %></td>
+                        </tr>
+                        <% }); %>
+                        </tbody>
+                    </table>
+                </div>
+            <% }); %>
+        <% } else { %>
+            <div class="panel__container">
+                <p>{{ 'No results'|t }}</p>
+            </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/http.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/http.html.twig
new file mode 100644
index 0000000..ea7ad04
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/http.html.twig
@@ -0,0 +1,77 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'http'}) }}" title="{{ 'Http'|t }}">
+        <img width="20" height="28" alt="{{ 'Http'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.completedRequestsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Completed'|t }}</b>
+        <span>{{ collector.completedRequestsCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+      <b>{{ 'Failed'|t }}</b>
+      <span>{{ collector.failedRequestsCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="http" type="text/template">
+        <h2 class="panel__title">{{ 'Http'|t }}</h2>
+
+        <% if( data.completed.length != 0 || data.failed.length != 0){ %>
+        <% _.each( data.completed, function( item ) { %>
+        <div class="panel__container">
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'Host'|t }}</b>: <%- item.request.uri.host %>
+                    </li>
+                    <li>
+                        <b>{{ 'Path'|t }}</b>: <%- item.request.uri.path %>
+                    </li>
+                    <li>
+                        <b>{{ 'Status'|t }}</b>: <%- item.response.status %> <%- item.response.phrase %>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+            </div>
+
+            <div class="panel__expand-content">
+                <table class="table--duo">
+                    <% _.each( item.request, function( message, key ) { %>
+
+                    <% if(key == 'stats') { key = 'stats (time in milliseconds and data in bytes)' } %>
+
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%= Drupal.webprofiler.helpers.frm(message) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+                <table class="table--duo">
+                    <% _.each( item.response, function( header, key ) { %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%= Drupal.webprofiler.helpers.frm(header) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            </div>
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No external http calls'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/mail.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/mail.html.twig
new file mode 100644
index 0000000..3b34062
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/mail.html.twig
@@ -0,0 +1,76 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "mail"}) }}" title="{{ 'Mail'|t }}">
+        <img height="28" alt="{{ 'Mail'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-status">{{ collector.mailsent }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>Mail sent</b>
+        <span>{{ collector.mailsent }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="mail" type="text/template">
+        <h2 class="panel__title">{{ 'Mail dashboard'|t }}</h2>
+
+        <% if( data.mail.length != 0){ %>
+        <% _.each( data.mail, function( item ) { %>
+        <div class="panel__container">
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'Plugin'|t }}</b>: <%= Drupal.webprofiler.helpers.classLink(item.method) %>
+                    </li>
+                    <li>
+                        <b>{{ 'ID'|t }}</b>: <%- item.message.id %>
+                    </li>
+                    <li>
+                        <b>{{ 'To'|t }}</b>: <%- item.message.to %>
+                    </li>
+                    <li>
+                        <b>{{ 'Subject'|t }}</b>: <%- item.message.subject %>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+            </div>
+
+            <div class="panel__expand-content">
+                <table class="table--duo">
+                <% _.each( item.message, function( message, key ) { %>
+                <% if( key != 'params' && key != 'headers' ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%- message %></td>
+                </tr>
+                <% } %>
+                <% }); %>
+                </table>
+                <table class="table--duo">
+                    <% _.each( item.message.headers, function( header, key ) { %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%- header %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            </div>
+
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No mail sent'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/performance_timing.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/performance_timing.html.twig
new file mode 100644
index 0000000..5e8cf41
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/performance_timing.html.twig
@@ -0,0 +1,76 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'performance_timing'}) }}"
+       title="{{ 'Performance Timing'|t }}">
+        <img width="20" height="28" alt="{{ 'Performance Timing'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span id="wp--frontend__toolbar"></span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DNS lookup'|t }}</b>
+        <span id="wp--frontend__dns"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'TCP handshake'|t }}</b>
+        <span id="wp--frontend__tcp"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'TTFB' }}</b>
+        <span id="wp--frontend__ttfb"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Data download'|t }}</b>
+        <span id="wp--frontend__data"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DOM building'|t }}</b>
+        <span id="wp--frontend__dom"></span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+
+    <script>
+        var perf = performance.timing,
+                dns = parseInt(perf.domainLookupEnd - perf.domainLookupStart),
+                tcp = parseInt(perf.connectEnd - perf.connectStart),
+                ttfb = parseInt(perf.responseStart - perf.connectEnd),
+                data = parseInt(perf.responseEnd - perf.responseStart),
+                dom = parseInt(perf.loadEventStart - perf.responseEnd);
+
+        Webprofiler.ajax('{{ url("webprofiler.frontend.save", {profile: token}) }}', false, JSON.stringify(perf));
+
+        document.getElementById('wp--frontend__toolbar').innerHTML = ttfb + ' ms';
+        document.getElementById('wp--frontend__dns').innerHTML = dns + ' ms';
+        document.getElementById('wp--frontend__tcp').innerHTML = tcp + ' ms';
+        document.getElementById('wp--frontend__ttfb').innerHTML = ttfb + ' ms';
+        document.getElementById('wp--frontend__data').innerHTML = data + ' ms';
+        document.getElementById('wp--frontend__dom').innerHTML = dom + ' ms';
+    </script>
+{% endblock %}
+
+{% block panel %}
+    <script id="performance_timing" type="text/template">
+        <h2 class="panel__title">{{ 'Performance timing'|t }}</h2>
+        <div class="panel__container">
+            <% if(data.performance && data.performance.computed) { %>
+                <table class="table--duo">
+                    <% _.each( data.performance.computed, function( item, key ){ %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%- Drupal.webprofiler.helpers.printTime(item) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            <% } else { %>
+                <p>{{ 'No collected data, maybe this profile hasn\'t been generated by a browser GET o has been generated by an unsupported browser.'|t }}</p>
+            <% } %>
+        </div>
+    </script>
+{% endblock %}
\ No newline at end of file
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/php_config.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/php_config.html.twig
new file mode 100644
index 0000000..c91f9f3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/php_config.html.twig
@@ -0,0 +1,52 @@
+{% block toolbar %}
+    {# PHP Information #}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'php_config'}) }}"
+       title="{{ 'PHP config'|t }}">
+        <img width="26" height="28" alt="{{ 'PHP config'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+    </a>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece sf-toolbar-info-php">
+            <b>PHP</b>
+            <span><a href="{{ url("system.php") }}">{{ collector.phpversion }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece sf-toolbar-info-php-ext">
+            <b>{{ 'PHP Extensions'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ collector.hasxdebug ? 'green' : 'red' }}">xdebug</span>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ collector.hasaccelerator ? 'green' : 'red' }}">accel</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'PHP SAPI'|t }}</b>
+            <span>{{ collector.sapiName }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>Token</b>
+            <span>{{ token }}</span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="php_config" type="text/template">
+        <h2 class="panel__title">{{ 'PHP config'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <% _.each( data, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/request.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/request.html.twig
new file mode 100644
index 0000000..4a1e1e3
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/request.html.twig
@@ -0,0 +1,206 @@
+{% block toolbar %}
+    {% set request_handler %}
+    <a href="{{ idelink(collector.controller.file, collector.controller.line)|raw }}">{{ abbr(collector.controller.class)|raw }}
+        ::{{ collector.controller.method }}</a>
+    {% endset %}
+
+    {% set request_status_code_color = (400 > collector.statuscode) ? ((200 == collector.statuscode) ? 'green' : 'yellow') : 'red' %}
+
+    {% set request_route = collector.route ? collector.route : 'NONE' %}
+
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'request'}) }}" title="{{ 'Request'|t }}">
+        <img width="28" height="28" alt="{{ 'Request'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+    <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}"
+          title="{{ collector.statustext }}">{{ collector.statuscode }}</span>
+    </a>
+    {% endset %}
+
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Status'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}">{{ collector.statuscode }}</span> {{ collector.statustext }}
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Controller'|t }}</b>
+            {{ request_handler }}
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Route name'|t }}</b>
+            <span>{{ request_route }}</span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="request" type="text/template">
+        <h2 class="panel__title">{{ 'Request'|t }}</h2>
+
+        <% if (!_.isEmpty(data.request_query)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'GET Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_query, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%- item %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <% if (!_.isEmpty(data.request_request)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'POST Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_request, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Attributes'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_attributes, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+
+                    <% if(key == '_controller') { %>
+                    <td><%= Drupal.webprofiler.helpers.classLink(data.controller) %></td>
+                    <% } else { %>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                    <% } %>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <% if (!_.isEmpty(data.request_cookies)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Cookies'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_cookies, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Request headers'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_headers, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <% if (!_.isEmpty(data.content)) { %>
+        <div class="panel__container">
+            <div class="h--word-broken"><%- data.content %></div>
+        </div>
+        <% } %>
+
+        <% if (!_.isEmpty(data.access_check)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Path'|t }}</th>
+                <th>{{ 'Access check'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each(data.access_check, function(items, key){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td>
+                        <% _.each(items, function(item){ %>
+                        <%- item.service_id %>
+                        <% }); %>
+                    </td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Server Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_server, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Response headers'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.response_headers, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/routing.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/routing.html.twig
new file mode 100644
index 0000000..7670011
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/routing.html.twig
@@ -0,0 +1,50 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'routing'}) }}" title="{{ 'Routing'|t }}">
+        <img width="20" height="28" alt="{{ 'Routing'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getRoutesCount }}</span>
+    </a>
+
+    {% endset %}
+
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Routes'|t }}</b>
+        <span>{{ collector.getRoutesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="routing" type="text/template">
+        <h2 class="panel__title">{{ 'Routing'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <tr>
+                    <th>{{ 'name'|t }}</th>
+                    <th>{{ 'path'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( data.routing, function( item ){ %>
+                    <tr>
+                        <td>
+                            <%- item.name %>
+                        </td>
+                        <td>
+                            <%- item.path %>
+                        </td>
+                    </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/services.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/services.html.twig
new file mode 100644
index 0000000..dab3e55
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/services.html.twig
@@ -0,0 +1,149 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'services'}) }}" title="{{ 'Services'|t }}">
+        <img width="20" height="28" alt="{{ 'Services'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getInitializedServicesCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Initialized'|t }}</b>
+        <span>{{ collector.getInitializedServicesCount }} ({{ collector.getInitializedServicesWithoutWebprofilerCount }}
+            )</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Available'|t }}</b>
+        <span>{{ collector.getServicesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="services" type="text/template">
+        <h2 class="panel__title">{{ 'Services'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="services" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="http_middleware" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="services">services</label></li>
+                <li><label class="tabs__label" for="http_middleware">middleware</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <form class="panel__toolbar">
+                        <div class="panel__filter--text">
+                            <input id="edit-sid" class="js--live-filter" placeholder="{{ 'ID'|t }}" type="text"/>
+                            <label for="edit-sid" class="panel__filter-label">{{ 'ID'|t }}</label>
+                        </div>
+                        <div class="panel__filter--text">
+                            <input id="edit-class" class="js--live-filter" placeholder="{{ 'Class'|t }}" type="text"/>
+                            <label for="edit-class" class="panel__filter-label">{{ 'Class'|t }}</label>
+                        </div>
+                        <div class="panel__filter--text">
+                            <input id="edit-tags" class="js--live-filter" placeholder="{{ 'Tags'|t }}" type="text"/>
+                            <label for="edit-tags" class="panel__filter-label">{{ 'Tags'|t }}</label>
+                        </div>
+                        <div class="panel__filter--select">
+                            <select id="edit-initialized" class="js--live-filter">
+                                <option value="">{{ 'Any'|t }}</option>
+                                <option value="1">{{ 'Yes'|t }}</option>
+                                <option value="0">{{ 'No'|t }}</option>
+                            </select>
+                            <label for="edit-initialized" class="panel__filter-label">{{ 'Initialized'|t }}</label>
+                        </div>
+                    </form>
+
+                    <% _.each( data.services, function( item, key ){ %>
+
+                    <% clazz = Drupal.webprofiler.helpers.classLink({"file" : item.value.file, "class" :
+                    item.value.class}) %>
+                    <% depends = _.map(item.outEdges, function(el) { return el.id; }).join(', ') %>
+                    <% tags = _.map(item.value.tags, function(el, key) { return key; }).join(', ') %>
+
+                    <div class="panel__container"
+                         data-wp-sid="<%- key %>"
+                         data-wp-class="<%- item.value.class %>"
+                         data-wp-tags="<%- tags %>"
+                         data-wp-initialized="<%- (item.initialized) ? '1' : '0' %>">
+
+                        <div class="panel__expand-header">
+                            <ul class="list--inline">
+                                <li>
+                                    <b>{{ 'ID'|t }}</b> <%- key %>
+                                </li>
+                                <% if (clazz) { %>
+                                <li>
+                                    <b>{{ 'Class'|t }}</b> <%= clazz %>
+                                </li>
+                                <% } %>
+                                <li>
+                                    <b>{{ 'Initialized'|t }}</b> <%- (item.initialized) ? '{{ 'Yes'|t }}' : '{{ 'No'|t }}' %>
+                                </li>
+                                <% if ( item.time ) { %>
+                                    <li>
+                                        <b>{{ 'Count'|t }}</b> <%- item.time.count %>
+                                    </li>
+                                    <li>
+                                        <b>{{ 'Time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(item.time.time) %>
+                                    </li>
+                                <% } %>
+                            </ul>
+                            <% if ( tags.length > 0 || depends.length > 0 ) { %>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                            <% } %>
+                        </div>
+
+                        <% if ( tags.length > 0 || depends.length > 0 ) { %>
+                        <div class="panel__expand-content">
+                            <div class="wp-query-arguments">
+                                <table class="table--duo">
+                                    <tr>
+                                        <th>{{ 'Tags'|t }}</th>
+                                        <td><%- (tags) ? tags : '-' %></td>
+                                    </tr>
+                                    <tr>
+                                        <th>{{ 'Depends'|t }}</th>
+                                        <td><%- (depends) ? depends : '-' %></td>
+                                    </tr>
+                                </table>
+                            </div>
+                        </div>
+                        <% } %>
+                    </div>
+                    <% }); %>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table>
+                            <thead>
+                            <tr>
+                                <th>{{ 'id'|t }}</th>
+                                <th>{{ 'class'|t }}</th>
+                                <th>{{ 'priority'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.http_middleware, function( item, key ){ %>
+                            <% clazz = Drupal.webprofiler.helpers.classLink(item.value.handle_method) %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%= clazz %></td>
+                                <td><%- item.value.tags.http_middleware[0].priority %></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/state.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/state.html.twig
new file mode 100644
index 0000000..e19b13b
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/state.html.twig
@@ -0,0 +1,36 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'state'}) }}" title="{{ 'State'|t }}">
+        <img width="20" height="28" alt="{{ 'State'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getStateKeysCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'State get'|t }}</b>
+        <span>{{ collector.getStateKeysCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="state" type="text/template">
+        <h2 class="panel__title">{{ 'State'|t }}</h2>
+        <div class="panel__container">
+            <table>
+                <% _.each( data.state_get, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/theme.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/theme.html.twig
new file mode 100644
index 0000000..66fa5fd
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/theme.html.twig
@@ -0,0 +1,147 @@
+{% block toolbar %}
+    {% set negotiator %}
+    <a href="{{ idelink(collector.themeNegotiator.class.file, collector.themeNegotiator.class.line)|raw }}">{{ abbr(collector.themeNegotiator.class.class)|raw }}
+        ::{{ collector.themeNegotiator.class.method }}</a>
+    {% endset %}
+    {% set time = collector.templatecount ? '%0.0f ms'|format(collector.time) : 'n/a' %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'theme'}) }}" title="{{ 'Theme'|t }}">
+        <img width="20" height="28" alt="{{ 'Theme'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.activeTheme.name }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Name'|t }}</b>
+        <span>{{ collector.activeTheme.name }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Engine'|t }}</b>
+        <span>{{ collector.activeTheme.engine }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Negotiator'|t }}</b>
+        <span>{{ negotiator }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Render Time'|t }}</b>
+        <span>{{ time }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Template Calls'|t }}</b>
+        <span>{{ collector.templatecount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Block Calls'|t }}</b>
+        <span>{{ collector.blockcount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Macro Calls'|t }}</b>
+        <span>{{ collector.macrocount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="theme" type="text/template">
+        <h2 class="panel__title">{{ 'Theme'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--fixed">
+                <tr>
+                    <th>{{ 'Name'|t }}</th>
+                    <td><%- data.activeTheme.name %> (<a href="/admin/appearance/settings/bartik">{{ 'Edit'|t }})</a>
+                    </td>
+                </tr>
+                <tr>
+                    <th>{{ 'Engine'|t }}</th>
+                    <td><%- data.activeTheme.engine %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Base theme'|t }}</th>
+                    <td><%- data.activeTheme.extension.base_theme %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Regions'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.regions) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Libraries'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.libraries) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Style sheets removed'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.styleSheetsRemove) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Path'|t }}</th>
+                    <td><%- data.activeTheme.path %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Negotiator'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.classLink(data.negotiator.class) %></td>
+                </tr>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig statistics'|t }}</b></li>
+            </ul>
+
+            <table class="table--fixed">
+                <tr>
+                    <th>{{ 'Total Render Time'|t }}</th>
+                    <td><%- Drupal.webprofiler.helpers.printTime(data.twig.render_time) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Template Calls'|t }}</th>
+                    <td><%- data.twig.template_count %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Block Calls'|t }}</th>
+                    <td><%- data.twig.block_count %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Macro Calls'|t }}</th>
+                    <td><%- data.twig.macro_count %></td>
+                </tr>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig rendered templates'|t }}</b></li>
+            </ul>
+
+            <table class="table--fixed">
+                <thead>
+                <tr>
+                    <th>{{ 'template'|t }}</th>
+                    <th>{{ 'count'|t }}</th>
+                </tr>
+                </thead>
+                <% _.each( data.twig.templates, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%- item %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig callgraph'|t }}</b></li>
+            </ul>
+
+            <%= data.twig.callgraph %>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/time.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/time.html.twig
new file mode 100644
index 0000000..9aeb76a
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/time.html.twig
@@ -0,0 +1,59 @@
+{% block toolbar %}
+    {% set duration = collector.events|length ? '%.0f ms'|format(collector.duration) : 'n/a' %}
+    {% set memory = '%.1f MB'|format(collector.memory / 1024 / 1024) %}
+    {% set total_memory = collector.memoryLimit == -1 ? '&infin;' : '%.1f MB'|format(collector.memoryLimit / 1024)|escape %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "time"}) }}" title="{{ 'Timeline'|t }}">
+        <img width="20" height="28" alt="{{ 'Timeline'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span>{{ duration }} / {{ memory }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Total time'|t }}</b>
+        <span>{{ duration }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Memory'|t }}</b>
+        <span>{{ memory }} / {{ total_memory }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="time" type="text/template">
+        <h2 class="panel__title">{{ 'Timeline'|t }}</h2>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li>
+                    <b>{{ 'Total time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(data.duration) %>
+                </li>
+                <li>
+                    <b>{{ 'Initialization time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(data.initTime) %>
+                </li>
+            </ul>
+            <br/><br/>
+
+            <div class="timeline">
+                <div class="timeline__legends">
+                    <span class="timeline__legends--default">default</span>
+                    <span class="timeline__legends--section">section</span>
+                    <span class="timeline__legends--event_listener">event_listener</span>
+                    <span class="timeline__legends--event_listener_loading">event_listener_loading</span>
+                    <span class="timeline__legends--template">template</span>
+                    <span class="timeline__legends--service">service</span>
+                </div>
+
+                <div id="timeline"></div>
+            </div>
+        </div>
+
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/translations.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/translations.html.twig
new file mode 100644
index 0000000..08683ba
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/translations.html.twig
@@ -0,0 +1,85 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "translations"}) }}"
+       title="{{ 'Translations'|t }}">
+        <img height="28" alt="{{ 'Translations'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-status">{{ collector.untranslatedCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Translated'|t }}</b>
+        <span>{{ collector.translatedCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Untranslated'|t }}</b>
+        <span>{{ collector.untranslatedCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="translations" type="text/template">
+        <h2 class="panel__title">{{ 'Translations'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="translated" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="untranslated" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="translated">{{ 'Translated'|t }}</label></li>
+                <li><label class="tabs__label" for="untranslated">{{ 'Unranslated'|t }}</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--duo">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Original'|t }}</th>
+                                <th>{{ 'Tanslation'|t }}</th>
+                                <th>{{ 'Action'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.translations.translated, function( value, key ){ %>
+                            <tr>
+                                <td><%= key %></td>
+                                <td><%= value %></td>
+                                <td><a href="<%- data.user_interface_translations_path %>?string=<%- key%>" target="_blank" class="h--word-intact">{{ 'Edit'|t }}</a></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--duo">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Original'|t }}</th>
+                                <th>{{ 'Action'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.translations.untranslated, function( value, key ){ %>
+                            <tr>
+                                <td><%= key %></td>
+                                <td><a href="<%- data.user_interface_translations_path %>?string=<%- key%>" target="_blank" class="h--word-intact">{{ 'Edit'|t }}</a></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/user.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/user.html.twig
new file mode 100644
index 0000000..ef36997
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/user.html.twig
@@ -0,0 +1,63 @@
+{% block toolbar %}
+    {% set color_code = (collector.authenticated) ? 'green' : 'red' %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'user'}) }}" title="{{ 'User'|t }}">
+        <img width="24" height="28" alt="{{ 'User'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status sf-toolbar-status-{{ color_code }}">
+            {% if collector.authenticated %}
+                {{ collector.username }}
+            {% endif %}
+        </span>
+    </a>
+    {% endset %}
+    {% set text %}
+    {% if collector.authenticated %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Logged in as'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ color_code }}">{{ collector.username }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Roles'|t }}</b>
+            <span>{{ collector.roles|join(', ') }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Authenticated by'|t }}</b>
+            <span>{{ collector.provider }}</span>
+        </div>
+    {% else %}
+        {{ collector.anonymous }}
+    {% endif %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="user" type="text/template">
+        <h2 class="panel__title">{{ 'User'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <tr>
+                    <th>{{ 'Name'|t }}</th>
+                    <td><%- data.name %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Authenticated'|t }}</th>
+                    <td><%- data.authenticated %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Provider'|t }}</th>
+                    <td><%- data.provider %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Roles'|t }}</th>
+                    <td><%- data.roles.join(', ') %></td>
+                </tr>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Collector/views.html.twig b/modules/contrib/devel/webprofiler/templates/Collector/views.html.twig
new file mode 100644
index 0000000..d4a2e2f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Collector/views.html.twig
@@ -0,0 +1,58 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'views'}) }}" title="{{ 'Views'|t }}">
+        <img width="20" height="28" alt="{{ 'Views'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getViewsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Views'|t }}</b>
+        <span>{{ collector.getViewsCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="views" type="text/template">
+        <h2 class="panel__title">{{ 'Views'|t }}</h2>
+        <div class="panel__container">
+            <% if( data.views.length != 0){ %>
+            <table class="table--duo">
+                <thead>
+                <tr>
+                    <th>{{ 'name'|t }}</th>
+                    <th>{{ 'display'|t }}</th>
+                    <th>{{ 'build time'|t }}</th>
+                    <th>{{ 'execute time'|t }}</th>
+                    <th>{{ 'render time'|t }}</th>
+                    <th>{{ 'Action'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( data.views, function( item ){ %>
+                <tr>
+                    <td><%- item.id %></td>
+                    <td><%- item.current_display %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.build_time) %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.execute_time) %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.render_time) %></td>
+                    <td><a href="<%- item.route %>">{{ 'Edit'|t }}</a></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+            <% } else { %>
+            <p>{{ 'No results'|t }}</p>
+            <% } %>
+        </div>
+
+    </script>
+{% endblock %}
diff --git a/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig
new file mode 100644
index 0000000..be4fb68
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig
@@ -0,0 +1,57 @@
+{% set resume %}
+<div id="resume" class="resume">
+    <span class="resume__subtitle">
+        {{ profile.method|upper }}
+        {% if profile.method|upper in ['GET', 'HEAD'] %}
+            <a href="{{ profile.url }}">{{ profile.url }}</a>
+        {% else %}
+            <em>{{ profile.url }}</em>
+        {% endif %}
+    </span>
+    <span class="resume__time">
+        <em>by {{ profile.ip }}</em> at <em>{{ profile.time|date('r') }}</em>
+    </span>
+
+    <a id="resume-view-all" class="button--flat resume__button"
+       href="{{ url("webprofiler.admin_list") }}">{{ 'View latest'|t }}</a>
+</div>
+{% endset %}
+
+<div id="webprofiler">
+
+    {{ resume }}
+
+    <div id="collectors" class="collectors panel">
+    </div>
+
+    <div class="loader--fixed" style="display: none">
+        <svg class="loader__circle">
+            <circle class="loader__path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
+        </svg>
+    </div>
+
+    <script id="collector" type="text/template">
+        <a href="#<%= id %>" title="<%= summary %>" class="overview__link">
+            <img src="data:image/png;base64,<%= icon %>"
+                 class="overview__icon">
+            <span class="overview__title"><%= label %></span>
+            <% if(typeof(summary) !== "undefined") { %>
+            <span class="overview__subtitle"><%= summary %></span>
+            <% } %>
+        </a>
+    </script>
+
+    {{ panels }}
+
+    <div class="modal js--modal" style="display: none">
+        <div class="modal__container">
+            <div class="modal__bar">
+                <h3 class="modal__title"></h3>
+            </div>
+            <div class="modal__content">
+                <div class="modal__main-data"></div>
+            </div>
+            <a class="button--flat js--modal-close l-right">Close</a>
+        </div>
+    </div>
+</div>
diff --git a/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig
new file mode 100644
index 0000000..ad8da9b
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig
@@ -0,0 +1,73 @@
+<div id="webprofiler{{ token }}" class="sf-toolbar" style="display: none"></div>
+
+<script>
+    Webprofiler = (function () {
+        "use strict";
+
+        var key = 'webprofiler/profiler/',
+
+                getPreference = function (name) {
+                    if (!window.localStorage) {
+                        return null;
+                    }
+
+                    return localStorage.getItem(key + name);
+                },
+
+                setPreference = function (name, value) {
+                    if (!window.localStorage) {
+                        return null;
+                    }
+
+                    localStorage.setItem(key + name, value);
+                    return true;
+                },
+
+                load = function () {
+                    ajax('{{ profiler_url }}', function (result) {
+                        var toolbar = document.getElementById('webprofiler{{ token }}');
+                        toolbar.innerHTML = result;
+                        toolbar.style.display = 'block';
+
+                        if (getPreference('toolbar/displayState') == 'none') {
+                            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'none';
+                            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'none';
+                            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'block';
+                        } else {
+                            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'block';
+                            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'block';
+                            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'none';
+                        }
+
+                        var arr = toolbar.getElementsByTagName('script');
+                        for (var n = 0; n < arr.length; n++) {
+                            eval(arr[n].innerHTML);
+                        }
+                    });
+                },
+
+                ajax = function (url, callback, data) {
+                    try {
+                        var x = new (XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');
+                        x.open(data ? 'POST' : 'GET', url, 1);
+                        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
+                        x.setRequestHeader('Content-type', 'application/json');
+                        x.onreadystatechange = function () {
+                            x.readyState > 3 && x.status === 200 && callback && callback(x.responseText, x);
+                        };
+                        x.send(data);
+                    } catch (e) {
+                        window.console && console.log(e);
+                    }
+                };
+
+        return {
+            getPreference: getPreference,
+            setPreference: setPreference,
+            load: load,
+            ajax: ajax
+        }
+    })();
+
+    Webprofiler.load();
+</script>
diff --git a/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig
new file mode 100644
index 0000000..b06daff
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig
@@ -0,0 +1 @@
+{{ panel|raw }}
diff --git a/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig
new file mode 100644
index 0000000..ff58abc
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig
@@ -0,0 +1,311 @@
+.sf-minitoolbar {
+display: none;
+
+position: fixed;
+bottom: 0;
+right: 0;
+
+padding: 5px 5px 0;
+
+background-color: #f7f7f7;
+background-image: -moz-linear-gradient(top, #e4e4e4, #ffffff);
+background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e4e4e4), to(#ffffff));
+background-image: -o-linear-gradient(top, #e4e4e4, #ffffff);
+background: linear-gradient(top, #e4e4e4, #ffffff);
+
+border-radius: 16px 0 0 0;
+
+z-index: 6000000;
+}
+
+.sf-toolbarreset {
+position: fixed;
+background-color: #f7f7f7;
+left: 0;
+right: 0;
+height: 38px;
+margin: 0;
+padding: 0 40px 0 0;
+z-index: 6000000;
+font: 11px Verdana, Arial, sans-serif;
+text-align: left;
+color: #2f2f2f;
+
+background-image: -moz-linear-gradient(top, #e4e4e4, #ffffff);
+background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e4e4e4), to(#ffffff));
+background-image: -o-linear-gradient(top, #e4e4e4, #ffffff);
+background: linear-gradient(top, #e4e4e4, #ffffff);
+
+bottom: 0;
+border-top: 1px solid #bbb;
+}
+.sf-toolbarreset abbr {
+border-bottom: 1px dotted #000000;
+}
+.sf-toolbarreset span,
+.sf-toolbarreset div {
+font-size: 11px;
+}
+.sf-toolbarreset img {
+width: auto;
+display: inline;
+}
+
+.sf-toolbarreset .hide-button {
+display: block;
+position: absolute;
+top: 0;
+right: 0;
+width: 40px;
+height: 40px;
+cursor: pointer;
+background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAMAAAAMCGV4AAAAllBMVEXDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PExMTPz8/Q0NDR0dHT09Pb29vc3Nzf39/h4eHi4uLj4+P6+vr7+/v8/Pz9/f3///+Nh2QuAAAAIXRSTlMABgwPGBswMzk8QktRV4SKjZOWmaKlq7TAxszb3urt+fy1vNEpAAAAiklEQVQIHUXBBxKCQBREwRFzDqjoGh+C2YV//8u5Sll2S0E/dof1tKdKM6GyqCto7PjZRJIS/mbSELgXOSd/BzpKIH1ZefVWpDDTHsi8mZVnwImPi5ndCLbaAZk3M58Bay0h9VbeSvMpjDUAHj4jL55AW1rxN5fU2PLjIgVRzNdxVFOlGzvnJi0Fb1XNGBHA9uQOAAAAAElFTkSuQmCC');
+background-repeat: no-repeat;
+background-position: 13px 11px;
+}
+.sf-toolbarreset a {
+color: #000 !important;
+border: none;
+}
+
+.sf-toolbar-block {
+white-space: nowrap;
+color: #2f2f2f;
+display: block;
+min-height: 28px;
+border-right: 1px solid #e4e4e4;
+padding: 0;
+float: left;
+cursor: default;
+}
+
+.sf-toolbar-block span {
+display: inline-block;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece {
+line-height: 19px;
+margin-bottom: 5px;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece .sf-toolbar-status {
+padding: 0px 5px;
+border-radius: 5px;
+margin-bottom: 0px;
+vertical-align: top;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece:last-child {
+margin-bottom: 0;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece a,
+.sf-toolbar-block .sf-toolbar-info-piece abbr {
+color: #2f2f2f;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece b {
+display: inline-block;
+width: 110px;
+vertical-align: top;
+}
+
+.sf-toolbar-block .sf-toolbar-info-with-next-pointer:after {
+content: ' :: ';
+color: #999;
+}
+
+.sf-toolbar-block .sf-toolbar-info-with-delimiter {
+border-right: 1px solid #999;
+padding-right: 5px;
+margin-right: 5px;
+}
+
+.sf-toolbar-block .sf-toolbar-info {
+display: none;
+position: absolute;
+background-color: #fff;
+border: 1px solid #bbb;
+padding: 9px 0;
+margin-left: -1px;
+
+bottom: 38px;
+border-bottom-width: 0;
+border-bottom: 1px solid #bbb;
+border-radius: 4px 4px 0 0;
+}
+
+.sf-toolbarreset > div:last-of-type .sf-toolbar-info {
+right: -1px;
+}
+
+.sf-toolbar-block .sf-toolbar-info:empty {
+visibility: hidden;
+}
+
+.sf-toolbar-block .sf-toolbar-status {
+display: inline-block;
+color: #fff;
+background-color: #666;
+padding: 3px 6px;
+border-radius: 3px;
+margin-bottom: 2px;
+vertical-align: middle;
+min-width: 6px;
+min-height: 13px;
+}
+
+.sf-toolbar-block .sf-toolbar-status abbr {
+color: #fff;
+border-bottom: 1px dotted black;
+}
+
+.sf-toolbar-block .sf-toolbar-status-green {
+background-color: #759e1a;
+}
+
+.sf-toolbar-block .sf-toolbar-status-red {
+background-color: #a33;
+}
+
+.sf-toolbar-block .sf-toolbar-status-yellow {
+background-color: #ffcc00;
+color: #000;
+}
+
+.sf-toolbar-block .sf-toolbar-status-black {
+background-color: #000;
+}
+
+.sf-toolbar-block .sf-toolbar-icon {
+display: block;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a,
+.sf-toolbar-block .sf-toolbar-icon > span {
+display: block;
+font-weight: normal;
+text-decoration: none;
+margin: 0;
+padding: 5px 6px;
+min-width: 20px;
+text-align: center;
+vertical-align: middle;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a,
+.sf-toolbar-block .sf-toolbar-icon > a:link
+.sf-toolbar-block .sf-toolbar-icon > a:hover {
+color: black !important;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a[href]:after {
+content: "";
+}
+
+.sf-toolbar-block .sf-toolbar-icon img {
+border-width: 0;
+vertical-align: middle;
+}
+
+.sf-toolbar-block .sf-toolbar-icon img + span {
+margin-left: 0;
+margin-top: 2px;
+}
+
+.sf-toolbar-block .sf-toolbar-icon .sf-toolbar-status {
+border-radius: 12px;
+border-bottom-left-radius: 0;
+margin-top: 0;
+}
+
+.sf-toolbar-block .sf-toolbar-info-method {
+cursor: hand;
+}
+
+.sf-toolbar-block .sf-toolbar-info-method[onclick=""] {
+border-bottom: none;
+cursor: inherit;
+}
+
+.sf-toolbar-info-php {}
+.sf-toolbar-info-php-ext {}
+
+.sf-toolbar-info-php-ext .sf-toolbar-status {
+margin-left: 2px;
+}
+
+.sf-toolbar-info-php-ext .sf-toolbar-status:first-child {
+margin-left: 0;
+}
+
+.sf-toolbar-block a .sf-toolbar-info-piece-additional,
+.sf-toolbar-block a .sf-toolbar-info-piece-additional-detail {
+display: inline-block;
+}
+
+.sf-toolbar-block a .sf-toolbar-info-piece-additional:empty,
+.sf-toolbar-block a .sf-toolbar-info-piece-additional-detail:empty {
+display: none;
+}
+
+.sf-toolbarreset:hover {
+box-shadow: rgba(0, 0, 0, 0.3) 0 0 50px;
+}
+
+.sf-toolbar-block:hover {
+box-shadow: rgba(0, 0, 0, 0.35) 0 0 5px;
+border-right: none;
+margin-right: 1px;
+position: relative;
+}
+
+.sf-toolbar-block:hover .sf-toolbar-icon {
+background-color: #fff;
+border-top: 1px dotted #DDD;
+position: relative;
+margin-top: -1px;
+z-index: 10002;
+}
+
+.sf-toolbar-block:hover .sf-toolbar-info {
+display: block;
+min-width: -webkit-calc(100% + 2px);
+min-width: calc(100% + 2px);
+z-index: 10001;
+box-sizing: border-box;
+padding: 9px;
+line-height: 19px;
+}
+
+/***** Media query *****/
+@media screen and (max-width: 779px) {
+.sf-toolbar-block .sf-toolbar-icon > * > :first-child ~ * {
+display: none;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional,
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional-detail {
+display: none !important;
+}
+}
+
+@media screen and (max-width: 1179px) {
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional {
+display: none;
+}
+}
+
+@media screen and (max-width: 1439px) {
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional-detail {
+display: none;
+}
+}
+
+/***** Media query print: Do not print the Toolbar. *****/
+@media print {
+.sf-toolbar {
+display: none;
+visibility: hidden;
+}
+}
diff --git a/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig
new file mode 100644
index 0000000..f452aec
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig
@@ -0,0 +1,35 @@
+<div id="sfMiniToolbar-{{ token }}" class="sf-minitoolbar">
+    <a href="javascript:void(0);" title="{{ "Show Drupal toolbar"|t }}" onclick="
+            var elem = this.parentNode;
+            if (elem.style.display == 'none') {
+            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'none';
+            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'none';
+            elem.style.display = 'block';
+            } else {
+            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'block';
+            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'block';
+            elem.style.display = 'none'
+            }
+
+            Webprofiler.setPreference('toolbar/displayState', 'block');
+            ">
+        <img width="26" height="28" alt="Drupal"
+             src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCRDU5MUVDNzVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCRDU5MUVDODVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJENTkxRUM1NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJENTkxRUM2NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iYsuIgAAAiNJREFUeNq8lj3KwkAQhhOxUPAnoIgWQiysbFLYG2/gEVJaegQ9QfQECh4g3kA9QbxBLMQ2KaxE2G/ffG5Yl/ytiguDJBn32Z15d2dUQojy0wGgDHQwGFjj8Vh7hxFyZIHNZtOt1+uuDPRtYK/Xs4rFIpyJDFQaiIm73a7NYMyq1arf7/dnWWApIN3VHBPzINHwHX5J4FxAKg6j0Wh4aSDREGb8TxqIXJVKJSIDY1Yul30RmgqE87swHkrDq2cCkYNareZ9AmPWarX2mUAk/hswZrgkUoGyIsm7y1ggDachnrNPrVKpEKSJBxZYnC+Xi/l4PL56T99uN/y8KDYCUpj2i2JRzONkWZYyGo0UXdeV4/GobDYb5Xw+J/obxv+mTqdT8rWTpND1ek3ihm3bRNO0F188O44T+UwmE+TQjBXNcDiciLD5fE7Shuu6xDTN0JdGgfi+//J9v98nA6EmqIoHYsJPxuFwIOKxiERDVxNQ4I4PNw1Ram6DIFAWiwUWG5uv+/2+E98V+IdOp7OiZzF6pitMhC2XyxDEfOKg1+t1ldnTtNtthxcB8sAGcgQRUbWGufM8LxQPfJBv3n+73Tq5qgVyibqWdYsASOUfLYyJJ679yKyHadDZbBYqkn8HMHaO3ydMl674rI8RayOACKUo/+l0SuAf12ZI9TRYLSZCJYk76GgbnyA9TxOlMpiqqrnuQhxk7igd8raJbKi/bvX/BBgANANSieJk+XMAAAAASUVORK5CYII=">
+    </a>
+</div>
+<style>
+    {% include '@webprofiler/Profiler/webprofiler_toolbar.css.twig' with { 'floatable': true } %}
+</style>
+<div id="sfToolbarClearer-{{ token }}" style="clear: both; height: 38px;"></div>
+
+<div id="sfToolbarMainContent-{{ token }}" class="sf-toolbarreset">
+    {{ toolbar|raw }}
+
+    <a class="hide-button" title="{{ "Close Toolbar"|t }}" onclick="
+            var p = this.parentNode;
+            p.style.display = 'none';
+            (p.previousElementSibling || p.previousSibling).style.display = 'none';
+            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'block';
+            Webprofiler.setPreference('toolbar/displayState', 'none');
+            "></a>
+</div>
diff --git a/modules/contrib/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php b/modules/contrib/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php
new file mode 100644
index 0000000..f4673ee
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php
@@ -0,0 +1,69 @@
+<?php
+
+namespace Drupal\Tests\webprofiler\Unit\Cache;
+
+use Drupal\Tests\UnitTestCase;
+use Drupal\webprofiler\Cache\CacheBackendWrapper;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+
+/**
+ * @coversDefaultClass \Drupal\webprofiler\DataCollector\CacheDataCollector
+ * @group webprofiler
+ */
+class CacheDataCollectorTest extends UnitTestCase {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  private $cacheDataCollector;
+
+  /**
+   * @var \PHPUnit_Framework_MockObject_MockObject
+   */
+  private $cacheBackendInterface;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setUp() {
+    $this->cacheDataCollector = new CacheDataCollector();
+    $this->cacheBackendInterface = $this->getMock('Drupal\Core\Cache\CacheBackendInterface');
+  }
+
+  /**
+   * Tests the collection of a cache miss.
+   */
+  public function testCacheCollectorMiss() {
+    $this->cacheBackendInterface->expects($this->once())
+      ->method('get')
+      ->will($this->returnValue(FALSE));
+
+    $cacheBackendWrapper = new CacheBackendWrapper($this->cacheDataCollector, $this->cacheBackendInterface, 'default');
+    $cache = $cacheBackendWrapper->get('cache_id');
+
+    $this->assertFalse($cache);
+
+    $this->assertEquals(1, $this->cacheDataCollector->getCacheMissesCount());
+  }
+
+  /**
+   * Tests the collection of a cache hit.
+   */
+  public function testCacheCollectorHit() {
+    $cache = new \StdClass();
+    $cache->cid = 'cache_id';
+    $cache->expire = 1;
+    $cache->tags = ['tag1', 'tag2'];
+    $this->cacheBackendInterface->expects($this->once())
+      ->method('get')
+      ->will($this->returnValue($cache));
+
+    $cacheBackendWrapper = new CacheBackendWrapper($this->cacheDataCollector, $this->cacheBackendInterface, 'default');
+    $cache2 = $cacheBackendWrapper->get('cache_id');
+
+    $this->assertNotNull($cache2);
+
+    $this->assertEquals(1, $this->cacheDataCollector->getCacheHitsCount());
+  }
+
+}
diff --git a/modules/contrib/devel/webprofiler/webprofiler.info.yml b/modules/contrib/devel/webprofiler/webprofiler.info.yml
new file mode 100644
index 0000000..f62985f
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.info.yml
@@ -0,0 +1,16 @@
+name: Web Profiler
+type: module
+description: 'Drupal Web Profiler.'
+package: Development
+# core: 8.x
+configure: webprofiler.settings
+tags:
+ - developer
+dependencies:
+ - devel
+
+# Information added by Drupal.org packaging script on 2016-04-24
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1461508454
diff --git a/modules/contrib/devel/webprofiler/webprofiler.install b/modules/contrib/devel/webprofiler/webprofiler.install
new file mode 100644
index 0000000..4500566
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.install
@@ -0,0 +1,190 @@
+<?php
+
+/**
+ * @file
+ * Install, update and uninstall functions for the webprofiler module.
+ */
+
+use Drupal\Core\Url;
+
+/**
+ * Implements hook_schema().
+ */
+function webprofiler_schema() {
+  $schema['webprofiler'] = [
+    'description' => 'Webprofiler profiles storage.',
+    'fields' => [
+      'token' => [
+        'description' => 'Profile token.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => TRUE,
+      ],
+      'data' => [
+        'description' => 'Profile data.',
+        'type' => 'text',
+        'size' => 'big',
+        'not null' => TRUE,
+      ],
+      'ip' => [
+        'description' => 'Request IP.',
+        'type' => 'varchar',
+        'length' => 64,
+        'not null' => TRUE,
+      ],
+      'method' => [
+        'description' => 'Request method.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => TRUE,
+      ],
+      'url' => [
+        'description' => 'Requested URL.',
+        'type' => 'varchar',
+        'length' => 2048,
+        'not null' => TRUE,
+      ],
+      'time' => [
+        'description' => 'Request time.',
+        'type' => 'int',
+        'unsigned' => TRUE,
+        'not null' => TRUE,
+      ],
+      'parent' => [
+        'description' => 'Profile parent.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => FALSE,
+      ],
+      'created_at' => [
+        'description' => 'Profile created time.',
+        'type' => 'int',
+        'unsigned' => TRUE,
+        'not null' => TRUE,
+      ],
+      'status_code' => [
+        'description' => 'Profile status code.',
+        'type' => 'int',
+        'size' => 'small',
+        'unsigned' => TRUE,
+        'not null' => TRUE,
+      ],
+    ],
+    'indexes' => [
+      'created_at' => ['created_at'],
+      'ip' => ['ip'],
+      'method' => ['method'],
+      'parent' => ['parent'],
+    ],
+    'primary key' => ['token'],
+  ];
+
+  return $schema;
+}
+
+/**
+ * Implements hook_requirements().
+ */
+function webprofiler_requirements($phase) {
+  $requirements = [];
+
+  if ('runtime' == $phase) {
+    $has_d3 = _webprofiler_verify_library('webprofiler', 'd3');
+    $requirements['d3js'] = [
+      'title' => t('D3.js library'),
+      'value' => $has_d3 ? t('Enabled') : t('Not found'),
+    ];
+
+    if (!$has_d3) {
+      $requirements['d3js']['severity'] = REQUIREMENT_WARNING;
+      $d3_url = Url::fromUri('https://github.com/mbostock/d3', ['attributes' => ['target' => '_blank']]);
+      $requirements['d3js']['description'] = [
+        '#prefix' => ' ',
+        '#markup' => t('Webprofiler module requires D3.js library to properly render data. <a href=":d3_link">Download D3.js</a> into /libraries/d3/d3.min.js.', [':d3_link' => $d3_url->toUriString()])
+      ];
+    }
+
+    $has_highlight = _webprofiler_verify_library('webprofiler', 'highlight');
+    $requirements['highlightjs'] = [
+      'title' => t('highlight.js library'),
+      'value' => $has_highlight ? t('Enabled') : t('Not found'),
+    ];
+
+    if (!$has_highlight) {
+      $requirements['highlightjs']['severity'] = REQUIREMENT_WARNING;
+      $highlight_url = Url::fromUri('http://highlightjs.org', ['attributes' => ['target' => '_blank']]);
+      $requirements['highlightjs']['description'] = [
+        '#prefix' => ' ',
+        '#markup' => t('Webprofiler module requires highlight.js library to syntax highlight collected queries. <a href=":highlight_link">Download highlight.js</a> assets into /libraries/highlight.', [':highlight_link' => $highlight_url->toUriString()])
+      ];
+    }
+  }
+
+  return $requirements;
+}
+
+/**
+ * Verify that the library files exist.
+ *
+ * @param string $extension
+ *   The name of the extension that registered a library.
+ * @param string $name
+ *   The name of a registered library to retrieve.
+ *
+ * @return bool
+ *   TRUE if all files of this library exists, FALSE otherwise
+ *
+ * @see https://drupal.org/node/2231385
+ */
+function _webprofiler_verify_library($extension, $name) {
+  /** @var Drupal\Core\Asset\LibraryDiscovery $library_discovery */
+  $library_discovery = \Drupal::service('library.discovery');
+  $library = $library_discovery->getLibraryByName($extension, $name);
+
+  $exist = TRUE;
+  if ($library['js']) {
+    foreach ($library['js'] as $js) {
+      if ($js['type'] == 'file') {
+        if (!file_exists(DRUPAL_ROOT . '/' . $js['data'])) {
+          $exist = FALSE;
+        }
+      }
+    }
+  }
+
+  if ($library['css']) {
+    foreach ($library['css'] as $css) {
+      if ($css['type'] == 'file') {
+        if (!file_exists(DRUPAL_ROOT . '/' . $css['data'])) {
+          $exist = FALSE;
+        }
+      }
+    }
+  }
+
+  if ($library['dependencies']) {
+    foreach ($library['dependencies'] as $dependency) {
+      $parts = explode('/', $dependency);
+      $exist = _webprofiler_verify_library($parts[0], $parts[1]);
+    }
+  }
+
+  return $exist;
+}
+
+/**
+ * Add a status_code column to the webprofiler table.
+ */
+function webprofiler_update_8001() {
+  $database = \Drupal::database();
+  $schema = $database->schema();
+
+  $spec = array(
+    'description' => 'Profile status code.',
+    'type' => 'int',
+    'size' => 'small',
+    'unsigned' => TRUE,
+    'not null' => TRUE,
+  );
+  $schema->addField('webprofiler', 'status_code', $spec);
+}
diff --git a/modules/contrib/devel/webprofiler/webprofiler.libraries.yml b/modules/contrib/devel/webprofiler/webprofiler.libraries.yml
new file mode 100644
index 0000000..06ba82b
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.libraries.yml
@@ -0,0 +1,60 @@
+d3:
+  remote: https://github.com/mbostock/d3
+  version: 3.4.4
+  license:
+    name: BSD-3
+    url: https://github.com/mbostock/d3/blob/master/LICENSE
+    gpl-compatible: true
+  js:
+    /libraries/d3/d3.min.js: {}
+highlight:
+  remote: https://github.com/isagalaev/highlight.js
+  version: 8.0
+  license:
+    name: BSD-3
+    url: https://github.com/isagalaev/highlight.js/blob/master/LICENSE
+    gpl-compatible: true
+  js:
+    /libraries/highlight/highlight.pack.js: {}
+  css:
+    component:
+      /libraries/highlight/styles/idea.css: {}
+dashboard:
+  version: 2.0
+  js:
+    js/app/main.js: {}
+    js/app/helpers.js: {}
+    js/app/models/collector.js: {}
+    js/app/collections/collectors.js: {}
+    js/app/views/collector.js: {}
+    js/app/views/collectorsList.js: {}
+    js/app/views/layout.js: {}
+    js/app/views/details.js: {}
+    js/app/routers/collectors.js: {}
+  css:
+    component:
+      css/app/dashboard.css: {}
+  dependencies:
+    - core/jquery
+    - core/jquery.once
+    - core/drupal
+    - core/drupalSettings
+    - core/backbone
+database:
+  version: 2.0
+  js:
+    js/database.js: {}
+  dependencies:
+    - core/jquery
+    - core/drupal
+    - core/drupalSettings
+    - webprofiler/highlight
+timeline:
+  version: 2.0
+  js:
+    js/timeline.js: {}
+  css:
+    component:
+      css/timeline.css: {}
+  dependencies:
+    - webprofiler/d3
diff --git a/modules/contrib/devel/webprofiler/webprofiler.links.menu.yml b/modules/contrib/devel/webprofiler/webprofiler.links.menu.yml
new file mode 100644
index 0000000..b2d4a73
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.links.menu.yml
@@ -0,0 +1,5 @@
+webprofiler.admin_list:
+  title: 'Webprofiler'
+  description: 'List saved profiles.'
+  route_name: webprofiler.admin_list
+  parent: system.admin_reports
diff --git a/modules/contrib/devel/webprofiler/webprofiler.links.task.yml b/modules/contrib/devel/webprofiler/webprofiler.links.task.yml
new file mode 100644
index 0000000..741eb15
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.links.task.yml
@@ -0,0 +1,9 @@
+webprofiler.settings:
+  title: 'Webprofiler'
+  route_name: webprofiler.settings
+  base_route: devel.admin_settings
+  weight: 10
+webprofiler.dashboard:
+  title: 'dashboard'
+  route_name: webprofiler.dashboard
+  base_route: webprofiler.dashboard
diff --git a/modules/contrib/devel/webprofiler/webprofiler.make.yml b/modules/contrib/devel/webprofiler/webprofiler.make.yml
new file mode 100644
index 0000000..decfe2c
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.make.yml
@@ -0,0 +1,12 @@
+core: "8.x"
+api: 2
+
+libraries:
+  highlight:
+    download:
+      type: "git"
+      url: "git@github.com:mbostock/d3.git"
+  d3:
+    download:
+      type: "git"
+      url: "git@github.com:mbostock/d3.git"
diff --git a/modules/contrib/devel/webprofiler/webprofiler.module b/modules/contrib/devel/webprofiler/webprofiler.module
new file mode 100644
index 0000000..01e9b95
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.module
@@ -0,0 +1,51 @@
+<?php
+
+/**
+ * @file
+ * Legacy Webprofiler module file.
+ */
+
+/**
+ * Implements hook_theme().
+ */
+function webprofiler_theme() {
+  return [
+    'webprofiler_loader' => [
+      'template' => 'Profiler/webprofiler_loader',
+      'variables' => ['token' => NULL, 'profiler_url' => NULL],
+    ],
+    'webprofiler_toolbar' => [
+      'template' => 'Profiler/webprofiler_toolbar',
+      'variables' => [
+        'token' => NULL,
+        'toolbar' => NULL,
+      ],
+    ],
+    'webprofiler_panel' => [
+      'template' => 'Profiler/webprofiler_panel',
+      'variables' => [
+        'panel' => NULL,
+      ],
+    ],
+    'webprofiler_dashboard' => [
+      'template' => 'Profiler/webprofiler_dashboard',
+      'variables' => [
+        'profile' => [],
+        'panels' => [],
+        'spinner_path' => NULL,
+      ],
+    ],
+  ];
+}
+
+/**
+ * Implements hook_cache_flush().
+ */
+function webprofiler_cache_flush() {
+  $config = \Drupal::configFactory()->get('webprofiler.config');
+
+  if ($config->get('purge_on_cache_clear')) {
+    $profiler = \Drupal::service('profiler');
+    $profiler->purge();
+  }
+}
diff --git a/modules/contrib/devel/webprofiler/webprofiler.permissions.yml b/modules/contrib/devel/webprofiler/webprofiler.permissions.yml
new file mode 100644
index 0000000..b397525
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.permissions.yml
@@ -0,0 +1,7 @@
+'access webprofiler':
+  title: 'Access webprofiler'
+  description: 'Access webprofiler collected data.'
+  'restrict access': TRUE
+'view webprofiler toolbar':
+  title: 'View webprofiler toolbar'
+  description: 'View webprofiler toolbar.'
diff --git a/modules/contrib/devel/webprofiler/webprofiler.routing.yml b/modules/contrib/devel/webprofiler/webprofiler.routing.yml
new file mode 100644
index 0000000..200bc39
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.routing.yml
@@ -0,0 +1,81 @@
+# toolbar
+webprofiler.toolbar:
+  path: '/profiler/{profile}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\ToolbarController::toolbarAction'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'view webprofiler toolbar'
+
+# save frontend data
+webprofiler.frontend.save:
+  path: '/admin/reports/profiler/frontend/{profile}/save'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\ToolbarController::savePerformanceTimingAction'
+    _title: 'Save performance timing data'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  methods:  [POST]
+  requirements:
+    _permission: 'access webprofiler'
+
+# view profile
+webprofiler.dashboard:
+  path: '/admin/reports/profiler/view/{profile}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::dashboardAction'
+    _title: 'Webprofiler'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# list stored profiles
+webprofiler.admin_list:
+  path: '/admin/reports/profiler/list'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::listAction'
+    _title: 'Webprofiler'
+  requirements:
+    _permission: 'access webprofiler'
+
+webprofiler.rest.collector:
+  path: '/admin/reports/profiler/view/{profile}/collectors/{collector}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::restCollectorAction'
+    _title: 'Webprofiler'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# get query explain
+webprofiler.database.explain:
+  path: '/admin/reports/profiler/database_explain/{profile}/{qid}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DatabaseController::explainAction'
+    _title: 'Query explain'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# configure webprofiler
+webprofiler.settings:
+  path: '/admin/config/development/devel/webprofiler'
+  defaults:
+    _form: 'Drupal\webprofiler\Form\ConfigForm'
+    _title: 'Webprofiler settings'
+  requirements:
+    _permission: 'access webprofiler'
diff --git a/modules/contrib/devel/webprofiler/webprofiler.services.yml b/modules/contrib/devel/webprofiler/webprofiler.services.yml
new file mode 100644
index 0000000..22403a5
--- /dev/null
+++ b/modules/contrib/devel/webprofiler/webprofiler.services.yml
@@ -0,0 +1,267 @@
+parameters:
+  webprofiler.only_exceptions: false
+  webprofiler.only_master_requests: false
+
+services:
+
+# profiler services
+  logger.channel.webprofiler:
+    class: Drupal\Core\Logger\LoggerChannel
+    factory: logger.factory:get
+    arguments: ['webprofiler']
+
+  profiler.file_storage:
+    class: Drupal\webprofiler\Profiler\FileProfilerStorage
+    arguments: ['%data_collector.storage%']
+    tags:
+      - { name: webprofiler_storage, title: 'File storage' }
+
+  profiler.database_storage:
+    class: Drupal\webprofiler\Profiler\DatabaseProfilerStorage
+    arguments: ['@database']
+    tags:
+      - { name: webprofiler_storage, title: 'Database storage' }
+
+  profiler.storage_manager:
+    class: Drupal\webprofiler\Profiler\ProfilerStorageManager
+
+  profiler.storage:
+    class: Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface
+    factory: Drupal\webprofiler\Profiler\ProfilerStorageFactory::getProfilerStorage
+    arguments: ['@config.factory', '@service_container']
+
+  profiler:
+    class: Drupal\webprofiler\Profiler\Profiler
+    arguments: ['@profiler.storage', '@logger.channel.webprofiler', '@config.factory']
+
+# template manager
+  template_manager:
+    class: Drupal\webprofiler\Profiler\TemplateManager
+    arguments: ['@profiler', '@twig', '@twig.loader', '%data_collector.templates%']
+
+# request matcher
+  webprofiler.matcher:
+    class: Drupal\webprofiler\RequestMatcher\WebprofilerRequestMatcher
+    arguments: ['@config.factory', '@path.matcher']
+
+# event subscribers
+  webprofiler.profiler_listener:
+    class: Symfony\Component\HttpKernel\EventListener\ProfilerListener
+    arguments: ['@profiler', '@?webprofiler.matcher', '%webprofiler.only_exceptions%', '%webprofiler.only_master_requests%', '@request_stack']
+    tags:
+      - { name: event_subscriber }
+
+  webprofiler.webprofiler_event_subscriber:
+      class: Drupal\webprofiler\EventSubscriber\WebprofilerEventSubscriber
+      arguments: ['@current_user', '@url_generator', '@renderer']
+      tags:
+        - { name: event_subscriber }
+
+# twig profiler
+  twig.profile:
+    class: Twig_Profiler_Profile
+
+  twig.extension.profiler:
+    class: Drupal\webprofiler\Twig\Extension\ProfilerExtension
+    arguments: ['@twig.profile', '@stopwatch', '@webprofiler.ide_link_generator', '@webprofiler.class_shortener']
+    tags:
+      - { name: twig.extension, priority: 100 }
+
+# datacollector services
+  webprofiler.drupal:
+    class: Drupal\webprofiler\DataCollector\DrupalDataCollector
+    arguments: ['@redirect.destination', '@url_generator']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/drupal.html.twig', id: 'drupal', title: 'Drupal', priority: 10 }
+
+  webprofiler.devel:
+    class: Drupal\webprofiler\DataCollector\DevelDataCollector
+    arguments: ['@menu.link_tree']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/devel.html.twig', id: 'devel', title: 'Devel', priority: 15 }
+
+  webprofiler.php_config:
+    class: Drupal\webprofiler\DataCollector\PhpConfigDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/php_config.html.twig', id: 'php_config', title: 'PHP Config', priority: 20 }
+
+  webprofiler.request:
+    class: Drupal\webprofiler\DataCollector\RequestDataCollector
+    arguments: ['@controller_resolver']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/request.html.twig', id: 'request', title: 'Request', priority: 30 }
+      - { name: event_subscriber }
+
+  webprofiler.time:
+    class: Drupal\webprofiler\DataCollector\TimeDataCollector
+    arguments: [NULL, '@stopwatch']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/time.html.twig', id: 'time', title: 'Timeline', priority: 40 }
+
+  webprofiler.performance_timing:
+    class: Drupal\webprofiler\DataCollector\PerformanceTimingDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/performance_timing.html.twig', id: 'performance_timing', title: 'Performance Timing', priority: 50 }
+
+  webprofiler.database:
+    class: Drupal\webprofiler\DataCollector\DatabaseDataCollector
+    arguments: ['@database', '@config.factory']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/database.html.twig', id: 'database', title: 'Database', priority: 60 }
+
+  webprofiler.user:
+    class: Drupal\webprofiler\DataCollector\UserDataCollector
+    arguments: ['@current_user', '@entity.manager', '@config.factory', '@authentication_collector']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/user.html.twig', id: 'user', title: 'User', priority: 70 }
+
+  webprofiler.forms:
+    class: Drupal\webprofiler\DataCollector\FormsDataCollector
+    arguments: ['@form_builder']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/forms.html.twig', id: 'forms', title: 'Forms', priority: 80 }
+
+  webprofiler.drupal_extensions:
+    class: Drupal\webprofiler\DataCollector\ExtensionDataCollector
+    arguments: ['@module_handler', '@theme_handler', '@app.root']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/extensions.html.twig', id: 'drupal_extension', title: 'Extensions', priority: 90 }
+
+  webprofiler.routing:
+    class: Drupal\webprofiler\DataCollector\RoutingDataCollector
+    arguments: ['@router.route_provider']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/routing.html.twig', id: 'routing', title: 'Routing', priority: 100 }
+
+  webprofiler.cache:
+    class: Drupal\webprofiler\DataCollector\CacheDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/cache.html.twig', id: 'cache', title: 'Cache', priority: 110 }
+
+  webprofiler.assets:
+    class: Drupal\webprofiler\DataCollector\AssetsDataCollector
+    arguments: ['@app.root']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/assets.html.twig', id: 'assets', title: 'Assets', priority: 120}
+
+  webprofiler.config:
+    class: Drupal\webprofiler\DataCollector\ConfigDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/config.html.twig', id: 'config', title: 'Config', priority: 130 }
+
+  webprofiler.state:
+    class: Drupal\webprofiler\DataCollector\StateDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/state.html.twig', id: 'state', title: 'State', priority: 140 }
+
+  webprofiler.events:
+    class: Drupal\webprofiler\DataCollector\EventsDataCollector
+    arguments: ['@event_dispatcher']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/events.html.twig', id: 'events', title: 'Events', priority: 150 }
+
+  webprofiler.services:
+    class: Drupal\webprofiler\DataCollector\ServicesDataCollector
+    arguments: ['@service_container']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/services.html.twig', id: 'services', title: 'Services', priority: 160 }
+
+  webprofiler.http:
+    class: Drupal\webprofiler\DataCollector\HttpDataCollector
+    arguments: ['@http_client_middleware.webprofiler']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/http.html.twig', id: 'http', title: 'Http', priority: 170 }
+
+  webprofiler.theme:
+    class: Drupal\webprofiler\DataCollector\ThemeDataCollector
+    arguments: ['@theme.manager', '@theme.negotiator', '@twig.profile']
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/theme.html.twig', id: 'theme', title: 'Theme', priority: 180 }
+
+  webprofiler.mail:
+    class: Drupal\webprofiler\DataCollector\MailDataCollector
+    tags:
+      - { name: data_collector, template: '@webprofiler/Collector/mail.html.twig', id: 'mail', title: 'Mail', priority: 190 }
+
+# debug services
+  stopwatch:
+    class: Drupal\webprofiler\Stopwatch
+
+  webprofiler.debug.event_dispatcher.default:
+    class: Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher
+    arguments: ['@service_container']
+
+  webprofiler.debug.plugin.manager.mail.default:
+    class: Drupal\Core\Mail\MailManager
+    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@config.factory', '@logger.factory', '@string_translation']
+
+  webprofiler.debug.controller_resolver:
+    class: Symfony\Component\HttpKernel\Controller\TraceableControllerResolver
+    arguments: ['@controller_resolver', '@stopwatch']
+
+  webprofiler.debug.cache_factory:
+    class: Drupal\webprofiler\Cache\CacheFactoryWrapper
+    public: false
+    decorates: cache_factory
+    arguments: ['@webprofiler.debug.cache_factory.inner', '@webprofiler.cache']
+    properties:
+      _serviceId: 'cache_factory'
+
+  webprofiler.debug.asset.css.collection_renderer:
+    class: Drupal\webprofiler\Asset\CssCollectionRendererWrapper
+    public: false
+    decorates: asset.css.collection_renderer
+    arguments: ['@webprofiler.debug.asset.css.collection_renderer.inner', '@webprofiler.assets']
+    properties:
+      _serviceId: 'asset.css.collection_renderer'
+
+  webprofiler.debug.asset.js.collection_renderer:
+    class: Drupal\webprofiler\Asset\JsCollectionRendererWrapper
+    public: false
+    decorates: asset.js.collection_renderer
+    arguments: ['@webprofiler.debug.asset.js.collection_renderer.inner', '@webprofiler.assets']
+    properties:
+      _serviceId: 'asset.js.collection_renderer'
+
+  webprofiler.debug.entity.manager:
+    class: Drupal\webprofiler\Entity\EntityManagerWrapper
+    public: false
+    decorates: entity.manager
+    arguments: ['@webprofiler.debug.entity.manager.inner']
+    properties:
+      _serviceId: 'entity.manager'
+
+  webprofiler.debug.state:
+    class: Drupal\webprofiler\State\StateWrapper
+    public: false
+    decorates: state
+    arguments: ['@webprofiler.debug.state.inner', '@webprofiler.state']
+    properties:
+      _serviceId: 'state'
+
+# middleware
+  http_middleware.webprofiler:
+    class: Drupal\webprofiler\StackMiddleware\WebprofilerMiddleware
+    tags:
+      - { name: http_middleware, priority: 350 }
+
+  http_client_middleware.webprofiler:
+    class: Drupal\webprofiler\Http\HttpClientMiddleware
+    tags:
+      - { name: http_client_middleware }
+
+# parameter converter service for profile token
+  webprofiler.token_converter:
+    class: Drupal\webprofiler\Routing\TokenConverter
+    arguments: ['@profiler']
+    tags:
+      - { name: paramconverter }
+
+# IDE link generator service
+  webprofiler.ide_link_generator:
+    class: Drupal\webprofiler\Helper\IdeLinkGenerator
+    arguments: ['@config.factory']
+
+# class shortener service
+  webprofiler.class_shortener:
+    class: Drupal\webprofiler\Helper\ClassShortener
